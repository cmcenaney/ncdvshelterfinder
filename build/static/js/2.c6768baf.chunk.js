/*! For license information please see 2.c6768baf.chunk.js.LICENSE.txt */
(this["webpackJsonpuse-mapbox-gl-js-with-react"]=this["webpackJsonpuse-mapbox-gl-js-with-react"]||[]).push([[2],[function(t,e){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},function(t,e,r){var n=r(3),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e){t.exports={options:{usePureJavaScript:!1}}},function(t,e,r){"use strict";(function(t){var n=r(92),i=r(206),o=r(93);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,r){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(t,e,r);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,r)}function u(t,e,r,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e);return t}(t,e,r,n):"string"===typeof e?function(t,e,r){"string"===typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(l.isBuffer(e)){var r=0|d(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(n=e.length)!==n?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=a(t,e<0?0:0|d(e)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|d(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(t).length;default:if(n)return F(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,r);case"utf8":case"utf-8":return T(this,e,r);case"ascii":return C(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return M(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:_(t,e,r,n,i);if("number"===typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):_(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,r,n,i){var o,s=1,a=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,r/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(o=r;o<a;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){for(var h=!0,f=0;f<l;f++)if(u(t,o+f)!==u(e,f)){h=!1;break}if(h)return o}return-1}function v(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function b(t,e,r,n){return G(F(e,t.length-r),t,r,n)}function w(t,e,r,n){return G(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return w(t,e,r,n)}function E(t,e,r,n){return G(V(e),t,r,n)}function S(t,e,r,n){return G(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function M(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function T(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,l,u=t[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:128===(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=t[i+1],s=t[i+2],128===(192&o)&&128===(192&s)&&(l=(15&u)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=A));return r}(n)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,r){return u(null,t,e,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?a(t,e):void 0!==r?"string"===typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=l.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):m.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,r,n,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r),h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},l.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},l.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},l.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function C(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function k(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=j(t[o]);return i}function R(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function B(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,r,n,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function D(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function L(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function O(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(t,e,r,n,o){return o||O(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function z(t,e,r,n,o){return o||O(t,0,r,8),i.write(t,e,r,n,52,8),r+8}l.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;r=new l(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},l.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||B(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},l.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||B(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},l.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||B(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||B(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},l.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||P(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},l.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},l.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);P(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},l.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,r){return N(this,t,e,!0,r)},l.prototype.writeFloatBE=function(t,e,r){return N(this,t,e,!1,r)},l.prototype.writeDoubleLE=function(t,e,r){return z(this,t,e,!0,r)},l.prototype.writeDoubleBE=function(t,e,r){return z(this,t,e,!1,r)},l.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},l.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=l.isBuffer(t)?t:F(new l(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function G(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(6))},function(t,e,r){(function(e,n,i,o){var s=r(2),a=r(343),l=t.exports=s.util=s.util||{};function u(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function c(t){if(this.data="",this.read=0,"string"===typeof t)this.data=t;else if(l.isArrayBuffer(t)||l.isArrayBufferView(t))if("undefined"!==typeof o&&t instanceof o)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof c||"object"===typeof t&&"string"===typeof t.data&&"number"===typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!==typeof e&&e.nextTick&&!e.browser)return l.nextTick=e.nextTick,void(l.setImmediate="function"===typeof n?n:l.nextTick);if("function"===typeof n)return l.setImmediate=function(){return n.apply(void 0,arguments)},void(l.nextTick=function(t){return n(t)});if(l.setImmediate=function(t){setTimeout(t,0)},"undefined"!==typeof window&&"function"===typeof window.postMessage){var t="forge.setImmediate",r=[];l.setImmediate=function(e){r.push(e),1===r.length&&window.postMessage(t,"*")},window.addEventListener("message",(function(e){if(e.source===window&&e.data===t){e.stopPropagation();var n=r.slice();r.length=0,n.forEach((function(t){t()}))}}),!0)}if("undefined"!==typeof MutationObserver){var i=Date.now(),o=!0,s=document.createElement("div");r=[];new MutationObserver((function(){var t=r.slice();r.length=0,t.forEach((function(t){t()}))})).observe(s,{attributes:!0});var a=l.setImmediate;l.setImmediate=function(t){Date.now()-i>15?(i=Date.now(),a(t)):(r.push(t),1===r.length&&s.setAttribute("a",o=!o))}}l.nextTick=l.setImmediate}(),l.isNodejs="undefined"!==typeof e&&e.versions&&e.versions.node,l.globalScope=l.isNodejs?i:"undefined"===typeof self?window:self,l.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},l.isArrayBuffer=function(t){return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer},l.isArrayBufferView=function(t){return t&&l.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},l.ByteBuffer=c,l.ByteStringBuffer=c;l.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},l.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},l.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},l.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},l.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},l.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},l.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(l.encodeUtf8(t))},l.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},l.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},l.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},l.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},l.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},l.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},l.ByteStringBuffer.prototype.putInt=function(t,e){u(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},l.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},l.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},l.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},l.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},l.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},l.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},l.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},l.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},l.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},l.ByteStringBuffer.prototype.getInt=function(t){u(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},l.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},l.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},l.ByteStringBuffer.prototype.bytes=function(t){return"undefined"===typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},l.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},l.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},l.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},l.ByteStringBuffer.prototype.copy=function(){var t=l.createBuffer(this.data);return t.read=this.read,t},l.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},l.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},l.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},l.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},l.ByteStringBuffer.prototype.toString=function(){return l.decodeUtf8(this.bytes())},l.DataBuffer=function(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=l.isArrayBuffer(t),n=l.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==t&&void 0!==t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},l.DataBuffer.prototype.length=function(){return this.write-this.read},l.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},l.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},l.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},l.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},l.DataBuffer.prototype.putBytes=function(t,e){if(l.isArrayBufferView(t)){var r=(n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(l.isArrayBuffer(t)){var n=new Uint8Array(t);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(t instanceof l.DataBuffer||"object"===typeof t&&"number"===typeof t.read&&"number"===typeof t.write&&l.isArrayBufferView(t.data)){n=new Uint8Array(t.data.byteLength,t.read,t.length());return this.accommodate(n.byteLength),new Uint8Array(t.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(t instanceof l.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"===typeof t){var i;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=l.binary.hex.decode(t,i,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=l.binary.base64.decode(t,i,this.write),this;if("utf8"===e&&(t=l.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=l.binary.raw.decode(i),this;if("utf16"===e)return this.accommodate(2*t.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=l.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},l.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},l.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},l.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},l.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},l.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},l.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},l.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},l.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},l.DataBuffer.prototype.putInt=function(t,e){u(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},l.DataBuffer.prototype.putSignedInt=function(t,e){return u(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},l.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},l.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},l.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},l.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},l.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},l.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},l.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},l.DataBuffer.prototype.getInt=function(t){u(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},l.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},l.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},l.DataBuffer.prototype.bytes=function(t){return"undefined"===typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},l.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},l.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},l.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},l.DataBuffer.prototype.copy=function(){return new l.DataBuffer(this)},l.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},l.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},l.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},l.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},l.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return l.binary.raw.encode(e);if("hex"===t)return l.binary.hex.encode(e);if("base64"===t)return l.binary.base64.encode(e);if("utf8"===t)return l.text.utf8.decode(e);if("utf16"===t)return l.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},l.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=l.encodeUtf8(t)),new l.ByteBuffer(t)},l.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},l.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o},l.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},l.bytesToHex=function(t){return l.createBuffer(t).toHex()},l.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";l.encode64=function(t,e){for(var r,n,i,o="",s="",a=0;a<t.length;)r=t.charCodeAt(a++),n=t.charCodeAt(a++),i=t.charCodeAt(a++),o+=h.charAt(r>>2),o+=h.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=h.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":h.charAt(63&i)),e&&o.length>e&&(s+=o.substr(0,e)+"\r\n",o=o.substr(e));return s+=o},l.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,i,o="",s=0;s<t.length;)e=f[t.charCodeAt(s++)-43],r=f[t.charCodeAt(s++)-43],n=f[t.charCodeAt(s++)-43],i=f[t.charCodeAt(s++)-43],o+=String.fromCharCode(e<<2|r>>4),64!==n&&(o+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(o+=String.fromCharCode((3&n)<<6|i)));return o},l.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},l.decodeUtf8=function(t){return decodeURIComponent(escape(t))},l.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:a.encode,decode:a.decode}},l.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},l.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length));for(var i=r=r||0,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n},l.binary.hex.encode=l.bytesToHex,l.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2)));var i=0,o=r=r||0;for(1&t.length&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n},l.binary.base64.encode=function(t,e){for(var r,n,i,o="",s="",a=0;a<t.byteLength;)r=t[a++],n=t[a++],i=t[a++],o+=h.charAt(r>>2),o+=h.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=h.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":h.charAt(63&i)),e&&o.length>e&&(s+=o.substr(0,e)+"\r\n",o=o.substr(e));return s+=o},l.binary.base64.decode=function(t,e,r){var n,i,o,s,a=e;a||(a=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var l=0,u=r=r||0;l<t.length;)n=f[t.charCodeAt(l++)-43],i=f[t.charCodeAt(l++)-43],o=f[t.charCodeAt(l++)-43],s=f[t.charCodeAt(l++)-43],a[u++]=n<<2|i>>4,64!==o&&(a[u++]=(15&i)<<4|o>>2,64!==s&&(a[u++]=(3&o)<<6|s));return e?u-r:a.subarray(0,u)},l.binary.base58.encode=function(t,e){return l.binary.baseN.encode(t,d,e)},l.binary.base58.decode=function(t,e){return l.binary.baseN.decode(t,d,e)},l.text={utf8:{},utf16:{}},l.text.utf8.encode=function(t,e,r){t=l.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length));for(var i=r=r||0,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n},l.text.utf8.decode=function(t){return l.decodeUtf8(String.fromCharCode.apply(null,t))},l.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));for(var i=new Uint16Array(n.buffer),o=r=r||0,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n},l.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},l.deflate=function(t,e,r){if(e=l.decode64(t.deflate(l.encode64(e)).rval),r){var n=2;32&e.charCodeAt(1)&&(n=6),e=e.substring(n,e.length-4)}return e},l.inflate=function(t,e,r){var n=t.inflate(l.encode64(e)).rval;return null===n?null:l.decode64(n)};var p=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=l.encode64(JSON.stringify(r)),n=t.setItem(e,r)),"undefined"!==typeof n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},m=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(l.decode64(r))),r},g=function(t,e,r,n){var i=m(t,e);null===i&&(i={}),i[r]=n,p(t,e,i)},y=function(t,e,r){var n=m(t,e);return null!==n&&(n=r in n?n[r]:null),n},_=function(t,e,r){var n=m(t,e);if(null!==n&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),p(t,e,n)}},v=function(t,e){p(t,e,null)},b=function(t,e,r){var n,i=null;"undefined"===typeof r&&(r=["web","flash"]);var o=!1,s=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");i=t.apply(this,e),o="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,i=t.apply(this,e),o=!0)}catch(l){s=l}if(o)break}if(!o)throw s;return i};l.setItem=function(t,e,r,n,i){b(g,arguments,i)},l.getItem=function(t,e,r,n){return b(y,arguments,n)},l.removeItem=function(t,e,r,n){b(_,arguments,n)},l.clearItems=function(t,e,r){b(v,arguments,r)},l.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},l.format=function(t){for(var e,r,n=/%./g,i=0,o=[],s=0;e=n.exec(t);){(r=t.substring(s,n.lastIndex-2)).length>0&&o.push(r),s=n.lastIndex;var a=e[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[1+i++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")},l.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=void 0===r?",":r,a=void 0===n?".":n,l=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",c=u.length>3?u.length%3:0;return l+(c?u.substr(0,c)+a:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-u).toFixed(o).slice(2):"")},l.formatSize=function(t){return t=t>=1073741824?l.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?l.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?l.formatNumber(t/1024,0)+" KiB":l.formatNumber(t,0)+" bytes"},l.bytesFromIP=function(t){return-1!==t.indexOf(".")?l.bytesFromIPv4(t):-1!==t.indexOf(":")?l.bytesFromIPv6(t):null},l.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=l.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},l.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter((function(t){return 0===t.length&&++e,!0}))).length+e),n=l.createBuffer(),i=0;i<8;++i)if(t[i]&&0!==t[i].length){var o=l.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}else n.fillWithByte(0,r),r=0;return n.getBytes()},l.bytesToIP=function(t){return 4===t.length?l.bytesToIPv4(t):16===t.length?l.bytesToIPv6(t):null},l.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},l.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=l.bytesToHex(t[i]+t[i+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=r[r.length-1],a=e.length;s&&a===s.end+1?(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:a,end:a})}e.push(o)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),0===u.start&&e.unshift(""),7===u.end&&e.push(""))}return e.join(":")},l.estimateCores=function(t,e){if("function"===typeof t&&(e=t,t={}),t=t||{},"cores"in l&&!t.update)return e(null,l.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return l.cores=navigator.hardwareConcurrency,e(null,l.cores);if("undefined"===typeof Worker)return l.cores=1,e(null,l.cores);if("undefined"===typeof Blob)return l.cores=2,e(null,l.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function t(n,i,o){if(0===i){var s=Math.floor(n.reduce((function(t,e){return t+e}),0)/n.length);return l.cores=Math.max(1,s),URL.revokeObjectURL(r),e(null,l.cores)}!function(t,e){for(var n=[],i=[],o=0;o<t;++o){var s=new Worker(r);s.addEventListener("message",(function(r){if(i.push(r.data),i.length===t){for(var o=0;o<t;++o)n[o].terminate();e(null,i)}})),n.push(s)}for(o=0;o<t;++o)n[o].postMessage(o)}(o,(function(e,r){n.push(function(t,e){for(var r=[],n=0;n<t;++n)for(var i=e[n],o=r[n]=[],s=0;s<t;++s)if(n!==s){var a=e[s];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&o.push(s)}return r.reduce((function(t,e){return Math.max(t,e.length)}),0)}(o,r)),t(n,i-1,o)}))}([],5,16)}}).call(this,r(5),r(99).setImmediate,r(6),r(3).Buffer)},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"===typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,u=[],c=!1,h=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&d())}function d(){if(!c){var t=a(f);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new p(t,e)),1!==u.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=r(179),i=Object.prototype.toString;function o(t){return"[object Array]"===i.call(t)}function s(t){return"undefined"===typeof t}function a(t){return null!==t&&"object"===typeof t}function l(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function u(t){return"[object Function]"===i.call(t)}function c(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),o(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!==typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"===typeof t},isNumber:function(t){return"number"===typeof t},isObject:a,isPlainObject:l,isUndefined:s,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:c,merge:function t(){var e={};function r(r,n){l(e[n])&&l(r)?e[n]=t(e[n],r):l(r)?e[n]=t({},r):o(r)?e[n]=r.slice():e[n]=r}for(var n=0,i=arguments.length;n<i;n++)c(arguments[n],r);return e},extend:function(t,e,r){return c(e,(function(e,i){t[i]=r&&"function"===typeof e?n(e,r):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=r,r.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},function(t,e,r){"use strict";var n=e,i=r(16),o=r(8),s=r(139);n.assert=o,n.toArray=s.toArray,n.zero2=s.zero2,n.toHex=s.toHex,n.encode=s.encode,n.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),s=0;s<n.length;s++){var a,l=o.andln(i-1);o.isOdd()?(a=l>(i>>1)-1?(i>>1)-l:l,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},n.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,o=0;t.cmpn(-i)>0||e.cmpn(-o)>0;){var s,a,l=t.andln(3)+i&3,u=e.andln(3)+o&3;3===l&&(l=-1),3===u&&(u=-1),s=0===(1&l)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==u?l:-l,r[0].push(s),a=0===(1&u)?0:3!==(n=e.andln(7)+o&7)&&5!==n||2!==l?u:-u,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return r},n.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(t){return"string"===typeof t?n.toArray(t,"hex"):t},n.intFromLE=function(t){return new i(t,"hex","le")}},function(t,e,r){"use strict";t.exports=r(196)},function(t,e,r){var n=r(2);r(23),r(168),r(169),r(4),n.random&&n.random.getBytes?t.exports=n.random:function(e){var r={},i=new Array(4),o=n.util.createBuffer();function s(){var t=n.prng.create(r);return t.getBytes=function(e,r){return t.generate(e,r)},t.getBytesSync=function(e){return t.generate(e)},t}r.formatKey=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),n.aes._expandKey(t,!1)},r.formatSeed=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},r.cipher=function(t,e){return n.aes._updateBlock(t,e,i,!1),o.putInt32(i[0]),o.putInt32(i[1]),o.putInt32(i[2]),o.putInt32(i[3]),o.getBytes()},r.increment=function(t){return++t[3],t},r.md=n.md.sha256;var a=s(),l=null,u=n.util.globalScope,c=u.crypto||u.msCrypto;if(c&&c.getRandomValues&&(l=function(t){return c.getRandomValues(t)}),n.options.usePureJavaScript||!n.util.isNodejs&&!l){if("undefined"===typeof window||window.document,a.collectInt(+new Date,32),"undefined"!==typeof navigator){var h="";for(var f in navigator)try{"string"==typeof navigator[f]&&(h+=navigator[f])}catch(d){}a.collect(h),h=null}e&&(e().mousemove((function(t){a.collectInt(t.clientX,16),a.collectInt(t.clientY,16)})),e().keypress((function(t){a.collectInt(t.charCode,8)})))}if(n.random)for(var f in a)n.random[f]=a[f];else n.random=a;n.random.createInstance=s,t.exports=n.random}("undefined"!==typeof jQuery?jQuery:null)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";var n,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!==t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"===typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}y(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"===typeof t.on&&y(t,"error",e,r)}(t,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,o,s,a;if(u(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),void 0===s)s=o[e]=r,++t._eventsCount;else if("function"===typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=c(t))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function p(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):g(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function y(t,e,r,n){if("function"===typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=i[t];if(void 0===l)return!1;if("function"===typeof l)o(l,this,e);else{var u=l.length,c=g(l,u);for(r=0;r<u;++r)o(c[r],this,e)}return!0},a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,d(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,d(this,t,e)),this},a.prototype.removeListener=function(t,e){var r,n,i,o,s;if(u(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,r){"use strict";var n=r(8),i=r(0);function o(t,e){return 55296===(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320===(64512&t.charCodeAt(e+1)))}function s(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function l(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"===typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):o(t,i)?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},e.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=a(t[r].toString(16));return e},e.htonl=s,e.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=s(i)),r+=l(i.toString(16))}return r},e.zero2=a,e.zero8=l,e.join32=function(t,e,r,i){var o=r-e;n(o%4===0);for(var s=new Array(o/4),a=0,l=e;a<s.length;a++,l+=4){var u;u="big"===i?t[l]<<24|t[l+1]<<16|t[l+2]<<8|t[l+3]:t[l+3]<<24|t[l+2]<<16|t[l+1]<<8|t[l],s[a]=u>>>0}return s},e.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,r){return t+e+r>>>0},e.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},e.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},e.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,s=(o<n?1:0)+r+i;t[e]=s>>>0,t[e+1]=o},e.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},e.sum64_lo=function(t,e,r,n){return e+n>>>0},e.sum64_4_hi=function(t,e,r,n,i,o,s,a){var l=0,u=e;return l+=(u=u+n>>>0)<e?1:0,l+=(u=u+o>>>0)<o?1:0,t+r+i+s+(l+=(u=u+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,r,n,i,o,s,a){return e+n+o+a>>>0},e.sum64_5_hi=function(t,e,r,n,i,o,s,a,l,u){var c=0,h=e;return c+=(h=h+n>>>0)<e?1:0,c+=(h=h+o>>>0)<o?1:0,c+=(h=h+a>>>0)<a?1:0,t+r+i+s+l+(c+=(h=h+u>>>0)<u?1:0)>>>0},e.sum64_5_lo=function(t,e,r,n,i,o,s,a,l,u){return e+n+o+a+u>>>0},e.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},e.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},e.shr64_hi=function(t,e,r){return t>>>r},e.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0}},function(t,e,r){var n=r(2);r(4),r(24);var i=t.exports=n.asn1=n.asn1||{};function o(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(t,e,r,o,s){if(n.util.isArray(o)){for(var a=[],l=0;l<o.length;++l)void 0!==o[l]&&a.push(o[l]);o=a}var u={tagClass:t,type:e,constructed:r,composed:r||n.util.isArray(o),value:o};return s&&"bitStringContents"in s&&(u.bitStringContents=s.bitStringContents,u.original=i.copy(u)),u},i.copy=function(t,e){var r;if(n.util.isArray(t)){r=[];for(var o=0;o<t.length;++o)r.push(i.copy(t[o],e));return r}return"string"===typeof t?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:i.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)},i.equals=function(t,e,r){if(n.util.isArray(t)){if(!n.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var o=0;o<t.length;++o)if(!i.equals(t[o],e[o]))return!1;return!0}if(typeof t!==typeof e)return!1;if("string"===typeof t)return t===e;var s=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&i.equals(t.value,e.value);return r&&r.includeBitStringContents&&(s=s&&t.bitStringContents===e.bitStringContents),s},i.getBerValueLength=function(t){var e=t.getByte();if(128!==e)return 128&e?t.getInt((127&e)<<3):e};function s(t,e,r,n){var a;o(t,e,2);var l=t.getByte();e--;var u=192&l,c=31&l;a=t.length();var h,f,d=function(t,e){var r=t.getByte();if(e--,128!==r){var n;if(128&r){var i=127&r;o(t,e,i),n=t.getInt(i<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(t,e);if(e-=a-t.length(),void 0!==d&&d>e){if(n.strict){var p=new Error("Too few bytes to read ASN.1 value.");throw p.available=t.length(),p.remaining=e,p.requested=d,p}d=e}var m=32===(32&l);if(m)if(h=[],void 0===d)for(;;){if(o(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}a=t.length(),h.push(s(t,e,r+1,n)),e-=a-t.length()}else for(;d>0;)a=t.length(),h.push(s(t,d,r+1,n)),e-=a-t.length(),d-=a-t.length();if(void 0===h&&u===i.Class.UNIVERSAL&&c===i.Type.BITSTRING&&(f=t.bytes(d)),void 0===h&&n.decodeBitStrings&&u===i.Class.UNIVERSAL&&c===i.Type.BITSTRING&&d>1){var g=t.read,y=e,_=0;if(c===i.Type.BITSTRING&&(o(t,e,1),_=t.getByte(),e--),0===_)try{a=t.length();var v=s(t,e,r+1,{strict:!0,decodeBitStrings:!0}),b=a-t.length();e-=b,c==i.Type.BITSTRING&&b++;var w=v.tagClass;b!==d||w!==i.Class.UNIVERSAL&&w!==i.Class.CONTEXT_SPECIFIC||(h=[v])}catch(E){}void 0===h&&(t.read=g,e=y)}if(void 0===h){if(void 0===d){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");d=e}if(c===i.Type.BMPSTRING)for(h="";d>0;d-=2)o(t,e,2),h+=String.fromCharCode(t.getInt16()),e-=2;else h=t.getBytes(d),e-=d}var x=void 0===f?null:{bitStringContents:f};return i.create(u,c,m,h,x)}i.fromDer=function(t,e){void 0===e&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"===typeof e&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"===typeof t&&(t=n.util.createBuffer(t));var r=t.length(),i=s(t,t.length(),0,e);if(e.parseAllBytes&&0!==t.length()){var o=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw o.byteCount=r,o.remaining=t.length(),o}return i},i.toDer=function(t){var e=n.util.createBuffer(),r=t.tagClass|t.type,o=n.util.createBuffer(),s=!1;if("bitStringContents"in t&&(s=!0,t.original&&(s=i.equals(t,t.original))),s)o.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:o.putByte(0);for(var a=0;a<t.value.length;++a)void 0!==t.value[a]&&o.putBuffer(i.toDer(t.value[a]))}else if(t.type===i.Type.BMPSTRING)for(a=0;a<t.value.length;++a)o.putInt16(t.value.charCodeAt(a));else t.type===i.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0===(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128===(128&t.value.charCodeAt(1)))?o.putBytes(t.value.substr(1)):o.putBytes(t.value);if(e.putByte(r),o.length()<=127)e.putByte(127&o.length());else{var l=o.length(),u="";do{u+=String.fromCharCode(255&l),l>>>=8}while(l>0);e.putByte(128|u.length);for(a=u.length-1;a>=0;--a)e.putByte(u.charCodeAt(a))}return e.putBuffer(o),e},i.oidToDer=function(t){var e,r,i,o,s=t.split("."),a=n.util.createBuffer();a.putByte(40*parseInt(s[0],10)+parseInt(s[1],10));for(var l=2;l<s.length;++l){e=!0,r=[],i=parseInt(s[l],10);do{o=127&i,i>>>=7,e||(o|=128),r.push(o),e=!1}while(i>0);for(var u=r.length-1;u>=0;--u)a.putByte(r[u])}return a},i.derToOid=function(t){var e;"string"===typeof t&&(t=n.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)i<<=7,128&(r=t.getByte())?i+=127&r:(e+="."+(i+r),i=0);return e},i.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var l=t.charAt(10),u=10;"+"!==l&&"-"!==l&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),u&&("+"===(l=t.charAt(u))||"-"===l)){var c=60*parseInt(t.substr(u+1,2),10)+parseInt(t.substr(u+4,2),10);c*=6e4,"+"===l?e.setTime(+e-c):e.setTime(+e+c)}return e},i.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),l=0,u=0,c=!1;"Z"===t.charAt(t.length-1)&&(c=!0);var h=t.length-5,f=t.charAt(h);"+"!==f&&"-"!==f||(u=60*parseInt(t.substr(h+1,2),10)+parseInt(t.substr(h+4,2),10),u*=6e4,"+"===f&&(u*=-1),c=!0);return"."===t.charAt(14)&&(l=1e3*parseFloat(t.substr(14),10)),c?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,l),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,s,a,l)),e},i.dateToUtcTime=function(t){if("string"===typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z"},i.dateToGeneralizedTime=function(t){if("string"===typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z"},i.integerToDer=function(t){var e=n.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},i.derToInteger=function(t){"string"===typeof t&&(t=n.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},i.validate=function(t,e,r,o){var s=!1;if(t.tagClass!==e.tagClass&&"undefined"!==typeof e.tagClass||t.type!==e.type&&"undefined"!==typeof e.type)o&&(t.tagClass!==e.tagClass&&o.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&o.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||"undefined"===typeof e.constructed){if(s=!0,e.value&&n.util.isArray(e.value))for(var a=0,l=0;s&&l<e.value.length;++l)s=e.value[l].optional||!1,t.value[a]&&((s=i.validate(t.value[a],e.value[l],r,o))?++a:e.value[l].optional&&(s=!0)),!s&&o&&o.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(s&&r)if(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{if(0!==t.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else o&&o.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return s};var a=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(t,e,r){var o="";r=r||2,(e=e||0)>0&&(o+="\n");for(var s="",l=0;l<e*r;++l)s+=" ";switch(o+=s+"Tag: ",t.tagClass){case i.Class.UNIVERSAL:o+="Universal:";break;case i.Class.APPLICATION:o+="Application:";break;case i.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case i.Class.PRIVATE:o+="Private:"}if(t.tagClass===i.Class.UNIVERSAL)switch(o+=t.type,t.type){case i.Type.NONE:o+=" (None)";break;case i.Type.BOOLEAN:o+=" (Boolean)";break;case i.Type.INTEGER:o+=" (Integer)";break;case i.Type.BITSTRING:o+=" (Bit string)";break;case i.Type.OCTETSTRING:o+=" (Octet string)";break;case i.Type.NULL:o+=" (Null)";break;case i.Type.OID:o+=" (Object Identifier)";break;case i.Type.ODESC:o+=" (Object Descriptor)";break;case i.Type.EXTERNAL:o+=" (External or Instance of)";break;case i.Type.REAL:o+=" (Real)";break;case i.Type.ENUMERATED:o+=" (Enumerated)";break;case i.Type.EMBEDDED:o+=" (Embedded PDV)";break;case i.Type.UTF8:o+=" (UTF8)";break;case i.Type.ROID:o+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:o+=" (Sequence)";break;case i.Type.SET:o+=" (Set)";break;case i.Type.PRINTABLESTRING:o+=" (Printable String)";break;case i.Type.IA5String:o+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:o+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case i.Type.BMPSTRING:o+=" (BMP String)"}else o+=t.type;if(o+="\n",o+=s+"Constructed: "+t.constructed+"\n",t.composed){var u=0,c="";for(l=0;l<t.value.length;++l)void 0!==t.value[l]&&(u+=1,c+=i.prettyPrint(t.value[l],e+1,r),l+1<t.value.length&&(c+=","));o+=s+"Sub values: "+u+c}else{if(o+=s+"Value: ",t.type===i.Type.OID){var h=i.derToOid(t.value);o+=h,n.pki&&n.pki.oids&&h in n.pki.oids&&(o+=" ("+n.pki.oids[h]+") ")}if(t.type===i.Type.INTEGER)try{o+=i.derToInteger(t.value)}catch(d){o+="0x"+n.util.bytesToHex(t.value)}else if(t.type===i.Type.BITSTRING){if(t.value.length>1?o+="0x"+n.util.bytesToHex(t.value.slice(1)):o+="(none)",t.value.length>0){var f=t.value.charCodeAt(0);1==f?o+=" (1 unused bit shown)":f>1&&(o+=" ("+f+" unused bits shown)")}}else if(t.type===i.Type.OCTETSTRING)a.test(t.value)||(o+="("+t.value+") "),o+="0x"+n.util.bytesToHex(t.value);else if(t.type===i.Type.UTF8)try{o+=n.util.decodeUtf8(t.value)}catch(p){if("URI malformed"!==p.message)throw p;o+="0x"+n.util.bytesToHex(t.value)+" (malformed UTF8)"}else t.type===i.Type.PRINTABLESTRING||t.type===i.Type.IA5String?o+=t.value:a.test(t.value)?o+="0x"+n.util.bytesToHex(t.value):0===t.value.length?o+="[null]":o+=t.value}return o}},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(295).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function l(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,l=0,c=r;c<a;c+=n)l=u(t,c,c+n,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var h=1;for(l=u(t,c,t.length,e),c=0;c<s;c++)h*=e;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,l=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var c=l>>>26,h=67108863&l,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;c+=(s=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&s}r.words[u]=0|h,l=0|c}return 0!==l?r.words[u]=0|l:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?c[6-l.length]+l+r:l+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=h[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:c[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,l="le"===e,u=new t(o),c=this.clone();if(l){for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,l=r.words,u=0,c=0|s[0],h=8191&c,f=c>>>13,d=0|s[1],p=8191&d,m=d>>>13,g=0|s[2],y=8191&g,_=g>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],E=8191&x,S=x>>>13,M=0|s[5],T=8191&M,A=M>>>13,C=0|s[6],I=8191&C,k=C>>>13,R=0|s[7],B=8191&R,P=R>>>13,D=0|s[8],L=8191&D,O=D>>>13,N=0|s[9],z=8191&N,U=N>>>13,j=0|a[0],F=8191&j,V=j>>>13,G=0|a[1],q=8191&G,K=G>>>13,W=0|a[2],Z=8191&W,H=W>>>13,Q=0|a[3],X=8191&Q,Y=Q>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],lt=8191&at,ut=at>>>13,ct=0|a[8],ht=8191&ct,ft=ct>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(u+(n=Math.imul(h,F))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,V))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,V))+Math.imul(m,F)|0,o=Math.imul(m,V);var yt=(u+(n=n+Math.imul(h,q)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,q)|0))<<13)|0;u=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,F),i=(i=Math.imul(y,V))+Math.imul(_,F)|0,o=Math.imul(_,V),n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,K)|0;var _t=(u+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(b,F),i=(i=Math.imul(b,V))+Math.imul(w,F)|0,o=Math.imul(w,V),n=n+Math.imul(y,q)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,K)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var vt=(u+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,X)|0))<<13)|0;u=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,V))+Math.imul(S,F)|0,o=Math.imul(S,V),n=n+Math.imul(b,q)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Y)|0;var bt=(u+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(T,F),i=(i=Math.imul(T,V))+Math.imul(A,F)|0,o=Math.imul(A,V),n=n+Math.imul(E,q)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,K)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(u+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,V))+Math.imul(k,F)|0,o=Math.imul(k,V),n=n+Math.imul(T,q)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,K)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,X)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(u+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,V))+Math.imul(P,F)|0,o=Math.imul(P,V),n=n+Math.imul(I,q)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,K)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,Y)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(h,lt)|0)|0)+((8191&(i=(i=i+Math.imul(h,ut)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(L,F),i=(i=Math.imul(L,V))+Math.imul(O,F)|0,o=Math.imul(O,V),n=n+Math.imul(B,q)|0,i=(i=i+Math.imul(B,K)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ut)|0;var St=(u+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(z,F),i=(i=Math.imul(z,V))+Math.imul(U,F)|0,o=Math.imul(U,V),n=n+Math.imul(L,q)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(O,q)|0,o=o+Math.imul(O,K)|0,n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(k,X)|0,o=o+Math.imul(k,Y)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,ut)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,q),i=(i=Math.imul(z,K))+Math.imul(U,q)|0,o=Math.imul(U,K),n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(B,X)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,st)|0,n=n+Math.imul(b,lt)|0,i=(i=i+Math.imul(b,ut)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ut)|0,n=n+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ft)|0;var Tt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(z,Z),i=(i=Math.imul(z,H))+Math.imul(U,Z)|0,o=Math.imul(U,H),n=n+Math.imul(L,X)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Y)|0,n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(S,lt)|0,o=o+Math.imul(S,ut)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var At=(u+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,X),i=(i=Math.imul(z,Y))+Math.imul(U,X)|0,o=Math.imul(U,Y),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,n=n+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,ut)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(E,ht)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Ct=(u+(n=n+Math.imul(b,pt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,pt)|0))<<13)|0;u=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,$),i=(i=Math.imul(z,tt))+Math.imul(U,$)|0,o=Math.imul(U,tt),n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(k,lt)|0,o=o+Math.imul(k,ut)|0,n=n+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var It=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(S,pt)|0))<<13)|0;u=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,rt),i=(i=Math.imul(z,nt))+Math.imul(U,rt)|0,o=Math.imul(U,nt),n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,ut)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(u+(n=n+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(U,ot)|0,o=Math.imul(U,st),n=n+Math.imul(L,lt)|0,i=(i=i+Math.imul(L,ut)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(B,ht)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Rt=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,pt)|0))<<13)|0;u=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,lt),i=(i=Math.imul(z,ut))+Math.imul(U,lt)|0,o=Math.imul(U,ut),n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(O,ht)|0,o=o+Math.imul(O,ft)|0;var Bt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(P,pt)|0))<<13)|0;u=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,ht),i=(i=Math.imul(z,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Pt=(u+(n=n+Math.imul(L,pt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Dt=(u+(n=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((o=Math.imul(U,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,l[0]=gt,l[1]=yt,l[2]=_t,l[3]=vt,l[4]=bt,l[5]=wt,l[6]=xt,l[7]=Et,l[8]=St,l[9]=Mt,l[10]=Tt,l[11]=At,l[12]=Ct,l[13]=It,l[14]=kt,l[15]=Rt,l[16]=Bt,l[17]=Pt,l[18]=Dt,0!==u&&(l[19]=u,r.length++),r};function m(t,e,r){return(new g).mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,l=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=l;u++){var c=o-u,h=(0|t.words[c])*(0|e.words[u]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},g.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},g.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},g.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var h=l,f=u,d=0;d<s;d++){var p=r[c+d],m=n[c+d],g=r[c+d+s],y=n[c+d+s],_=h*g-f*y;y=h*y+f*g,g=_,r[c+d]=p+g,n[c+d]=m+y,r[c+d+s]=p-g,n[c+d+s]=m-y,d!==a&&(_=l*h-u*f,f=l*f+u*h,h=_)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},g.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),l=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,l,n,i),this.transform(u,o,c,h,n,i);for(var d=0;d<n;d++){var p=a[d]*c[d]-l[d]*h[d];l[d]=a[d]*h[d]+l[d]*c[d],a[d]=p}return this.conjugate(a,l,n),this.transform(a,l,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,l=(0|this.words[e])-a<<r;this.words[e]=l|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,l=r;if(i-=s,i=Math.max(0,i),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var h=0|this.words[u];this.words[u]=c<<26-o|h>>>o,c=h&a}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var l=(0|t.words[i])*e;a=((o-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,l=n.length-i.length;if("mod"!==e){(a=new o(null)).length=l+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,l);0===c.negative&&(n=c,a&&(a.words[l]=1));for(var h=l-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),l=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(c),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(c),l.isub(h)),a.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(l)):(r.isub(e),a.isub(i),l.isub(s))}return{a:a,b:l,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),l=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,c=1;0===(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var h=0,f=1;0===(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},i(v,_),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,_),i(w,_),i(x,_),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),l=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=g}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,l=e.bitLength()%26;for(0===l&&(l=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=l-1;c>=0;c--){var h=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===n&&0===c)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}l=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,E),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(12)(t))},function(t,e,r){var n=r(2);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},function(t,e,r){var n=r(1).Buffer,i=r(38).Transform,o=r(20).StringDecoder;function s(t){i.call(this),this.hashMode="string"===typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(0)(s,i),s.prototype.update=function(t,e,r){"string"===typeof t&&(t=n.from(t,e));var i=this._update(t);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}},s.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)},s.prototype._finalOrDigest=function(t){var e=this.__final()||n.alloc(0);return t&&(e=this._toString(e,t,!0)),e},s.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n},t.exports=s},function(t,e,r){"use strict";var n=r(47),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=h;var o=Object.create(r(36));o.inherits=r(0);var s=r(96),a=r(61);o.inherits(h,s);for(var l=i(a.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e,r){"use strict";var n=r(1).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!==typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function s(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!==(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function c(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=s(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=s(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=s(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},function(t,e,r){(function(t){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},i=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(a(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}})),l=n[r];r<o;l=n[++r])m(l)||!b(l)?s+=" "+l:s+=" "+a(l);return s},e.deprecate=function(r,n){if("undefined"!==typeof t&&!0===t.noDeprecation)return r;if("undefined"===typeof t)return function(){return e.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var o,s={};function a(t,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(r)?n.showHidden=r:r&&e._extend(n,r),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),c(n,t,n.depth)}function l(t,e){var r=a.styles[e];return r?"\x1b["+a.colors[r][0]+"m"+t+"\x1b["+a.colors[r][1]+"m":t}function u(t,e){return t}function c(t,r,n){if(t.customInspect&&r&&E(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return y(i)||(i=c(t,i,n)),i}var o=function(t,e){if(_(e))return t.stylize("undefined","undefined");if(y(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(g(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,r);if(o)return o;var s=Object.keys(r),a=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),x(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(r);if(0===s.length){if(E(r)){var l=r.name?": "+r.name:"";return t.stylize("[Function"+l+"]","special")}if(v(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return t.stylize(Date.prototype.toString.call(r),"date");if(x(r))return h(r)}var u,b="",S=!1,M=["{","}"];(d(r)&&(S=!0,M=["[","]"]),E(r))&&(b=" [Function"+(r.name?": "+r.name:"")+"]");return v(r)&&(b=" "+RegExp.prototype.toString.call(r)),w(r)&&(b=" "+Date.prototype.toUTCString.call(r)),x(r)&&(b=" "+h(r)),0!==s.length||S&&0!=r.length?n<0?v(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),u=S?function(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)C(e,String(s))?o.push(f(t,e,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(t,e,r,n,i,!0))})),o}(t,r,n,a,s):s.map((function(e){return f(t,r,n,a,e,S)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(u,b,M)):M[0]+b+M[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i,o){var s,a,l;if((l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),C(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(l.value)<0?(a=m(r)?c(t,l.value,null):c(t,l.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t){return Array.isArray(t)}function p(t){return"boolean"===typeof t}function m(t){return null===t}function g(t){return"number"===typeof t}function y(t){return"string"===typeof t}function _(t){return void 0===t}function v(t){return b(t)&&"[object RegExp]"===S(t)}function b(t){return"object"===typeof t&&null!==t}function w(t){return b(t)&&"[object Date]"===S(t)}function x(t){return b(t)&&("[object Error]"===S(t)||t instanceof Error)}function E(t){return"function"===typeof t}function S(t){return Object.prototype.toString.call(t)}function M(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(_(o)&&(o=Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(o)){var n=t.pid;s[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else s[r]=function(){};return s[r]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=y,e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=_,e.isRegExp=v,e.isObject=b,e.isDate=w,e.isError=x,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=r(228);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var t=new Date,e=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(":");return[t.getDate(),T[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",A(),e.format.apply(e,arguments))},e.inherits=r(229),e._extend=function(t,e){if(!e||!b(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var I="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function k(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');if(I&&t[I]){var e;if("function"!==typeof(e=t[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,i)}catch(s){r(s)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),I&&Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=I,e.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,r).then((function(e){t.nextTick(s,null,e)}),(function(e){t.nextTick(k,e,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,n(e)),r}}).call(this,r(5))},function(t,e,r){var n=r(2);function i(t,e){n.cipher.registerAlgorithm(t,(function(){return new n.aes.Algorithm(t,e)}))}r(85),r(164),r(4),t.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(t,e,r,n){var i=p({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i},n.aes.createEncryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!1,mode:e})},n.aes.startDecrypting=function(t,e,r,n){var i=p({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i},n.aes.createDecryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!0,mode:e})},n.aes.Algorithm=function(t,e){c||h();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return d(r._w,t,e,!1)},decrypt:function(t,e){return d(r._w,t,e,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,r=t.key;if("string"!==typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){e=r,r=n.util.createBuffer();for(var i=0;i<e.length;++i)r.putByte(e[i])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){e=r,r=[];var o=e.length();if(16===o||24===o||32===o){o>>>=2;for(i=0;i<o;++i)r.push(e.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var s=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(s);this._w=f(r,t.decrypt&&!a),this._init=!0}},n.aes._expandKey=function(t,e){return c||h(),f(t,e)},n.aes._updateBlock=d,i("AES-ECB",n.cipher.modes.ecb),i("AES-CBC",n.cipher.modes.cbc),i("AES-CFB",n.cipher.modes.cfb),i("AES-OFB",n.cipher.modes.ofb),i("AES-CTR",n.cipher.modes.ctr),i("AES-GCM",n.cipher.modes.gcm);var o,s,a,l,u,c=!1;function h(){c=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;o=new Array(256),s=new Array(256),l=new Array(4),u=new Array(4);for(e=0;e<4;++e)l[e]=new Array(256),u[e]=new Array(256);var r,n,i,h,f,d,p,m=0,g=0;for(e=0;e<256;++e){h=(h=g^g<<1^g<<2^g<<3^g<<4)>>8^255&h^99,o[m]=h,s[h]=m,d=(f=t[h])<<24^h<<16^h<<8^h^f,p=((r=t[m])^(n=t[r])^(i=t[n]))<<24^(m^i)<<16^(m^n^i)<<8^m^r^i;for(var y=0;y<4;++y)l[y][m]=d,u[y][h]=p,d=d<<24|d>>>8,p=p<<24|p>>>8;0===m?m=g=1:(m=r^t[t[t[r^i]]],g^=t[t[g]])}}function f(t,e){for(var r,n=t.slice(0),i=1,s=n.length,l=4*(s+6+1),c=s;c<l;++c)r=n[c-1],c%s===0?(r=o[r>>>16&255]<<24^o[r>>>8&255]<<16^o[255&r]<<8^o[r>>>24]^a[i]<<24,i++):s>6&&c%s===4&&(r=o[r>>>24]<<24^o[r>>>16&255]<<16^o[r>>>8&255]<<8^o[255&r]),n[c]=n[c-s]^r;if(e){for(var h,f=u[0],d=u[1],p=u[2],m=u[3],g=n.slice(0),y=(c=0,(l=n.length)-4);c<l;c+=4,y-=4)if(0===c||c===l-4)g[c]=n[y],g[c+1]=n[y+3],g[c+2]=n[y+2],g[c+3]=n[y+1];else for(var _=0;_<4;++_)h=n[y+_],g[c+(3&-_)]=f[o[h>>>24]]^d[o[h>>>16&255]]^p[o[h>>>8&255]]^m[o[255&h]];n=g}return n}function d(t,e,r,n){var i,a,c,h,f,d,p,m,g,y,_,v,b=t.length/4-1;n?(i=u[0],a=u[1],c=u[2],h=u[3],f=s):(i=l[0],a=l[1],c=l[2],h=l[3],f=o),d=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],g=e[n?1:3]^t[3];for(var w=3,x=1;x<b;++x)y=i[d>>>24]^a[p>>>16&255]^c[m>>>8&255]^h[255&g]^t[++w],_=i[p>>>24]^a[m>>>16&255]^c[g>>>8&255]^h[255&d]^t[++w],v=i[m>>>24]^a[g>>>16&255]^c[d>>>8&255]^h[255&p]^t[++w],g=i[g>>>24]^a[d>>>16&255]^c[p>>>8&255]^h[255&m]^t[++w],d=y,p=_,m=v;r[0]=f[d>>>24]<<24^f[p>>>16&255]<<16^f[m>>>8&255]<<8^f[255&g]^t[++w],r[n?3:1]=f[p>>>24]<<24^f[m>>>16&255]<<16^f[g>>>8&255]<<8^f[255&d]^t[++w],r[2]=f[m>>>24]<<24^f[g>>>16&255]<<16^f[d>>>8&255]<<8^f[255&p]^t[++w],r[n?1:3]=f[g>>>24]<<24^f[d>>>16&255]<<16^f[p>>>8&255]<<8^f[255&m]^t[++w]}function p(t){var e,r="AES-"+((t=t||{}).mode||"CBC").toUpperCase(),i=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var o=null;r instanceof n.util.ByteBuffer&&(o=r,r={}),(r=r||{}).output=o,r.iv=t,i.call(e,r)},e}},function(t,e,r){var n=r(2);n.pki=n.pki||{};var i=t.exports=n.pki.oids=n.oids=n.oids||{};function o(t,e){i[t]=e,i[e]=t}function s(t,e){i[t]=e}o("1.2.840.113549.1.1.1","rsaEncryption"),o("1.2.840.113549.1.1.4","md5WithRSAEncryption"),o("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),o("1.2.840.113549.1.1.7","RSAES-OAEP"),o("1.2.840.113549.1.1.8","mgf1"),o("1.2.840.113549.1.1.9","pSpecified"),o("1.2.840.113549.1.1.10","RSASSA-PSS"),o("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),o("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),o("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),o("1.3.101.112","EdDSA25519"),o("1.2.840.10040.4.3","dsa-with-sha1"),o("1.3.14.3.2.7","desCBC"),o("1.3.14.3.2.26","sha1"),o("1.3.14.3.2.29","sha1WithRSASignature"),o("2.16.840.1.101.3.4.2.1","sha256"),o("2.16.840.1.101.3.4.2.2","sha384"),o("2.16.840.1.101.3.4.2.3","sha512"),o("2.16.840.1.101.3.4.2.4","sha224"),o("2.16.840.1.101.3.4.2.5","sha512-224"),o("2.16.840.1.101.3.4.2.6","sha512-256"),o("1.2.840.113549.2.2","md2"),o("1.2.840.113549.2.5","md5"),o("1.2.840.113549.1.7.1","data"),o("1.2.840.113549.1.7.2","signedData"),o("1.2.840.113549.1.7.3","envelopedData"),o("1.2.840.113549.1.7.4","signedAndEnvelopedData"),o("1.2.840.113549.1.7.5","digestedData"),o("1.2.840.113549.1.7.6","encryptedData"),o("1.2.840.113549.1.9.1","emailAddress"),o("1.2.840.113549.1.9.2","unstructuredName"),o("1.2.840.113549.1.9.3","contentType"),o("1.2.840.113549.1.9.4","messageDigest"),o("1.2.840.113549.1.9.5","signingTime"),o("1.2.840.113549.1.9.6","counterSignature"),o("1.2.840.113549.1.9.7","challengePassword"),o("1.2.840.113549.1.9.8","unstructuredAddress"),o("1.2.840.113549.1.9.14","extensionRequest"),o("1.2.840.113549.1.9.20","friendlyName"),o("1.2.840.113549.1.9.21","localKeyId"),o("1.2.840.113549.1.9.22.1","x509Certificate"),o("1.2.840.113549.1.12.10.1.1","keyBag"),o("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),o("1.2.840.113549.1.12.10.1.3","certBag"),o("1.2.840.113549.1.12.10.1.4","crlBag"),o("1.2.840.113549.1.12.10.1.5","secretBag"),o("1.2.840.113549.1.12.10.1.6","safeContentsBag"),o("1.2.840.113549.1.5.13","pkcs5PBES2"),o("1.2.840.113549.1.5.12","pkcs5PBKDF2"),o("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),o("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),o("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),o("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),o("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),o("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),o("1.2.840.113549.2.7","hmacWithSHA1"),o("1.2.840.113549.2.8","hmacWithSHA224"),o("1.2.840.113549.2.9","hmacWithSHA256"),o("1.2.840.113549.2.10","hmacWithSHA384"),o("1.2.840.113549.2.11","hmacWithSHA512"),o("1.2.840.113549.3.7","des-EDE3-CBC"),o("2.16.840.1.101.3.4.1.2","aes128-CBC"),o("2.16.840.1.101.3.4.1.22","aes192-CBC"),o("2.16.840.1.101.3.4.1.42","aes256-CBC"),o("2.5.4.3","commonName"),o("2.5.4.4","surname"),o("2.5.4.5","serialNumber"),o("2.5.4.6","countryName"),o("2.5.4.7","localityName"),o("2.5.4.8","stateOrProvinceName"),o("2.5.4.9","streetAddress"),o("2.5.4.10","organizationName"),o("2.5.4.11","organizationalUnitName"),o("2.5.4.12","title"),o("2.5.4.13","description"),o("2.5.4.15","businessCategory"),o("2.5.4.17","postalCode"),o("2.5.4.42","givenName"),o("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),o("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),o("2.16.840.1.113730.1.1","nsCertType"),o("2.16.840.1.113730.1.13","nsComment"),s("2.5.29.1","authorityKeyIdentifier"),s("2.5.29.2","keyAttributes"),s("2.5.29.3","certificatePolicies"),s("2.5.29.4","keyUsageRestriction"),s("2.5.29.5","policyMapping"),s("2.5.29.6","subtreesConstraint"),s("2.5.29.7","subjectAltName"),s("2.5.29.8","issuerAltName"),s("2.5.29.9","subjectDirectoryAttributes"),s("2.5.29.10","basicConstraints"),s("2.5.29.11","nameConstraints"),s("2.5.29.12","policyConstraints"),s("2.5.29.13","basicConstraints"),o("2.5.29.14","subjectKeyIdentifier"),o("2.5.29.15","keyUsage"),s("2.5.29.16","privateKeyUsagePeriod"),o("2.5.29.17","subjectAltName"),o("2.5.29.18","issuerAltName"),o("2.5.29.19","basicConstraints"),s("2.5.29.20","cRLNumber"),s("2.5.29.21","cRLReason"),s("2.5.29.22","expirationDate"),s("2.5.29.23","instructionCode"),s("2.5.29.24","invalidityDate"),s("2.5.29.25","cRLDistributionPoints"),s("2.5.29.26","issuingDistributionPoint"),s("2.5.29.27","deltaCRLIndicator"),s("2.5.29.28","issuingDistributionPoint"),s("2.5.29.29","certificateIssuer"),s("2.5.29.30","nameConstraints"),o("2.5.29.31","cRLDistributionPoints"),o("2.5.29.32","certificatePolicies"),s("2.5.29.33","policyMappings"),s("2.5.29.34","policyConstraints"),o("2.5.29.35","authorityKeyIdentifier"),s("2.5.29.36","policyConstraints"),o("2.5.29.37","extKeyUsage"),s("2.5.29.46","freshestCRL"),s("2.5.29.54","inhibitAnyPolicy"),o("1.3.6.1.4.1.11129.2.4.2","timestampList"),o("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),o("1.3.6.1.5.5.7.3.1","serverAuth"),o("1.3.6.1.5.5.7.3.2","clientAuth"),o("1.3.6.1.5.5.7.3.3","codeSigning"),o("1.3.6.1.5.5.7.3.4","emailProtection"),o("1.3.6.1.5.5.7.3.8","timeStamping")},function(t,e,r){t.exports=function(){"use strict";var t,e,r;function n(n,i){if(t)if(e){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk); self.onerror = null;",s={};t(s),r=i(s),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(r.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=i;else t=i}return n(["exports"],(function(t){var e="undefined"!=typeof self?self:{},r=n;function n(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var r,n,i,o,s;for(void 0===e&&(e=1e-6),i=t,s=0;s<8;s++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var a=this.sampleCurveDerivativeX(i);if(Math.abs(a)<1e-6)break;i-=o/a}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?r=i:n=i,i=.5*(n-r)+r}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=n,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-n*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};const s=Math.PI/180,a=180/Math.PI;function l(t){return t*s}function u(t){return t*a}const c=[[0,0],[1,0],[1,1],[0,1]];function h(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function f(t,e,n,i){const o=new r(t,e,n,i);return function(t){return o.solve(t)}}const d=f(.25,.1,.25,1);function p(t,e,r){return Math.min(r,Math.max(e,t))}function m(t,e,r){return(r=p((r-t)/(e-t),0,1))*r*(3-2*r)}function g(t,e,r){const n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function y(t,e,r){if(!t.length)return r(null,[]);let n=t.length;const i=new Array(t.length);let o=null;t.forEach(((t,s)=>{e(t,((t,e)=>{t&&(o=t),i[s]=e,0==--n&&r(o,i)}))}))}function _(t){const e=[];for(const r in t)e.push(t[r]);return e}function v(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}let b=1;function w(){return b++}function x(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function E(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function S(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function M(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function T(t,e){return-1!==t.indexOf(e,t.length-e.length)}function A(t,e,r){const n={};for(const i in t)n[i]=e.call(r||this,t[i],i,t);return n}function C(t,e,r){const n={};for(const i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function I(t){return Array.isArray(t)?t.map(I):"object"==typeof t&&t?A(t,I):t}const k={};function R(t){k[t]||("undefined"!=typeof console&&console.warn(t),k[t]=!0)}function B(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function P(t){let e=0;for(let r,n,i=0,o=t.length,s=o-1;i<o;s=i++)r=t[i],n=t[s],e+=(n.x-r.x)*(r.y+n.y);return e}function D(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function L(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,r,n,i)=>{const o=n||i;return e[r]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let O=null;function N(t){if(null==O){const e=t.navigator?t.navigator.userAgent:null;O=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return O}function z(t){try{const r=e[t];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch(t){return!1}}function U(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}const j=e.performance;function F(t){const e=t?t.url.toString():void 0;return j.getEntriesByName(e)}var V="2.10.0";let G,q,K,W;const Z={now:()=>void 0!==K?K:e.performance.now(),setNow(t){K=t},restoreNow(){K=void 0},frame(t){const r=e.requestAnimationFrame(t);return{cancel:()=>e.cancelAnimationFrame(r)}},getImageData(t,r=0){const{width:n,height:i}=t;W||(W=e.document.createElement("canvas"));const o=W.getContext("2d");if(!o)throw new Error("failed to create canvas 2d context");return(n>W.width||i>W.height)&&(W.width=n,W.height=i),o.clearRect(-r,-r,n+2*r,i+2*r),o.drawImage(t,0,0,n,i),o.getImageData(-r,-r,n+2*r,i+2*r)},resolveURL:t=>(G||(G=e.document.createElement("a")),G.href=t,G.href),get devicePixelRatio(){return e.devicePixelRatio},get prefersReducedMotion(){return!!e.matchMedia&&(null==q&&(q=e.matchMedia("(prefers-reduced-motion: reduce)")),q.matches)}};let H;const Q={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==H){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{H=null!=Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).API_URL_REGEX?new RegExp(Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).API_URL_REGEX):t}catch(e){H=t}}return H},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},X={supported:!1,testSupport:function(t){!$&&J&&(tt?et(t):Y=t)}};let Y,J,$=!1,tt=!1;function et(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,J),t.isContextLost())return;X.supported=!0}catch(t){}t.deleteTexture(e),$=!0}e.document&&(J=e.document.createElement("img"),J.onload=function(){Y&&et(Y),Y=null,tt=!0},J.onerror=function(){$=!0,Y=null},J.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const rt="01",nt="NO_ACCESS_TOKEN";function it(t){return 0===t.indexOf("mapbox:")}function ot(t){return Q.API_URL_REGEX.test(t)}const st=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function at(t){const e=t.match(st);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function lt(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}function ut(t){if(!t)return null;const r=t.split(".");if(!r||3!==r.length)return null;try{return JSON.parse(decodeURIComponent(e.atob(r[1]).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(t){return null}}class ct{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const r=ut(Q.ACCESS_TOKEN);let n="";return n=r&&r.u?e.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e))))):Q.ACCESS_TOKEN||"",t?`mapbox.eventData.${t}:${n}`:`mapbox.eventData:${n}`}fetchEventData(){const t=z("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{const t=e.localStorage.getItem(r);t&&(this.eventData=JSON.parse(t));const i=e.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){R("Unable to read from LocalStorage")}}saveEventData(){const t=z("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{e.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&e.localStorage.setItem(r,JSON.stringify(this.eventData))}catch(t){R("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,e,r,n){if(!Q.EVENTS_URL)return;const i=at(Q.EVENTS_URL);i.params.push(`access_token=${n||Q.ACCESS_TOKEN||""}`);const o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:V,skuId:rt,userId:this.anonId},s=e?v(o,e):o,a={url:lt(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=Pt(a,(t=>{this.pendingRequest=null,r(t),this.saveEventData(),this.processRequests(n)}))}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const ht=new class extends ct{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){Q.EVENTS_URL&&Q.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>it(t)||ot(t)))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=ut(Q.ACCESS_TOKEN),r=e?e.u:Q.ACCESS_TOKEN;let n=r!==this.eventData.tokenU;S(this.anonId)||(this.anonId=x(),n=!0);const i=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(i),r=(i-this.eventData.lastSuccess)/864e5;n=n||r>=1||r<-1||t.getDate()!==e.getDate()}else n=!0;n?this.postEvent(i,{"enabled.telemetry":!1},(t=>{t||(this.eventData.lastSuccess=i,this.eventData.tokenU=r)}),t):this.processRequests()}},ft=ht.postTurnstileEvent.bind(ht),dt=new class extends ct{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,r,n){this.skuToken=e,this.errorCb=n,Q.EVENTS_URL&&(r||Q.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},r):this.errorCb(new Error(nt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),S(this.anonId)||(this.anonId=x()),this.postEvent(r,{skuToken:this.skuToken},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t))}},pt=dt.postMapLoadEvent.bind(dt),mt=new class extends ct{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,r,n){if(!Q.API_URL||!Q.SESSION_PATH)return;const i=at(Q.API_URL+Q.SESSION_PATH);i.params.push(`sku=${e||""}`),i.params.push(`access_token=${n||Q.ACCESS_TOKEN||""}`);const o={url:lt(i),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Dt(o,(t=>{this.pendingRequest=null,r(t),this.saveEventData(),this.processRequests(n)}))}getSessionAPI(t,e,r,n){this.skuToken=e,this.errorCb=n,Q.SESSION_PATH&&Q.API_URL&&(r||Q.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},r):this.errorCb(new Error(nt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||this.getSession(r,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t)}},gt=mt.getSessionAPI.bind(mt),yt=new Set;let _t,vt=500,bt=50,wt={};function xt(t){const e=Mt(t);let r,n;e&&e.forEach((t=>{const e=t.split("=");"language"===e[0]?r=e[1]:"worldview"===e[0]&&(n=e[1])}));let i="mapbox-tiles";return r&&(i+=`-${r}`),n&&(i+=`-${n}`),i}function Et(){try{return e.caches}catch(t){}}function St(t){const e=Et();e&&!wt[t]&&(wt[t]=e.open(t))}function Mt(t){const e=t.indexOf("?");return e>0?t.slice(e+1).split("&"):[]}function Tt(t){const e=t.indexOf("?");if(e<0)return t;const r=Mt(t).filter((t=>{const e=t.split("=");return"language"===e[0]||"worldview"===e[0]}));return r.length?`${t.slice(0,e)}?${r.join("&")}`:t.slice(0,e)}let At=1/0;const Ct={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ct);class It extends Error{constructor(t,e,r){401===e&&ot(r)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=r}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const kt=D()?()=>self.worker&&self.worker.referrer:()=>("blob:"===e.location.protocol?e.parent:e).location.href,Rt=function(t,r){if(!(/^file:/.test(n=t.url)||/^file:/.test(kt())&&!/^\w+:/.test(n))){if(e.fetch&&e.Request&&e.AbortController&&e.Request.prototype.hasOwnProperty("signal"))return function(t,r){const n=new e.AbortController,i=new e.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:kt(),signal:n.signal});let o=!1,s=!1;const a=(l=i.url).indexOf("sku=")>0&&ot(l);var l;"json"===t.type&&i.headers.set("Accept","application/json");const u=(n,o,l)=>{if(s)return;if(n&&"SecurityError"!==n.message&&R(n),o&&l)return c(o);const u=Date.now();e.fetch(i).then((e=>{if(e.ok){const t=a?e.clone():null;return c(e,t,u)}return r(new It(e.statusText,e.status,t.url))})).catch((t=>{20!==t.code&&r(new Error(t.message))}))},c=(n,a,l)=>{("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((t=>{s||(a&&l&&function(t,r,n){const i=xt(t.url);if(St(i),!wt[i])return;const o={status:r.status,statusText:r.statusText,headers:new e.Headers};r.headers.forEach(((t,e)=>o.headers.set(e,t)));const s=L(r.headers.get("Cache-Control")||"");if(s["no-store"])return;s["max-age"]&&o.headers.set("Expires",new Date(n+1e3*s["max-age"]).toUTCString());const a=o.headers.get("Expires");a&&(new Date(a).getTime()-n<42e4||function(t,e){if(void 0===_t)try{new Response(new ReadableStream),_t=!0}catch(t){_t=!1}_t?e(t.body):t.blob().then(e)}(r,(r=>{const n=new e.Response(r,o);St(i),wt[i]&&wt[i].then((e=>e.put(Tt(t.url),n))).catch((t=>R(t.message)))})))}(i,a,l),o=!0,r(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((t=>{s||r(new Error(t.message))}))};return a?function(t,e){const r=xt(t.url);if(St(r),!wt[r])return e(null);const n=Tt(t.url);wt[r].then((t=>{t.match(n).then((r=>{const i=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),r=L(t.headers.get("Cache-Control")||"");return e>Date.now()&&!r["no-cache"]}(r);t.delete(n),i&&t.put(n,r.clone()),e(null,r,i)})).catch(e)})).catch(e)}(i,u):u(null,null),{cancel:()=>{s=!0,o||n.abort()}}}(t,r);if(D()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,r,void 0,!0)}var n;return function(t,r){const n=new e.XMLHttpRequest;n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer");for(const e in t.headers)n.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=()=>{r(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let e=n.response;if("json"===t.type)try{e=JSON.parse(n.response)}catch(t){return r(t)}r(null,e,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else r(new It(n.statusText,n.status,t.url))},n.send(t.body),{cancel:()=>n.abort()}}(t,r)},Bt=function(t,e){return Rt(v(t,{type:"arrayBuffer"}),e)},Pt=function(t,e){return Rt(v(t,{method:"POST"}),e)},Dt=function(t,e){return Rt(v(t,{method:"GET"}),e)};function Lt(t){const r=e.document.createElement("a");return r.href=t,r.protocol===e.document.location.protocol&&r.host===e.document.location.host}const Ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Nt,zt;Nt=[],zt=0;const Ut=function(t,r){if(X.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),zt>=Q.MAX_PARALLEL_IMAGE_REQUESTS){const e={requestParameters:t,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return Nt.push(e),e}zt++;let n=!1;const i=()=>{if(!n)for(n=!0,zt--;Nt.length&&zt<Q.MAX_PARALLEL_IMAGE_REQUESTS;){const t=Nt.shift(),{requestParameters:e,callback:r,cancelled:n}=t;n||(t.cancel=Ut(e,r).cancel)}},o=Bt(t,((t,n,o,s)=>{i(),t?r(t):n&&(e.createImageBitmap?function(t,r){const n=new e.Blob([new Uint8Array(t)],{type:"image/png"});e.createImageBitmap(n).then((t=>{r(null,t)})).catch((t=>{r(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(n,((t,e)=>r(t,e,o,s))):function(t,r){const n=new e.Image,i=e.URL;n.onload=()=>{r(null,n),i.revokeObjectURL(n.src),n.onload=null,e.requestAnimationFrame((()=>{n.src=Ot}))},n.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const o=new e.Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?i.createObjectURL(o):Ot}(n,((t,e)=>r(t,e,o,s))))}));return{cancel:()=>{o.cancel(),i()}}};function jt(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e))}function Ft(t,e,r){if(r&&r[t]){const n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1)}}class Vt{constructor(t,e={}){v(this,e),this.type=t}}class Gt extends Vt{constructor(t,e={}){super("error",v({error:t},e))}}class qt{on(t,e){return this._listeners=this._listeners||{},jt(t,e,this._listeners),this}off(t,e){return Ft(t,e,this._listeners),Ft(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},jt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new Vt(t,e||{}));const r=t.type;if(this.listens(r)){t.target=this;const e=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of e)r.call(this,t);const n=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const o of n)Ft(r,o,this._oneTimeListeners),o.call(this,t);const i=this._eventedParent;i&&(v(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(t))}else t instanceof Gt&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var Kt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Wt(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}function Zt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Ht(t){if(Array.isArray(t))return t.map(Ht);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const r in t)e[r]=Ht(t[r]);return e}return Zt(t)}class Qt extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}var Xt=Qt;class Yt{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[r,n]of e)this.bindings[r]=n}concat(t){return new Yt(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var Jt=Yt;const $t={kind:"null"},te={kind:"number"},ee={kind:"string"},re={kind:"boolean"},ne={kind:"color"},ie={kind:"object"},oe={kind:"value"},se={kind:"collator"},ae={kind:"formatted"},le={kind:"resolvedImage"};function ue(t,e){return{kind:"array",itemType:t,N:e}}function ce(t){if("array"===t.kind){const e=ce(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const he=[$t,te,ee,re,ne,ae,ie,ue(oe),le];function fe(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!fe(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of he)if(!fe(t,e))return null}return`Expected ${ce(t)} but found ${ce(e)} instead.`}function de(t,e){return e.some((e=>e.kind===t.kind))}function pe(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}function me(t){var e={exports:{}};return t(e,e.exports),e.exports}var ge=me((function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function s(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,a=t.replace(/ /g,"").toLowerCase();if(a in r)return r[a].slice();if("#"===a[0])return 4===a.length?(e=parseInt(a.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===a.length&&(e=parseInt(a.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=a.indexOf("("),u=a.indexOf(")");if(-1!==l&&u+1===a.length){var c=a.substr(0,l),h=a.substr(l+1,u-(l+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),f];case"hsla":if(4!==h.length)return null;f=o(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,p=o(h[1]),m=o(h[2]),g=m<=.5?m*(p+1):m+p-m*p,y=2*m-g;return[n(255*s(y,g,d+1/3)),n(255*s(y,g,d)),n(255*s(y,g,d-1/3)),f];default:return null}}return null}}catch(t){}}));class ye{constructor(t,e,r,n=1){this.r=t,this.g=e,this.b=r,this.a=n}static parse(t){if(!t)return;if(t instanceof ye)return t;if("string"!=typeof t)return;const e=ge.parseCSSColor(t);return e?new ye(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,r,n]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(r)},${n})`}toArray(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]}toArray01(){const{r:t,g:e,b:r,a:n}=this;return 0===n?[0,0,0,0]:[t/n,e/n,r/n,n]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:r,a:n}=this;return[t,e,r,n]}}ye.black=new ye(0,0,0,1),ye.white=new ye(1,1,1,1),ye.transparent=new ye(0,0,0,0),ye.red=new ye(1,0,0,1),ye.blue=new ye(0,0,1,1);var _e=ye;class ve{constructor(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class be{constructor(t,e,r,n,i){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=i}}class we{constructor(t){this.sections=t}static fromString(t){return new we([new be(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof we?t:we.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const r={};e.fontStack&&(r["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(r["font-scale"]=e.scale),e.textColor&&(r["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(r)}return t}}class xe{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new xe({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Ee(t,e,r,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Se(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof _e)return!0;if(t instanceof ve)return!0;if(t instanceof we)return!0;if(t instanceof xe)return!0;if(Array.isArray(t)){for(const e of t)if(!Se(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Se(t[e]))return!1;return!0}return!1}function Me(t){if(null===t)return $t;if("string"==typeof t)return ee;if("boolean"==typeof t)return re;if("number"==typeof t)return te;if(t instanceof _e)return ne;if(t instanceof ve)return se;if(t instanceof we)return ae;if(t instanceof xe)return le;if(Array.isArray(t)){const e=t.length;let r;for(const n of t){const t=Me(n);if(r){if(r===t)continue;r=oe;break}r=t}return ue(r||oe,e)}return ie}function Te(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof _e||t instanceof we||t instanceof xe?t.toString():JSON.stringify(t)}class Ae{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Se(t[1]))return e.error("invalid value");const r=t[1];let n=Me(r);const i=e.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new Ae(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof _e?["rgba"].concat(this.value.toArray()):this.value instanceof we?this.value.serialize():this.value}}var Ce=Ae,Ie=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const ke={string:ee,number:te,boolean:re,object:ie};class Re{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let r,n=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const r=t[1];if("string"!=typeof r||!(r in ke)||"object"===r)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=ke[r],n++}else i=oe;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}r=ue(i,o)}else r=ke[i];const o=[];for(;n<t.length;n++){const r=e.parse(t[n],n,oe);if(!r)return null;o.push(r)}return new Re(r,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const r=this.args[e].evaluate(t);if(!fe(this.type,Me(r)))return r;if(e===this.args.length-1)throw new Ie(`Expected value to be of type ${ce(this.type)}, but found ${ce(Me(r))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);const n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((t=>t.serialize())))}}var Be=Re;class Pe{constructor(t){this.type=ae,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");const n=[];let i=!1;for(let o=1;o<=t.length-1;++o){const r=t[o];if(i&&"object"==typeof r&&!Array.isArray(r)){i=!1;let t=null;if(r["font-scale"]&&(t=e.parse(r["font-scale"],1,te),!t))return null;let o=null;if(r["text-font"]&&(o=e.parse(r["text-font"],1,ue(ee)),!o))return null;let s=null;if(r["text-color"]&&(s=e.parse(r["text-color"],1,ne),!s))return null;const a=n[n.length-1];a.scale=t,a.font=o,a.textColor=s}else{const r=e.parse(t[o],1,oe);if(!r)return null;const s=r.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:r,scale:null,font:null,textColor:null})}}return new Pe(n)}evaluate(t){return new we(this.sections.map((e=>{const r=e.content.evaluate(t);return Me(r)===le?new be("",r,null,null,null):new be(Te(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const r={};e.scale&&(r["font-scale"]=e.scale.serialize()),e.font&&(r["text-font"]=e.font.serialize()),e.textColor&&(r["text-color"]=e.textColor.serialize()),t.push(r)}return t}}class De{constructor(t){this.type=le,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,ee);return r?new De(r):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),r=xe.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Le={"to-boolean":re,"to-color":ne,"to-number":te,"to-string":ee};class Oe{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");const n=Le[r],i=[];for(let o=1;o<t.length;o++){const r=e.parse(t[o],o,oe);if(!r)return null;i.push(r)}return new Oe(n,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,r;for(const n of this.args){if(e=n.evaluate(t),r=null,e instanceof _e)return e;if("string"==typeof e){const r=t.parseColor(e);if(r)return r}else if(Array.isArray(e)&&(r=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Ee(e[0],e[1],e[2],e[3]),!r))return new _e(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Ie(r||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const r of this.args){if(e=r.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new Ie(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?we.fromString(Te(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?xe.fromString(Te(this.args[0].evaluate(t))):Te(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Pe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new De(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}var Ne=Oe;const ze=["Unknown","Point","LineString","Polygon"];var Ue=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ze[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:n}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*e-t[0])+this.featureDistanceData.bearing[1]*(n*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=_e.parse(t)),e}};class je{constructor(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const r=t[0],n=je.definitions[r];if(!n)return e.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let a=null;for(const[l,u]of s){a=new dr(e.registry,e.path,null,e.scope);const n=[];let o=!1;for(let e=1;e<t.length;e++){const r=t[e],i=Array.isArray(l)?l[e-1]:l.type,s=a.parse(r,1+n.length,i);if(!s){o=!0;break}n.push(s)}if(!o)if(Array.isArray(l)&&l.length!==n.length)a.error(`Expected ${l.length} arguments, but found ${n.length} instead.`);else{for(let t=0;t<n.length;t++){const e=Array.isArray(l)?l[t]:l.type,r=n[t];a.concat(t+1).checkSubtype(e,r.type)}if(0===a.errors.length)return new je(r,i,u,n)}}if(1===s.length)e.errors.push(...a.errors);else{const r=(s.length?s:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(ce).join(", ")})`:`(${ce(e.type)}...)`;var e})).join(" | "),n=[];for(let i=1;i<t.length;i++){const r=e.parse(t[i],1+n.length);if(!r)return null;n.push(ce(r.type))}e.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`)}return null}static register(t,e){je.definitions=e;for(const r in e)t[r]=je}}var Fe=je;class Ve{constructor(t,e,r){this.type=se,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,re);if(!n)return null;const i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,re);if(!i)return null;let o=null;return r.locale&&(o=e.parse(r.locale,1,ee),!o)?null:new Ve(n,i,o)}evaluate(t){return new ve(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Ge=8192;function qe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Ke(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function We(t,e){const r=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(r*i*Ge),Math.round(n*i*Ge)]}function Ze(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],o=t[0]-r[0],s=t[1]-r[1];return n*s-o*i==0&&n*o<=0&&i*s<=0}function He(t,e){let r=!1;for(let s=0,a=e.length;s<a;s++){const a=e[s];for(let e=0,s=a.length;e<s-1;e++){if(Ze(t,a[e],a[e+1]))return!1;(i=a[e])[1]>(n=t)[1]!=(o=a[e+1])[1]>n[1]&&n[0]<(o[0]-i[0])*(n[1]-i[1])/(o[1]-i[1])+i[0]&&(r=!r)}}var n,i,o;return r}function Qe(t,e){for(let r=0;r<e.length;r++)if(He(t,e[r]))return!0;return!1}function Xe(t,e,r,n){const i=n[0]-r[0],o=n[1]-r[1],s=(t[0]-r[0])*o-i*(t[1]-r[1]),a=(e[0]-r[0])*o-i*(e[1]-r[1]);return s>0&&a<0||s<0&&a>0}function Ye(t,e,r){for(const u of r)for(let r=0;r<u.length-1;++r)if(0!=(a=[(s=u[r+1])[0]-(o=u[r])[0],s[1]-o[1]])[0]*(l=[(i=e)[0]-(n=t)[0],i[1]-n[1]])[1]-a[1]*l[0]&&Xe(n,i,o,s)&&Xe(o,s,n,i))return!0;var n,i,o,s,a,l;return!1}function Je(t,e){for(let r=0;r<t.length;++r)if(!He(t[r],e))return!1;for(let r=0;r<t.length-1;++r)if(Ye(t[r],t[r+1],e))return!1;return!0}function $e(t,e){for(let r=0;r<e.length;r++)if(Je(t,e[r]))return!0;return!1}function tr(t,e,r){const n=[];for(let i=0;i<t.length;i++){const o=[];for(let n=0;n<t[i].length;n++){const s=We(t[i][n],r);qe(e,s),o.push(s)}n.push(o)}return n}function er(t,e,r){const n=[];for(let i=0;i<t.length;i++){const o=tr(t[i],e,r);n.push(o)}return n}function rr(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){const e=.5*n;let i=t[0]-r[0]>e?-n:r[0]-t[0]>e?n:0;0===i&&(i=t[0]-r[2]>e?-n:r[2]-t[0]>e?n:0),t[0]+=i}qe(e,t)}function nr(t,e,r,n){const i=Math.pow(2,n.z)*Ge,o=[n.x*Ge,n.y*Ge],s=[];if(!t)return s;for(const a of t)for(const t of a){const n=[t.x+o[0],t.y+o[1]];rr(n,e,r,i),s.push(n)}return s}function ir(t,e,r,n){const i=Math.pow(2,n.z)*Ge,o=[n.x*Ge,n.y*Ge],s=[];if(!t)return s;for(const l of t){const t=[];for(const r of l){const n=[r.x+o[0],r.y+o[1]];qe(e,n),t.push(n)}s.push(t)}if(e[2]-e[0]<=i/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const t of s)for(const n of t)rr(n,e,r,i)}var a;return s}class or{constructor(t,e){this.type=re,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Se(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const r=e.features[t].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new or(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new or(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new or(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=tr(e.coordinates,n,i),s=nr(t.geometry(),r,n,i);if(!Ke(r,n))return!1;for(const t of s)if(!He(t,o))return!1}if("MultiPolygon"===e.type){const o=er(e.coordinates,n,i),s=nr(t.geometry(),r,n,i);if(!Ke(r,n))return!1;for(const t of s)if(!Qe(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){const o=tr(e.coordinates,n,i),s=ir(t.geometry(),r,n,i);if(!Ke(r,n))return!1;for(const t of s)if(!Je(t,o))return!1}if("MultiPolygon"===e.type){const o=er(e.coordinates,n,i),s=ir(t.geometry(),r,n,i);if(!Ke(r,n))return!1;for(const t of s)if(!$e(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var sr=or;function ar(t){if(t instanceof Fe){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof sr)return!1;let e=!0;return t.eachChild((t=>{e&&!ar(t)&&(e=!1)})),e}function lr(t){if(t instanceof Fe&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!lr(t)&&(e=!1)})),e}function ur(t,e){if(t instanceof Fe&&e.indexOf(t.name)>=0)return!1;let r=!0;return t.eachChild((t=>{r&&!ur(t,e)&&(r=!1)})),r}class cr{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const r=t[1];return e.scope.has(r)?new cr(r,e.scope.get(r)):e.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var hr=cr;class fr{constructor(t,e=[],r,n=new Jt,i=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=n,this.errors=i,this.expectedType=r}parse(t,e,r,n,i={}){return e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)}_parse(t,e){function r(t,e,r){return"assert"===r?new Be(e,[t]):"coerce"===r?new Ne(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,i=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else n=r(n,t,e.typeAnnotation||"coerce");else n=r(n,t,e.typeAnnotation||"assert")}if(!(n instanceof Ce)&&"resolvedImage"!==n.type.kind&&pr(n)){const e=new Ue;try{n=new Ce(n.type,n.evaluate(e))}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,r){const n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new fr(this.registry,n,e||null,i,this.errors)}error(t,...e){const r=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new Xt(r,t))}checkSubtype(t,e){const r=fe(t,e);return r&&this.error(r),r}}var dr=fr;function pr(t){if(t instanceof hr)return pr(t.boundExpression);if(t instanceof Fe&&"error"===t.name)return!1;if(t instanceof Ve)return!1;if(t instanceof sr)return!1;const e=t instanceof Ne||t instanceof Be;let r=!0;return t.eachChild((t=>{r=e?r&&pr(t):r&&t instanceof Ce})),!!r&&ar(t)&&ur(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function mr(t,e){const r=t.length-1;let n,i,o=0,s=r,a=0;for(;o<=s;)if(a=Math.floor((o+s)/2),n=t[a],i=t[a+1],n<=e){if(a===r||e<i)return a;o=a+1}else{if(!(n>e))throw new Ie("Input is not a number.");s=a-1}return 0}class gr{constructor(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[n,i]of r)this.labels.push(n),this.outputs.push(i)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const r=e.parse(t[1],1,te);if(!r)return null;const n=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let o=1;o<t.length;o+=2){const r=1===o?-1/0:t[o],s=t[o+1],a=o,l=o+1;if("number"!=typeof r)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(n.length&&n[n.length-1][0]>=r)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const u=e.parse(s,l,i);if(!u)return null;i=i||u.type,n.push([r,u])}return new gr(i,r,n)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[mr(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var yr=gr;function _r(t,e,r){return t*(1-r)+e*r}function vr(t,e,r){return t.map(((t,n)=>_r(t,e[n],r)))}var br=Object.freeze({__proto__:null,number:_r,color:function(t,e,r){return new _e(_r(t.r,e.r,r),_r(t.g,e.g,r),_r(t.b,e.b,r),_r(t.a,e.a,r))},array:vr});const wr=.95047,xr=1.08883,Er=4/29,Sr=6/29,Mr=3*Sr*Sr,Tr=Math.PI/180,Ar=180/Math.PI;function Cr(t){return t>.008856451679035631?Math.pow(t,1/3):t/Mr+Er}function Ir(t){return t>Sr?t*t*t:Mr*(t-Er)}function kr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Rr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Br(t){const e=Rr(t.r),r=Rr(t.g),n=Rr(t.b),i=Cr((.4124564*e+.3575761*r+.1804375*n)/wr),o=Cr((.2126729*e+.7151522*r+.072175*n)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Cr((.0193339*e+.119192*r+.9503041*n)/xr)),alpha:t.a}}function Pr(t){let e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*Ir(e),r=wr*Ir(r),n=xr*Ir(n),new _e(kr(3.2404542*r-1.5371385*e-.4985314*n),kr(-.969266*r+1.8760108*e+.041556*n),kr(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function Dr(t,e,r){const n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}const Lr={forward:Br,reverse:Pr,interpolate:function(t,e,r){return{l:_r(t.l,e.l,r),a:_r(t.a,e.a,r),b:_r(t.b,e.b,r),alpha:_r(t.alpha,e.alpha,r)}}},Or={forward:function(t){const{l:e,a:r,b:n}=Br(t),i=Math.atan2(n,r)*Ar;return{h:i<0?i+360:i,c:Math.sqrt(r*r+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Tr,r=t.c;return Pr({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:Dr(t.h,e.h,r),c:_r(t.c,e.c,r),l:_r(t.l,e.l,r),alpha:_r(t.alpha,e.alpha,r)}}};var Nr=Object.freeze({__proto__:null,lab:Lr,hcl:Or});class zr{constructor(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[o,s]of i)this.labels.push(o),this.outputs.push(s)}static interpolationFactor(t,e,n,i){let o=0;if("exponential"===t.name)o=Ur(e,t.base,n,i);else if("linear"===t.name)o=Ur(e,1,n,i);else if("cubic-bezier"===t.name){const s=t.controlPoints;o=new r(s[0],s[1],s[2],s[3]).solve(Ur(e,1,n,i))}return o}static parse(t,e){let[r,n,i,...o]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t}}else{if("cubic-bezier"!==n[0])return e.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const t=n.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,te),!i)return null;const s=[];let a=null;"interpolate-hcl"===r||"interpolate-lab"===r?a=ne:e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let l=0;l<o.length;l+=2){const t=o[l],r=o[l+1],n=l+3,i=l+4;if("number"!=typeof t)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(s.length&&s[s.length-1][0]>=t)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',n);const u=e.parse(r,i,a);if(!u)return null;a=a||u.type,s.push([t,u])}return"number"===a.kind||"color"===a.kind||"array"===a.kind&&"number"===a.itemType.kind&&"number"==typeof a.N?new zr(a,r,n,i,s):e.error(`Type ${ce(a)} is not interpolatable.`)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);const o=mr(e,n),s=zr.interpolationFactor(this.interpolation,n,e[o],e[o+1]),a=r[o].evaluate(t),l=r[o+1].evaluate(t);return"interpolate"===this.operator?br[this.type.kind.toLowerCase()](a,l,s):"interpolate-hcl"===this.operator?Or.reverse(Or.interpolate(Or.forward(a),Or.forward(l),s)):Lr.reverse(Lr.interpolate(Lr.forward(a),Lr.forward(l),s))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e}}function Ur(t,e,r,n){const i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var jr=zr;class Fr{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let r=null;const n=e.expectedType;n&&"value"!==n.kind&&(r=n);const i=[];for(const s of t.slice(1)){const t=e.parse(s,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!t)return null;r=r||t.type,i.push(t)}const o=n&&i.some((t=>fe(n,t.type)));return new Fr(o?oe:r,i)}evaluate(t){let e,r=null,n=0;for(const i of this.args){if(n++,r=i.evaluate(t),r&&r instanceof xe&&!r.available&&(e||(e=r),r=null,n===this.args.length))return e;if(null!==r)break}return r}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var Vr=Fr;class Gr{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let i=1;i<t.length-1;i+=2){const n=t[i];if("string"!=typeof n)return e.error(`Expected string, but found ${typeof n} instead.`,i);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=e.parse(t[i+1],i+1);if(!o)return null;r.push([n,o])}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return n?new Gr(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,r]of this.bindings)t.push(e,r.serialize());return t.push(this.result.serialize()),t}}var qr=Gr;class Kr{constructor(t,e,r){this.type=t,this.index=e,this.input=r}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,te),n=e.parse(t[2],2,ue(e.expectedType||oe));return r&&n?new Kr(n.type.itemType,r,n):null}evaluate(t){const e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new Ie(`Array index out of bounds: ${e} < 0.`);if(e>=r.length)throw new Ie(`Array index out of bounds: ${e} > ${r.length-1}.`);if(e!==Math.floor(e))throw new Ie(`Array index must be an integer, but found ${e} instead.`);return r[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Wr=Kr;class Zr{constructor(t,e){this.type=re,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,oe),n=e.parse(t[2],2,oe);return r&&n?de(r.type,[re,ee,te,$t,oe])?new Zr(r,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ce(r.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(null==r)return!1;if(!pe(e,["boolean","string","number","null"]))throw new Ie(`Expected first argument to be of type boolean, string, number or null, but found ${ce(Me(e))} instead.`);if(!pe(r,["string","array"]))throw new Ie(`Expected second argument to be of type array or string, but found ${ce(Me(r))} instead.`);return r.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Hr=Zr;class Qr{constructor(t,e,r){this.type=te,this.needle=t,this.haystack=e,this.fromIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,oe),n=e.parse(t[2],2,oe);if(!r||!n)return null;if(!de(r.type,[re,ee,te,$t,oe]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ce(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,te);return i?new Qr(r,n,i):null}return new Qr(r,n)}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!pe(e,["boolean","string","number","null"]))throw new Ie(`Expected first argument to be of type boolean, string, number or null, but found ${ce(Me(e))} instead.`);if(!pe(r,["string","array"]))throw new Ie(`Expected second argument to be of type array or string, but found ${ce(Me(r))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(t);return r.indexOf(e,n)}return r.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Xr=Qr;class Yr{constructor(t,e,r,n,i,o){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i={},o=[];for(let l=2;l<t.length-1;l+=2){let s=t[l];const a=t[l+1];Array.isArray(s)||(s=[s]);const u=e.concat(l);if(0===s.length)return u.error("Expected at least one branch label.");for(const t of s){if("number"!=typeof t&&"string"!=typeof t)return u.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,Me(t)))return null}else r=Me(t);if(void 0!==i[String(t)])return u.error("Branch labels must be unique.");i[String(t)]=o.length}const c=e.parse(a,l,n);if(!c)return null;n=n||c.type,o.push(c)}const s=e.parse(t[1],1,oe);if(!s)return null;const a=e.parse(t[t.length-1],t.length-1,n);return a?"value"!==s.type.kind&&e.concat(1).checkSubtype(r,s.type)?null:new Yr(r,n,s,i,o,a):null}evaluate(t){const e=this.input.evaluate(t);return(Me(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),r=[],n={};for(const o of e){const t=n[this.cases[o]];void 0===t?(n[this.cases[o]]=r.length,r.push([this.cases[o],[o]])):r[t][1].push(o)}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[o,s]of r)t.push(1===s.length?i(s[0]):s.map(i)),t.push(this.outputs[o].serialize());return t.push(this.otherwise.serialize()),t}}var Jr=Yr;class $r{constructor(t,e,r){this.type=t,this.branches=e,this.otherwise=r}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const n=[];for(let o=1;o<t.length-1;o+=2){const i=e.parse(t[o],o,re);if(!i)return null;const s=e.parse(t[o+1],o+1,r);if(!s)return null;n.push([i,s]),r=r||s.type}const i=e.parse(t[t.length-1],t.length-1,r);return i?new $r(r,n,i):null}evaluate(t){for(const[e,r]of this.branches)if(e.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,r]of this.branches)t(e),t(r);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var tn=$r;class en{constructor(t,e,r,n){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,oe),n=e.parse(t[2],2,te);if(!r||!n)return null;if(!de(r.type,[ue(oe),ee,oe]))return e.error(`Expected first argument to be of type array or string, but found ${ce(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,te);return i?new en(r.type,r,n,i):null}return new en(r.type,r,n)}evaluate(t){const e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!pe(e,["string","array"]))throw new Ie(`Expected first argument to be of type array or string, but found ${ce(Me(e))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(r,n)}return e.slice(r)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var rn=en;function nn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function on(t,e,r,n){return 0===n.compare(e,r)}function sn(t,e,r){const n="=="!==t&&"!="!==t;return class i{constructor(t,e,r){this.type=re,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const r=t[0];let o=e.parse(t[1],1,oe);if(!o)return null;if(!nn(r,o.type))return e.concat(1).error(`"${r}" comparisons are not supported for type '${ce(o.type)}'.`);let s=e.parse(t[2],2,oe);if(!s)return null;if(!nn(r,s.type))return e.concat(2).error(`"${r}" comparisons are not supported for type '${ce(s.type)}'.`);if(o.type.kind!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error(`Cannot compare types '${ce(o.type)}' and '${ce(s.type)}'.`);n&&("value"===o.type.kind&&"value"!==s.type.kind?o=new Be(s.type,[o]):"value"!==o.type.kind&&"value"===s.type.kind&&(s=new Be(o.type,[s])));let a=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error("Cannot use collator to compare non-string types.");if(a=e.parse(t[3],3,se),!a)return null}return new i(o,s,a)}evaluate(i){const o=this.lhs.evaluate(i),s=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){const e=Me(o),r=Me(s);if(e.kind!==r.kind||"string"!==e.kind&&"number"!==e.kind)throw new Ie(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=Me(o),r=Me(s);if("string"!==t.kind||"string"!==r.kind)return e(i,o,s)}return this.collator?r(i,o,s,this.collator.evaluate(i)):e(i,o,s)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const an=sn("==",(function(t,e,r){return e===r}),on),ln=sn("!=",(function(t,e,r){return e!==r}),(function(t,e,r,n){return!on(0,e,r,n)})),un=sn("<",(function(t,e,r){return e<r}),(function(t,e,r,n){return n.compare(e,r)<0})),cn=sn(">",(function(t,e,r){return e>r}),(function(t,e,r,n){return n.compare(e,r)>0})),hn=sn("<=",(function(t,e,r){return e<=r}),(function(t,e,r,n){return n.compare(e,r)<=0})),fn=sn(">=",(function(t,e,r){return e>=r}),(function(t,e,r,n){return n.compare(e,r)>=0}));class dn{constructor(t,e,r,n,i,o){this.type=ee,this.number=t,this.locale=e,this.currency=r,this.unit=n,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,te);if(!r)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let i=null;if(n.locale&&(i=e.parse(n.locale,1,ee),!i))return null;let o=null;if(n.currency&&(o=e.parse(n.currency,1,ee),!o))return null;let s=null;if(n.unit&&(s=e.parse(n.unit,1,ee),!s))return null;let a=null;if(n["min-fraction-digits"]&&(a=e.parse(n["min-fraction-digits"],1,te),!a))return null;let l=null;return n["max-fraction-digits"]&&(l=e.parse(n["max-fraction-digits"],1,te),!l)?null:new dn(r,i,o,s,a,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class pn{constructor(t){this.type=te,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error(`Expected argument of type string or array, but found ${ce(r.type)} instead.`):new pn(r):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Ie(`Expected value to be of type string or array, but found ${ce(Me(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const mn={"==":an,"!=":ln,">":cn,"<":un,">=":fn,"<=":hn,array:Be,at:Wr,boolean:Be,case:tn,coalesce:Vr,collator:Ve,format:Pe,image:De,in:Hr,"index-of":Xr,interpolate:jr,"interpolate-hcl":jr,"interpolate-lab":jr,length:pn,let:qr,literal:Ce,match:Jr,number:Be,"number-format":dn,object:Be,slice:rn,step:yr,string:Be,"to-boolean":Ne,"to-color":Ne,"to-number":Ne,"to-string":Ne,var:hr,within:sr};function gn(t,[e,r,n,i]){e=e.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);const o=i?i.evaluate(t):1,s=Ee(e,r,n,o);if(s)throw new Ie(s);return new _e(e/255*o,r/255*o,n/255*o,o)}function yn(t,e){return t in e}function _n(t,e){const r=e[t];return void 0===r?null:r}function vn(t){return{type:t}}Fe.register(mn,{error:[{kind:"error"},[ee],(t,[e])=>{throw new Ie(e.evaluate(t))}],typeof:[ee,[oe],(t,[e])=>ce(Me(e.evaluate(t)))],"to-rgba":[ue(te,4),[ne],(t,[e])=>e.evaluate(t).toArray()],rgb:[ne,[te,te,te],gn],rgba:[ne,[te,te,te,te],gn],has:{type:re,overloads:[[[ee],(t,[e])=>yn(e.evaluate(t),t.properties())],[[ee,ie],(t,[e,r])=>yn(e.evaluate(t),r.evaluate(t))]]},get:{type:oe,overloads:[[[ee],(t,[e])=>_n(e.evaluate(t),t.properties())],[[ee,ie],(t,[e,r])=>_n(e.evaluate(t),r.evaluate(t))]]},"feature-state":[oe,[ee],(t,[e])=>_n(e.evaluate(t),t.featureState||{})],properties:[ie,[],t=>t.properties()],"geometry-type":[ee,[],t=>t.geometryType()],id:[oe,[],t=>t.id()],zoom:[te,[],t=>t.globals.zoom],pitch:[te,[],t=>t.globals.pitch||0],"distance-from-center":[te,[],t=>t.distanceFromCenter()],"heatmap-density":[te,[],t=>t.globals.heatmapDensity||0],"line-progress":[te,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[te,[],t=>t.globals.skyRadialProgress||0],accumulated:[oe,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[te,vn(te),(t,e)=>{let r=0;for(const n of e)r+=n.evaluate(t);return r}],"*":[te,vn(te),(t,e)=>{let r=1;for(const n of e)r*=n.evaluate(t);return r}],"-":{type:te,overloads:[[[te,te],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[te],(t,[e])=>-e.evaluate(t)]]},"/":[te,[te,te],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[te,[te,te],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[te,[],()=>Math.LN2],pi:[te,[],()=>Math.PI],e:[te,[],()=>Math.E],"^":[te,[te,te],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[te,[te],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[te,[te],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[te,[te],(t,[e])=>Math.log(e.evaluate(t))],log2:[te,[te],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[te,[te],(t,[e])=>Math.sin(e.evaluate(t))],cos:[te,[te],(t,[e])=>Math.cos(e.evaluate(t))],tan:[te,[te],(t,[e])=>Math.tan(e.evaluate(t))],asin:[te,[te],(t,[e])=>Math.asin(e.evaluate(t))],acos:[te,[te],(t,[e])=>Math.acos(e.evaluate(t))],atan:[te,[te],(t,[e])=>Math.atan(e.evaluate(t))],min:[te,vn(te),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[te,vn(te),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[te,[te],(t,[e])=>Math.abs(e.evaluate(t))],round:[te,[te],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[te,[te],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[te,[te],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[re,[ee,oe],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[re,[oe],(t,[e])=>t.id()===e.value],"filter-type-==":[re,[ee],(t,[e])=>t.geometryType()===e.value],"filter-<":[re,[ee,oe],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[re,[oe],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<n}],"filter->":[re,[ee,oe],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[re,[oe],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>n}],"filter-<=":[re,[ee,oe],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[re,[oe],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<=n}],"filter->=":[re,[ee,oe],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[re,[oe],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>=n}],"filter-has":[re,[oe],(t,[e])=>e.value in t.properties()],"filter-has-id":[re,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[re,[ue(ee)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[re,[ue(oe)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[re,[ee,ue(oe)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[re,[ee,ue(oe)],(t,[e,r])=>function(t,e,r,n){for(;r<=n;){const i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:re,overloads:[[[re,re],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[vn(re),(t,e)=>{for(const r of e)if(!r.evaluate(t))return!1;return!0}]]},any:{type:re,overloads:[[[re,re],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[vn(re),(t,e)=>{for(const r of e)if(r.evaluate(t))return!0;return!1}]]},"!":[re,[re],(t,[e])=>!e.evaluate(t)],"is-supported-script":[re,[ee],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return!r||r(e.evaluate(t))}],upcase:[ee,[ee],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[ee,[ee],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[ee,vn(oe),(t,e)=>e.map((e=>Te(e.evaluate(t)))).join("")],"resolved-locale":[ee,[se],(t,[e])=>e.evaluate(t).resolvedLocale()]});var bn=mn;function wn(t){return{result:"success",value:t}}function xn(t){return{result:"error",value:t}}function En(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Sn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Mn(t){return!!t.expression&&t.expression.interpolated}function Tn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function An(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Cn(t){return t}function In(t,e){const r="color"===e.type,n=t.stops&&"object"==typeof t.stops[0][0],i=n||!(n||void 0!==t.property),o=t.type||(Mn(e)?"exponential":"interval");if(r&&((t=Wt({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],_e.parse(t[1])]))),t.default=_e.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Nr[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let s,a,l;if("exponential"===o)s=Pn;else if("interval"===o)s=Bn;else if("categorical"===o){s=Rn,a=Object.create(null);for(const e of t.stops)a[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);s=Dn}if(n){const r={},n=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],o=i[0].zoom;void 0===r[o]&&(r[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},n.push(o)),r[o].stops.push([i[0].value,i[1]])}const i=[];for(const t of n)i.push([r[t].zoom,In(r[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:jr.interpolationFactor.bind(void 0,o),zoomStops:i.map((t=>t[0])),evaluate:({zoom:r},n)=>Pn({stops:i,base:t.base},e,r).evaluate(r,n)}}if(i){const r="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:jr.interpolationFactor.bind(void 0,r),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:r})=>s(t,e,r,a,l)}}return{kind:"source",evaluate(r,n){const i=n&&n.properties?n.properties[t.property]:void 0;return void 0===i?kn(t.default,e.default):s(t,e,i,a,l)}}}function kn(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function Rn(t,e,r,n,i){return kn(typeof r===i?n[r]:void 0,t.default,e.default)}function Bn(t,e,r){if("number"!==Tn(r))return kn(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];const i=mr(t.stops.map((t=>t[0])),r);return t.stops[i][1]}function Pn(t,e,r){const n=void 0!==t.base?t.base:1;if("number"!==Tn(r))return kn(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];const o=mr(t.stops.map((t=>t[0])),r),s=function(t,e,r,n){const i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[o][0],t.stops[o+1][0]),a=t.stops[o][1],l=t.stops[o+1][1];let u=br[e.type]||Cn;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Nr[t.colorSpace];u=(t,r)=>e.reverse(e.interpolate(e.forward(t),e.forward(r),s))}return"function"==typeof a.evaluate?{evaluate(...t){const e=a.evaluate.apply(void 0,t),r=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==r)return u(e,r,s)}}:u(a,l,s)}function Dn(t,e,r){return"color"===e.type?r=_e.parse(r):"formatted"===e.type?r=we.fromString(r.toString()):"resolvedImage"===e.type?r=xe.fromString(r.toString()):Tn(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),kn(r,t.default,e.default)}class Ln{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Ue,this._defaultValue=e?function(t){return"color"===t.type&&(An(t.default)||Array.isArray(t.default))?new _e(0,0,0,0):"color"===t.type?_e.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,r,n,i,o,s,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=a||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,r,n,i,o,s,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=s||null,this._evaluator.featureDistanceData=a||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Ie(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function On(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in bn}function Nn(t,e){const r=new dr(bn,[],e?function(t){const e={color:ne,string:ee,number:te,enum:ee,boolean:re,formatted:ae,resolvedImage:le};return"array"===t.type?ue(e[t.value]||oe,t.length):e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?wn(new Ln(n,e)):xn(r.errors)}class zn{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!lr(e.expression)}evaluateWithoutErrorHandling(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)}evaluate(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)}}class Un{constructor(t,e,r,n){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!lr(e.expression),this.interpolationType=n}evaluateWithoutErrorHandling(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)}evaluate(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)}interpolationFactor(t,e,r){return this.interpolationType?jr.interpolationFactor(this.interpolationType,t,e,r):0}}function jn(t,e){if("error"===(t=Nn(t,e)).result)return t;const r=t.value.expression,n=ar(r);if(!n&&!En(e))return xn([new Xt("","data expressions not supported")]);const i=ur(r,["zoom","pitch","distance-from-center"]);if(!i&&!Sn(e))return xn([new Xt("","zoom expressions not supported")]);const o=Vn(r);return o||i?o instanceof Xt?xn([o]):o instanceof jr&&!Mn(e)?xn([new Xt("",'"interpolate" expressions cannot be used with this property')]):wn(o?new Un(n?"camera":"composite",t.value,o.labels,o instanceof jr?o.interpolation:void 0):new zn(n?"constant":"source",t.value)):xn([new Xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fn{constructor(t,e){this._parameters=t,this._specification=e,Wt(this,In(this._parameters,this._specification))}static deserialize(t){return new Fn(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Vn(t){let e=null;if(t instanceof qr)e=Vn(t.result);else if(t instanceof Vr){for(const r of t.args)if(e=Vn(r),e)break}else(t instanceof yr||t instanceof jr)&&t.input instanceof Fe&&"zoom"===t.input.name&&(e=t);return e instanceof Xt||t.eachChild((t=>{const r=Vn(t);r instanceof Xt?e=r:!e&&r?e=new Xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Xt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}class Gn{constructor(t,e,r,n){this.message=(t?`${t}: `:"")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)}}function qn(t){const e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,s=t.styleSpec;let a=[];const l=Tn(r);if("object"!==l)return[new Gn(e,r,`object expected, ${l} found`)];for(const u in r){const t=u.split(".")[0],l=n[t]||n["*"];let c;i[t]?c=i[t]:n[t]?c=Ei:i["*"]?c=i["*"]:n["*"]&&(c=Ei),c?a=a.concat(c({key:(e?`${e}.`:e)+u,value:r[u],valueSpec:l,style:o,styleSpec:s,object:r,objectKey:u},r)):a.push(new Gn(e,r[u],`unknown property "${u}"`))}for(const u in n)i[u]||n[u].required&&void 0===n[u].default&&void 0===r[u]&&a.push(new Gn(e,r,`missing required property "${u}"`));return a}function Kn(t){const e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,o=t.key,s=t.arrayElementValidator||Ei;if("array"!==Tn(e))return[new Gn(o,e,`array expected, ${Tn(e)} found`)];if(r.length&&e.length!==r.length)return[new Gn(o,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new Gn(o,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let a={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};i.$version<7&&(a.function=r.function),"object"===Tn(r.value)&&(a=r.value);let l=[];for(let u=0;u<e.length;u++)l=l.concat(s({array:e,arrayIndex:u,value:e[u],valueSpec:a,style:n,styleSpec:i,key:`${o}[${u}]`}));return l}function Wn(t){const e=t.key,r=t.value,n=t.valueSpec;let i=Tn(r);if("number"===i&&r!=r&&(i="NaN"),"number"!==i)return[new Gn(e,r,`number expected, ${i} found`)];if("minimum"in n){let i=n.minimum;if("array"===Tn(n.minimum)&&(i=n.minimum[t.arrayIndex]),r<i)return[new Gn(e,r,`${r} is less than the minimum value ${i}`)]}if("maximum"in n){let i=n.maximum;if("array"===Tn(n.maximum)&&(i=n.maximum[t.arrayIndex]),r>i)return[new Gn(e,r,`${r} is greater than the maximum value ${i}`)]}return[]}function Zn(t){const e=t.valueSpec,r=Zt(t.value.type);let n,i,o,s={};const a="categorical"!==r&&void 0===t.value.property,l=!a,u="array"===Tn(t.value.stops)&&"array"===Tn(t.value.stops[0])&&"object"===Tn(t.value.stops[0][0]),c=qn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===r)return[new Gn(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const n=t.value;return e=e.concat(Kn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Tn(n)&&0===n.length&&e.push(new Gn(t.key,n,"array must have at least one stop")),e},default:function(t){return Ei({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===r&&a&&c.push(new Gn(t.key,t.value,'missing required property "property"')),"identity"===r||t.value.stops||c.push(new Gn(t.key,t.value,'missing required property "stops"')),"exponential"===r&&t.valueSpec.expression&&!Mn(t.valueSpec)&&c.push(new Gn(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!En(t.valueSpec)?c.push(new Gn(t.key,t.value,"property functions not supported")):a&&!Sn(t.valueSpec)&&c.push(new Gn(t.key,t.value,"zoom functions not supported"))),"categorical"!==r&&!u||void 0!==t.value.property||c.push(new Gn(t.key,t.value,'"property" property is required')),c;function h(t){let r=[];const n=t.value,a=t.key;if("array"!==Tn(n))return[new Gn(a,n,`array expected, ${Tn(n)} found`)];if(2!==n.length)return[new Gn(a,n,`array length 2 expected, length ${n.length} found`)];if(u){if("object"!==Tn(n[0]))return[new Gn(a,n,`object expected, ${Tn(n[0])} found`)];if(void 0===n[0].zoom)return[new Gn(a,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new Gn(a,n,"object stop key must have value")];const e=Zt(n[0].zoom);if("number"!=typeof e)return[new Gn(a,n[0].zoom,"stop zoom values must be numbers")];if(o&&o>e)return[new Gn(a,n[0].zoom,"stop zoom values must appear in ascending order")];e!==o&&(o=e,i=void 0,s={}),r=r.concat(qn({key:`${a}[0]`,value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Wn,value:f}}))}else r=r.concat(f({key:`${a}[0]`,value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return On(Ht(n[1]))?r.concat([new Gn(`${a}[1]`,n[1],"expressions are not allowed in function stops.")]):r.concat(Ei({key:`${a}[1]`,value:n[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function f(t,o){const a=Tn(t.value),l=Zt(t.value),u=null!==t.value?t.value:o;if(n){if(a!==n)return[new Gn(t.key,u,`${a} stop domain type must match previous stop domain type ${n}`)]}else n=a;if("number"!==a&&"string"!==a&&"boolean"!==a&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new Gn(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==r){let n=`number expected, ${a} found`;return En(e)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Gn(t.key,u,n)]}return"categorical"!==r||"number"!==a||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===a&&"number"==typeof l&&"number"==typeof i&&void 0!==i&&l<i?[new Gn(t.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===r&&l in s?[new Gn(t.key,u,"stop domain values must be unique")]:(s[l]=!0,[])):[new Gn(t.key,u,`integer expected, found ${String(l)}`)]}}function Hn(t){const e=("property"===t.expressionContext?jn:Nn)(Ht(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new Gn(`${t.key}${e.key}`,t.value,e.message)));const r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!r.outputDefined())return[new Gn(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!lr(r))return[new Gn(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return Qn(r,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ur(r,["zoom","feature-state"]))return[new Gn(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ar(r))return[new Gn(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qn(t,e){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const i of e.valueSpec.expression.parameters)r.delete(i);if(0===r.size)return[];const n=[];return t instanceof Fe&&r.has(t.name)?[new Gn(e.key,e.value,`["${t.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(t.eachChild((t=>{n.push(...Qn(t,e))})),n)}function Xn(t){const e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(Zt(r))&&i.push(new Gn(e,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(n.values).indexOf(Zt(r))&&i.push(new Gn(e,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),i}function Yn(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Yn(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function Jn(t,e="fill"){if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Yn(t)||(t=oi(t));const r=t;let n=!0;try{n=function(t){if(!ei(t))return t;let e=Ht(t);return ti(e),e=$n(e),e}(r)}catch(t){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(r,null,2)}\n        `)}const i=Kt[`filter_${e}`],o=Nn(n,i);let s=null;if("error"===o.result)throw new Error(o.value.map((t=>`${t.key}: ${t.message}`)).join(", "));s=(t,e,r)=>o.value.evaluate(t,e,{},r);let a=null,l=null;if(n!==r){const t=Nn(r,i);if("error"===t.result)throw new Error(t.value.map((t=>`${t.key}: ${t.message}`)).join(", "));a=(e,r,n,i,o)=>t.value.evaluate(e,r,{},n,void 0,void 0,i,o),l=!ar(t.value.expression)}return{filter:s,dynamicFilter:a||void 0,needGeometry:ii(n),needFeature:!!l}}function $n(t){if(!Array.isArray(t))return t;const e=function(t){if(ri.has(t[0]))for(let e=1;e<t.length;e++)if(ei(t[e]))return!0;return t}(t);return!0===e?e:e.map((t=>$n(t)))}function ti(t){let e=!1;const r=[];if("case"===t[0]){for(let n=1;n<t.length-1;n+=2)e=e||ei(t[n]),r.push(t[n+1]);r.push(t[t.length-1])}else if("match"===t[0]){e=e||ei(t[1]);for(let e=2;e<t.length-1;e+=2)r.push(t[e+1]);r.push(t[t.length-1])}else if("step"===t[0]){e=e||ei(t[1]);for(let e=1;e<t.length-1;e+=2)r.push(t[e+1])}e&&(t.length=0,t.push("any",...r));for(let n=1;n<t.length;n++)ti(t[n])}function ei(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let r=1;r<t.length;r++)if(ei(t[r]))return!0;return!1}const ri=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function ni(t,e){return t<e?-1:t>e?1:0}function ii(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(ii(t[e]))return!0;return!1}function oi(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?si(t[1],t[2],"=="):"!="===e?ui(si(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?si(t[1],t[2],e):"any"===e?(r=t.slice(1),["any"].concat(r.map(oi))):"all"===e?["all"].concat(t.slice(1).map(oi)):"none"===e?["all"].concat(t.slice(1).map(oi).map(ui)):"in"===e?ai(t[1],t.slice(2)):"!in"===e?ui(ai(t[1],t.slice(2))):"has"===e?li(t[1]):"!has"===e?ui(li(t[1])):"within"!==e||t;var r}function si(t,e,r){switch(t){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,t,e]}}function ai(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(ni)]]:["filter-in-small",t,["literal",e]]}}function li(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function ui(t){return["!",t]}function ci(t){return Yn(Ht(t.value))?Hn(Wt({},t,{expressionContext:"filter",valueSpec:t.styleSpec[`filter_${t.layerType||"fill"}`]})):hi(t)}function hi(t){const e=t.value,r=t.key;if("array"!==Tn(e))return[new Gn(r,e,`array expected, ${Tn(e)} found`)];const n=t.styleSpec;let i,o=[];if(e.length<1)return[new Gn(r,e,"filter array must have at least 1 element")];switch(o=o.concat(Xn({key:`${r}[0]`,value:e[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),Zt(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===Zt(e[1])&&o.push(new Gn(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new Gn(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=Tn(e[1]),"string"!==i&&o.push(new Gn(`${r}[1]`,e[1],`string expected, ${i} found`)));for(let s=2;s<e.length;s++)i=Tn(e[s]),"$type"===Zt(e[1])?o=o.concat(Xn({key:`${r}[${s}]`,value:e[s],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new Gn(`${r}[${s}]`,e[s],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let n=1;n<e.length;n++)o=o.concat(hi({key:`${r}[${n}]`,value:e[n],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=Tn(e[1]),2!==e.length?o.push(new Gn(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new Gn(`${r}[1]`,e[1],`string expected, ${i} found`));break;case"within":i=Tn(e[1]),2!==e.length?o.push(new Gn(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new Gn(`${r}[1]`,e[1],`object expected, ${i} found`))}return o}function fi(t,e){const r=t.key,n=t.style,i=t.styleSpec,o=t.value,s=t.objectKey,a=i[`${e}_${t.layerType}`];if(!a)return[];const l=s.match(/^(.*)-transition$/);if("paint"===e&&l&&a[l[1]]&&a[l[1]].transition)return Ei({key:r,value:o,valueSpec:i.transition,style:n,styleSpec:i});const u=t.valueSpec||a[s];if(!u)return[new Gn(r,o,`unknown property "${s}"`)];let c;if("string"===Tn(o)&&En(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new Gn(r,o,`"${s}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(c[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===s&&n&&!n.glyphs&&h.push(new Gn(r,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&An(Ht(o))&&"identity"===Zt(o.type)&&h.push(new Gn(r,o,'"text-font" does not support identity functions'))),h.concat(Ei({key:t.key,value:o,valueSpec:u,style:n,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:s}))}function di(t){return fi(t,"paint")}function pi(t){return fi(t,"layout")}function mi(t){let e=[];const r=t.value,n=t.key,i=t.style,o=t.styleSpec;r.type||r.ref||e.push(new Gn(n,r,'either "type" or "ref" is required'));let s=Zt(r.type);const a=Zt(r.ref);if(r.id){const o=Zt(r.id);for(let s=0;s<t.arrayIndex;s++){const t=i.layers[s];Zt(t.id)===o&&e.push(new Gn(n,r.id,`duplicate layer id "${r.id}", previously used at line ${t.id.__line__}`))}}if("ref"in r){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in r&&e.push(new Gn(n,r[t],`"${t}" is prohibited for ref layers`))})),i.layers.forEach((e=>{Zt(e.id)===a&&(t=e)})),t?t.ref?e.push(new Gn(n,r.ref,"ref cannot reference another ref layer")):s=Zt(t.type):"string"==typeof a&&e.push(new Gn(n,r.ref,`ref layer "${a}" not found`))}else if("background"!==s&&"sky"!==s)if(r.source){const t=i.sources&&i.sources[r.source],o=t&&Zt(t.type);t?"vector"===o&&"raster"===s?e.push(new Gn(n,r.source,`layer "${r.id}" requires a raster source`)):"raster"===o&&"raster"!==s?e.push(new Gn(n,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==o||r["source-layer"]?"raster-dem"===o&&"hillshade"!==s?e.push(new Gn(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||"geojson"===o&&t.lineMetrics||e.push(new Gn(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Gn(n,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new Gn(n,r.source,`source "${r.source}" not found`))}else e.push(new Gn(n,r,'missing required property "source"'));return e=e.concat(qn({key:n,value:r,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ei({key:`${n}.type`,value:r.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"}),filter:t=>ci(Wt({layerType:s},t)),layout:t=>qn({layer:r,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>pi(Wt({layerType:s},t))}}),paint:t=>qn({layer:r,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>di(Wt({layerType:s},t))}})}})),e}function gi(t){const e=t.value,r=t.key,n=Tn(e);return"string"!==n?[new Gn(r,e,`string expected, ${n} found`)]:[]}const yi={promoteId:function({key:t,value:e}){if("string"===Tn(e))return gi({key:t,value:e});{const r=[];for(const n in e)r.push(...gi({key:`${t}.${n}`,value:e[n]}));return r}}};function _i(t){const e=t.value,r=t.key,n=t.styleSpec,i=t.style;if(!e.type)return[new Gn(r,e,'"type" is required')];const o=Zt(e.type);let s;switch(o){case"vector":case"raster":case"raster-dem":return s=qn({key:r,value:e,valueSpec:n[`source_${o.replace("-","_")}`],style:t.style,styleSpec:n,objectElementValidators:yi}),s;case"geojson":if(s=qn({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n,objectElementValidators:yi}),e.cluster)for(const t in e.clusterProperties){const[n,i]=e.clusterProperties[t],o="string"==typeof n?[n,["accumulated"],["get",t]]:n;s.push(...Hn({key:`${r}.${t}.map`,value:i,expressionContext:"cluster-map"})),s.push(...Hn({key:`${r}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return s;case"video":return qn({key:r,value:e,valueSpec:n.source_video,style:i,styleSpec:n});case"image":return qn({key:r,value:e,valueSpec:n.source_image,style:i,styleSpec:n});case"canvas":return[new Gn(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xn({key:`${r}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:n})}}function vi(t){const e=t.value,r=t.styleSpec,n=r.light,i=t.style;let o=[];const s=Tn(e);if(void 0===e)return o;if("object"!==s)return o=o.concat([new Gn("light",e,`object expected, ${s} found`)]),o;for(const a in e){const t=a.match(/^(.*)-transition$/);o=o.concat(t&&n[t[1]]&&n[t[1]].transition?Ei({key:a,value:e[a],valueSpec:r.transition,style:i,styleSpec:r}):n[a]?Ei({key:a,value:e[a],valueSpec:n[a],style:i,styleSpec:r}):[new Gn(a,e[a],`unknown property "${a}"`)])}return o}function bi(t){const e=t.value,r=t.key,n=t.style,i=t.styleSpec,o=i.terrain;let s=[];const a=Tn(e);if(void 0===e)return s;if("object"!==a)return s=s.concat([new Gn("terrain",e,`object expected, ${a} found`)]),s;for(const l in e){const t=l.match(/^(.*)-transition$/);s=s.concat(t&&o[t[1]]&&o[t[1]].transition?Ei({key:l,value:e[l],valueSpec:i.transition,style:n,styleSpec:i}):o[l]?Ei({key:l,value:e[l],valueSpec:o[l],style:n,styleSpec:i}):[new Gn(l,e[l],`unknown property "${l}"`)])}if(e.source){const t=n.sources&&n.sources[e.source],i=t&&Zt(t.type);t?"raster-dem"!==i&&s.push(new Gn(r,e.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a "raster-dem" source type`)):s.push(new Gn(r,e.source,`source "${e.source}" not found`))}else s.push(new Gn(r,e,'terrain is missing required property "source"'));return s}function wi(t){const e=t.value,r=t.style,n=t.styleSpec,i=n.fog;let o=[];const s=Tn(e);if(void 0===e)return o;if("object"!==s)return o=o.concat([new Gn("fog",e,`object expected, ${s} found`)]),o;for(const a in e){const t=a.match(/^(.*)-transition$/);o=o.concat(t&&i[t[1]]&&i[t[1]].transition?Ei({key:a,value:e[a],valueSpec:n.transition,style:r,styleSpec:n}):i[a]?Ei({key:a,value:e[a],valueSpec:i[a],style:r,styleSpec:n}):[new Gn(a,e[a],`unknown property "${a}"`)])}return o}const xi={"*":()=>[],array:Kn,boolean:function(t){const e=t.value,r=t.key,n=Tn(e);return"boolean"!==n?[new Gn(r,e,`boolean expected, ${n} found`)]:[]},number:Wn,color:function(t){const e=t.key,r=t.value,n=Tn(r);return"string"!==n?[new Gn(e,r,`color expected, ${n} found`)]:null===ge.parseCSSColor(r)?[new Gn(e,r,`color expected, "${r}" found`)]:[]},enum:Xn,filter:ci,function:Zn,layer:mi,object:qn,source:_i,light:vi,terrain:bi,fog:wi,string:gi,formatted:function(t){return 0===gi(t).length?[]:Hn(t)},resolvedImage:function(t){return 0===gi(t).length?[]:Hn(t)},projection:function(t){const e=t.value,r=t.styleSpec,n=r.projection,i=t.style;let o=[];const s=Tn(e);if("object"===s)for(const a in e)o=o.concat(Ei({key:a,value:e[a],valueSpec:n[a],style:i,styleSpec:r}));else"string"!==s&&(o=o.concat([new Gn("projection",e,`object or string expected, ${s} found`)]));return o}};function Ei(t){const e=t.value,r=t.valueSpec,n=t.styleSpec;return r.expression&&An(Zt(e))?Zn(t):r.expression&&On(Ht(e))?Hn(t):r.type&&xi[r.type]?xi[r.type](t):qn(Wt({},t,{valueSpec:r.type?n[r.type]:r}))}function Si(t){const e=t.value,r=t.key,n=gi(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new Gn(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new Gn(r,e,'"glyphs" url must include a "{range}" token'))),n}function Mi(t,e=Kt){return Ci(Ei({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Si,"*":()=>[]}}))}const Ti=t=>Ci(di(t)),Ai=t=>Ci(pi(t));function Ci(t){return t.slice().sort(((t,e)=>t.line&&e.line?t.line-e.line:0))}function Ii(t,e){let r=!1;if(e&&e.length)for(const n of e)t.fire(new Gt(new Error(n.message))),r=!0;return r}var ki=Ri;function Ri(t,e,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(r=i[2]);for(var o=0;o<this.d*this.d;o++){var s=i[3+o],a=i[3+o+1];n.push(s===a?null:i.subarray(s,a))}var l=i[3+n.length+1];this.keys=i.subarray(i[3+n.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var u=0;u<this.d*this.d;u++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var c=r/e*t;this.min=-c,this.max=t+c}Ri.prototype.insert=function(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)},Ri.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ri.prototype._insertCell=function(t,e,r,n,i,o){this.cells[i].push(o)},Ri.prototype.query=function(t,e,r,n,i){var o=this.min,s=this.max;if(t<=o&&e<=o&&s<=r&&s<=n&&!i)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,r,n,this._queryCell,a,{},i),a},Ri.prototype._queryCell=function(t,e,r,n,i,o,s,a){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var f=l[h];if(void 0===s[f]){var d=4*f;(a?a(c[d+0],c[d+1],c[d+2],c[d+3]):t<=c[d+2]&&e<=c[d+3]&&r>=c[d+0]&&n>=c[d+1])?(s[f]=!0,o.push(u[f])):s[f]=!1}}},Ri.prototype._forEachCell=function(t,e,r,n,i,o,s,a){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(r),h=this._convertToCellCoord(n),f=l;f<=c;f++)for(var d=u;d<=h;d++){var p=this.d*d+f;if((!a||a(this._convertFromCellCoord(f),this._convertFromCellCoord(d),this._convertFromCellCoord(f+1),this._convertFromCellCoord(d+1)))&&i.call(this,t,e,r,n,p,o,s,a))return}},Ri.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Ri.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Ri.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var i=new Int32Array(e+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,s=0;s<t.length;s++){var a=t[s];i[3+s]=o,i.set(a,o),o+=a.length}return i[3+t.length]=o,i.set(this.keys,o),i[3+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};const Bi={};function Pi(t,e,r={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Bi[e]={klass:t,omit:r.omit||[]}}Pi(Object,"Object"),ki.serialize=function(t,e){const r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},ki.deserialize=function(t){return new ki(t.buffer)},Object.defineProperty(ki,"name",{value:"Grid"}),Pi(ki,"Grid"),Pi(_e,"Color"),Pi(Error,"Error"),Pi(It,"AJAXError"),Pi(xe,"ResolvedImage"),Pi(Fn,"StylePropertyFunction"),Pi(Ln,"StyleExpression",{omit:["_evaluator"]}),Pi(Un,"ZoomDependentExpression"),Pi(zn,"ZoomConstantExpression"),Pi(Fe,"CompoundExpression",{omit:["_evaluate"]});for(const om in bn)Bi[bn[om]._classRegistryKey]||Pi(bn[om],`Expression${om}`);function Di(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Li(t){return e.ImageBitmap&&t instanceof e.ImageBitmap}function Oi(t,r){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Di(t)||Li(t))return r&&r.push(t),t;if(ArrayBuffer.isView(t)){const e=t;return r&&r.push(e.buffer),e}if(t instanceof e.ImageData)return r&&r.push(t.data.buffer),t;if(Array.isArray(t)){const e=[];for(const n of t)e.push(Oi(n,r));return e}if("object"==typeof t){const e=t.constructor,n=e._classRegistryKey;if(!n)throw new Error(`can't serialize object of unregistered class ${n}`);const i=e.serialize?e.serialize(t,r):{};if(!e.serialize){for(const e in t)t.hasOwnProperty(e)&&(Bi[n].omit.indexOf(e)>=0||(i[e]=Oi(t[e],r)));t instanceof Error&&(i.message=t.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(i.$name=n),i}throw new Error("can't serialize object of type "+typeof t)}function Ni(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Di(t)||Li(t)||ArrayBuffer.isView(t)||t instanceof e.ImageData)return t;if(Array.isArray(t))return t.map(Ni);if("object"==typeof t){const e=t.$name||"Object",{klass:r}=Bi[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(t);const n=Object.create(r.prototype);for(const i of Object.keys(t))"$name"!==i&&(n[i]=Ni(t[i]));return n}throw new Error("can't deserialize object of type "+typeof t)}class zi{constructor(){this.first=!0}update(t,e){const r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))}}const Ui=t=>t>=1536&&t<=1791,ji=t=>t>=1872&&t<=1919,Fi=t=>t>=2208&&t<=2303,Vi=t=>t>=11904&&t<=12031,Gi=t=>t>=12032&&t<=12255,qi=t=>t>=12272&&t<=12287,Ki=t=>t>=12288&&t<=12351,Wi=t=>t>=12352&&t<=12447,Zi=t=>t>=12448&&t<=12543,Hi=t=>t>=12544&&t<=12591,Qi=t=>t>=12704&&t<=12735,Xi=t=>t>=12736&&t<=12783,Yi=t=>t>=12784&&t<=12799,Ji=t=>t>=12800&&t<=13055,$i=t=>t>=13056&&t<=13311,to=t=>t>=13312&&t<=19903,eo=t=>t>=19968&&t<=40959,ro=t=>t>=40960&&t<=42127,no=t=>t>=42128&&t<=42191,io=t=>t>=44032&&t<=55215,oo=t=>t>=63744&&t<=64255,so=t=>t>=64336&&t<=65023,ao=t=>t>=65040&&t<=65055,lo=t=>t>=65072&&t<=65103,uo=t=>t>=65104&&t<=65135,co=t=>t>=65136&&t<=65279,ho=t=>t>=65280&&t<=65519;function fo(t){for(const e of t)if(go(e.charCodeAt(0)))return!0;return!1}function po(t){for(const e of t)if(!mo(e.charCodeAt(0)))return!1;return!0}function mo(t){return!(Ui(t)||ji(t)||Fi(t)||so(t)||co(t))}function go(t){return!(746!==t&&747!==t&&(t<4352||!(Qi(t)||Hi(t)||lo(t)&&!(t>=65097&&t<=65103)||oo(t)||$i(t)||Vi(t)||Xi(t)||!(!Ki(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||to(t)||eo(t)||Ji(t)||(t=>t>=12592&&t<=12687)(t)||(t=>t>=43360&&t<=43391)(t)||(t=>t>=55216&&t<=55295)(t)||(t=>t>=4352&&t<=4607)(t)||io(t)||Wi(t)||qi(t)||(t=>t>=12688&&t<=12703)(t)||Gi(t)||Yi(t)||Zi(t)&&12540!==t||!(!ho(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!uo(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(t=>t>=5120&&t<=5759)(t)||(t=>t>=6320&&t<=6399)(t)||ao(t)||(t=>t>=19904&&t<=19967)(t)||ro(t)||no(t))))}function yo(t){return!(go(t)||function(t){return!!((t=>t>=128&&t<=255)(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||(t=>t>=8192&&t<=8303)(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||(t=>t>=8448&&t<=8527)(t)||(t=>t>=8528&&t<=8591)(t)||(t=>t>=8960&&t<=9215)(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||(t=>t>=9216&&t<=9279)(t)&&9251!==t||(t=>t>=9280&&t<=9311)(t)||(t=>t>=9312&&t<=9471)(t)||(t=>t>=9632&&t<=9727)(t)||(t=>t>=9728&&t<=9983)(t)&&!(t>=9754&&t<=9759)||(t=>t>=11008&&t<=11263)(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Ki(t)||Zi(t)||(t=>t>=57344&&t<=63743)(t)||lo(t)||uo(t)||ho(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function _o(t){return t>=1424&&t<=2303||so(t)||co(t)}function vo(t,e){return!(!e&&_o(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||(t=>t>=6016&&t<=6143)(t))}function bo(t){for(const e of t)if(_o(e.charCodeAt(0)))return!0;return!1}const wo="deferred",xo="loading",Eo="loaded";let So=null,Mo="unavailable",To=null;const Ao=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Mo="error"),So&&So(t)};function Co(){Io.fire(new Vt("pluginStateChange",{pluginStatus:Mo,pluginURL:To}))}const Io=new qt,ko=function(){return Mo},Ro=function(){if(Mo!==wo||!To)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Mo=xo,Co(),To&&Bt({url:To},(t=>{t?Ao(t):(Mo=Eo,Co())}))},Bo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Mo===Eo||null!=Bo.applyArabicShaping,isLoading:()=>Mo===xo,setState(t){Mo=t.pluginStatus,To=t.pluginURL},isParsed:()=>null!=Bo.applyArabicShaping&&null!=Bo.processBidirectionalText&&null!=Bo.processStyledBidirectionalText,getPluginURL:()=>To};class Po{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition,this.pitch=e.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zi,this.transition={},this.pitch=0)}isSupportedScript(t){return function(t,e){for(const r of t)if(!vo(r.charCodeAt(0),e))return!1;return!0}(t,Bo.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}}}class Do{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(An(t))return new Fn(t,e);if(On(t)){const r=jn(t,e);if("error"===r.result)throw new Error(r.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return r.value}{let r=t;return"string"==typeof t&&"color"===e.type&&(r=_e.parse(t)),{kind:"constant",evaluate:()=>r}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,r){return this.property.possiblyEvaluate(this,t,e,r)}}class Lo{constructor(t){this.property=t,this.value=new Do(t,void 0)}transitioned(t,e){return new No(this.property,this.value,e,v({},t.transition,this.transition),t.now)}untransitioned(){return new No(this.property,this.value,null,{},0)}}class Oo{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return I(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Lo(this._values[t].property)),this._values[t].value=new Do(this._values[t].property,null===e?void 0:I(e))}getTransition(t){return I(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Lo(this._values[t].property)),this._values[t].transition=I(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const r=this.getValue(e);void 0!==r&&(t[e]=r);const n=this.getTransition(e);void 0!==n&&(t[`${e}-transition`]=n)}return t}transitioned(t,e){const r=new zo(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].transitioned(t,e._values[n]);return r}untransitioned(){const t=new zo(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class No{constructor(t,e,r,n,i){const o=n.delay||0,s=n.duration||0;i=i||0,this.property=t,this.value=e,this.begin=i+o,this.end=this.begin+s,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r)}possiblyEvaluate(t,e,r){const n=t.now||0,i=this.value.possiblyEvaluate(t,e,r),o=this.prior;if(o){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return o.possiblyEvaluate(t,e,r);{const s=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,r),i,h(s))}}return i}}class zo{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,r){const n=new Fo(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(t,e,r);return n}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Uo{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return I(this._values[t].value)}setValue(t,e){this._values[t]=new Do(this._values[t].property,null===e?void 0:I(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const r=this.getValue(e);void 0!==r&&(t[e]=r)}return t}possiblyEvaluate(t,e,r){const n=new Fo(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(t,e,r);return n}}class jo{constructor(t,e,r){this.property=t,this.value=e,this.parameters=r}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,r,n){return this.property.evaluate(this.value,this.parameters,t,e,r,n)}}class Fo{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Vo{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,r){const n=br[this.specification.type];return n?n(t,e,r):t}}class Go{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,r,n){return new jo(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},r,n)}:t.expression,e)}interpolate(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new jo(this,{kind:"constant",value:void 0},t.parameters);const n=br[this.specification.type];return n?new jo(this,{kind:"constant",value:n(t.value.value,e.value.value,r)},t.parameters):t}evaluate(t,e,r,n,i,o){return"constant"===t.kind?t.value:t.evaluate(e,r,n,i,o)}}class qo extends Go{possiblyEvaluate(t,e,r,n){if(void 0===t.value)return new jo(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},r,n),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,s=this._calculate(o,o,o,e);return new jo(this,{kind:"constant",value:s},e)}if("camera"===t.expression.kind){const r=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new jo(this,{kind:"constant",value:r},e)}return new jo(this,t.expression,e)}evaluate(t,e,r,n,i,o){if("source"===t.kind){const s=t.evaluate(e,r,n,i,o);return this._calculate(s,s,s,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,n),t.evaluate({zoom:Math.floor(e.zoom)},r,n),t.evaluate({zoom:Math.floor(e.zoom)+1},r,n),e):t.value}_calculate(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e,other:r}:{from:r,to:e,other:t}}interpolate(t){return t}}class Ko{constructor(t){this.specification=t}possiblyEvaluate(t,e,r,n){if(void 0!==t.value){if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},r,n);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new Po(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Po(Math.floor(e.zoom),e)),t.expression.evaluate(new Po(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}}interpolate(t){return t}}class Wo{constructor(t){this.specification=t}possiblyEvaluate(t,e,r,n){return!!t.expression.evaluate(e,null,{},r,n)}interpolate(){return!1}}class Zo{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const e=new Po(0,{});for(const r in t){const n=t[r];n.specification.overridable&&this.overridableProperties.push(r);const i=this.defaultPropertyValues[r]=new Do(n,void 0),o=this.defaultTransitionablePropertyValues[r]=new Lo(n);this.defaultTransitioningPropertyValues[r]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=i.possiblyEvaluate(e)}}}function Ho(t,e){return 256*(t=p(Math.floor(t),0,255))+p(Math.floor(e),0,255)}Pi(Go,"DataDrivenProperty"),Pi(Vo,"DataConstantProperty"),Pi(qo,"CrossFadedDataDrivenProperty"),Pi(Ko,"CrossFadedProperty"),Pi(Wo,"ColorRampProperty");const Qo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Xo{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Yo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Jo(t,e=1){let r=0,n=0;return{members:t.map((t=>{const i=Qo[t.type].BYTES_PER_ELEMENT,o=r=$o(r,Math.max(e,i)),s=t.components||1;return n=Math.max(n,i),r+=i*s,{name:t.name,type:t.type,components:s,offset:o}})),size:$o(r,Math.max(n,e)),alignment:e}}function $o(t,e){return Math.ceil(t/e)*e}class ts extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t}}ts.prototype.bytesPerElement=4,Pi(ts,"StructArrayLayout2i4");class es extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t}}es.prototype.bytesPerElement=6,Pi(es,"StructArrayLayout3i6");class rs extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,t}}rs.prototype.bytesPerElement=8,Pi(rs,"StructArrayLayout4i8");class ns extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i,o,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,o,s)}emplace(t,e,r,n,i,o,s,a){const l=6*t,u=12*t,c=3*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.uint8[u+4]=n,this.uint8[u+5]=i,this.uint8[u+6]=o,this.uint8[u+7]=s,this.float32[c+2]=a,t}}ns.prototype.bytesPerElement=12,Pi(ns,"StructArrayLayout2i4ub1f12");class is extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=r,this.float32[o+2]=n,this.float32[o+3]=i,t}}is.prototype.bytesPerElement=16,Pi(is,"StructArrayLayout4f16");class os extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i,o,s,a,l,u){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,r,n,i,o,s,a,l,u)}emplace(t,e,r,n,i,o,s,a,l,u,c){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=r,this.uint16[h+2]=n,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=s,this.uint16[h+6]=a,this.uint16[h+7]=l,this.uint16[h+8]=u,this.uint16[h+9]=c,t}}os.prototype.bytesPerElement=20,Pi(os,"StructArrayLayout10ui20");class ss extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i,o,s,a){const l=this.length;return this.resize(l+1),this.emplace(l,t,e,r,n,i,o,s,a)}emplace(t,e,r,n,i,o,s,a,l){const u=8*t;return this.uint16[u+0]=e,this.uint16[u+1]=r,this.uint16[u+2]=n,this.uint16[u+3]=i,this.uint16[u+4]=o,this.uint16[u+5]=s,this.uint16[u+6]=a,this.uint16[u+7]=l,t}}ss.prototype.bytesPerElement=16,Pi(ss,"StructArrayLayout8ui16");class as extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,r,n,i,o)}emplace(t,e,r,n,i,o,s){const a=6*t;return this.int16[a+0]=e,this.int16[a+1]=r,this.int16[a+2]=n,this.int16[a+3]=i,this.int16[a+4]=o,this.int16[a+5]=s,t}}as.prototype.bytesPerElement=12,Pi(as,"StructArrayLayout6i12");class ls extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i,o,s,a,l,u,c,h){const f=this.length;return this.resize(f+1),this.emplace(f,t,e,r,n,i,o,s,a,l,u,c,h)}emplace(t,e,r,n,i,o,s,a,l,u,c,h,f){const d=12*t;return this.int16[d+0]=e,this.int16[d+1]=r,this.int16[d+2]=n,this.int16[d+3]=i,this.uint16[d+4]=o,this.uint16[d+5]=s,this.uint16[d+6]=a,this.uint16[d+7]=l,this.int16[d+8]=u,this.int16[d+9]=c,this.int16[d+10]=h,this.int16[d+11]=f,t}}ls.prototype.bytesPerElement=24,Pi(ls,"StructArrayLayout4i4ui4i24");class us extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,r,n,i,o)}emplace(t,e,r,n,i,o,s){const a=10*t,l=5*t;return this.int16[a+0]=e,this.int16[a+1]=r,this.int16[a+2]=n,this.float32[l+2]=i,this.float32[l+3]=o,this.float32[l+4]=s,t}}us.prototype.bytesPerElement=20,Pi(us,"StructArrayLayout3i3f20");class cs extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}cs.prototype.bytesPerElement=4,Pi(cs,"StructArrayLayout1ul4");class hs extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i,o,s,a,l,u,c,h,f){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,r,n,i,o,s,a,l,u,c,h,f)}emplace(t,e,r,n,i,o,s,a,l,u,c,h,f,d){const p=20*t,m=10*t;return this.int16[p+0]=e,this.int16[p+1]=r,this.int16[p+2]=n,this.int16[p+3]=i,this.int16[p+4]=o,this.float32[m+3]=s,this.float32[m+4]=a,this.float32[m+5]=l,this.float32[m+6]=u,this.int16[p+14]=c,this.uint32[m+8]=h,this.uint16[p+18]=f,this.uint16[p+19]=d,t}}hs.prototype.bytesPerElement=40,Pi(hs,"StructArrayLayout5i4f1i1ul2ui40");class fs extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i,o,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,o,s)}emplace(t,e,r,n,i,o,s,a){const l=8*t;return this.int16[l+0]=e,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+4]=i,this.int16[l+5]=o,this.int16[l+6]=s,this.int16[l+7]=a,t}}fs.prototype.bytesPerElement=16,Pi(fs,"StructArrayLayout3i2i2i16");class ds extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i)}emplace(t,e,r,n,i,o){const s=4*t,a=8*t;return this.float32[s+0]=e,this.float32[s+1]=r,this.float32[s+2]=n,this.int16[a+6]=i,this.int16[a+7]=o,t}}ds.prototype.bytesPerElement=16,Pi(ds,"StructArrayLayout2f1f2i16");class ps extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const o=12*t,s=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=r,this.float32[s+1]=n,this.float32[s+2]=i,t}}ps.prototype.bytesPerElement=12,Pi(ps,"StructArrayLayout2ub2f12");class ms extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t}}ms.prototype.bytesPerElement=12,Pi(ms,"StructArrayLayout3f12");class gs extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t}}gs.prototype.bytesPerElement=6,Pi(gs,"StructArrayLayout3ui6");class ys extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g,y,_,v,b){const w=this.length;return this.resize(w+1),this.emplace(w,t,e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g,y,_,v,b)}emplace(t,e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g,y,_,v,b,w){const x=30*t,E=15*t,S=60*t;return this.int16[x+0]=e,this.int16[x+1]=r,this.int16[x+2]=n,this.float32[E+2]=i,this.float32[E+3]=o,this.uint16[x+8]=s,this.uint16[x+9]=a,this.uint32[E+5]=l,this.uint32[E+6]=u,this.uint32[E+7]=c,this.uint16[x+16]=h,this.uint16[x+17]=f,this.uint16[x+18]=d,this.float32[E+10]=p,this.float32[E+11]=m,this.uint8[S+48]=g,this.uint8[S+49]=y,this.uint8[S+50]=_,this.uint32[E+13]=v,this.int16[x+28]=b,this.uint8[S+58]=w,t}}ys.prototype.bytesPerElement=60,Pi(ys,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class _s extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,E,S,M,T,A,C,I){const k=this.length;return this.resize(k+1),this.emplace(k,t,e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,E,S,M,T,A,C,I)}emplace(t,e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,E,S,M,T,A,C,I,k){const R=38*t,B=19*t;return this.int16[R+0]=e,this.int16[R+1]=r,this.int16[R+2]=n,this.float32[B+2]=i,this.float32[B+3]=o,this.int16[R+8]=s,this.int16[R+9]=a,this.int16[R+10]=l,this.int16[R+11]=u,this.int16[R+12]=c,this.int16[R+13]=h,this.uint16[R+14]=f,this.uint16[R+15]=d,this.uint16[R+16]=p,this.uint16[R+17]=m,this.uint16[R+18]=g,this.uint16[R+19]=y,this.uint16[R+20]=_,this.uint16[R+21]=v,this.uint16[R+22]=b,this.uint16[R+23]=w,this.uint16[R+24]=x,this.uint16[R+25]=E,this.uint16[R+26]=S,this.uint16[R+27]=M,this.uint16[R+28]=T,this.uint32[B+15]=A,this.float32[B+16]=C,this.float32[B+17]=I,this.float32[B+18]=k,t}}_s.prototype.bytesPerElement=76,Pi(_s,"StructArrayLayout3i2f6i15ui1ul3f76");class vs extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}vs.prototype.bytesPerElement=4,Pi(vs,"StructArrayLayout1f4");class bs extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,r,n,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,r,n,i)}emplace(t,e,r,n,i,o){const s=5*t;return this.float32[s+0]=e,this.float32[s+1]=r,this.float32[s+2]=n,this.float32[s+3]=i,this.float32[s+4]=o,t}}bs.prototype.bytesPerElement=20,Pi(bs,"StructArrayLayout5f20");class ws extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const o=6*t;return this.uint32[3*t+0]=e,this.uint16[o+2]=r,this.uint16[o+3]=n,this.uint16[o+4]=i,t}}ws.prototype.bytesPerElement=12,Pi(ws,"StructArrayLayout1ul3ui12");class xs extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t}}xs.prototype.bytesPerElement=4,Pi(xs,"StructArrayLayout2ui4");class Es extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Es.prototype.bytesPerElement=2,Pi(Es,"StructArrayLayout1ui2");class Ss extends Yo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t}}Ss.prototype.bytesPerElement=8,Pi(Ss,"StructArrayLayout2f8");class Ms extends Xo{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Ms.prototype.size=12;class Ts extends as{get(t){return new Ms(this,t)}}Pi(Ts,"FillExtrusionExtArray");class As extends Xo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}As.prototype.size=40;class Cs extends hs{get(t){return new As(this,t)}}Pi(Cs,"CollisionBoxArray");class Is extends Xo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}Is.prototype.size=60;class ks extends ys{get(t){return new Is(this,t)}}Pi(ks,"PlacedSymbolArray");class Rs extends Xo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Rs.prototype.size=76;class Bs extends _s{get(t){return new Rs(this,t)}}Pi(Bs,"SymbolInstanceArray");class Ps extends vs{getoffsetX(t){return this.float32[1*t+0]}}Pi(Ps,"GlyphOffsetArray");class Ds extends es{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Pi(Ds,"SymbolLineVertexArray");class Ls extends Xo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Ls.prototype.size=12;class Os extends ws{get(t){return new Ls(this,t)}}Pi(Os,"FeatureIndexArray");class Ns extends Xo{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Ns.prototype.size=4;class zs extends xs{get(t){return new Ns(this,t)}}Pi(zs,"FillExtrusionCentroidArray");class Us extends Xo{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Us.prototype.size=12;class js extends as{get(t){return new Us(this,t)}}Pi(js,"CircleGlobeExtArray");const Fs=Jo([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Vs=Jo([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Gs=me((function(t){t.exports=function(t,e){var r,n,i,o,s,a,l,u;for(n=t.length-(r=3&t.length),i=e,s=3432918353,a=461845907,u=0;u<n;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),qs=me((function(t){t.exports=function(t,e){for(var r,n=t.length,i=e^n,o=0;n>=4;)r=1540483477*(65535&(r=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),Ks=Gs,Ws=qs;Ks.murmur3=Gs,Ks.murmur2=Ws;class Zs{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,r,n){this.ids.push(Hs(t)),this.positions.push(e,r,n)}getPositions(t){const e=Hs(t);let r=0,n=this.ids.length-1;for(;r<n;){const t=r+n>>1;this.ids[t]>=e?n=t:r=t+1}const i=[];for(;this.ids[r]===e;)i.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return i}static serialize(t,e){const r=new Float64Array(t.ids),n=new Uint32Array(t.positions);return Qs(r,n,0,r.length-1),e&&e.push(r.buffer,n.buffer),{ids:r,positions:n}}static deserialize(t){const e=new Zs;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Hs(t){const e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Ks(String(t))}function Qs(t,e,r,n){for(;r<n;){const i=t[r+n>>1];let o=r-1,s=n+1;for(;;){do{o++}while(t[o]<i);do{s--}while(t[s]>i);if(o>=s)break;Xs(t,o,s),Xs(e,3*o,3*s),Xs(e,3*o+1,3*s+1),Xs(e,3*o+2,3*s+2)}s-r<n-s?(Qs(t,e,r,s),r=s+1):(Qs(t,e,s+1,n),n=s)}}function Xs(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}Pi(Zs,"FeaturePositionMap");class Ys{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,e){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,e),this.initialized=!0),!!this.location}}class Js extends Ys{constructor(t){super(t),this.current=0}set(t,e,r){this.fetchUniformLocation(t,e)&&this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class $s extends Ys{constructor(t){super(t),this.current=[0,0,0,0]}set(t,e,r){this.fetchUniformLocation(t,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3])))}}class ta extends Ys{constructor(t){super(t),this.current=_e.transparent}set(t,e,r){this.fetchUniformLocation(t,e)&&(r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a)))}}const ea=new Float32Array(16),ra=new Float32Array(9),na=new Float32Array(4);function ia(t){return[Ho(255*t.r,255*t.g),Ho(255*t.b,255*t.a)]}class oa{constructor(t,e,r){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=r}setUniform(t,e,r,n,i){e.set(t,i,n.constantOr(this.value))}getBinding(t,e){return"color"===this.type?new ta(t):new Js(t)}}class sa{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio||1,this.pixelRatioTo=t.pixelRatio||1,this.patternFrom=e.tl.concat(e.br),this.patternTo=t.tl.concat(t.br)}setUniform(t,e,r,n,i){const o="u_pattern_to"===i||"u_dash_to"===i?this.patternTo:"u_pattern_from"===i||"u_dash_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;o&&e.set(t,i,o)}getBinding(t,e){return"u_pattern_from"===e||"u_pattern_to"===e||"u_dash_from"===e||"u_dash_to"===e?new $s(t):new Js(t)}}class aa{constructor(t,e,r,n){this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new n}populatePaintArray(t,e,r,n,i,o){const s=this.paintVertexArray.length,a=this.expression.evaluate(new Po(0),e,{},i,n,o);this.paintVertexArray.resize(t),this._setPaintValue(s,t,a)}updatePaintArray(t,e,r,n,i){const o=this.expression.evaluate({zoom:0},r,n,void 0,i);this._setPaintValue(t,e,o)}_setPaintValue(t,e,r){if("color"===this.type){const n=ia(r);for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n[0],n[1])}else{for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class la{constructor(t,e,r,n,i,o){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,r,n,i,o){const s=this.expression.evaluate(new Po(this.zoom),e,{},i,n,o),a=this.expression.evaluate(new Po(this.zoom+1),e,{},i,n,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,s,a)}updatePaintArray(t,e,r,n,i){const o=this.expression.evaluate({zoom:this.zoom},r,n,void 0,i),s=this.expression.evaluate({zoom:this.zoom+1},r,n,void 0,i);this._setPaintValue(t,e,o,s)}_setPaintValue(t,e,r,n){if("color"===this.type){const i=ia(r),o=ia(n);for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,i[0],i[1],o[0],o[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e,r,n,i){const o=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,s=p(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);e.set(t,i,s)}getBinding(t,e){return new Js(t)}}class ua{constructor(t,e,r,n,i,o,s){this.expression=t,this.type=r,this.useIntegerZoom=n,this.zoom=i,this.layerId=s,this.paintVertexAttributes=("array"===r?Vs:Fs).members;for(let a=0;a<e.length;++a);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(t,e,r){const n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],r)}updatePaintArray(t,e,r,n,i,o){this._setPaintValues(t,e,r.patterns&&r.patterns[this.layerId],o)}_setPaintValues(t,e,r,n){if(!n||!r)return;const{min:i,mid:o,max:s}=r,a=n[i],l=n[o],u=n[s];if(a&&l&&u)for(let c=t;c<e;c++)this._setPaintValue(this.zoomInPaintVertexArray,c,l,a),this._setPaintValue(this.zoomOutPaintVertexArray,c,l,u)}_setPaintValue(t,e,r,n){t.emplace(e,r.tl[0],r.tl[1],r.br[0],r.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],r.pixelRatio,n.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ca{constructor(t,e,r=(()=>!0)){this.binders={},this._buffers=[];const n=[];for(const i in t.paint._values){if(!r(i))continue;const o=t.paint.get(i);if(!(o instanceof jo&&En(o.property.specification)))continue;const s=da(i,t.type),a=o.value,l=o.property.specification.type,u=o.property.useIntegerZoom,c=o.property.specification["property-type"],h="cross-faded"===c||"cross-faded-data-driven"===c,f="line-dasharray"===String(i)&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==a.kind||f)if("source"===a.kind||f||h){const r=ga(i,l,"source");this.binders[i]=h?new ua(a,s,l,u,e,r,t.id):new aa(a,s,l,r),n.push(`/a_${i}`)}else{const t=ga(i,l,"composite");this.binders[i]=new la(a,s,l,u,e,t),n.push(`/z_${i}`)}else this.binders[i]=h?new sa(a.value,s):new oa(a.value,s,l),n.push(`/u_${i}`)}this.cacheKey=n.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof aa||e instanceof la?e.maxValue:0}populatePaintArrays(t,e,r,n,i,o){for(const s in this.binders){const a=this.binders[s];(a instanceof aa||a instanceof la||a instanceof ua)&&a.populatePaintArray(t,e,r,n,i,o)}}setConstantPatternPositions(t,e){for(const r in this.binders){const n=this.binders[r];n instanceof sa&&n.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,r,n,i,o){let s=!1;for(const a in t){const l=e.getPositions(a);for(const e of l){const l=r.feature(e.index);for(const r in this.binders){const u=this.binders[r];if((u instanceof aa||u instanceof la||u instanceof ua)&&!0===u.expression.isStateDependent){const c=n.paint.get(r);u.expression=c.value,u.updatePaintArray(e.start,e.end,l,t[a],i,o),s=!0}}}}return s}defines(){const t=[];for(const e in this.binders){const r=this.binders[e];(r instanceof oa||r instanceof sa)&&t.push(...r.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const r=this.binders[e];if(r instanceof aa||r instanceof la||r instanceof ua)for(let e=0;e<r.paintVertexAttributes.length;e++)t.push(r.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const r=this.binders[e];if(r instanceof oa||r instanceof sa||r instanceof la)for(const e of r.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const e=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof oa||n instanceof sa||n instanceof la)for(const i of n.uniformNames)e.push({name:i,property:r,binding:n.getBinding(t,i)})}return e}setUniforms(t,e,r,n,i){for(const{name:o,property:s,binding:a}of r)this.binders[s].setUniform(t,a,i,n.get(s),o)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const r=this.binders[e];if(t&&r instanceof ua){const e=2===t.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(r instanceof aa||r instanceof la)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(t){for(const e in this.binders){const r=this.binders[e];(r instanceof aa||r instanceof la||r instanceof ua)&&r.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof aa||e instanceof la||e instanceof ua)&&e.destroy()}}}class ha{constructor(t,e,r=(()=>!0)){this.programConfigurations={};for(const n of t)this.programConfigurations[n.id]=new ca(n,e,r);this.needsUpload=!1,this._featureMap=new Zs,this._bufferOffset=0}populatePaintArrays(t,e,r,n,i,o,s){for(const a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,n,i,o,s);void 0!==e.id&&this._featureMap.add(e.id,r,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,r,n,i){for(const o of r)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,this._featureMap,e,o,n,i)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const fa={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function da(t,e){return fa[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}const pa={"line-pattern":{source:os,composite:os},"fill-pattern":{source:os,composite:os},"fill-extrusion-pattern":{source:os,composite:os},"line-dasharray":{source:ss,composite:ss}},ma={color:{source:Ss,composite:is},number:{source:vs,composite:Ss}};function ga(t,e,r){const n=pa[t];return n&&n[r]||ma[e][r]}Pi(oa,"ConstantBinder"),Pi(sa,"CrossFadedConstantBinder"),Pi(aa,"SourceExpressionBinder"),Pi(ua,"CrossFadedCompositeBinder"),Pi(la,"CompositeExpressionBinder"),Pi(ca,"ProgramConfiguration",{omit:["_buffers"]}),Pi(ha,"ProgramConfigurationSet");const ya="-transition";class _a extends qt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Uo(e.layout)),e.paint)){this._transitionablePaint=new Oo(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Fo(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,r={}){null!=e&&this._validate(Ai,`layers.${this.id}.layout.${t}`,t,e,r)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return T(t,ya)?this._transitionablePaint.getTransition(t.slice(0,-ya.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,r={}){if(null!=e&&this._validate(Ti,`layers.${this.id}.paint.${t}`,t,e,r))return!1;if(T(t,ya))return this._transitionablePaint.setTransition(t.slice(0,-ya.length),e||void 0),!1;{const r=this._transitionablePaint._values[t],n="cross-faded-data-driven"===r.property.specification["property-type"],i=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const s=this._transitionablePaint._values[t].value;return s.isDataDriven()||i||n||this._handleOverridablePaintPropertyUpdate(t,o,s)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,r){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),C(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,r,n,i={}){return(!i||!1!==i.validate)&&Ii(this,t.call(Mi,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:Kt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof jo&&En(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Jn(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const va=Jo([{name:"a_pos",components:2,type:"Int16"}],4),ba=Jo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class wa{constructor(t=[]){this.segments=t}prepareSegment(t,e,r,n){let i=this.segments[this.segments.length-1];return t>wa.MAX_VERTEX_ARRAY_LENGTH&&R(`Max vertices per segment is ${wa.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!i||i.vertexLength+t>wa.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,r,n){return new wa([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])}}wa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pi(wa,"SegmentVector");var xa=8192;class Ea{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Ma?new Ma(t.lng,t.lat):Ma.convert(t),this}setSouthWest(t){return this._sw=t instanceof Ma?new Ma(t.lng,t.lat):Ma.convert(t),this}extend(t){const e=this._sw,r=this._ne;let n,i;if(t instanceof Ma)n=t,i=t;else{if(!(t instanceof Ea))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Ea.convert(t)):this.extend(Ma.convert(t)):this;if(n=t._sw,i=t._ne,!n||!i)return this}return e||r?(e.lng=Math.min(n.lng,e.lng),e.lat=Math.min(n.lat,e.lat),r.lng=Math.max(i.lng,r.lng),r.lat=Math.max(i.lat,r.lat)):(this._sw=new Ma(n.lng,n.lat),this._ne=new Ma(i.lng,i.lat)),this}getCenter(){return new Ma((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ma(this.getWest(),this.getNorth())}getSouthEast(){return new Ma(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:r}=Ma.convert(t);let n=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n}static convert(t){return!t||t instanceof Ea?t:new Ea(t)}}const Sa=6371008.8;class Ma{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ma(g(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,r=this.lat*e,n=t.lat*e,i=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return Sa*Math.acos(Math.min(i,1))}toBounds(t=0){const e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new Ea(new Ma(this.lng-r,this.lat-e),new Ma(this.lng+r,this.lat+e))}static convert(t){if(t instanceof Ma)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ma(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ma(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ta=2*Math.PI*Sa;function Aa(t){return Ta*Math.cos(t*Math.PI/180)}function Ca(t){return(180+t)/360}function Ia(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function ka(t,e){return t/Aa(e)}function Ra(t){return 360*t-180}function Ba(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Pa(t,e){return t*Aa(Ba(e))}const Da=85.051129;function La(t){return 1/Math.cos(t*Math.PI/180)}class Oa{constructor(t,e,r=0){this.x=+t,this.y=+e,this.z=+r}static fromLngLat(t,e=0){const r=Ma.convert(t);return new Oa(Ca(r.lng),Ia(r.lat),ka(e,r.lat))}toLngLat(){return new Ma(Ra(this.x),Ba(this.y))}toAltitude(){return Pa(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ta*La(Ba(this.y))}}function Na(t,e,r,n,o,s,a,l,u){const c=(e+n)/2,h=(r+o)/2,f=new i(c,h);l(f),function(t,e,r,n,i,o){const s=r-i,a=n-o;return Math.abs((n-e)*s-(r-t)*a)/Math.hypot(s,a)}(f.x,f.y,s.x,s.y,a.x,a.y)>=u?(Na(t,e,r,c,h,s,f,l,u),Na(t,c,h,n,o,f,a,l,u)):t.push(a)}function za(t,e,r){let n=t[0],i=n.x,o=n.y;e(n);const s=[n];for(let a=1;a<t.length;a++){const l=t[a],{x:u,y:c}=l;e(l),Na(s,i,o,u,c,n,l,e,r),i=u,o=c,n=l}return s}function Ua(t,e,r,n,i){if(i(e,r)){const o=e.add(r).mult(.5);n(o),Ua(t,e,o,n,i),Ua(t,o,r,n,i)}else t.push(r)}function ja(t,e,r){let n=t[0];e(n);const i=[n];for(let o=1;o<t.length;o++){const s=t[o];e(s),Ua(i,n,s,e,r),n=s}return i}const Fa=Math.pow(2,14)-1,Va=-Fa-1;function Ga(t,e){const r=Math.round(t.x*e),n=Math.round(t.y*e);return t.x=p(r,Va,Fa),t.y=p(n,Va,Fa),(r<t.x||r>t.x+1||n<t.y||n>t.y+1)&&R("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function qa(t,e,r){const n=t.loadGeometry(),i=t.extent,o=xa/i;if(e&&r&&r.projection.isReprojectedInTileSpace){const o=1<<e.z,{scale:s,x:a,y:l,projection:u}=r,c=t=>{const r=Ra((e.x+t.x/i)/o),n=Ba((e.y+t.y/i)/o),c=u.project(r,n);t.x=(c.x*s-a)*i,t.y=(c.y*s-l)*i};for(let e=0;e<n.length;e++)if(1!==t.type)n[e]=za(n[e],c,1);else{const t=[];for(const r of n[e])r.x<0||r.x>=i||r.y<0||r.y>=i||(c(r),t.push(r));n[e]=t}}for(const s of n)for(const t of s)Ga(t,o);return n}function Ka(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?qa(t):[]}}function Wa(t,e,r,n,i){t.emplaceBack(2*e+(n+1)/2,2*r+(i+1)/2)}function Za(t,e,r){const n=16384;t.emplaceBack(e.x,e.y,e.z,r[0]*n,r[1]*n,r[2]*n)}class Ha{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new ts,this.indexArray=new gs,this.segments=new wa,this.programConfigurations=new ha(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,r,n){const i=this.layers[0],o=[];let s=null;"circle"===i.type&&(s=i.layout.get("circle-sort-key"));for(const{feature:l,id:u,index:c,sourceLayerIndex:h}of t){const t=this.layers[0]._featureFilter.needGeometry,e=Ka(l,t);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom),e,r))continue;const i=s?s.evaluate(e,{},r):void 0,a={id:u,properties:l.properties,type:l.type,sourceLayerIndex:h,index:c,geometry:t?e.geometry:qa(l,r,n),patterns:{},sortKey:i};o.push(a)}s&&o.sort(((t,e)=>t.sortKey-e.sortKey));let a=null;"globe"===n.projection.name&&(this.globeExtVertexArray=new js,a=n.projection);for(const l of o){const{geometry:n,index:i,sourceLayerIndex:o}=l,s=t[i].feature;this.addFeature(l,n,i,e.availableImages,r,a),e.featureIndex.insert(s,n,i,o,this.index)}}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,va.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,ba.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,e,r,n,i,o){for(const s of e)for(const e of s){const r=e.x,n=e.y;if(r<0||r>=xa||n<0||n>=xa)continue;if(o){const t=o.projectTilePoint(r,n,i),e=o.upVector(i,r,n),s=this.globeExtVertexArray;Za(s,t,e),Za(s,t,e),Za(s,t,e),Za(s,t,e)}const s=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),a=s.vertexLength;Wa(this.layoutVertexArray,r,n,-1,-1),Wa(this.layoutVertexArray,r,n,1,-1),Wa(this.layoutVertexArray,r,n,1,1),Wa(this.layoutVertexArray,r,n,-1,1),this.indexArray.emplaceBack(a,a+1,a+2),this.indexArray.emplaceBack(a,a+2,a+3),s.vertexLength+=4,s.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{},n,i)}}function Qa(t,e){for(let r=0;r<t.length;r++)if(il(e,t[r]))return!0;for(let r=0;r<e.length;r++)if(il(t,e[r]))return!0;return!!$a(t,e)}function Xa(t,e,r){return!!il(t,e)||!!el(e,t,r)}function Ya(t,e){if(1===t.length)return nl(e,t[0]);for(let r=0;r<e.length;r++){const n=e[r];for(let e=0;e<n.length;e++)if(il(t,n[e]))return!0}for(let r=0;r<t.length;r++)if(nl(e,t[r]))return!0;for(let r=0;r<e.length;r++)if($a(t,e[r]))return!0;return!1}function Ja(t,e,r){if(t.length>1){if($a(t,e))return!0;for(let n=0;n<e.length;n++)if(el(e[n],t,r))return!0}for(let n=0;n<t.length;n++)if(el(t[n],e,r))return!0;return!1}function $a(t,e){if(0===t.length||0===e.length)return!1;for(let r=0;r<t.length-1;r++){const n=t[r],i=t[r+1];for(let t=0;t<e.length-1;t++)if(tl(n,i,e[t],e[t+1]))return!0}return!1}function tl(t,e,r,n){return B(t,r,n)!==B(e,r,n)&&B(t,e,r)!==B(t,e,n)}function el(t,e,r){const n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(let i=1;i<e.length;i++)if(rl(t,e[i-1],e[i])<n)return!0;return!1}function rl(t,e,r){const n=e.distSqr(r);if(0===n)return t.distSqr(e);const i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return t.distSqr(i<0?e:i>1?r:r.sub(e)._mult(i)._add(e))}function nl(t,e){let r,n,i,o=!1;for(let s=0;s<t.length;s++){r=t[s];for(let t=0,s=r.length-1;t<r.length;s=t++)n=r[t],i=r[s],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(o=!o)}return o}function il(t,e){let r=!1;for(let n=0,i=t.length-1;n<t.length;i=n++){const o=t[n],s=t[i];o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(r=!r)}return r}function ol(t,e,r,n,o){for(const i of t)if(e<=i.x&&r<=i.y&&n>=i.x&&o>=i.y)return!0;const s=[new i(e,r),new i(e,o),new i(n,o),new i(n,r)];if(t.length>2)for(const i of s)if(il(t,i))return!0;for(let i=0;i<t.length-1;i++)if(sl(t[i],t[i+1],s))return!0;return!1}function sl(t,e,r){const n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return!1;const o=B(t,e,r[0]);return o!==B(t,e,r[1])||o!==B(t,e,r[2])||o!==B(t,e,r[3])}function al(t,e,r){const n=e.paint.get(t).value;return"constant"===n.kind?n.value:r.programConfigurations.get(e.id).getMaxValue(t)}function ll(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ul(t,e,r,n,o){if(!e[0]&&!e[1])return t;const s=i.convert(e)._mult(o);"viewport"===r&&s._rotate(-n);const a=[];for(let i=0;i<t.length;i++)a.push(t[i].sub(s));return a}function cl(t,e,r,n){const o=i.convert(t)._mult(n);return"viewport"===e&&o._rotate(-r),o}Pi(Ha,"CircleBucket",{omit:["layers"]});const hl=new Zo({"circle-sort-key":new Go(Kt.layout_circle["circle-sort-key"])});var fl={paint:new Zo({"circle-radius":new Go(Kt.paint_circle["circle-radius"]),"circle-color":new Go(Kt.paint_circle["circle-color"]),"circle-blur":new Go(Kt.paint_circle["circle-blur"]),"circle-opacity":new Go(Kt.paint_circle["circle-opacity"]),"circle-translate":new Vo(Kt.paint_circle["circle-translate"]),"circle-translate-anchor":new Vo(Kt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Vo(Kt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Vo(Kt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Go(Kt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Go(Kt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Go(Kt.paint_circle["circle-stroke-opacity"])}),layout:hl},dl=1e-6,pl="undefined"!=typeof Float32Array?Float32Array:Array;function ml(){var t=new pl(9);return pl!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function gl(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yl(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],g=e[14],y=e[15],_=r*a-n*s,v=r*l-i*s,b=r*u-o*s,w=n*l-i*a,x=n*u-o*a,E=i*u-o*l,S=c*m-h*p,M=c*g-f*p,T=c*y-d*p,A=h*g-f*m,C=h*y-d*m,I=f*y-d*g,k=_*I-v*C+b*A+w*T-x*M+E*S;return k?(t[0]=(a*I-l*C+u*A)*(k=1/k),t[1]=(i*C-n*I-o*A)*k,t[2]=(m*E-g*x+y*w)*k,t[3]=(f*x-h*E-d*w)*k,t[4]=(l*T-s*I-u*M)*k,t[5]=(r*I-i*T+o*M)*k,t[6]=(g*b-p*E-y*v)*k,t[7]=(c*E-f*b+d*v)*k,t[8]=(s*C-a*T+u*S)*k,t[9]=(n*T-r*C-o*S)*k,t[10]=(p*x-m*b+y*_)*k,t[11]=(h*b-c*x-d*_)*k,t[12]=(a*M-s*A-l*S)*k,t[13]=(r*A-n*M+i*S)*k,t[14]=(m*v-p*w-g*_)*k,t[15]=(c*w-h*v+f*_)*k,t):null}function _l(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],m=e[12],g=e[13],y=e[14],_=e[15],v=r[0],b=r[1],w=r[2],x=r[3];return t[0]=v*n+b*a+w*h+x*m,t[1]=v*i+b*l+w*f+x*g,t[2]=v*o+b*u+w*d+x*y,t[3]=v*s+b*c+w*p+x*_,t[4]=(v=r[4])*n+(b=r[5])*a+(w=r[6])*h+(x=r[7])*m,t[5]=v*i+b*l+w*f+x*g,t[6]=v*o+b*u+w*d+x*y,t[7]=v*s+b*c+w*p+x*_,t[8]=(v=r[8])*n+(b=r[9])*a+(w=r[10])*h+(x=r[11])*m,t[9]=v*i+b*l+w*f+x*g,t[10]=v*o+b*u+w*d+x*y,t[11]=v*s+b*c+w*p+x*_,t[12]=(v=r[12])*n+(b=r[13])*a+(w=r[14])*h+(x=r[15])*m,t[13]=v*i+b*l+w*f+x*g,t[14]=v*o+b*u+w*d+x*y,t[15]=v*s+b*c+w*p+x*_,t}function vl(t,e,r){var n,i,o,s,a,l,u,c,h,f,d,p,m=r[0],g=r[1],y=r[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=n=e[0],t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=n*m+a*g+h*y+e[12],t[13]=i*m+l*g+f*y+e[13],t[14]=o*m+u*g+d*y+e[14],t[15]=s*m+c*g+p*y+e[15]),t}function bl(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function wl(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*n,t[5]=s*i+c*n,t[6]=a*i+h*n,t[7]=l*i+f*n,t[8]=u*i-o*n,t[9]=c*i-s*n,t[10]=h*i-a*n,t[11]=f*i-l*n,t}function xl(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],a=e[2],l=e[3],u=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*n,t[1]=s*i-c*n,t[2]=a*i-h*n,t[3]=l*i-f*n,t[8]=o*n+u*i,t[9]=s*n+c*i,t[10]=a*n+h*i,t[11]=l*n+f*i,t}function El(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Sl(t,e,r){var n,i,o,s=r[0],a=r[1],l=r[2],u=Math.hypot(s,a,l);return u<dl?null:(s*=u=1/u,a*=u,l*=u,n=Math.sin(e),i=Math.cos(e),t[0]=s*s*(o=1-i)+i,t[1]=a*s*o+l*n,t[2]=l*s*o-a*n,t[3]=0,t[4]=s*a*o-l*n,t[5]=a*a*o+i,t[6]=l*a*o+s*n,t[7]=0,t[8]=s*l*o+a*n,t[9]=a*l*o-s*n,t[10]=l*l*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Ml=_l;function Tl(){var t=new pl(3);return pl!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Al(t){var e=new pl(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Cl(t){return Math.hypot(t[0],t[1],t[2])}function Il(t,e,r){var n=new pl(3);return n[0]=t,n[1]=e,n[2]=r,n}function kl(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Rl(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Bl(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Pl(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function Dl(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function Ll(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Ol(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function Nl(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function zl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ul(t,e,r){var n=e[0],i=e[1],o=e[2],s=r[0],a=r[1],l=r[2];return t[0]=i*l-o*a,t[1]=o*s-n*l,t[2]=n*a-i*s,t}function jl(t,e,r){var n=e[0],i=e[1],o=e[2],s=r[3]*n+r[7]*i+r[11]*o+r[15];return t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/(s=s||1),t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/s,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/s,t}function Fl(t,e,r){var n=r[0],i=r[1],o=r[2],s=e[0],a=e[1],l=e[2],u=i*l-o*a,c=o*s-n*l,h=n*a-i*s,f=i*h-o*c,d=o*u-n*h,p=n*c-i*u,m=2*r[3];return c*=m,h*=m,d*=2,p*=2,t[0]=s+(u*=m)+(f*=2),t[1]=a+c+d,t[2]=l+h+p,t}var Vl,Gl=Rl,ql=Bl,Kl=Cl;function Wl(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Zl(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*s,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*s,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*s,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*s,t}function Hl(){var t=new pl(4);return pl!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ql(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Xl(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(r),l=Math.cos(r);return t[0]=n*l+s*a,t[1]=i*l+o*a,t[2]=o*l-i*a,t[3]=s*l-n*a,t}function Yl(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(r),l=Math.cos(r);return t[0]=n*l-o*a,t[1]=i*l+s*a,t[2]=o*l+n*a,t[3]=s*l-i*a,t}Tl(),Vl=new pl(4),pl!=Float32Array&&(Vl[0]=0,Vl[1]=0,Vl[2]=0,Vl[3]=0),Tl(),Il(1,0,0),Il(0,1,0),Hl(),Hl(),ml();class Jl{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(t,e,r){const n=zl(e,this.dir);if(Math.abs(n)<1e-6)return!1;const i=((t[0]-this.pos[0])*e[0]+(t[1]-this.pos[1])*e[1]+(t[2]-this.pos[2])*e[2])/n;return r[0]=this.pos[0]+this.dir[0]*i,r[1]=this.pos[1]+this.dir[1]*i,r[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(t,e,r){if(function(t,e){var r=t[0],n=t[1],i=t[2],o=e[0],s=e[1],a=e[2];return Math.abs(r-o)<=dl*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=dl*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-a)<=dl*Math.max(1,Math.abs(i),Math.abs(a))}(this.pos,t)||0===e)return r[0]=r[1]=r[2]=0,!1;const[n,i,o]=this.dir,s=this.pos[0]-t[0],a=this.pos[1]-t[1],l=this.pos[2]-t[2],u=n*n+i*i+o*o,c=2*(s*n+a*i+l*o),h=c*c-4*u*(s*s+a*a+l*l-e*e);if(h<0){const t=Math.max(-c/2,0),u=s+n*t,h=a+i*t,f=l+o*t,d=Math.hypot(u,h,f);return r[0]=u*e/d,r[1]=h*e/d,r[2]=f*e/d,!1}{const t=(-c-Math.sqrt(h))/(2*u);if(t<0){const t=Math.hypot(s,a,l);return r[0]=s*e/t,r[1]=a*e/t,r[2]=l*e/t,!1}return r[0]=s+n*t,r[1]=a+i*t,r[2]=l+o*t,!0}}}class $l{constructor(t,e,r,n,i){this.TL=t,this.TR=e,this.BR=r,this.BL=n,this.horizon=i}static fromInvProjectionMatrix(t,e,r){const n=[-1,1,1],i=[1,1,1],o=[1,-1,1],s=[-1,-1,1],a=jl(n,n,t),l=jl(i,i,t),u=jl(o,o,t),c=jl(s,s,t);return new $l(a,l,u,c,e/r)}}class tu{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,e,r,n){const i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const o=Zl([],r,t),s=1/o[3]/e*i;return function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}(o,o,[s,s,n?1/o[3]:s,s])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=Nl([],Ul([],Gl([],o[t[0]],o[t[1]]),Gl([],o[t[2]],o[t[1]]))),r=-zl(e,o[t[1]]);return e.concat(r)}));return new tu(o,s)}}class eu{static fromPoints(t){const e=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],r=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];for(const n of t)e[0]=Math.min(e[0],n[0]),e[1]=Math.min(e[1],n[1]),e[2]=Math.min(e[2],n[2]),r[0]=Math.max(r[0],n[0]),r[1]=Math.max(r[1],n[1]),r[2]=Math.max(r[2],n[2]);return new eu(e,r)}constructor(t,e){this.min=t,this.max=e,this.center=Ll([],kl([],this.min,this.max),.5)}quadrant(t){const e=[t%2==0,t<2],r=Al(this.min),n=Al(this.max);for(let i=0;i<e.length;i++)r[i]=e[i]?this.min[i]:this.center[i],n[i]=e[i]?this.center[i]:this.max[i];return n[2]=this.max[2],new eu(r,n)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,e=this.max;return[[t[0],t[1],t[2]],[e[0],t[1],t[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],e[2]],[t[0],e[1],e[2]]]}intersects(t){const e=this.getCorners();let r=!0;for(let n=0;n<t.planes.length;n++){const i=t.planes[n];let o=0;for(let t=0;t<e.length;t++)o+=zl(i,e[t])+i[3]>=0;if(0===o)return 0;o!==e.length&&(r=!1)}if(r)return 2;for(let n=0;n<3;n++){let e=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<t.points.length;i++){const o=t.points[i][n]-this.min[n];e=Math.min(e,o),r=Math.max(r,o)}if(r<0||e>this.max[n]-this.min[n])return 0}return 1}}function ru(t,e,r,n,i,o,s,a,l){if(o&&t.queryGeometry.isAboveHorizon)return!1;o&&(l*=t.pixelToTileUnitsFactor);const u=t.tileID.canonical,c=r.projection.upVectorScale(u,r.center.lat,r.worldSize).metersToTile;for(const h of e)for(const e of h){const h=e.add(a),f=i&&r.elevation?r.elevation.exaggeration()*i.getElevationAt(h.x,h.y,!0):0,d=r.projection.projectTilePoint(h.x,h.y,u);if(f>0){const t=r.projection.upVector(u,h.x,h.y);d.x+=t[0]*c*f,d.y+=t[1]*c*f,d.z+=t[2]*c*f}const p=o?h:nu(d.x,d.y,d.z,n),m=o?t.tilespaceRays.map((t=>su(t,f))):t.queryGeometry.screenGeometry,g=Zl([],[d.x,d.y,d.z,1],n);if(!s&&o?l*=g[3]/r.cameraToCenterDistance:s&&!o&&(l*=r.cameraToCenterDistance/g[3]),o){const t=Ba((e.y/xa+u.y)/(1<<u.z));l/=r.projection.pixelsPerMeter(t,1)/ka(1,t)}if(Xa(m,p,l))return!0}return!1}function nu(t,e,r,n){const o=Zl([],[t,e,r,1],n);return new i(o[0]/o[3],o[1]/o[3])}const iu=Il(0,0,0),ou=Il(0,0,1);function su(t,e){const r=Tl();return iu[2]=e,t.intersectsPlane(iu,ou,r),new i(r[0],r[1])}class au extends Ha{}function lu(t,{width:e,height:r},n,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==e*r*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(e*r*n);return t.width=e,t.height=r,t.data=i,t}function uu(t,e,r){const{width:n,height:i}=e;n===t.width&&i===t.height||(cu(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,i)},r),t.width=n,t.height=i,t.data=e.data)}function cu(t,e,r,n,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const s=t.data,a=e.data;for(let l=0;l<i.height;l++){const u=((r.y+l)*t.width+r.x)*o,c=((n.y+l)*e.width+n.x)*o;for(let t=0;t<i.width*o;t++)a[c+t]=s[u+t]}return e}Pi(au,"HeatmapBucket",{omit:["layers"]});class hu{constructor(t,e){lu(this,t,1,e)}resize(t){uu(this,new hu(t),1)}clone(){return new hu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,r,n,i){cu(t,e,r,n,i,1)}}class fu{constructor(t,e){lu(this,t,4,e)}resize(t){uu(this,new fu(t),4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new fu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,r,n,i){cu(t,e,r,n,i,4)}}Pi(hu,"AlphaImage"),Pi(fu,"RGBAImage");var du={paint:new Zo({"heatmap-radius":new Go(Kt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Go(Kt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Vo(Kt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Wo(Kt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Vo(Kt.paint_heatmap["heatmap-opacity"])})};function pu(t){const e={},r=t.resolution||256,n=t.clips?t.clips.length:1,i=t.image||new fu({width:r,height:n}),o=(r,n,o)=>{e[t.evaluationKey]=o;const s=t.expression.evaluate(e);i.data[r+n+0]=Math.floor(255*s.r/s.a),i.data[r+n+1]=Math.floor(255*s.g/s.a),i.data[r+n+2]=Math.floor(255*s.b/s.a),i.data[r+n+3]=Math.floor(255*s.a)};if(t.clips)for(let s=0,a=0;s<n;++s,a+=4*r)for(let e=0,n=0;e<r;e++,n+=4){const i=e/(r-1),{start:l,end:u}=t.clips[s];o(a,n,l*(1-i)+u*i)}else for(let s=0,a=0;s<r;s++,a+=4)o(0,a,s/(r-1));return i}var mu={paint:new Zo({"hillshade-illumination-direction":new Vo(Kt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Vo(Kt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Vo(Kt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Vo(Kt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Vo(Kt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Vo(Kt.paint_hillshade["hillshade-accent-color"])})};const gu=Jo([{name:"a_pos",components:2,type:"Int16"}],4),{members:yu}=gu;var _u=bu,vu=bu;function bu(t,e,r){r=r||2;var n,i,o,s,a,l,u,c=e&&e.length,h=c?e[0]*r:t.length,f=wu(t,0,h,r,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(t,e,r,n){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=wu(t,e[i]*n,i<o-1?e[i+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),a.push(Bu(s));for(a.sort(Cu),i=0;i<a.length;i++)r=Iu(a[i],r);return r}(t,e,f,r)),t.length>80*r){n=o=t[0],i=s=t[1];for(var p=r;p<h;p+=r)(a=t[p])<n&&(n=a),(l=t[p+1])<i&&(i=l),a>o&&(o=a),l>s&&(s=l);u=0!==(u=Math.max(o-n,s-i))?32767/u:0}return Eu(f,d,r,n,i,u,0),d}function wu(t,e,r,n,i){var o,s;if(i===Ku(t,e,r,n)>0)for(o=e;o<r;o+=n)s=Vu(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=Vu(o,t[o],t[o+1],s);return s&&Ou(s,s.next)&&(Gu(s),s=s.next),s}function xu(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Ou(n,n.next)&&0!==Lu(n.prev,n,n.next))n=n.next;else{if(Gu(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function Eu(t,e,r,n,i,o,s){if(t){!s&&o&&function(t,e,r,n){var i=t;do{0===i.z&&(i.z=Ru(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,l,u=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<u&&(a++,n=n.nextZ);e++);for(l=u;a>0||l>0&&n;)0!==a&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(s>1)}(i)}(t,n,i,o);for(var a,l,u=t;t.prev!==t.next;)if(a=t.prev,l=t.next,o?Mu(t,n,i,o):Su(t))e.push(a.i/r|0),e.push(t.i/r|0),e.push(l.i/r|0),Gu(t),t=l.next,u=l.next;else if((t=l)===u){s?1===s?Eu(t=Tu(xu(t),e,r),e,r,n,i,o,2):2===s&&Au(t,e,r,n,i,o):Eu(xu(t),e,r,n,i,o,1);break}}}function Su(t){var e=t.prev,r=t,n=t.next;if(Lu(e,r,n)>=0)return!1;for(var i=e.x,o=r.x,s=n.x,a=e.y,l=r.y,u=n.y,c=i<o?i<s?i:s:o<s?o:s,h=a<l?a<u?a:u:l<u?l:u,f=i>o?i>s?i:s:o>s?o:s,d=a>l?a>u?a:u:l>u?l:u,p=n.next;p!==e;){if(p.x>=c&&p.x<=f&&p.y>=h&&p.y<=d&&Pu(i,a,o,l,s,u,p.x,p.y)&&Lu(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Mu(t,e,r,n){var i=t.prev,o=t,s=t.next;if(Lu(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,u=s.x,c=i.y,h=o.y,f=s.y,d=a<l?a<u?a:u:l<u?l:u,p=c<h?c<f?c:f:h<f?h:f,m=a>l?a>u?a:u:l>u?l:u,g=c>h?c>f?c:f:h>f?h:f,y=Ru(d,p,e,r,n),_=Ru(m,g,e,r,n),v=t.prevZ,b=t.nextZ;v&&v.z>=y&&b&&b.z<=_;){if(v.x>=d&&v.x<=m&&v.y>=p&&v.y<=g&&v!==i&&v!==s&&Pu(a,c,l,h,u,f,v.x,v.y)&&Lu(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,b.x>=d&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==s&&Pu(a,c,l,h,u,f,b.x,b.y)&&Lu(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;v&&v.z>=y;){if(v.x>=d&&v.x<=m&&v.y>=p&&v.y<=g&&v!==i&&v!==s&&Pu(a,c,l,h,u,f,v.x,v.y)&&Lu(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;b&&b.z<=_;){if(b.x>=d&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==s&&Pu(a,c,l,h,u,f,b.x,b.y)&&Lu(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Tu(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!Ou(i,o)&&Nu(i,n,n.next,o)&&ju(i,o)&&ju(o,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(o.i/r|0),Gu(n),Gu(n.next),n=t=o),n=n.next}while(n!==t);return xu(n)}function Au(t,e,r,n,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Du(s,a)){var l=Fu(s,a);return s=xu(s,s.next),l=xu(l,l.next),Eu(s,e,r,n,i,o,0),void Eu(l,e,r,n,i,o,0)}a=a.next}s=s.next}while(s!==t)}function Cu(t,e){return t.x-e.x}function Iu(t,e){var r=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s&&(s=a,r=n.x<n.next.x?n:n.next,a===i))return r}n=n.next}while(n!==e);if(!r)return null;var l,u=r,c=r.x,h=r.y,f=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&Pu(o<h?i:s,o,c,h,o<h?s:i,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(i-n.x),ju(n,t)&&(l<f||l===f&&(n.x>r.x||n.x===r.x&&ku(r,n)))&&(r=n,f=l)),n=n.next}while(n!==u);return r}(t,e);if(!r)return e;var n=Fu(r,t);return xu(n,n.next),xu(r,r.next)}function ku(t,e){return Lu(t.prev,t,e.prev)<0&&Lu(e.next,t,t.next)<0}function Ru(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Bu(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function Pu(t,e,r,n,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(n-a)>=(r-s)*(e-a)&&(r-s)*(o-a)>=(i-s)*(n-a)}function Du(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Nu(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(ju(t,e)&&ju(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(Lu(t.prev,t,e.prev)||Lu(t,e.prev,e))||Ou(t,e)&&Lu(t.prev,t,t.next)>0&&Lu(e.prev,e,e.next)>0)}function Lu(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Ou(t,e){return t.x===e.x&&t.y===e.y}function Nu(t,e,r,n){var i=Uu(Lu(t,e,r)),o=Uu(Lu(t,e,n)),s=Uu(Lu(r,n,t)),a=Uu(Lu(r,n,e));return i!==o&&s!==a||!(0!==i||!zu(t,r,e))||!(0!==o||!zu(t,n,e))||!(0!==s||!zu(r,t,n))||!(0!==a||!zu(r,e,n))}function zu(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Uu(t){return t>0?1:t<0?-1:0}function ju(t,e){return Lu(t.prev,t,t.next)<0?Lu(t,e,t.next)>=0&&Lu(t,t.prev,e)>=0:Lu(t,e,t.prev)<0||Lu(t,t.next,e)<0}function Fu(t,e){var r=new qu(t.i,t.x,t.y),n=new qu(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Vu(t,e,r,n){var i=new qu(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Gu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function qu(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ku(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Wu(t,e,r,n,i){Zu(t,e,r||0,n||t.length-1,i||Qu)}function Zu(t,e,r,n,i){for(;n>r;){if(n-r>600){var o=n-r+1,s=e-r+1,a=Math.log(o),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1);Zu(t,e,Math.max(r,Math.floor(e-s*l/o+u)),Math.min(n,Math.floor(e+(o-s)*l/o+u)),i)}var c=t[e],h=r,f=n;for(Hu(t,r,e),i(t[n],c)>0&&Hu(t,r,n);h<f;){for(Hu(t,h,f),h++,f--;i(t[h],c)<0;)h++;for(;i(t[f],c)>0;)f--}0===i(t[r],c)?Hu(t,r,f):Hu(t,++f,n),f<=e&&(r=f+1),e<=f&&(n=f-1)}}function Hu(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Qu(t,e){return t<e?-1:t>e?1:0}function Xu(t,e){const r=t.length;if(r<=1)return[t];const n=[];let i,o;for(let s=0;s<r;s++){const e=P(t[s]);0!==e&&(t[s].area=Math.abs(e),void 0===o&&(o=e<0),o===e<0?(i&&n.push(i),i=[t[s]]):i.push(t[s]))}if(i&&n.push(i),e>1)for(let s=0;s<n.length;s++)n[s].length<=e||(Wu(n[s],e,1,n[s].length-1,Yu),n[s]=n[s].slice(0,e));return n}function Yu(t,e){return e.area-t.area}function Ju(t,e,r){const n=r.patternDependencies;let i=!1;for(const o of e){const e=o.paint.get(`${t}-pattern`);e.isConstant()||(i=!0);const r=e.constantOr(null);r&&(i=!0,n[r.to]=!0,n[r.from]=!0)}return i}function $u(t,e,r,n,i){const o=i.patternDependencies;for(const s of e){const e=s.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:n-1},r,{},i.availableImages),a=e.evaluate({zoom:n},r,{},i.availableImages),l=e.evaluate({zoom:n+1},r,{},i.availableImages);t=t&&t.name?t.name:t,a=a&&a.name?a.name:a,l=l&&l.name?l.name:l,o[t]=!0,o[a]=!0,o[l]=!0,r.patterns[s.id]={min:t,mid:a,max:l}}}return r}bu.deviation=function(t,e,r,n){var i=e&&e.length,o=Math.abs(Ku(t,0,i?e[0]*r:t.length,r));if(i)for(var s=0,a=e.length;s<a;s++)o-=Math.abs(Ku(t,e[s]*r,s<a-1?e[s+1]*r:t.length,r));var l=0;for(s=0;s<n.length;s+=3){var u=n[s]*r,c=n[s+1]*r,h=n[s+2]*r;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},bu.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&r.holes.push(n+=t[i-1].length)}return r},_u.default=vu;class tc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ts,this.indexArray=new gs,this.indexArray2=new xs,this.programConfigurations=new ha(t.layers,t.zoom),this.segments=new wa,this.segments2=new wa,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.projection=t.projection}populate(t,e,r,n){this.hasPattern=Ju("fill",this.layers,e);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:s,id:a,index:l,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,c=Ka(s,t);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom),c,r))continue;const h=i?i.evaluate(c,{},r,e.availableImages):void 0,f={id:a,properties:s.properties,type:s.type,sourceLayerIndex:u,index:l,geometry:t?c.geometry:qa(s,r,n),patterns:{},sortKey:h};o.push(f)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const s of o){const{geometry:n,index:i,sourceLayerIndex:o}=s;if(this.hasPattern){const t=$u("fill",this.layers,s,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(s,n,i,r,{},e.availableImages);e.featureIndex.insert(t[i].feature,n,i,o,this.index)}}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n)}addFeatures(t,e,r,n,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,e,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,yu),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,r,n,i,o=[]){for(const s of Xu(e,500)){let t=0;for(const a of s)t+=a.length;const e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),r=e.vertexLength,n=[],i=[];for(const a of s){if(0===a.length)continue;a!==s[0]&&i.push(n.length/2);const t=this.segments2.prepareSegment(a.length,this.layoutVertexArray,this.indexArray2),e=t.vertexLength;this.layoutVertexArray.emplaceBack(a[0].x,a[0].y),this.indexArray2.emplaceBack(e+a.length-1,e),n.push(a[0].x),n.push(a[0].y);for(let r=1;r<a.length;r++)this.layoutVertexArray.emplaceBack(a[r].x,a[r].y),this.indexArray2.emplaceBack(e+r-1,e+r),n.push(a[r].x),n.push(a[r].y);t.vertexLength+=a.length,t.primitiveLength+=a.length}const o=_u(n,i);for(let s=0;s<o.length;s+=3)this.indexArray.emplaceBack(r+o[s],r+o[s+1],r+o[s+2]);e.vertexLength+=t,e.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,o,n)}}Pi(tc,"FillBucket",{omit:["layers","patternFeatures"]});const ec=new Zo({"fill-sort-key":new Go(Kt.layout_fill["fill-sort-key"])});var rc={paint:new Zo({"fill-antialias":new Vo(Kt.paint_fill["fill-antialias"]),"fill-opacity":new Go(Kt.paint_fill["fill-opacity"]),"fill-color":new Go(Kt.paint_fill["fill-color"]),"fill-outline-color":new Go(Kt.paint_fill["fill-outline-color"]),"fill-translate":new Vo(Kt.paint_fill["fill-translate"]),"fill-translate-anchor":new Vo(Kt.paint_fill["fill-translate-anchor"]),"fill-pattern":new qo(Kt.paint_fill["fill-pattern"])}),layout:ec};const nc=Jo([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),ic=Jo([{name:"a_centroid_pos",components:2,type:"Uint16"}]),oc=Jo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:sc}=nc;var ac=lc;function lc(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(uc,this,e)}function uc(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function cc(t){for(var e,r,n=0,i=0,o=t.length,s=o-1;i<o;s=i++)n+=((r=t[s]).x-(e=t[i]).x)*(e.y+r.y);return n}lc.types=["Unknown","Point","LineString","Polygon"],lc.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,o=0,s=0,a=0,l=[];t.pos<r;){if(o<=0){var u=t.readVarint();n=7&u,o=u>>3}if(o--,1===n||2===n)s+=t.readSVarint(),a+=t.readSVarint(),1===n&&(e&&l.push(e),e=[]),e.push(new i(s,a));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&l.push(e),l},lc.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,o=0,s=1/0,a=-1/0,l=1/0,u=-1/0;t.pos<e;){if(n<=0){var c=t.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)(i+=t.readSVarint())<s&&(s=i),i>a&&(a=i),(o+=t.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==r)throw new Error("unknown command "+r)}return[s,l,a,u]},lc.prototype.toGeoJSON=function(t,e,r){var n,i,o=this.extent*Math.pow(2,r),s=this.extent*t,a=this.extent*e,l=this.loadGeometry(),u=lc.types[this.type];function c(t){for(var e=0;e<t.length;e++){var r=t[e];t[e]=[360*(r.x+s)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+a)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(n=0;n<l.length;n++)h[n]=l[n][0];c(l=h);break;case 2:for(n=0;n<l.length;n++)c(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],o=0;o<e;o++){var s=cc(t[o]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}return r&&i.push(r),i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)c(l[n][i])}1===l.length?l=l[0]:u="Multi"+u;var f={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var hc=fc;function fc(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(dc,this,e),this.length=this._features.length}function dc(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(r))}function pc(t,e,r){if(3===t){var n=new hc(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}fc.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new ac(this._pbf,e,this.extent,this._keys,this._values)};var mc={VectorTile:function(t,e){this.layers=t.readFields(pc,{},e)},VectorTileFeature:ac,VectorTileLayer:hc};function gc(t,e,r,n){const o=[],s=0===n?(t,e,r,n,o,s)=>{t.push(new i(s,r+(s-e)/(n-e)*(o-r)))}:(t,e,r,n,o,s)=>{t.push(new i(e+(s-r)/(o-r)*(n-e),s))};for(const i of t){const t=[];for(const o of i){if(o.length<=2)continue;const i=[];for(let t=0;t<o.length-1;t++){const a=o[t].x,l=o[t].y,u=o[t+1].x,c=o[t+1].y,h=0===n?a:l,f=0===n?u:c;h<e?f>e&&s(i,a,l,u,c,e):h>r?f<r&&s(i,a,l,u,c,r):i.push(o[t]),f<e&&h>=e&&s(i,a,l,u,c,e),f>r&&h<=r&&s(i,a,l,u,c,r)}let a=o[o.length-1];const l=0===n?a.x:a.y;l>=e&&l<=r&&i.push(a),i.length&&(a=i[i.length-1],i[0].x===a.x&&i[0].y===a.y||i.push(i[0]),t.push(i))}t.length&&o.push(t)}return o}const yc=mc.VectorTileFeature.types,_c=Math.pow(2,13);function vc(t,e,r,n,i,o,s,a){t.emplaceBack((e<<1)+s,(r<<1)+o,(Math.floor(n*_c)<<1)+i,Math.round(a))}function bc(t,e,r){const n=16384;t.emplaceBack(e.x,e.y,e.z,r[0]*n,r[1]*n,r[2]*n)}class wc{constructor(){this.acc=new i(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new i(t.x,t.y),this.max=new i(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);const r=this.min,n=this.max;t.x<r.x?r.x=t.x:t.x>n.x&&(n.x=t.x),t.y<r.y?r.y=t.y:t.y>n.y&&(n.y=t.y),((0===t.x||t.x===xa)&&t.x===e.x)!=((0===t.y||t.y===xa)&&t.y===e.y)&&this.processBorderOverlap(t,e),e.x<0!=t.x<0&&this.addBorderIntersection(0,_r(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>xa!=t.x>xa&&this.addBorderIntersection(1,_r(e.y,t.y,(xa-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,_r(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>xa!=t.y>xa&&this.addBorderIntersection(3,_r(e.x,t.x,(xa-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const r=this.borders[t];e<r[0]&&(r[0]=e),e>r[1]&&(r[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const r=0===t.x?0:1;this.addBorderIntersection(r,e.y),this.addBorderIntersection(r,t.y)}else{const r=0===t.y?2:3;this.addBorderIntersection(r,e.x),this.addBorderIntersection(r,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new i(0,0)}span(){return new i(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class xc{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new rs,this.centroidVertexArray=new zs,this.indexArray=new gs,this.programConfigurations=new ha(t.layers,t.zoom),this.segments=new wa,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,r,n){this.features=[],this.hasPattern=Ju("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/xa/(1<<t.z)}(r),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:o,index:s,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Ka(i,t);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom),l,r))continue;const u={id:o,sourceLayerIndex:a,index:s,geometry:t?l.geometry:qa(i,r,n),properties:i.properties,type:i.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push($u("fill-extrusion",this.layers,u,this.zoom,e)):this.addFeature(u,u.geometry,s,r,{},e.availableImages,n),e.featureIndex.insert(i,u.geometry,s,a,this.index,c)}this.sortBorders()}addFeatures(t,e,r,n,i){for(const o of this.features){const{geometry:t}=o;this.addFeature(o,t,o.index,e,r,n,i)}this.sortBorders()}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,sc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,oc.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,ic.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,r,n,o,s,a){const l=[new i(0,0),new i(xa,xa)],u=a.projection,c="globe"===u.name,h=this.enableTerrain&&!c?new wc:null,f="Polygon"===yc[t.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ts);const d=Xu(e,500);for(let i=d.length-1;i>=0;i--){const t=d[i];(0===t.length||(p=t[0]).every((t=>t.x<=0))||p.every((t=>t.x>=xa))||p.every((t=>t.y<=0))||p.every((t=>t.y>=xa)))&&d.splice(i,1)}var p;let m;if(c)m=kc(d,l,n);else{m=[];for(const t of d)m.push({polygon:t,bounds:l})}const g=f?this.edgeRadius:0;for(const{polygon:i,bounds:y}of m){let t=0,e=0;for(const n of i)f&&!n[0].equals(n[n.length-1])&&n.push(n[0]),e+=f?n.length-1:n.length;const r=this.segments.prepareSegment((f?5:4)*e,this.layoutVertexArray,this.indexArray);if(f){const e=[],o=[];t=r.vertexLength;for(const t of i){let s,a;t.length&&t!==i[0]&&o.push(e.length/2),s=t[1].sub(t[0])._perp()._unit();for(let i=1;i<t.length;i++){const o=t[i],l=t[i===t.length-1?1:i+1];let{x:h,y:f}=o;if(g){a=l.sub(o)._perp()._unit();const t=s.add(a)._unit(),e=g*Math.min(4,1/(s.x*t.x+s.y*t.y));h+=e*t.x,f+=e*t.y,s=a}vc(this.layoutVertexArray,h,f,0,0,1,1,0),r.vertexLength++,e.push(o.x,o.y),c&&bc(this.layoutVertexExtArray,u.projectTilePoint(h,f,n),u.upVector(n,h,f))}}const s=_u(e,o);for(let n=0;n<s.length;n+=3)this.indexArray.emplaceBack(t+s[n],t+s[n+2],t+s[n+1]),r.primitiveLength++}for(const o of i){h&&o.length&&h.startRing(o[0]);let e,i,s,a=o.length>4&&Ac(o[o.length-2],o[0],o[1]),l=g?Sc(o[o.length-2],o[0],o[1],g):0;i=o[1].sub(o[0])._perp()._unit();for(let d=1,p=0;d<o.length;d++){let m=o[d-1],_=o[d];const v=o[d===o.length-1?1:d+1];if(h&&f&&h.currentPolyCount.top++,Tc(_,m,y)){g&&(i=v.sub(_)._perp()._unit());continue}h&&h.append(_,m);const b=_.sub(m)._perp(),w=b.x/(Math.abs(b.x)+Math.abs(b.y)),x=b.y>0?1:0,E=m.dist(_);if(p+E>32768&&(p=0),g){s=v.sub(_)._perp()._unit();let t=Mc(m,_,v,Ec(i,s),g);isNaN(t)&&(t=0);const e=_.sub(m)._unit();m=m.add(e.mult(l))._round(),_=_.add(e.mult(-t))._round(),l=t,i=s}const S=r.vertexLength,M=o.length>4&&Ac(m,_,v);let T=Cc(p,a,!0);if(vc(this.layoutVertexArray,m.x,m.y,w,x,0,0,T),vc(this.layoutVertexArray,m.x,m.y,w,x,0,1,T),p+=E,T=Cc(p,M,!1),a=M,vc(this.layoutVertexArray,_.x,_.y,w,x,0,0,T),vc(this.layoutVertexArray,_.x,_.y,w,x,0,1,T),r.vertexLength+=4,this.indexArray.emplaceBack(S+0,S+1,S+2),this.indexArray.emplaceBack(S+1,S+3,S+2),r.primitiveLength+=2,g){const n=t+(1===d?o.length-2:d-2),i=1===d?t:n+1;if(this.indexArray.emplaceBack(S+1,n,S+3),this.indexArray.emplaceBack(n,i,S+3),r.primitiveLength+=2,void 0===e&&(e=S),!Tc(v,o[d],y)){const t=d===o.length-1?e:r.vertexLength;this.indexArray.emplaceBack(S+2,S+3,t),this.indexArray.emplaceBack(S+3,t+1,t),this.indexArray.emplaceBack(S+3,i,t+1),r.primitiveLength+=3}}if(c){const t=this.layoutVertexExtArray,e=u.projectTilePoint(m.x,m.y,n),r=u.projectTilePoint(_.x,_.y,n),i=u.upVector(n,m.x,m.y),o=u.upVector(n,_.x,_.y);bc(t,e,i),bc(t,e,i),bc(t,r,o),bc(t,r,o)}}f&&(t+=o.length-1)}}if(h&&h.polyCount.length>0){if(h.borders){h.vertexArrayOffset=this.centroidVertexArray.length;const t=h.borders,e=this.featuresOnBorder.push(h)-1;for(let r=0;r<4;r++)t[r][0]!==Number.MAX_VALUE&&this.borders[r].push(e)}this.encodeCentroid(h.borders?void 0:h.centroid(),h)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,o,s,n)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,r)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[r].borders[t][0]))}encodeCentroid(t,e,r=!0){let n,i;if(t)if(0!==t.y){const r=e.span()._mult(this.tileToMeter);n=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(r.x/10)),i=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(r.y/10))}else n=Math.ceil(7*(t.x+450)),i=0;else n=0,i=+r;let o=r?this.centroidVertexArray.length:e.vertexArrayOffset;for(const s of e.polyCount){r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*s.edges+s.top);for(let t=0;t<s.top;t++)this.centroidVertexArray.emplace(o++,n,i);for(let t=0;t<2*s.edges;t++)this.centroidVertexArray.emplace(o++,0,i),this.centroidVertexArray.emplace(o++,n,i)}}}function Ec(t,e){const r=t.add(e)._unit();return t.x*r.x+t.y*r.y}function Sc(t,e,r,n){const i=e.sub(t)._perp()._unit(),o=r.sub(e)._perp()._unit();return Mc(t,e,r,Ec(i,o),n)}function Mc(t,e,r,n,i){const o=Math.sqrt(1-n*n);return Math.min(t.dist(e)/3,e.dist(r)/3,i*o/n)}function Tc(t,e,r){return t.x<r[0].x&&e.x<r[0].x||t.x>r[1].x&&e.x>r[1].x||t.y<r[0].y&&e.y<r[0].y||t.y>r[1].y&&e.y>r[1].y}function Ac(t,e,r){if(t.x<0||t.x>=xa||e.x<0||e.x>=xa||r.x<0||r.x>=xa)return!1;const n=r.sub(e),i=n.perp(),o=t.sub(e);return(n.x*o.x+n.y*o.y)/Math.sqrt((n.x*n.x+n.y*n.y)*(o.x*o.x+o.y*o.y))>-.866&&i.x*o.x+i.y*o.y<0}function Cc(t,e,r){const n=e?2|t:-3&t;return r?1|n:-2&n}function Ic(){const t=Math.PI/32,e=Math.tan(t),r=Sa;return r*Math.sqrt(1+2*e*e)-r}function kc(t,e,r){const n=1<<r.z,o=Ra(r.x/n),s=Ra((r.x+1)/n),a=Ba(r.y/n),l=Ba((r.y+1)/n);return function(t,e,r,n,o=0,s){const a=[];if(!t.length||!r||!n)return a;const l=(t,e)=>{for(const r of t)a.push({polygon:r,bounds:e})},u=Math.ceil(Math.log2(r)),c=Math.ceil(Math.log2(n)),h=u-c,f=[];for(let i=0;i<Math.abs(h);i++)f.push(h>0?0:1);for(let i=0;i<Math.min(u,c);i++)f.push(0),f.push(1);let d=t;if(d=gc(d,e[0].y-o,e[1].y+o,1),d=gc(d,e[0].x-o,e[1].x+o,0),!d.length)return a;const p=[];for(f.length?p.push({polygons:d,bounds:e,depth:0}):l(d,e);p.length;){const t=p.pop(),e=t.depth,r=f[e],n=t.bounds[0],a=t.bounds[1],u=0===r?n.x:n.y,c=0===r?a.x:a.y,h=s?s(r,u,c):.5*(u+c),d=gc(t.polygons,u-o,h+o,r),m=gc(t.polygons,h-o,c+o,r);if(d.length){const t=[n,new i(0===r?h:a.x,1===r?h:a.y)];f.length>e+1?p.push({polygons:d,bounds:t,depth:e+1}):l(d,t)}if(m.length){const t=[new i(0===r?h:n.x,1===r?h:n.y),a];f.length>e+1?p.push({polygons:m,bounds:t,depth:e+1}):l(m,t)}}return a}(t,e,Math.ceil((s-o)/11.25),Math.ceil((a-l)/11.25),1,((t,e,i)=>{if(0===t)return.5*(e+i);{const t=Ba((r.y+e/xa)/n);return(Ia(.5*(Ba((r.y+i/xa)/n)+t))*n-r.y)*xa}}))}Pi(xc,"FillExtrusionBucket",{omit:["layers","features"]}),Pi(wc,"PartMetadata");const Rc=new Zo({"fill-extrusion-edge-radius":new Vo(Kt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Bc={paint:new Zo({"fill-extrusion-opacity":new Vo(Kt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Go(Kt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Vo(Kt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Vo(Kt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new qo(Kt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Go(Kt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Go(Kt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Vo(Kt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Vo(Kt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Vo(Kt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:Rc};function Pc(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}class Dc{constructor(t,e,r){this.z=t,this.x=e,this.y=r,this.key=Nc(0,t,t,e,r)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const r=function(t,e,r){var n=Pc(256*t,256*(e=Math.pow(2,r)-e-1),r),i=Pc(256*(t+1),256*(e+1),r);return n[0]+","+n[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),n=function(t,e,r){let n,i="";for(let o=t;o>0;o--)n=1<<o-1,i+=(e&n?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",n).replace("{bbox-epsg-3857}",r)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Lc{constructor(t,e){this.wrap=t,this.canonical=e,this.key=Nc(t,e.z,e.z,e.x,e.y)}}class Oc{constructor(t,e,r,n,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Dc(r,+n,+i),this.key=0===e&&t===r?this.canonical.key:Nc(e,t,r,n,i)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new Oc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Oc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return Nc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const r=this.canonical.z-t;return Nc(this.wrap*+e,t,t,this.canonical.x>>r,this.canonical.y>>r)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new Oc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new Oc(e,this.wrap,e,r,n),new Oc(e,this.wrap,e,r+1,n),new Oc(e,this.wrap,e,r,n+1),new Oc(e,this.wrap,e,r+1,n+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Oc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Oc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Lc(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Nc(t,e,r,n,i){const o=1<<Math.min(r,22);let s=o*(i%o)+n%o;return t&&r<22&&(s+=o*o*((t<0?-2*t-1:2*t)%(1<<2*(22-r)))),16*(32*s+r)+(e-r)}function zc(t,e){return t.x*e.x+t.y*e.y}function Uc(t,e){if(1===t.length){let r=0;const n=e[r++];let i;for(;!i||n.equals(i);)if(i=e[r++],!i)return 1/0;for(;r<e.length;r++){const o=e[r],s=t[0],a=i.sub(n),l=o.sub(n),u=s.sub(n),c=zc(a,a),h=zc(a,l),f=zc(l,l),d=zc(u,a),p=zc(u,l),m=c*f-h*h,g=(f*d-h*p)/m,y=(c*p-h*d)/m,_=n.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(_))return _}return 1/0}{let t=1/0;for(const r of e)t=Math.min(t,r.z);return t}}function jc(t){const e=new i(t[0],t[1]);return e.z=t[2],e}function Fc(t,e,r,n,i,o,s,a){const l=s*i.getElevationAt(t,e,!0,!0),u=0!==o[0],c=u?0===o[1]?s*(o[0]/7-450):s*function(t,e,r){const n=Math.floor(e[0]/8),i=Math.floor(e[1]/8),o=10*(e[0]-8*n),s=10*(e[1]-8*i),a=t.getElevationAt(n,i,!0,!0),l=t.getMeterToDEM(r),u=Math.floor(.5*(o*l-1)),c=Math.floor(.5*(s*l-1)),h=t.tileCoordToPixel(n,i),f=2*u+1,d=2*c+1,p=function(t,e,r,n,i){return[t.getElevationAtPixel(e,r,!0),t.getElevationAtPixel(e+i,r,!0),t.getElevationAtPixel(e,r+i,!0),t.getElevationAtPixel(e+n,r+i,!0)]}(t,h.x-u,h.y-c,f,d),m=Math.abs(p[0]-p[1]),g=Math.abs(p[2]-p[3]),y=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),_=Math.min(.25,.5*l*(m+g)/f),v=Math.min(.25,.5*l*y/d);return a+Math.max(_*o,v*s)}(i,o,a):l;return{base:l+(0===r)?-1:r,top:u?Math.max(c+n,l+r+2):l+n}}Pi(Dc,"CanonicalTileID"),Pi(Oc,"OverscaledTileID",{omit:["projMatrix"]});const Vc=Jo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Gc}=Vc,qc=Jo([{name:"a_packed",components:4,type:"Float32"}]),{members:Kc}=qc,Wc=mc.VectorTileFeature.types,Zc=Math.cos(Math.PI/180*37.5);class Hc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new ns,this.layoutVertexArray2=new is,this.indexArray=new gs,this.programConfigurations=new ha(t.layers,t.zoom),this.segments=new wa,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,r,n){this.hasPattern=Ju("line",this.layers,e);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:u,id:c,index:h,sourceLayerIndex:f}of t){const t=this.layers[0]._featureFilter.needGeometry,e=Ka(u,t);if(!this.layers[0]._featureFilter.filter(new Po(this.zoom),e,r))continue;const s=i?i.evaluate(e,{},r):void 0,a={id:c,properties:u.properties,type:u.type,sourceLayerIndex:f,index:h,geometry:t?e.geometry:qa(u,r,n),patterns:{},sortKey:s};o.push(a)}i&&o.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:s,featureIndex:a}=e,l=this.addConstantDashes(s);for(const u of o){const{geometry:n,index:i,sourceLayerIndex:o}=u;if(l&&this.addFeatureDashes(u,s),this.hasPattern){const t=$u("line",this.layers,u,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(u,n,i,r,s.positions,e.availableImages);a.insert(t[i].feature,n,i,o,this.index)}}addConstantDashes(t){let e=!1;for(const r of this.layers){const n=r.paint.get("line-dasharray").value,i=r.layout.get("line-cap").value;if("constant"!==n.kind||"constant"!==i.kind)e=!0;else{const e=i.value,r=n.value;if(!r)continue;t.addDash(r.from,e),t.addDash(r.to,e),r.other&&t.addDash(r.other,e)}}return e}addFeatureDashes(t,e){const r=this.zoom;for(const n of this.layers){const i=n.paint.get("line-dasharray").value,o=n.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let s,a,l,u,c,h;if("constant"===i.kind){const t=i.value;if(!t)continue;s=t.other||t.to,a=t.to,l=t.from}else s=i.evaluate({zoom:r-1},t),a=i.evaluate({zoom:r},t),l=i.evaluate({zoom:r+1},t);"constant"===o.kind?u=c=h=o.value:(u=o.evaluate({zoom:r-1},t),c=o.evaluate({zoom:r},t),h=o.evaluate({zoom:r+1},t)),e.addDash(s,u),e.addDash(a,c),e.addDash(l,h);const f=e.getKey(s,u),d=e.getKey(a,c),p=e.getKey(l,h);t.patterns[n.id]={min:f,mid:d,max:p}}}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r,n)}addFeatures(t,e,r,n,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,e,r,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Kc)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Gc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,r,n,i,o){const s=this.layers[0].layout,a=s.get("line-join").evaluate(t,{}),l=s.get("line-cap").evaluate(t,{}),u=s.get("line-miter-limit"),c=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const h of e)this.addLine(h,t,a,l,u,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i,o,n)}addLine(t,e,r,n,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const s="Polygon"===Wc[e.type];let a=t.length;for(;a>=2&&t[a-1].equals(t[a-2]);)a--;let l=0;for(;l<a-1&&t[l].equals(t[l+1]);)l++;if(a<(s?3:2))return;"bevel"===r&&(i=1.05);const u=this.overscaling<=16?122880/(512*this.overscaling):0,c=this.segments.prepareSegment(10*a,this.layoutVertexArray,this.indexArray);let h,f,d,p,m;this.e1=this.e2=-1,s&&(h=t[a-2],m=t[l].sub(h)._unit()._perp());for(let g=l;g<a;g++){if(d=g===a-1?s?t[l+1]:void 0:t[g+1],d&&t[g].equals(d))continue;m&&(p=m),h&&(f=h),h=t[g],m=d?d.sub(h)._unit()._perp():p,p=p||m;let e=p.add(m);0===e.x&&0===e.y||e._unit();const y=p.x*m.x+p.y*m.y,_=e.x*m.x+e.y*m.y,v=0!==_?1/_:1/0,b=2*Math.sqrt(2-2*_),w=_<Zc&&f&&d,x=p.x*m.y-p.y*m.x>0;if(w&&g>l){const t=h.dist(f);if(t>2*u){const e=h.sub(h.sub(f)._mult(u/t)._round());this.updateDistance(f,e),this.addCurrentVertex(e,p,0,0,c),f=e}}const E=f&&d;let S=E?r:s?"butt":n;if(E&&"round"===S&&(v<o?S="miter":v<=2&&(S="fakeround")),"miter"===S&&v>i&&(S="bevel"),"bevel"===S&&(v>2&&(S="flipbevel"),v<i&&(S="miter")),f&&this.updateDistance(f,h),"miter"===S)e._mult(v),this.addCurrentVertex(h,e,0,0,c);else if("flipbevel"===S){if(v>100)e=m.mult(-1);else{const t=v*p.add(m).mag()/p.sub(m).mag();e._perp()._mult(t*(x?-1:1))}this.addCurrentVertex(h,e,0,0,c),this.addCurrentVertex(h,e.mult(-1),0,0,c)}else if("bevel"===S||"fakeround"===S){const t=-Math.sqrt(v*v-1),e=x?t:0,r=x?0:t;if(f&&this.addCurrentVertex(h,p,e,r,c),"fakeround"===S){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let r=e/t;if(.5!==r){const t=r-.5;r+=r*t*(r-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const n=m.sub(p)._mult(r)._add(p)._unit()._mult(x?-1:1);this.addHalfVertex(h,n.x,n.y,!1,x,0,c)}}d&&this.addCurrentVertex(h,m,-e,-r,c)}else if("butt"===S)this.addCurrentVertex(h,e,0,0,c);else if("square"===S){const t=f?1:-1;f||this.addCurrentVertex(h,e,t,t,c),this.addCurrentVertex(h,e,0,0,c),f&&this.addCurrentVertex(h,e,t,t,c)}else"round"===S&&(f&&(this.addCurrentVertex(h,p,0,0,c),this.addCurrentVertex(h,p,1,1,c,!0)),d&&(this.addCurrentVertex(h,m,-1,-1,c,!0),this.addCurrentVertex(h,m,0,0,c)));if(w&&g<a-1){const t=h.dist(d);if(t>2*u){const e=h.add(d.sub(h)._mult(u/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,c),h=e}}}}addCurrentVertex(t,e,r,n,i,o=!1){const s=e.y*n-e.x,a=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*r,e.y-e.x*r,o,!1,r,i),this.addHalfVertex(t,s,a,o,!0,-n,i)}addHalfVertex({x:t,y:e},r,n,i,o,s,a){this.layoutVertexArray.emplaceBack((t<<1)+(i?1:0),(e<<1)+(o?1:0),Math.round(63*r)+128,Math.round(63*n)+128,1+(0===s?0:s<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const l=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),a.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Pi(Hc,"LineBucket",{omit:["layers","patternFeatures"]});const Qc=new Zo({"line-cap":new Go(Kt.layout_line["line-cap"]),"line-join":new Go(Kt.layout_line["line-join"]),"line-miter-limit":new Vo(Kt.layout_line["line-miter-limit"]),"line-round-limit":new Vo(Kt.layout_line["line-round-limit"]),"line-sort-key":new Go(Kt.layout_line["line-sort-key"])});var Xc={paint:new Zo({"line-opacity":new Go(Kt.paint_line["line-opacity"]),"line-color":new Go(Kt.paint_line["line-color"]),"line-translate":new Vo(Kt.paint_line["line-translate"]),"line-translate-anchor":new Vo(Kt.paint_line["line-translate-anchor"]),"line-width":new Go(Kt.paint_line["line-width"]),"line-gap-width":new Go(Kt.paint_line["line-gap-width"]),"line-offset":new Go(Kt.paint_line["line-offset"]),"line-blur":new Go(Kt.paint_line["line-blur"]),"line-dasharray":new qo(Kt.paint_line["line-dasharray"]),"line-pattern":new qo(Kt.paint_line["line-pattern"]),"line-gradient":new Wo(Kt.paint_line["line-gradient"]),"line-trim-offset":new Vo(Kt.paint_line["line-trim-offset"])}),layout:Qc};const Yc=new class extends Go{possiblyEvaluate(t,e){return e=new Po(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,r,n){return e=v({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,r,n)}}(Xc.paint.properties["line-width"].specification);function Jc(t,e){return e>0?e+2*t:t}Yc.useIntegerZoom=!0;const $c=Jo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),th=Jo([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),eh=Jo([{name:"a_projected_pos",components:4,type:"Float32"}],4);Jo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const rh=Jo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),nh=Jo([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Jo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ih=Jo([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),oh=Jo([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Jo([{name:"triangle",components:3,type:"Uint16"}]),Jo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Jo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Jo([{type:"Float32",name:"offsetX"}]),Jo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var sh=24;const ah=128;function lh(t,e){const{expression:r}=e;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new Po(t+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:n}=r;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let o=i;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const s=e[i],a=e[o];return"composite"===r.kind?{kind:"composite",minZoom:s,maxZoom:a,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:a,minSize:r.evaluate(new Po(s)),maxSize:r.evaluate(new Po(a)),interpolationType:n}}}function uh(t,{uSize:e,uSizeT:r},{lowerSize:n,upperSize:i}){return"source"===t.kind?n/ah:"composite"===t.kind?_r(n/ah,i/ah,r):e}function ch(t,e){let r=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){const{interpolationType:i,minZoom:o,maxZoom:s}=t,a=i?p(jr.interpolationFactor(i,e,o,s),0,1):0;"camera"===t.kind?n=_r(t.minSize,t.maxSize,a):r=a}return{uSizeT:r,uSize:n}}var hh=Object.freeze({__proto__:null,getSizeData:lh,evaluateSizeForFeature:uh,evaluateSizeForZoom:ch,SIZE_PACK_FACTOR:ah});function fh(t,e,r){return t.sections.forEach((t=>{t.text=function(t,e,r){const n=e.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),Bo.applyArabicShaping&&(t=Bo.applyArabicShaping(t)),t}(t.text,e,r)})),t}const dh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function ph(t){return"\ufe36"===t||"\ufe48"===t||"\ufe38"===t||"\ufe44"===t||"\ufe42"===t||"\ufe3e"===t||"\ufe3c"===t||"\ufe3a"===t||"\ufe18"===t||"\ufe40"===t||"\ufe10"===t||"\ufe13"===t||"\ufe14"===t||"\uff40"===t||"\uffe3"===t||"\ufe11"===t||"\ufe12"===t}function mh(t){return"\ufe35"===t||"\ufe47"===t||"\ufe37"===t||"\ufe43"===t||"\ufe41"===t||"\ufe3d"===t||"\ufe3b"===t||"\ufe39"===t||"\ufe17"===t||"\ufe3f"===t}var gh=function(t,e,r,n,i){var o,s,a=8*i-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=u}return(d?-1:1)*s*Math.pow(2,o-n)},yh=function(t,e,r,n,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*l-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[r+d]=255&s,d+=p,s/=256,u-=8);t[r+d-p]|=128*m},_h=vh;function vh(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}vh.Varint=0,vh.Fixed64=1,vh.Bytes=2,vh.Fixed32=5;var bh=4294967296,wh=1/bh,xh="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Eh(t){return t.type===vh.Bytes?t.readVarint()+t.pos:t.pos+1}function Sh(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Mh(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function Th(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function Ah(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function Ch(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function Ih(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function kh(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function Rh(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function Bh(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function Ph(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function Dh(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function Lh(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Oh(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function Nh(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function zh(t,e,r){e.glyphs=[],1===t&&r.readMessage(Uh,e)}function Uh(t,e,r){if(3===t){const{id:t,bitmap:n,width:i,height:o,left:s,top:a,advance:l}=r.readMessage(jh,{});e.glyphs.push({id:t,bitmap:new hu({width:i+6,height:o+6},n),metrics:{width:i,height:o,left:s,top:a,advance:l}})}else 4===t?e.ascender=r.readSVarint():5===t&&(e.descender=r.readSVarint())}function jh(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}function Fh(t){let e=0,r=0;for(const s of t)e+=s.w*s.h,r=Math.max(r,s.w);t.sort(((t,e)=>e.h-t.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let i=0,o=0;for(const s of t)for(let t=n.length-1;t>=0;t--){const e=n[t];if(!(s.w>e.w||s.h>e.h)){if(s.x=e.x,s.y=e.y,o=Math.max(o,s.y+s.h),i=Math.max(i,s.x+s.w),s.w===e.w&&s.h===e.h){const e=n.pop();t<n.length&&(n[t]=e)}else s.h===e.h?(e.x+=s.w,e.w-=s.w):s.w===e.w?(e.y+=s.h,e.h-=s.h):(n.push({x:e.x+s.w,y:e.y,w:e.w-s.w,h:s.h}),e.y+=s.h,e.h-=s.h);break}}return{w:i,h:o,fill:e/(i*o)||0}}vh.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Lh(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Nh(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Lh(this.buf,this.pos)+Lh(this.buf,this.pos+4)*bh;return this.pos+=8,t},readSFixed64:function(){var t=Lh(this.buf,this.pos)+Nh(this.buf,this.pos+4)*bh;return this.pos+=8,t},readFloat:function(){var t=gh(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=gh(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(n=(112&(i=o[r.pos++]))>>4,i<128)return Sh(t,n,e);if(n|=(127&(i=o[r.pos++]))<<3,i<128)return Sh(t,n,e);if(n|=(127&(i=o[r.pos++]))<<10,i<128)return Sh(t,n,e);if(n|=(127&(i=o[r.pos++]))<<17,i<128)return Sh(t,n,e);if(n|=(127&(i=o[r.pos++]))<<24,i<128)return Sh(t,n,e);if(n|=(1&(i=o[r.pos++]))<<31,i<128)return Sh(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&xh?function(t,e,r){return xh.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var n="",i=e;i<r;){var o,s,a,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(s=t[i+2],128==(192&(o=t[i+1]))&&128==(192&s)&&((u=(15&l)<<12|(63&o)<<6|63&s)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(s=t[i+2],a=t[i+3],128==(192&(o=t[i+1]))&&128==(192&s)&&128==(192&a)&&((u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),i+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==vh.Bytes)return t.push(this.readVarint(e));var r=Eh(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==vh.Bytes)return t.push(this.readSVarint());var e=Eh(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==vh.Bytes)return t.push(this.readBoolean());var e=Eh(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==vh.Bytes)return t.push(this.readFloat());var e=Eh(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==vh.Bytes)return t.push(this.readDouble());var e=Eh(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==vh.Bytes)return t.push(this.readFixed32());var e=Eh(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==vh.Bytes)return t.push(this.readSFixed32());var e=Eh(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==vh.Bytes)return t.push(this.readFixed64());var e=Eh(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==vh.Bytes)return t.push(this.readSFixed64());var e=Eh(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===vh.Varint)for(;this.buf[this.pos++]>127;);else if(e===vh.Bytes)this.pos=this.readVarint()+this.pos;else if(e===vh.Fixed32)this.pos+=4;else{if(e!==vh.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Oh(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Oh(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Oh(this.buf,-1&t,this.pos),Oh(this.buf,Math.floor(t*wh),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Oh(this.buf,-1&t,this.pos),Oh(this.buf,Math.floor(t*wh),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,r.buf[r.pos]=127&(t>>>=7)}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&Mh(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),yh(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),yh(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&Mh(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,vh.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Th,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Ah,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,kh,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Ch,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Ih,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Rh,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Bh,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Ph,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Dh,e)},writeBytesField:function(t,e){this.writeTag(t,vh.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,vh.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,vh.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,vh.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,vh.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,vh.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,vh.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,vh.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,vh.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,vh.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class Vh{constructor(t,{pixelRatio:e,version:r,stretchX:n,stretchY:i,content:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=n,this.stretchY=i,this.content=o,this.version=r}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Gh{constructor(t,e){const r={},n={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,r,i),this.addImages(e,n,i);const{w:o,h:s}=Fh(i),a=new fu({width:o||1,height:s||1});for(const l in t){const e=t[l],n=r[l].paddedRect;fu.copy(e.data,a,{x:0,y:0},{x:n.x+1,y:n.y+1},e.data)}for(const l in e){const t=e[l],r=n[l].paddedRect,i=r.x+1,o=r.y+1,s=t.data.width,u=t.data.height;fu.copy(t.data,a,{x:0,y:0},{x:i,y:o},t.data),fu.copy(t.data,a,{x:0,y:u-1},{x:i,y:o-1},{width:s,height:1}),fu.copy(t.data,a,{x:0,y:0},{x:i,y:o+u},{width:s,height:1}),fu.copy(t.data,a,{x:s-1,y:0},{x:i-1,y:o},{width:1,height:u}),fu.copy(t.data,a,{x:0,y:0},{x:i+s,y:o},{width:1,height:u})}this.image=a,this.iconPositions=r,this.patternPositions=n}addImages(t,e,r){for(const n in t){const i=t[n],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};r.push(o),e[n]=new Vh(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(t,e){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((e=>t.hasImage(e))),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e)}patchUpdatedImage(t,e,r){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[n,i]=t.tl;r.update(e.data,void 0,{x:n,y:i})}}Pi(Vh,"ImagePosition"),Pi(Gh,"ImageAtlas");const qh={horizontal:1,vertical:2,horizontalOnly:3};class Kh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const r=new Kh;return r.scale=t||1,r.fontStack=e,r}static forImage(t){const e=new Kh;return e.imageName=t,e}}class Wh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const r=new Wh;for(let n=0;n<t.sections.length;n++){const i=t.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,e)}return r}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let r="";for(let n=0;n<t.length;n++){const i=t.charCodeAt(n+1)||null,o=t.charCodeAt(n-1)||null;r+=!e&&(i&&yo(i)&&!dh[t[n+1]]||o&&yo(o)&&!dh[t[n-1]])||!dh[t[n]]?t[n]:dh[t[n]]}return r}(this.text,t)}trim(){let t=0;for(let r=0;r<this.text.length&&Hh[this.text.charCodeAt(r)];r++)t++;let e=this.text.length;for(let r=this.text.length-1;r>=0&&r>=t&&Hh[this.text.charCodeAt(r)];r--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const r=new Wh;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Kh.forText(t.scale,t.fontStack||e));const r=this.sections.length-1;for(let n=0;n<t.text.length;++n)this.sectionIndex.push(r)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void R("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(Kh.forImage(e)),this.sectionIndex.push(this.sections.length-1)):R("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Zh(t,e,r,n,i,o,s,a,l,u,c,h,f,d,p,m){const g=Wh.fromFeature(t,i);let y;h===qh.vertical&&g.verticalizePunctuation(f);const{processBidirectionalText:_,processStyledBidirectionalText:v}=Bo;if(_&&1===g.sections.length){y=[];const t=_(g.toString(),ef(g,u,o,e,n,d,p));for(const e of t){const t=new Wh;t.text=e,t.sections=g.sections;for(let r=0;r<e.length;r++)t.sectionIndex.push(0);y.push(t)}}else if(v){y=[];const t=v(g.text,g.sectionIndex,ef(g,u,o,e,n,d,p));for(const e of t){const t=new Wh;t.text=e[0],t.sectionIndex=e[1],t.sections=g.sections,y.push(t)}}else y=function(t,e){const r=[],n=t.text;let i=0;for(const o of e)r.push(t.substring(i,o)),i=o;return i<n.length&&r.push(t.substring(i,n.length)),r}(g,ef(g,u,o,e,n,d,p));const b=[],w={positionedLines:b,text:g.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,r,n,i,o,s,a,l,u,c,h){let f=0,d=0,p=0;const m="right"===a?1:"left"===a?0:.5;let g=!1;for(const x of i){const t=x.getSections();for(const r of t){if(r.imageName)continue;const t=e[r.fontStack];if(t&&(g=void 0!==t.ascender&&void 0!==t.descender,!g))break}if(!g)break}let y=0;for(const x of i){x.trim();const i=x.getMaxScale(),s=(i-1)*sh,a={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=a;const v=a.positionedGlyphs;let b=0;if(!x.length()){d+=o,++y;continue}let w=0,E=0;for(let o=0;o<x.length();o++){const s=x.getSection(o),a=x.getSectionIndex(o),p=x.getCharCode(o);let m=s.scale,y=null,S=null,M=null,T=sh,A=0;const C=!(l===qh.horizontal||!c&&!go(p)||c&&(Hh[p]||(_=p,Ui(_)||ji(_)||Fi(_)||so(_)||co(_))));if(s.imageName){const e=n[s.imageName];if(!e)continue;M=s.imageName,t.iconsInText=t.iconsInText||!0,S=e.paddedRect;const r=e.displaySize;m=m*sh/h,y={width:r[0],height:r[1],left:1,top:-3,advance:C?r[1]:r[0],localGlyph:!1},A=g?-y.height*m:i*sh-17-r[1]*m,T=y.advance;const o=(C?r[0]:r[1])*m-sh*i;o>0&&o>b&&(b=o)}else{const t=r[s.fontStack];if(!t)continue;t[p]&&(S=t[p]);const n=e[s.fontStack];if(!n)continue;const o=n.glyphs[p];if(!o)continue;if(y=o.metrics,T=8203!==p?sh:0,g){const t=void 0!==n.ascender?Math.abs(n.ascender):0,e=void 0!==n.descender?Math.abs(n.descender):0,r=(t+e)*m;w<r&&(w=r,E=(t-e)/2*m),A=-t*m}else A=(i-m)*sh-17}C?(t.verticalizable=!0,v.push({glyph:p,imageName:M,x:f,y:d+A,vertical:C,scale:m,localGlyph:y.localGlyph,fontStack:s.fontStack,sectionIndex:a,metrics:y,rect:S}),f+=T*m+u):(v.push({glyph:p,imageName:M,x:f,y:d+A,vertical:C,scale:m,localGlyph:y.localGlyph,fontStack:s.fontStack,sectionIndex:a,metrics:y,rect:S}),f+=y.advance*m+u)}0!==v.length&&(p=Math.max(f-u,p),g?nf(v,m,b,E,o*i/2):nf(v,m,b,0,o/2)),f=0;const S=o*i+b;a.lineOffset=Math.max(b,s),d+=S,++y}var _;const v=d,{horizontalAlign:b,verticalAlign:w}=rf(s);(function(t,e,r,n,i,o){const s=(e-r)*i,a=-o*n;for(const l of t)for(const t of l.positionedGlyphs)t.x+=s,t.y+=a})(t.positionedLines,m,b,w,p,v),t.top+=-w*v,t.bottom=t.top+v,t.left+=-b*p,t.right=t.left+p,t.hasBaseline=g}(w,e,r,n,y,s,a,l,h,u,f,m),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&w}const Hh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Xh(t,e,r,n,i,o){if(e.imageName){const t=n[e.imageName];return t?t.displaySize[0]*e.scale*sh/o+i:0}{const n=r[e.fontStack],o=n&&n.glyphs[t];return o?o.metrics.advance*e.scale+i:0}}function Yh(t,e,r,n){const i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function Jh(t,e,r){let n=0;return 10===t&&(n-=1e4),r&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function $h(t,e,r,n,i,o){let s=null,a=Yh(e,r,i,o);for(const l of n){const t=Yh(e-l.x,r,i,o)+l.badness;t<=a&&(s=l,a=t)}return{index:t,x:e,priorBreak:s,badness:a}}function tf(t){return t?tf(t.priorBreak).concat(t.index):[]}function ef(t,e,r,n,i,o,s){if("point"!==o)return[];if(!t)return[];const a=[],l=function(t,e,r,n,i,o){let s=0;for(let a=0;a<t.length();a++){const r=t.getSection(a);s+=Xh(t.getCharCode(a),r,n,i,e,o)}return s/Math.max(1,Math.ceil(s/r))}(t,e,r,n,i,s),u=t.text.indexOf("\u200b")>=0;let c=0;for(let f=0;f<t.length();f++){const r=t.getSection(f),o=t.getCharCode(f);if(Hh[o]||(c+=Xh(o,r,n,i,e,s)),f<t.length()-1){const e=!((h=o)<11904||!(Qi(h)||Hi(h)||lo(h)||oo(h)||$i(h)||Vi(h)||Xi(h)||Ki(h)||to(h)||eo(h)||Ji(h)||ho(h)||Wi(h)||qi(h)||Gi(h)||Yi(h)||Zi(h)||ao(h)||no(h)||ro(h)));(Qh[o]||e||r.imageName)&&a.push($h(f+1,c,l,a,Jh(o,t.getCharCode(f+1),e&&u),!1))}}var h;return tf($h(t.length(),c,l,a,0,!0))}function rf(t){let e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function nf(t,e,r,n,i){if(!(e||r||n||i))return;const o=t.length-1,s=t[o],a=(s.x+s.metrics.advance*s.scale)*e;for(let l=0;l<=o;l++)t[l].x-=a,t[l].y+=r+n+i}function of(t,e,r){const{horizontalAlign:n,verticalAlign:i}=rf(r),o=e[0]-t.displaySize[0]*n,s=e[1]-t.displaySize[1]*i;return{image:t,top:s,bottom:s+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function sf(t,e,r,n,i,o){const s=t.image;let a;if(s.content){const t=s.content,e=s.pixelRatio||1;a=[t[0]/e,t[1]/e,s.displaySize[0]-t[2]/e,s.displaySize[1]-t[3]/e]}const l=e.left*o,u=e.right*o;let c,h,f,d;"width"===r||"both"===r?(d=i[0]+l-n[3],h=i[0]+u+n[1]):(d=i[0]+(l+u-s.displaySize[0])/2,h=d+s.displaySize[0]);const p=e.top*o,m=e.bottom*o;return"height"===r||"both"===r?(c=i[1]+p-n[0],f=i[1]+m+n[2]):(c=i[1]+(p+m-s.displaySize[1])/2,f=c+s.displaySize[1]),{image:s,top:c,right:h,bottom:f,left:d,collisionPadding:a}}class af extends i{constructor(t,e,r,n,i){super(t,e),this.angle=n,this.z=r,void 0!==i&&(this.segment=i)}clone(){return new af(this.x,this.y,this.z,this.angle,this.segment)}}function lf(t,e,r,n,i){if(void 0===e.segment)return!0;let o=e,s=e.segment+1,a=0;for(;a>-r/2;){if(s--,s<0)return!1;a-=t[s].dist(o),o=t[s]}a+=t[s].dist(t[s+1]),s++;const l=[];let u=0;for(;a<r/2;){const e=t[s],r=t[s+1];if(!r)return!1;let o=t[s-1].angleTo(e)-e.angleTo(r);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:a,angleDelta:o}),u+=o;a-l[0].distance>n;)u-=l.shift().angleDelta;if(u>i)return!1;s++,a+=e.dist(r)}return!0}function uf(t){let e=0;for(let r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function cf(t,e,r){return t?.6*e*r:0}function hf(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function ff(t,e,r,n,i,o){const s=cf(r,i,o),a=hf(r,n)*o;let l=0;const u=uf(t)/2;for(let c=0;c<t.length-1;c++){const r=t[c],n=t[c+1],i=r.dist(n);if(l+i>u){const o=(u-l)/i,h=_r(r.x,n.x,o),f=_r(r.y,n.y,o),d=new af(h,f,0,n.angleTo(r),c);return!s||lf(t,d,a,s,e)?d:void 0}l+=i}}function df(t,e,r,n,i,o,s,a,l){const u=cf(n,o,s),c=hf(n,i),h=c*s,f=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),pf(t,f?e/2*a%e:(c/2+2*o)*s*a%e,e,u,r,h,f,!1,l)}function pf(t,e,r,n,i,o,s,a,l){const u=o/2,c=uf(t);let h=0,f=e-r,d=[];for(let p=0;p<t.length-1;p++){const e=t[p],s=t[p+1],a=e.dist(s),m=s.angleTo(e);for(;f+r<h+a;){f+=r;const g=(f-h)/a,y=_r(e.x,s.x,g),_=_r(e.y,s.y,g);if(y>=0&&y<l&&_>=0&&_<l&&f-u>=0&&f+u<=c){const e=new af(y,_,0,m,p);e._round(),n&&!lf(t,e,o,n,i)||d.push(e)}}h+=a}return a||d.length||s||(d=pf(t,h/2,r,n,i,o,s,!0,l)),d}function mf(t,e,r,n,o){const s=[];for(let a=0;a<t.length;a++){const l=t[a];let u;for(let t=0;t<l.length-1;t++){let a=l[t],c=l[t+1];a.x<e&&c.x<e||(a.x<e?a=new i(e,a.y+(e-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x<e&&(c=new i(e,a.y+(e-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y<r&&c.y<r||(a.y<r?a=new i(a.x+(r-a.y)/(c.y-a.y)*(c.x-a.x),r)._round():c.y<r&&(c=new i(a.x+(r-a.y)/(c.y-a.y)*(c.x-a.x),r)._round()),a.x>=n&&c.x>=n||(a.x>=n?a=new i(n,a.y+(n-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x>=n&&(c=new i(n,a.y+(n-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y>=o&&c.y>=o||(a.y>=o?a=new i(a.x+(o-a.y)/(c.y-a.y)*(c.x-a.x),o)._round():c.y>=o&&(c=new i(a.x+(o-a.y)/(c.y-a.y)*(c.x-a.x),o)._round()),u&&a.equals(u[u.length-1])||(u=[a],s.push(u)),u.push(c)))))}}return s}Pi(af,"Anchor");const gf=1e20;function yf(t,e,r,n,i,o,s,a,l){for(let u=e;u<e+n;u++)_f(t,r*o+u,o,i,s,a,l);for(let u=r;u<r+i;u++)_f(t,u*o+e,1,n,s,a,l)}function _f(t,e,r,n,i,o,s){o[0]=0,s[0]=-gf,s[1]=gf,i[0]=t[e];for(let a=1,l=0,u=0;a<n;a++){i[a]=t[e+a*r];const n=a*a;do{const t=o[l];u=(i[a]-i[t]+n-t*t)/(a-t)/2}while(u<=s[l]&&--l>-1);l++,o[l]=a,s[l]=u,s[l+1]=gf}for(let a=0,l=0;a<n;a++){for(;s[l+1]<a;)l++;const n=o[l],u=a-n;t[e+a*r]=i[n]+u*u}}const vf={none:0,ideographs:1,all:2};class bf{constructor(t,e,r){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const r=[];for(const n in t)for(const e of t[n])r.push({stack:n,id:e});y(r,(({stack:t,id:e},r)=>{let n=this.entries[t];n||(n=this.entries[t]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=n.glyphs[e];if(void 0!==i)return void r(null,{stack:t,id:e,glyph:i});if(i=this._tinySDF(n,t,e),i)return n.glyphs[e]=i,void r(null,{stack:t,id:e,glyph:i});const o=Math.floor(e/256);if(256*o>65535)return void r(new Error("glyphs > 65535 not supported"));if(n.ranges[o])return void r(null,{stack:t,id:e,glyph:i});let s=n.requests[o];s||(s=n.requests[o]=[],bf.loadGlyphRange(t,o,this.url,this.requestManager,((t,e)=>{if(e){n.ascender=e.ascender,n.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(n.glyphs[+t]=e.glyphs[+t]);n.ranges[o]=!0}for(const r of s)r(t,e);delete n.requests[o]}))),s.push(((n,i)=>{n?r(n):i&&r(null,{stack:t,id:e,glyph:i.glyphs[e]||null})}))}),((t,r)=>{if(t)e(t);else if(r){const t={};for(const{stack:e,id:n,glyph:i}of r)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[n]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t)}}))}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==vf.none&&(this.localGlyphMode===vf.all?!!this.localFontFamily:!!this.localFontFamily&&(eo(t)||io(t)||Wi(t)||Zi(t)||Ki(t)))}_tinySDF(t,e,r){const n=this.localFontFamily;if(!n||!this._doesCharSupportLocalGlyph(r))return;let i=t.tinySDF;if(!i){let r="400";/bold/i.test(e)?r="900":/medium/i.test(e)?r="500":/light/i.test(e)&&(r="200"),i=t.tinySDF=new bf.TinySDF({fontFamily:n,fontWeight:r,fontSize:48,buffer:6,radius:16}),i.fontWeight=r}if(this.localGlyphs[i.fontWeight][r])return this.localGlyphs[i.fontWeight][r];const o=String.fromCharCode(r),{data:s,width:a,height:l,glyphWidth:u,glyphHeight:c,glyphLeft:h,glyphTop:f,glyphAdvance:d}=i.draw(o);return this.localGlyphs[i.fontWeight][r]={id:r,bitmap:new hu({width:a,height:l},s),metrics:{width:u/2,height:c/2,left:h/2,top:f/2-27,advance:d/2,localGlyph:!0}}}}function wf(t,e,r,n){const o=[],s=t.image,a=s.pixelRatio,l=s.paddedRect.w-2,u=s.paddedRect.h-2,c=t.right-t.left,h=t.bottom-t.top,f=s.stretchX||[[0,l]],d=s.stretchY||[[0,u]],p=(t,e)=>t+e[1]-e[0],m=f.reduce(p,0),g=d.reduce(p,0),y=l-m,_=u-g;let v=0,b=m,w=0,x=g,E=0,S=y,M=0,T=_;if(s.content&&n){const t=s.content;v=xf(f,0,t[0]),w=xf(d,0,t[1]),b=xf(f,t[0],t[2]),x=xf(d,t[1],t[3]),E=t[0]-v,M=t[1]-w,S=t[2]-t[0]-b,T=t[3]-t[1]-x}const A=(n,o,l,u)=>{const f=Sf(n.stretch-v,b,c,t.left),d=Mf(n.fixed-E,S,n.stretch,m),p=Sf(o.stretch-w,x,h,t.top),y=Mf(o.fixed-M,T,o.stretch,g),_=Sf(l.stretch-v,b,c,t.left),A=Mf(l.fixed-E,S,l.stretch,m),C=Sf(u.stretch-w,x,h,t.top),I=Mf(u.fixed-M,T,u.stretch,g),k=new i(f,p),R=new i(_,p),B=new i(_,C),P=new i(f,C),D=new i(d/a,y/a),L=new i(A/a,I/a),O=e*Math.PI/180;if(O){const t=Math.sin(O),e=Math.cos(O),r=[e,-t,t,e];k._matMult(r),R._matMult(r),P._matMult(r),B._matMult(r)}const N=n.stretch+n.fixed,z=o.stretch+o.fixed;return{tl:k,tr:R,bl:P,br:B,tex:{x:s.paddedRect.x+1+N,y:s.paddedRect.y+1+z,w:l.stretch+l.fixed-N,h:u.stretch+u.fixed-z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:L,minFontScaleX:S/a/c,minFontScaleY:T/a/h,isSDF:r}};if(n&&(s.stretchX||s.stretchY)){const t=Ef(f,y,m),e=Ef(d,_,g);for(let r=0;r<t.length-1;r++){const n=t[r],i=t[r+1];for(let t=0;t<e.length-1;t++)o.push(A(n,e[t],i,e[t+1]))}}else o.push(A({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}));return o}function xf(t,e,r){let n=0;for(const i of t)n+=Math.max(e,Math.min(r,i[1]))-Math.max(e,Math.min(r,i[0]));return n}function Ef(t,e,r){const n=[{fixed:-1,stretch:0}];for(const[i,o]of t){const t=n[n.length-1];n.push({fixed:i-t.stretch,stretch:t.stretch}),n.push({fixed:i-t.stretch,stretch:t.stretch+(o-i)})}return n.push({fixed:e+1,stretch:r}),n}function Sf(t,e,r,n){return t/e*r+n}function Mf(t,e,r,n){return t-e*r/n}function Tf(t,e,r,n){const i=e+t.positionedLines[n].lineOffset;return 0===n?r+i/2:r+(i+(e+t.positionedLines[n-1].lineOffset))/2}bf.loadGlyphRange=function(t,e,r,n,i){const o=256*e,s=o+255,a=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",`${o}-${s}`),Ct.Glyphs);Bt(a,((t,e)=>{if(t)i(t);else if(e){const t={},r=function(t){return new _h(t).readFields(zh,{})}(e);for(const e of r.glyphs)t[e.id]=e;i(null,{glyphs:t,ascender:r.ascender,descender:r.descender})}}))},bf.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:r=8,cutoff:n=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}={}){this.buffer=e,this.cutoff=n,this.radius=r;const a=this.size=t+4*e,l=this._createCanvas(a),u=this.ctx=l.getContext("2d",{willReadFrequently:!0});u.font=`${s} ${o} ${t}px ${i}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:n,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(t),s=Math.ceil(r),a=Math.min(this.size-this.buffer,Math.ceil(o-i)),l=Math.min(this.size-this.buffer,s+Math.ceil(n)),u=a+2*this.buffer,c=l+2*this.buffer,h=Math.max(u*c,0),f=new Uint8ClampedArray(h),d={data:f,width:u,height:c,glyphWidth:a,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:e};if(0===a||0===l)return d;const{ctx:p,buffer:m,gridInner:g,gridOuter:y}=this;p.clearRect(m,m,a,l),p.fillText(t,m,m+s);const _=p.getImageData(m,m,a,l);y.fill(gf,0,h),g.fill(0,0,h);for(let v=0;v<l;v++)for(let t=0;t<a;t++){const e=_.data[4*(v*a+t)+3]/255;if(0===e)continue;const r=(v+m)*u+t+m;if(1===e)y[r]=0,g[r]=gf;else{const t=.5-e;y[r]=t>0?t*t:0,g[r]=t<0?t*t:0}}yf(y,0,0,u,c,u,this.f,this.v,this.z),yf(g,m,m,a,l,u,this.f,this.v,this.z);for(let v=0;v<h;v++){const t=Math.sqrt(y[v])-Math.sqrt(g[v]);f[v]=Math.round(255-255*(t/this.radius+this.cutoff))}return d}};class Af{constructor(t=[],e=Cf){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:r}=this,n=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(r(n,o)>=0)break;e[t]=o,t=i}e[t]=n}_down(t){const{data:e,compare:r}=this,n=this.length>>1,i=e[t];for(;t<n;){let n=1+(t<<1),o=e[n];const s=n+1;if(s<this.length&&r(e[s],o)<0&&(n=s,o=e[s]),r(o,i)>=0)break;e[t]=o,t=n}e[t]=i}}function Cf(t,e){return t<e?-1:t>e?1:0}function If(t,e=1,r=!1){let n=1/0,o=1/0,s=-1/0,a=-1/0;const l=t[0];for(let i=0;i<l.length;i++){const t=l[i];(!i||t.x<n)&&(n=t.x),(!i||t.y<o)&&(o=t.y),(!i||t.x>s)&&(s=t.x),(!i||t.y>a)&&(a=t.y)}const u=Math.min(s-n,a-o);let c=u/2;const h=new Af([],kf);if(0===u)return new i(n,o);for(let i=n;i<s;i+=u)for(let e=o;e<a;e+=u)h.push(new Rf(i+c,e+c,c,t));let f=function(t){let e=0,r=0,n=0;const i=t[0];for(let o=0,s=i.length,a=s-1;o<s;a=o++){const t=i[o],s=i[a],l=t.x*s.y-s.x*t.y;r+=(t.x+s.x)*l,n+=(t.y+s.y)*l,e+=3*l}return new Rf(r/e,n/e,0,t)}(t),d=h.length;for(;h.length;){const n=h.pop();(n.d>f.d||!f.d)&&(f=n,r&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,d)),n.max-f.d<=e||(c=n.h/2,h.push(new Rf(n.p.x-c,n.p.y-c,c,t)),h.push(new Rf(n.p.x+c,n.p.y-c,c,t)),h.push(new Rf(n.p.x-c,n.p.y+c,c,t)),h.push(new Rf(n.p.x+c,n.p.y+c,c,t)),d+=4)}return r&&(console.log(`num probes: ${d}`),console.log(`best distance: ${f.d}`)),f.p}function kf(t,e){return e.max-t.max}function Rf(t,e,r,n){this.p=new i(t,e),this.h=r,this.d=function(t,e){let r=!1,n=1/0;for(let i=0;i<e.length;i++){const o=e[i];for(let e=0,i=o.length,s=i-1;e<i;s=e++){const i=o[e],a=o[s];i.y>t.y!=a.y>t.y&&t.x<(a.x-i.x)*(t.y-i.y)/(a.y-i.y)+i.x&&(r=!r),n=Math.min(n,rl(t,i,a))}}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}const Bf=Number.POSITIVE_INFINITY,Pf=Math.sqrt(2);function Df(t,e){return e[1]!==Bf?function(t,e,r){let n=0,i=0;switch(e=Math.abs(e),r=Math.abs(r),t){case"top-right":case"top-left":case"top":i=r-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-r}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e}return[n,i]}(t,e[0],e[1]):function(t,e){let r=0,n=0;e<0&&(e=0);const i=e/Pf;switch(t){case"top-right":case"top-left":n=i-7;break;case"bottom-right":case"bottom-left":n=7-i;break;case"bottom":n=7-e;break;case"top":n=e-7}switch(t){case"top-right":case"bottom-right":r=-i;break;case"top-left":case"bottom-left":r=i;break;case"left":r=e;break;case"right":r=-e}return[r,n]}(t,e[0])}function Lf(t,e,r,n,i,o,s,a,l,u){t.createArrays(),t.tilePixelRatio=xa/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const c=t.layers[0].layout,h=t.layers[0]._unevaluatedLayout._values,f={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:r}=t.textSizeData;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Po(e),a),h["text-size"].possiblyEvaluate(new Po(r),a)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:r}=t.iconSizeData;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Po(e),a),h["icon-size"].possiblyEvaluate(new Po(r),a)]}f.layoutTextSize=h["text-size"].possiblyEvaluate(new Po(l+1),a),f.layoutIconSize=h["icon-size"].possiblyEvaluate(new Po(l+1),a),f.textMaxSize=h["text-size"].possiblyEvaluate(new Po(18),a);const d="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),p=c.get("text-size");for(const m of t.features){const o=c.get("text-font").evaluate(m,{},a).join(","),l=p.evaluate(m,{},a),h=f.layoutTextSize.evaluate(m,{},a),g=(f.layoutIconSize.evaluate(m,{},a),{horizontal:{},vertical:void 0}),y=m.text;let _,v=[0,0];if(y){const n=y.toString(),s=c.get("text-letter-spacing").evaluate(m,{},a)*sh,u=c.get("text-line-height").evaluate(m,{},a)*sh,f=po(n)?s:0,p=c.get("text-anchor").evaluate(m,{},a),_=c.get("text-variable-anchor");if(!_){const t=c.get("text-radial-offset").evaluate(m,{},a);v=t?Df(p,[t*sh,Bf]):c.get("text-offset").evaluate(m,{},a).map((t=>t*sh))}let b=d?"center":c.get("text-justify").evaluate(m,{},a);const w=c.get("symbol-placement"),x="point"===w,E="point"===w?c.get("text-max-width").evaluate(m,{},a)*sh:0,S=s=>{t.allowVerticalPlacement&&fo(n)&&(g.vertical=Zh(y,e,r,i,o,E,u,p,s,f,v,qh.vertical,!0,w,h,l))};if(!d&&_){const t="auto"===b?_.map((t=>Of(t))):[b];let n=!1;for(let s=0;s<t.length;s++){const a=t[s];if(!g.horizontal[a])if(n)g.horizontal[a]=g.horizontal[0];else{const t=Zh(y,e,r,i,o,E,u,"center",a,f,v,qh.horizontal,!1,w,h,l);t&&(g.horizontal[a]=t,n=1===t.positionedLines.length)}}S("left")}else{if("auto"===b&&(b=Of(p)),x||c.get("text-writing-mode").indexOf("horizontal")>=0||!fo(n)){const t=Zh(y,e,r,i,o,E,u,p,b,f,v,qh.horizontal,!1,w,h,l);t&&(g.horizontal[b]=t)}S("point"===w?"left":b)}}let b=!1;if(m.icon&&m.icon.name){const e=n[m.icon.name];e&&(_=of(i[m.icon.name],c.get("icon-offset").evaluate(m,{},a),c.get("icon-anchor").evaluate(m,{},a)),b=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&R("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const w=jf(g.horizontal)||g.vertical;t.iconsInText||(t.iconsInText=!!w&&w.iconsInText),(w||_)&&Nf(t,m,g,_,n,f,h,0,v,b,s,a,u)}o&&t.generateCollisionDebugBuffers(l,t.collisionBoxArray)}function Of(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Nf(t,e,r,n,i,o,s,a,u,c,h,f,d){let p=o.textMaxSize.evaluate(e,{},f);void 0===p&&(p=s);const m=t.layers[0].layout,g=m.get("icon-offset").evaluate(e,{},f),y=jf(r.horizontal)||r.vertical,_="globe"===d.name,v=s/24,b=t.tilePixelRatio*p/24,w=(I=t.overscaling,t.zoom>18&&I>2&&(I>>=1),Math.max(xa/(512*I),1)*m.get("symbol-spacing")),x=m.get("text-padding")*t.tilePixelRatio,E=m.get("icon-padding")*t.tilePixelRatio,S=l(m.get("text-max-angle")),M="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement"),T="map"===m.get("icon-rotation-alignment")&&"point"!==m.get("symbol-placement"),A=m.get("symbol-placement"),C=w/2;var I;const k=m.get("icon-text-fit");let B;n&&"none"!==k&&(t.allowVerticalPlacement&&r.vertical&&(B=sf(n,r.vertical,k,m.get("icon-text-fit-padding"),g,v)),y&&(n=sf(n,y,k,m.get("icon-text-fit-padding"),g,v)));const P=(s,a,l)=>{if(a.x<0||a.x>=xa||a.y<0||a.y>=xa)return;let p=null;if(_){const{x:t,y:e,z:r}=d.projectTilePoint(a.x,a.y,l);p={anchor:new af(t,e,r,0,void 0),up:d.upVector(l,a.x,a.y)}}!function(t,e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g,y,_,v,b,w,x,E,S){const M=t.addToLineVertexArray(e,n);let T,A,C,I,k,B,P,D=0,L=0,O=0,N=0,z=-1,U=-1;const j={};let F=Ks("");const V=r?r.anchor:e;let G=0,q=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[G,q]=l.layout.get("text-offset").evaluate(b,{},S).map((t=>t*sh)):(G=l.layout.get("text-radial-offset").evaluate(b,{},S)*sh,q=Bf),t.allowVerticalPlacement&&i.vertical){const t=i.vertical;if(p)B=Vf(t),a&&(P=Vf(a));else{const r=l.layout.get("text-rotate").evaluate(b,{},S)+90;C=Ff(u,V,e,c,h,f,t,d,r,m),a&&(I=Ff(u,V,e,c,h,f,a,y,r))}}if(o){const n=l.layout.get("icon-rotate").evaluate(b,{},S),i="none"!==l.layout.get("icon-text-fit"),s=wf(o,n,x,i),d=a?wf(a,n,x,i):void 0;A=Ff(u,V,e,c,h,f,o,y,n),D=4*s.length;const p=t.iconSizeData;let m=null;"source"===p.kind?(m=[ah*l.layout.get("icon-size").evaluate(b,{},S)],m[0]>zf&&R(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===p.kind&&(m=[ah*w.compositeIconSizes[0].evaluate(b,{},S),ah*w.compositeIconSizes[1].evaluate(b,{},S)],(m[0]>zf||m[1]>zf)&&R(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),t.addSymbols(t.icon,s,m,v,_,b,!1,r,e,M.lineStartIndex,M.lineLength,-1,E,S),z=t.icon.placedSymbolArray.length-1,d&&(L=4*d.length,t.addSymbols(t.icon,d,m,v,_,b,qh.vertical,r,e,M.lineStartIndex,M.lineLength,-1,E,S),U=t.icon.placedSymbolArray.length-1)}for(const R in i.horizontal){const n=i.horizontal[R];T||(F=Ks(n.text),p?k=Vf(n):T=Ff(u,V,e,c,h,f,n,d,l.layout.get("text-rotate").evaluate(b,{},S),m));const o=1===n.positionedLines.length;if(O+=Uf(t,r,e,n,s,l,p,b,m,M,i.vertical?qh.horizontal:qh.horizontalOnly,o?Object.keys(i.horizontal):[R],j,z,w,E,S),o)break}i.vertical&&(N+=Uf(t,r,e,i.vertical,s,l,p,b,m,M,qh.vertical,["vertical"],j,U,w,E,S));let K=-1;const W=(t,e)=>t?Math.max(t,e):e;K=W(k,K),K=W(B,K),K=W(P,K);const Z=K>-1?1:0;t.glyphOffsetArray.length>=$d.MAX_GLYPHS&&R("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(V.x,V.y,V.z,e.x,e.y,j.right>=0?j.right:-1,j.center>=0?j.center:-1,j.left>=0?j.left:-1,j.vertical>=0?j.vertical:-1,z,U,F,void 0!==T?T:t.collisionBoxArray.length,void 0!==T?T+1:t.collisionBoxArray.length,void 0!==C?C:t.collisionBoxArray.length,void 0!==C?C+1:t.collisionBoxArray.length,void 0!==A?A:t.collisionBoxArray.length,void 0!==A?A+1:t.collisionBoxArray.length,I||t.collisionBoxArray.length,I?I+1:t.collisionBoxArray.length,c,O,N,D,L,Z,0,G,q,K)}(t,a,p,s,r,n,i,B,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,x,M,u,0,E,T,g,e,o,c,h,f)};if("line"===A)for(const l of mf(e.geometry,0,0,xa,xa)){const e=df(l,w,S,r.vertical||y,n,24,b,t.overscaling,xa);for(const r of e){const e=y;e&&Gf(t,e.text,C,r)||P(l,r,f)}}else if("line-center"===A){for(const l of e.geometry)if(l.length>1){const t=ff(l,S,r.vertical||y,n,24,b);t&&P(l,t,f)}}else if("Polygon"===e.type)for(const l of Xu(e.geometry,0)){const t=If(l,16);P(l[0],new af(t.x,t.y,0,0,void 0),f)}else if("LineString"===e.type)for(const l of e.geometry)P(l,new af(l[0].x,l[0].y,0,0,void 0),f);else if("Point"===e.type)for(const l of e.geometry)for(const t of l)P([t],new af(t.x,t.y,0,0,void 0),f)}const zf=32640;function Uf(t,e,r,n,o,s,a,l,u,c,h,f,d,p,m,g,y){const _=function(t,e,r,n,o,s,a,l){const u=[];if(0===e.positionedLines.length)return u;const c=n.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,h=function(t){const e=t[0],r=t[1],n=e*r;return n>0?[e,-r]:n<0?[-e,r]:0===e?[r,e]:[r,-e]}(r);let f=Math.abs(e.top-e.bottom);for(const i of e.positionedLines)f-=i.lineOffset;const d=e.positionedLines.length,p=f/d;let m=e.top-r[1];for(let g=0;g<d;++g){const t=e.positionedLines[g];m=Tf(e,p,m,g);for(const n of t.positionedGlyphs){if(!n.rect)continue;const t=n.rect||{};let s=4,f=!0,d=1,p=0;if(n.imageName){const t=a[n.imageName];if(!t)continue;if(t.sdf){R("SDF images are not supported in formatted text and will be ignored.");continue}f=!1,d=t.pixelRatio,s=1/d}const g=(o||l)&&n.vertical,y=n.metrics.advance*n.scale/2,_=n.metrics,v=n.rect;if(null===v)continue;l&&e.verticalizable&&(p=n.imageName?y-n.metrics.width*n.scale/2:0);const b=o?[n.x+y,n.y]:[0,0];let w=[0,0],x=[0,0],E=!1;o||(g?(x=[n.x+y+h[0],n.y+h[1]-p],E=!0):w=[n.x+y+r[0],n.y+r[1]-p]);const S=v.w*n.scale/(d*(n.localGlyph?2:1)),M=v.h*n.scale/(d*(n.localGlyph?2:1));let T,A,C,I;if(g){const t=n.y-m,e=new i(-y,y-t),r=-Math.PI/2,o=new i(...x);T=new i(-y+w[0],w[1]),T._rotateAround(r,e)._add(o),T.x+=-t+y,T.y-=(_.left-s)*n.scale;const a=n.imageName?_.advance*n.scale:sh*n.scale,l=String.fromCharCode(n.glyph);ph(l)?T.x+=(1-s)*n.scale:mh(l)?T.x+=a-_.height*n.scale+(-s-1)*n.scale:T.x+=n.imageName||_.width+2*s===v.w&&_.height+2*s===v.h?(a-M)/2:(a-(_.height+2*s)*n.scale)/2,A=new i(T.x,T.y-S),C=new i(T.x+M,T.y),I=new i(T.x+M,T.y-S)}else{const t=(_.left-s)*n.scale-y+w[0],e=(-_.top-s)*n.scale+w[1],r=t+S,o=e+M;T=new i(t,e),A=new i(r,e),C=new i(t,o),I=new i(r,o)}if(c){let t;t=o?new i(0,0):E?new i(h[0],h[1]):new i(r[0],r[1]),T._rotateAround(c,t),A._rotateAround(c,t),C._rotateAround(c,t),I._rotateAround(c,t)}const k=new i(0,0),B=new i(0,0);u.push({tl:T,tr:A,bl:C,br:I,tex:t,writingMode:e.writingMode,glyphOffset:b,sectionIndex:n.sectionIndex,isSDF:f,pixelOffsetTL:k,pixelOffsetBR:B,minFontScaleX:0,minFontScaleY:0})}}return u}(0,n,u,s,a,l,o,t.allowVerticalPlacement),v=t.textSizeData;let b=null;"source"===v.kind?(b=[ah*s.layout.get("text-size").evaluate(l,{},y)],b[0]>zf&&R(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===v.kind&&(b=[ah*m.compositeTextSizes[0].evaluate(l,{},y),ah*m.compositeTextSizes[1].evaluate(l,{},y)],(b[0]>zf||b[1]>zf)&&R(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,_,b,u,a,l,h,e,r,c.lineStartIndex,c.lineLength,p,g,y);for(const i of f)d[i]=t.text.placedSymbolArray.length-1;return 4*_.length}function jf(t){for(const e in t)return t[e];return null}function Ff(t,e,r,n,o,s,a,u,c,h){let f=a.top,d=a.bottom,p=a.left,m=a.right;const g=a.collisionPadding;if(g&&(p-=g[0],f-=g[1],m+=g[2],d+=g[3]),c){const t=new i(p,f),e=new i(m,f),r=new i(p,d),n=new i(m,d),o=l(c);let s=new i(0,0);h&&(s=new i(h[0],h[1])),t._rotateAround(o,s),e._rotateAround(o,s),r._rotateAround(o,s),n._rotateAround(o,s),p=Math.min(t.x,e.x,r.x,n.x),m=Math.max(t.x,e.x,r.x,n.x),f=Math.min(t.y,e.y,r.y,n.y),d=Math.max(t.y,e.y,r.y,n.y)}return t.emplaceBack(e.x,e.y,e.z,r.x,r.y,p,f,m,d,u,n,o,s),t.length-1}function Vf(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Gf(t,e,r,n){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(n.dist(t[e])<r)return!0}else i[e]=[];return i[e].push(n),!1}const qf=Jo([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Kf}=qf,Wf=Jo([{name:"a_pos_3",components:3,type:"Int16"}]);var Zf=Jo([{name:"a_pos",type:"Int16",components:2}]);const Hf=xa/Math.PI/2,Qf=2*ka(1,0)*Hf*Math.PI,Xf=[64,32,16],Yf=-Hf,Jf=Hf,$f=[new eu([Yf,Yf,Yf],[Jf,Jf,Jf]),new eu([Yf,Yf,Yf],[0,0,Jf]),new eu([0,Yf,Yf],[Jf,0,Jf]),new eu([Yf,0,Yf],[0,Jf,Jf]),new eu([0,0,Yf],[Jf,Jf,Jf])];function td(t,e,r,n=!0){const i=Ll([],t._camera.position,t.worldSize),o=[e,r,1,1];Zl(o,o,t.pixelMatrixInverse),Wl(o,o,1/o[3]);const s=Nl([],Gl([],o,i)),a=t.globeMatrix,l=[a[12],a[13],a[14]],c=Gl([],l,i),h=Cl(c),f=Nl([],c),d=t.worldSize/(2*Math.PI),m=zl(f,s),g=Math.asin(d/h);if(g<Math.acos(m)){if(!n)return null;const t=[],e=[];Ll(t,s,h/m),Nl(e,Gl(e,t,c)),Nl(s,kl(s,c,Ll(s,e,Math.tan(g)*h)))}const y=[];new Jl(i,s).closestPointOnSphere(l,d,y);const _=Nl([],U(a,0)),v=Nl([],U(a,1)),b=Nl([],U(a,2)),w=zl(_,y),x=zl(v,y),E=zl(b,y),S=u(Math.asin(-x/d));let M=u(Math.atan2(w,E));M=t.center.lng+function(t,e){const r=(e-t+180)%360-180;return r<-180?r+360:r}(t.center.lng,M);const T=Ca(M),A=p(Ia(S),0,1);return new Oa(T,A)}class ed{constructor(t,e,r){this.a=Gl([],t,r),this.b=Gl([],e,r),this.center=r;const n=Nl([],this.a),i=Nl([],this.b);this.angle=Math.acos(zl(n,i))}}function rd(t,e){if(0===t.angle)return null;let r;return r=0===t.a[e]?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),r<0||r>1?null:function(t,e,r,n){const i=Math.sin(r);return t*(Math.sin((1-n)*r)/i)+e*(Math.sin(n*r)/i)}(t.a[e],t.b[e],t.angle,p(r,0,1))+t.center[e]}function nd(t){if(t.z<=1)return $f[t.z+2*t.y+t.x];const e=ld(ad(t));return eu.fromPoints(e)}function id(t,e){const r=yd(e.zoom);if(0===r)return nd(t);const n=ad(t),i=ld(n),o=Ca(n.getWest())*e.worldSize,s=Ca(n.getEast())*e.worldSize,a=Ia(n.getNorth())*e.worldSize,l=Ia(n.getSouth())*e.worldSize,u=[o,a,0],c=[s,a,0],h=[o,l,0],f=[s,l,0],d=yl([],e.globeMatrix);return jl(u,u,d),jl(c,c,d),jl(h,h,d),jl(f,f,d),i[0]=vr(i[0],h,r),i[1]=vr(i[1],f,r),i[2]=vr(i[2],c,r),i[3]=vr(i[3],u,r),eu.fromPoints(i)}function od(t,e,r,n,i){for(const o of r)jl(o,o,n),Ll(o,o,i),Pl(t,t,o),Dl(e,e,o)}function sd(t,e,r){const n=e/t.worldSize,i=Number.MAX_VALUE,o=[-i,-i,-i],s=[i,i,i],a=t.globeMatrix;if(r.z<=1)return od(s,o,nd(r).getCorners(),a,n),new eu(s,o);const u=ad(r),c=ld(u);if(od(s,o,c,a,n),u.contains(t.center)){o[2]=0;const e=t.point,r=[e.x*n,e.y*n,0];return Pl(s,s,r),Dl(o,o,r),new eu(s,o)}const h=[a[12]*n,a[13]*n,a[14]*n],f=u.getCenter(),d=p(t.center.lat,-85.051129,Da),m=p(f.lat,-85.051129,Da),g=Ca(t.center.lng),y=Ia(d);let _=g-Ca(f.lng);const v=y-Ia(m);_>.5?_-=1:_<-.5&&(_+=1);let b=0;Math.abs(_)>Math.abs(v)?b=_>=0?1:3:(b=v>=0?0:2,Ol(h,h,[a[4]*n,a[5]*n,a[6]*n],-Math.sin(l(v>=0?u.getSouth():u.getNorth()))*Hf));const w=c[b],x=c[(b+1)%4],E=new ed(w,x,h),S=[rd(E,0)||w[0],rd(E,1)||w[1],rd(E,2)||w[2]];return s[2]=Math.min(w[2],x[2]),Pl(s,s,S),Dl(o,o,S),new eu(s,o)}function ad({x:t,y:e,z:r}){const n=1/(1<<r),i=new Ma(Ra(t*n),Ba((e+1)*n)),o=new Ma(Ra((t+1)*n),Ba(e*n));return new Ea(i,o)}function ld(t){const e=l(t.getNorth()),r=l(t.getSouth()),n=Math.cos(e),i=Math.cos(r),o=Math.sin(e),s=Math.sin(r),a=t.getWest(),u=t.getEast();return[ud(i,s,a),ud(i,s,u),ud(n,o,u),ud(n,o,a)]}function ud(t,e,r,n=Hf){return r=l(r),[t*Math.sin(r)*n,-e*n,t*Math.cos(r)*n]}function cd(t,e,r){return ud(Math.cos(l(t)),Math.sin(l(t)),e,r)}function hd(t,e,r,n){const i=1<<r.z,o=(t/xa+r.x)/i;return cd(Ba((e/xa+r.y)/i),Ra(o),n)}function fd({min:t,max:e}){return 16383/Math.max(e[0]-t[0],e[1]-t[1],e[2]-t[2])}const dd=new Float64Array(16);function pd(t){const e=fd(t),r=El(dd,[e,e,e]);return vl(r,r,((n=[])[0]=-(i=t.min)[0],n[1]=-i[1],n[2]=-i[2],n));var n,i}function md(t){const e=(n=t.min,(r=dd)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r);var r,n;const i=1/fd(t);return bl(e,e,[i,i,i])}function gd(t,e,r,n,i){const o=function(t){const e=xa/(2*Math.PI);return t/(2*Math.PI)/e}(r),s=[t,e,-r/(2*Math.PI)],a=gl(new Float64Array(16));return vl(a,a,s),bl(a,a,[o,o,o]),wl(a,a,l(-i)),xl(a,a,l(-n)),a}function yd(t){return m(5,6,t)}function _d(t,e){const r=cd(e.lat,e.lng);return o=(n=Rl([],function(t){const e=cd(t._center.lat,t._center.lng);let r=Ul([],Il(0,1,0),e);const n=Sl([],-t.angle,e);r=jl(r,r,n),Sl(n,-t._pitch,r);const i=Nl([],e);return Ll(i,i,t.cameraToCenterDistance/t.pixelsPerMeter*Qf),jl(i,i,n),kl([],e,i)}(t),r))[0],s=n[1],a=n[2],l=(i=r)[0],u=i[1],c=i[2],f=(h=Math.sqrt(o*o+s*s+a*a)*Math.sqrt(l*l+u*u+c*c))&&zl(n,i)/h,Math.acos(Math.min(Math.max(f,-1),1));var n,i,o,s,a,l,u,c,h,f}const vd=l(85),bd=Math.cos(vd),wd=Math.sin(vd);function xd(t,e){const r=t.fovAboveCenter,n=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,i=(t._camera.position[2]*t.worldSize-n)/Math.cos(t._pitch),o=Math.sin(r)*i/Math.sin(Math.max(Math.PI/2-t._pitch-r,.01)),s=Math.sin(t._pitch)*o+i;return Math.min(1.01*s,i*(1/t._horizonShift))}function Ed(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const r=Math.pow(2,-t.z),n=t.x*r,i=(t.x+1)*r,o=t.y*r,s=(t.y+1)*r,a=Ra(n),l=Ra(i),u=Ba(o),c=Ba(s),h=e.project(a,u),f=e.project(l,u),d=e.project(l,c),p=e.project(a,c);let m=Math.min(h.x,f.x,d.x,p.x),g=Math.min(h.y,f.y,d.y,p.y),y=Math.max(h.x,f.x,d.x,p.x),_=Math.max(h.y,f.y,d.y,p.y);const v=r/16;function b(t,r,n,i,o,s){const a=(n+o)/2,l=(i+s)/2,u=e.project(Ra(a),Ba(l)),c=Math.max(0,m-u.x,g-u.y,u.x-y,u.y-_);m=Math.min(m,u.x),y=Math.max(y,u.x),g=Math.min(g,u.y),_=Math.max(_,u.y),c>v&&(b(t,u,n,i,a,l),b(u,r,a,l,o,s))}b(h,f,n,o,i,o),b(f,d,i,o,i,s),b(d,p,i,s,n,s),b(p,h,n,s,n,o),m-=v,g-=v,y+=v,_+=v;const w=1/Math.max(y-m,_-g);return{scale:w,x:m*w,y:g*w,x2:y*w,y2:_*w,projection:e}}const Sd=gl(new Float32Array(16));class Md{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,e){return{x:0,y:0,z:0}}unproject(t,e){return new Ma(0,0)}projectTilePoint(t,e,r){return{x:t,y:e,z:0}}locationPoint(t,e,r=!0){return t._coordinatePoint(t.locationCoordinate(e),r)}pixelsPerMeter(t,e){return ka(1,t)*e}pixelSpaceConversion(t,e,r){return 1}farthestPixelDistance(t){return xd(t,t.pixelsPerMeter)}pointCoordinate(t,e,r,n){const o=t.horizonLineFromTop(!1),s=new i(e,Math.max(o,r));return t.rayIntersectionCoordinate(t.pointRayIntersection(s,n))}pointCoordinate3D(t,e,r){const n=new i(e,r);if(t.elevation)return t.elevation.pointCoordinate(n);{const e=this.pointCoordinate(t,n.x,n.y,0);return[e.x,e.y,e.z]}}isPointAboveHorizon(t,e){if(t.elevation)return!this.pointCoordinate3D(t,e.x,e.y);const r=t.horizonLineFromTop();return e.y<r}createInversionMatrix(t,e){return Sd}createTileMatrix(t,e,r){let n,i,o;const s=r.canonical,a=gl(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Ed(s,this);n=1,i=l.x+r.wrap*l.scale,o=l.y,bl(a,a,[n/l.scale,n/l.scale,t.pixelsPerMeter/e])}else n=e/t.zoomScale(s.z),i=(s.x+Math.pow(2,s.z)*r.wrap)*n,o=s.y*n;return vl(a,a,[i,o,0]),bl(a,a,[n/xa,n/xa,1]),a}upVector(t,e,r){return[0,0,1]}upVectorScale(t,e,r){return{metersToTile:1}}}class Td extends Md{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[e,r]=this.parallels=t.parallels||[29.5,45.5],n=Math.sin(l(e));this.n=(n+Math.sin(l(r)))/2,this.c=1+n*(2*this.n-n),this.r0=Math.sqrt(this.c)/this.n}project(t,e){const{n:r,c:n,r0:i}=this,o=l(t-this.center[0]),s=l(e),a=Math.sqrt(n-2*r*Math.sin(s))/r;return{x:a*Math.sin(o*r),y:a*Math.cos(o*r)-i,z:0}}unproject(t,e){const{n:r,c:n,r0:i}=this,o=i+e;let s=Math.atan2(t,Math.abs(o))*Math.sign(o);o*r<0&&(s-=Math.PI*Math.sign(t)*Math.sign(o));const a=l(this.center[0])*r;s=g(s,-Math.PI-a,Math.PI-a);const c=u(s/r)+this.center[0],h=Math.asin(p((n-(t*t+o*o)*r*r)/(2*r),-1,1)),f=p(u(h),-85.051129,Da);return new Ma(c,f)}}const Ad=1.340264,Cd=-.081106,Id=893e-6,kd=.003796,Rd=Math.sqrt(3)/2;class Bd extends Md{project(t,e){e=e/180*Math.PI,t=t/180*Math.PI;const r=Math.asin(Rd*Math.sin(e)),n=r*r,i=n*n*n;return{x:.5*(t*Math.cos(r)/(Rd*(Ad+3*Cd*n+i*(7*Id+9*kd*n)))/Math.PI+.5),y:1-.5*(r*(Ad+Cd*n+i*(Id+kd*n))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let r=e=(2*(1-e)-1)*Math.PI,n=r*r,i=n*n*n;for(let u,c,h,f=0;f<12&&(c=r*(Ad+Cd*n+i*(Id+kd*n))-e,h=Ad+3*Cd*n+i*(7*Id+9*kd*n),u=c/h,r=p(r-u,-Math.PI/3,Math.PI/3),n=r*r,i=n*n*n,!(Math.abs(u)<1e-12));++f);const o=Rd*t*(Ad+3*Cd*n+i*(7*Id+9*kd*n))/Math.cos(r),s=Math.asin(Math.sin(r)/Rd),a=p(180*o/Math.PI,-180,180),l=p(180*s/Math.PI,-85.051129,Da);return new Ma(a,l)}}class Pd extends Md{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){return{x:.5+t/360,y:.5-e/360,z:0}}unproject(t,e){const r=360*(t-.5),n=p(360*(.5-e),-85.051129,Da);return new Ma(r,n)}}const Dd=Math.PI/2;function Ld(t){return Math.tan((Dd+t)/2)}class Od extends Md{constructor(t){super(t),this.center=t.center||[0,30];const[e,r]=this.parallels=t.parallels||[30,30],n=l(e),i=l(r),o=Math.cos(n);this.n=n===i?Math.sin(n):Math.log(o/Math.cos(i))/Math.log(Ld(i)/Ld(n)),this.f=o*Math.pow(Ld(n),this.n)/this.n}project(t,e){e=l(e),t=l(t-this.center[0]);const r=1e-6,{n:n,f:i}=this;i>0?e<-Dd+r&&(e=-Dd+r):e>Dd-r&&(e=Dd-r);const o=i/Math.pow(Ld(e),n),s=o*Math.sin(n*t),a=i-o*Math.cos(n*t);return{x:.5*(s/Math.PI+.5),y:1-.5*(a/Math.PI+.5),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI,e=(2*(1-e)-.5)*Math.PI;const{n:r,f:n}=this,i=n-e,o=Math.sign(i),s=Math.sign(r)*Math.sqrt(t*t+i*i);let a=Math.atan2(t,Math.abs(i))*o;i*r<0&&(a-=Math.PI*Math.sign(t)*o);const l=p(u(a/r)+this.center[0],-180,180),c=p(u(2*Math.atan(Math.pow(n/s,1/r))-Dd),-85.051129,Da);return new Ma(l,c)}}class Nd extends Md{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,e){return{x:Ca(t),y:Ia(e),z:0}}unproject(t,e){const r=Ra(t),n=Ba(e);return new Ma(r,n)}}const zd=l(Da);class Ud extends Md{project(t,e){const r=(e=l(e))*e,n=r*r;return{x:.5*((t=l(t))*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791))/Math.PI+.5),y:1-.5*(e*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))/Math.PI+1),z:0}}unproject(t,e){t=(2*t-.5)*Math.PI;let r=e=(2*(1-e)-1)*Math.PI,n=25,i=0,o=r*r;do{o=r*r;const t=o*o;i=(r*(1.007226+o*(.015085+t*(.028874*o-.044475-.005916*t)))-e)/(1.007226+o*(.045255+t*(.259866*o-.311325-.005916*11*t))),r=p(r-i,-zd,zd)}while(Math.abs(i)>1e-6&&--n>0);o=r*r;const s=p(u(t/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),a=u(r);return new Ma(s,a)}}const jd=l(Da);class Fd extends Md{project(t,e){e=l(e),t=l(t);const r=Math.cos(e),n=2/Math.PI,i=Math.acos(r*Math.cos(t/2)),o=Math.sin(i)/i,s=.5*(t*n+2*r*Math.sin(t/2)/o)||0,a=.5*(e+Math.sin(e)/o)||0;return{x:.5*(s/Math.PI+.5),y:1-.5*(a/Math.PI+1),z:0}}unproject(t,e){let r=t=(2*t-.5)*Math.PI,n=e=(2*(1-e)-1)*Math.PI,i=25;const o=1e-6;let s=0,a=0;do{const i=Math.cos(n),o=Math.sin(n),l=2*o*i,u=o*o,c=i*i,h=Math.cos(r/2),f=Math.sin(r/2),d=2*h*f,m=f*f,g=1-c*h*h,y=g?1/g:0,_=g?Math.acos(i*h)*Math.sqrt(1/g):0,v=.5*(2*_*i*f+2*r/Math.PI)-t,b=.5*(_*o+n)-e,w=.5*y*(c*m+_*i*h*u)+1/Math.PI,x=y*(d*l/4-_*o*f),E=.125*y*(l*f-_*o*c*d),S=.5*y*(u*h+_*m*i)+.5,M=x*E-S*w;s=(b*x-v*S)/M,a=(v*E-b*w)/M,r=p(r-s,-Math.PI,Math.PI),n=p(n-a,-jd,jd)}while((Math.abs(s)>o||Math.abs(a)>o)&&--i>0);return new Ma(u(r),u(n))}}class Vd extends Md{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(l(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,e){const{scale:r,cosPhi:n}=this;return{x:l(t)*n*r+.5,y:-Math.sin(l(e))/n*r+.5,z:0}}unproject(t,e){const{scale:r,cosPhi:n}=this,i=-(e-.5)/r,o=p(u((t-.5)/r)/n,-180,180),s=Math.asin(p(i*n,-1,1)),a=p(u(s),-85.051129,Da);return new Ma(o,a)}}class Gd extends Nd{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(t,e,r){const n=hd(t,e,r);return jl(n,n,pd(nd(r))),{x:n[0],y:n[1],z:n[2]}}locationPoint(t,e){const r=cd(e.lat,e.lng),n=Nl([],r),o=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(e),t._centerAltitude):t._centerAltitude;Ol(r,r,n,ka(1,0)*xa*o);const s=gl(new Float64Array(16));return _l(s,t.pixelMatrix,t.globeMatrix),jl(r,r,s),new i(r[0],r[1])}pixelsPerMeter(t,e){return ka(1,0)*e}pixelSpaceConversion(t,e,r){const n=_r(ka(1,45)*e,ka(1,t)*e,r);return this.pixelsPerMeter(t,e)/n}createTileMatrix(t,e,r){const n=md(nd(r.canonical));return _l(new Float64Array(16),t.globeMatrix,n)}createInversionMatrix(t,e){const{center:r}=t,n=pd(nd(e));return xl(n,n,l(r.lng)),wl(n,n,l(r.lat)),bl(n,n,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(n)}pointCoordinate(t,e,r,n){return td(t,e,r,!0)||new Oa(0,0)}pointCoordinate3D(t,e,r){const n=this.pointCoordinate(t,e,r,0);return[n.x,n.y,n.z]}isPointAboveHorizon(t,e){return!td(t,e.x,e.y,!1)}farthestPixelDistance(t){const e=function(t,e){const r=t.cameraToCenterDistance,n=t._centerAltitude*e,i=t._camera,o=t._camera.forward(),s=kl([],Ll([],o,-r),[0,0,n]),a=t.worldSize/(2*Math.PI),l=[0,0,-a],u=t.width/t.height,c=Math.tan(t.fovAboveCenter),h=Ll([],i.up(),c),f=Ll([],i.right(),c*u),d=Nl([],kl([],kl([],o,h),f)),p=[];let m;if(new Jl(s,d).closestPointOnSphere(l,a,p)){const e=kl([],p,l),r=Gl([],e,s);m=Math.cos(t.fovAboveCenter)*Cl(r)}else{const t=Gl([],s,l),e=Gl([],l,s);Nl(e,e);const r=Cl(t)-a;m=Math.sqrt(r*(r+2*a));const n=Math.acos(m/(a+r))-Math.acos(zl(o,e));m*=Math.cos(n)}return 1.01*m}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),r=yd(t.zoom);if(r>0){const n=xd(t,ka(1,t.center.lat)*t.worldSize),i=t.worldSize/(2*Math.PI),o=Math.max(t.width,t.height)/t.worldSize*Math.PI;return _r(e,n+i*(1-Math.cos(o)),Math.pow(r,10))}return e}upVector(t,e,r){return hd(e,r,t,1)}upVectorScale(t){return{metersToTile:Qf*fd(nd(t))}}}function qd(t){const e=t.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new Nd(t);case"equirectangular":return new Pd(t);case"naturalEarth":return new Ud(t);case"equalEarth":return new Bd(t);case"winkelTripel":return new Fd(t);case"albers":return r?new Vd(t):new Td(t);case"lambertConformalConic":return r?new Vd(t):new Od(t);case"globe":return new Gd(t)}throw new Error(`Invalid projection name: ${t.name}`)}const Kd=mc.VectorTileFeature.types,Wd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Zd(t,e,r,n,i,o,s,a,l,u,c,h,f){const d=a?Math.min(zf,Math.round(a[0])):0,p=a?Math.min(zf,Math.round(a[1])):0;t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),o,s,(d<<1)+(l?1:0),p,16*u,16*c,256*h,256*f)}function Hd(t,e,r,n,i,o,s){t.emplaceBack(e,r,n,i,o,s)}function Qd(t,e,r,n,i){t.emplaceBack(e,r,n,i),t.emplaceBack(e,r,n,i),t.emplaceBack(e,r,n,i),t.emplaceBack(e,r,n,i)}function Xd(t){for(const e of t.sections)if(bo(e.text))return!0;return!1}class Yd{constructor(t){this.layoutVertexArray=new ls,this.indexArray=new gs,this.programConfigurations=t,this.segments=new wa,this.dynamicLayoutVertexArray=new is,this.opacityVertexArray=new cs,this.placedSymbolArray=new ks,this.globeExtVertexArray=new us}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,$c.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,eh.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Wd,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,th.members,!0)),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Pi(Yd,"SymbolBuffers");class Jd{constructor(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new wa,this.collisionVertexArray=new ps,this.collisionVertexArrayExt=new ms}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,rh.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,nh.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Pi(Jd,"CollisionBuffers");class $d{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=gl([]),this.placementViewportMatrix=gl([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=lh(this.zoom,e["text-size"]),this.iconSizeData=lh(this.zoom,e["icon-size"]);const r=this.layers[0].layout,n=r.get("symbol-sort-key"),i=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((t=>qh[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){this.text=new Yd(new ha(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new Yd(new ha(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Ps,this.lineVertexArray=new Ds,this.symbolInstances=new Bs}calculateGlyphDependencies(t,e,r,n,i){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,n&&i){const r=dh[t.charAt(o)];r&&(e[r.charCodeAt(0)]=!0)}}populate(t,e,r,n){const i=this.layers[0],o=i.layout,s="globe"===this.projection.name,a=o.get("text-font"),l=o.get("text-field"),u=o.get("icon-image"),c=("constant"!==l.value.kind||l.value.value instanceof we&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),h="constant"!==u.value.kind||!!u.value.value||Object.keys(u.parameters).length>0,f=o.get("symbol-sort-key");if(this.features=[],!c&&!h)return;const d=e.iconDependencies,p=e.glyphDependencies,m=e.availableImages,g=new Po(this.zoom);for(const{feature:y,id:_,index:v,sourceLayerIndex:b}of t){const t=i._featureFilter.needGeometry,e=Ka(y,t);if(!i._featureFilter.filter(g,e,r))continue;if(t||(e.geometry=qa(y,r,n)),s&&1!==y.type&&r.z<=5){const t=e.geometry,n=.98078528056;for(let e=0;e<t.length;e++)t[e]=ja(t[e],(t=>t),((t,e)=>zl(hd(t.x,t.y,r,1),hd(e.x,e.y,r,1))<n))}let l,u;if(c){const t=i.getValueAndResolveTokens("text-field",e,r,m),n=we.factory(t);Xd(n)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ko()||this.hasRTLText&&Bo.isParsed())&&(l=fh(n,i,e))}if(h){const t=i.getValueAndResolveTokens("icon-image",e,r,m);u=t instanceof xe?t:xe.fromString(t)}if(!l&&!u)continue;const w=this.sortFeaturesByKey?f.evaluate(e,{},r):void 0;if(this.features.push({id:_,text:l,icon:u,index:v,sourceLayerIndex:b,geometry:e.geometry,properties:y.properties,type:Kd[y.type],sortKey:w}),u&&(d[u.name]=!0),l){const t=a.evaluate(e,{},r).join(","),n="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(qh.vertical)>=0;for(const e of l.sections)if(e.image)d[e.image.name]=!0;else{const r=fo(l.toString()),i=e.fontStack||t,o=p[i]=p[i]||{};this.calculateGlyphDependencies(e.text,o,n,this.allowVerticalPlacement,r)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){const e={},r={},n=[];let i=0;function o(e){n.push(t[e]),i++}function s(t,e,i){const o=r[t];return delete r[t],r[e]=o,n[o].geometry[0].pop(),n[o].geometry[0]=n[o].geometry[0].concat(i[0]),o}function a(t,r,i){const o=e[r];return delete e[r],e[t]=o,n[o].geometry[0].shift(),n[o].geometry[0]=i[0].concat(n[o].geometry[0]),o}function l(t,e,r){const n=r?e[0][e[0].length-1]:e[0][0];return`${t}:${n.x}:${n.y}`}for(let u=0;u<t.length;u++){const c=t[u],h=c.geometry,f=c.text?c.text.toString():null;if(!f){o(u);continue}const d=l(f,h),p=l(f,h,!0);if(d in r&&p in e&&r[d]!==e[p]){const t=a(d,p,h),i=s(d,p,n[t].geometry);delete e[d],delete r[p],r[l(f,n[i].geometry,!0)]=i,n[t].geometry=null}else d in r?s(d,p,h):p in e?a(d,p,h):(o(u),e[d]=i-1,r[p]=i-1)}return n.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,r,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=qd(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const r=this.lineVertexArray.length,n=t.segment;if(void 0!==n){let r=t.dist(e[n+1]),i=t.dist(e[n]);const o={};for(let t=n+1;t<e.length;t++)o[t]={x:e[t].x,y:e[t].y,tileUnitDistanceFromAnchor:r},t<e.length-1&&(r+=e[t+1].dist(e[t]));for(let t=n||0;t>=0;t--)o[t]={x:e[t].x,y:e[t].y,tileUnitDistanceFromAnchor:i},t>0&&(i+=e[t-1].dist(e[t]));for(let t=0;t<e.length;t++){const e=o[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(t,e,r,n,i,o,s,a,l,u,c,h,f,d){const p=t.indexArray,m=t.layoutVertexArray,g=t.globeExtVertexArray,y=t.segments.prepareSegment(4*e.length,m,p,this.canOverlap?o.sortKey:void 0),_=this.glyphOffsetArray.length,v=y.vertexLength,b=this.allowVerticalPlacement&&s===qh.vertical?Math.PI/2:0,w=o.text&&o.text.sections;for(let E=0;E<e.length;E++){const{tl:n,tr:i,bl:s,br:u,tex:c,pixelOffsetTL:h,pixelOffsetBR:_,minFontScaleX:v,minFontScaleY:x,glyphOffset:S,isSDF:M,sectionIndex:T}=e[E],A=y.vertexLength,C=S[1];if(Zd(m,l.x,l.y,n.x,C+n.y,c.x,c.y,r,M,h.x,h.y,v,x),Zd(m,l.x,l.y,i.x,C+i.y,c.x+c.w,c.y,r,M,_.x,h.y,v,x),Zd(m,l.x,l.y,s.x,C+s.y,c.x,c.y+c.h,r,M,h.x,_.y,v,x),Zd(m,l.x,l.y,u.x,C+u.y,c.x+c.w,c.y+c.h,r,M,_.x,_.y,v,x),a){const e=a.anchor,r=a.up;Hd(g,e.x,e.y,e.z,r[0],r[1],r[2]),Hd(g,e.x,e.y,e.z,r[0],r[1],r[2]),Hd(g,e.x,e.y,e.z,r[0],r[1],r[2]),Hd(g,e.x,e.y,e.z,r[0],r[1],r[2]),Qd(t.dynamicLayoutVertexArray,e.x,e.y,e.z,b)}else Qd(t.dynamicLayoutVertexArray,l.x,l.y,l.z,b);p.emplaceBack(A,A+1,A+2),p.emplaceBack(A+1,A+2,A+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(S[0]),E!==e.length-1&&T===e[E+1].sectionIndex||t.programConfigurations.populatePaintArrays(m.length,o,o.index,{},f,d,w&&w[T])}const x=a?a.anchor:l;t.placedSymbolArray.emplaceBack(x.x,x.y,x.z,l.x,l.y,_,this.glyphOffsetArray.length-_,v,u,c,l.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],s,0,!1,0,h,0)}_commitLayoutVertex(t,e,r,n,i,o,s){t.emplaceBack(e,r,n,i,o,Math.round(s.x),Math.round(s.y))}_addCollisionDebugVertices(t,e,r,n,o,s,a){const l=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),u=l.vertexLength,c=a.tileAnchorX,h=a.tileAnchorY;for(let i=0;i<4;i++)r.collisionVertexArray.emplaceBack(0,0,0,0);r.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),r.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),r.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),r.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(r.layoutVertexArray,n,o,s,c,h,new i(t.x1,t.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,o,s,c,h,new i(t.x2,t.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,o,s,c,h,new i(t.x2,t.y2)),this._commitLayoutVertex(r.layoutVertexArray,n,o,s,c,h,new i(t.x1,t.y2)),l.vertexLength+=4;const f=r.indexArray;f.emplaceBack(u,u+1),f.emplaceBack(u+1,u+2),f.emplaceBack(u+2,u+3),f.emplaceBack(u+3,u),l.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,r,n,i,o){for(let s=n;s<i;s++){const n=r.get(s),i=this.getSymbolInstanceTextSize(t,o,e,s);this._addCollisionDebugVertices(n,i,this.textCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(t,e,r,n,i,o){for(let s=n;s<i;s++){const n=r.get(s),i=this.getSymbolInstanceIconSize(t,e,s);this._addCollisionDebugVertices(n,i,this.iconCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,o)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Jd(fs,ih.members,xs),this.iconCollisionBox=new Jd(fs,ih.members,xs);const r=ch(this.iconSizeData,t),n=ch(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(n,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(n,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(r,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(r,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(t,e,r,n){const i=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:n),o=uh(this.textSizeData,t,i)/sh;return this.tilePixelRatio*o}getSymbolInstanceIconSize(t,e,r){const n=this.icon.placedSymbolArray.get(r),i=uh(this.iconSizeData,t,n);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(t,e,r){t.emplaceBack(e,-r,-r),t.emplaceBack(e,r,-r),t.emplaceBack(e,r,r),t.emplaceBack(e,-r,r)}_updateTextDebugCollisionBoxes(t,e,r,n,i,o){for(let s=n;s<i;s++){const n=r.get(s),i=this.getSymbolInstanceTextSize(t,o,e,s);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,n.padding)}}_updateIconDebugCollisionBoxes(t,e,r,n,i){for(let o=n;o<i;o++){const n=r.get(o),i=this.getSymbolInstanceIconSize(t,e,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,n.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const r=ch(this.iconSizeData,t),n=ch(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(n,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(n,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(r,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(r,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,r,n,i,o,s,a,l){const u={};for(let c=e;c<r;c++){const e=t.get(c);u.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,projectedAnchorX:e.projectedAnchorX,projectedAnchorY:e.projectedAnchorY,projectedAnchorZ:e.projectedAnchorZ,tileAnchorX:e.tileAnchorX,tileAnchorY:e.tileAnchorY},u.textFeatureIndex=e.featureIndex;break}for(let c=n;c<i;c++){const e=t.get(c);u.verticalTextBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,projectedAnchorX:e.projectedAnchorX,projectedAnchorY:e.projectedAnchorY,projectedAnchorZ:e.projectedAnchorZ,tileAnchorX:e.tileAnchorX,tileAnchorY:e.tileAnchorY},u.verticalTextFeatureIndex=e.featureIndex;break}for(let c=o;c<s;c++){const e=t.get(c);u.iconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,projectedAnchorX:e.projectedAnchorX,projectedAnchorY:e.projectedAnchorY,projectedAnchorZ:e.projectedAnchorZ,tileAnchorX:e.tileAnchorX,tileAnchorY:e.tileAnchorY},u.iconFeatureIndex=e.featureIndex;break}for(let c=a;c<l;c++){const e=t.get(c);u.verticalIconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,projectedAnchorX:e.projectedAnchorX,projectedAnchorY:e.projectedAnchorY,projectedAnchorZ:e.projectedAnchorZ,tileAnchorX:e.tileAnchorX,tileAnchorY:e.tileAnchorY},u.verticalIconFeatureIndex=e.featureIndex;break}return u}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const r=t.placedSymbolArray.get(e),n=r.vertexStartIndex+4*r.numGlyphs;for(let i=r.vertexStartIndex;i<n;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),r=Math.cos(t),n=[],i=[],o=[];for(let s=0;s<this.symbolInstances.length;++s){o.push(s);const t=this.symbolInstances.get(s);n.push(0|Math.round(e*t.tileAnchorX+r*t.tileAnchorY)),i.push(t.featureIndex)}return o.sort(((t,e)=>n[t]-n[e]||i[e]-i[t])),o}addToSortKeyRanges(t,e){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===e?r.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,r)=>{t>=0&&r.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Pi($d,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),$d.MAX_GLYPHS=65535,$d.addDynamicAttributes=Qd;const tp=new Zo({"symbol-placement":new Vo(Kt.layout_symbol["symbol-placement"]),"symbol-spacing":new Vo(Kt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Vo(Kt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Go(Kt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Vo(Kt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Vo(Kt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Vo(Kt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Vo(Kt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Vo(Kt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Go(Kt.layout_symbol["icon-size"]),"icon-text-fit":new Vo(Kt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Vo(Kt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Go(Kt.layout_symbol["icon-image"]),"icon-rotate":new Go(Kt.layout_symbol["icon-rotate"]),"icon-padding":new Vo(Kt.layout_symbol["icon-padding"]),"icon-keep-upright":new Vo(Kt.layout_symbol["icon-keep-upright"]),"icon-offset":new Go(Kt.layout_symbol["icon-offset"]),"icon-anchor":new Go(Kt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Vo(Kt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Vo(Kt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Vo(Kt.layout_symbol["text-rotation-alignment"]),"text-field":new Go(Kt.layout_symbol["text-field"]),"text-font":new Go(Kt.layout_symbol["text-font"]),"text-size":new Go(Kt.layout_symbol["text-size"]),"text-max-width":new Go(Kt.layout_symbol["text-max-width"]),"text-line-height":new Go(Kt.layout_symbol["text-line-height"]),"text-letter-spacing":new Go(Kt.layout_symbol["text-letter-spacing"]),"text-justify":new Go(Kt.layout_symbol["text-justify"]),"text-radial-offset":new Go(Kt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Vo(Kt.layout_symbol["text-variable-anchor"]),"text-anchor":new Go(Kt.layout_symbol["text-anchor"]),"text-max-angle":new Vo(Kt.layout_symbol["text-max-angle"]),"text-writing-mode":new Vo(Kt.layout_symbol["text-writing-mode"]),"text-rotate":new Go(Kt.layout_symbol["text-rotate"]),"text-padding":new Vo(Kt.layout_symbol["text-padding"]),"text-keep-upright":new Vo(Kt.layout_symbol["text-keep-upright"]),"text-transform":new Go(Kt.layout_symbol["text-transform"]),"text-offset":new Go(Kt.layout_symbol["text-offset"]),"text-allow-overlap":new Vo(Kt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Vo(Kt.layout_symbol["text-ignore-placement"]),"text-optional":new Vo(Kt.layout_symbol["text-optional"])});var ep={paint:new Zo({"icon-opacity":new Go(Kt.paint_symbol["icon-opacity"]),"icon-color":new Go(Kt.paint_symbol["icon-color"]),"icon-halo-color":new Go(Kt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Go(Kt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Go(Kt.paint_symbol["icon-halo-blur"]),"icon-translate":new Vo(Kt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Vo(Kt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Go(Kt.paint_symbol["text-opacity"]),"text-color":new Go(Kt.paint_symbol["text-color"],{runtimeType:ne,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Go(Kt.paint_symbol["text-halo-color"]),"text-halo-width":new Go(Kt.paint_symbol["text-halo-width"]),"text-halo-blur":new Go(Kt.paint_symbol["text-halo-blur"]),"text-translate":new Vo(Kt.paint_symbol["text-translate"]),"text-translate-anchor":new Vo(Kt.paint_symbol["text-translate-anchor"])}),layout:tp};class rp{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:$t,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pi(rp,"FormatSectionOverride",{omit:["defaultValue"]});class np extends _a{constructor(t){super(t,ep)}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const r=this.layout.get("text-writing-mode");if(r){const t=[];for(const e of r)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,e,r,n){const i=this.layout.get(t).evaluate(e,{},r,n),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||On(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,((e,r)=>r in t?String(t[r]):""))}(e.properties,i)}createBucket(t){return new $d(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of ep.paint.overridableProperties){if(!np.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),r=new rp(e),n=new Ln(r,e.property.specification);let i=null;i="constant"===e.value.kind||"source"===e.value.kind?new zn("source",n):new Un("composite",n,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new jo(e.property,i,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,r){return!(!this.layout||e.isDataDriven()||r.isDataDriven())&&np.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const r=t.get("text-field"),n=ep.paint.properties[e];let i=!1;const o=t=>{for(const e of t)if(n.overrides&&n.overrides.hasOverride(e))return void(i=!0)};if("constant"===r.value.kind&&r.value.value instanceof we)o(r.value.value.sections);else if("source"===r.value.kind){const t=e=>{i||(e instanceof Ce&&Me(e.value)===ae?o(e.value.sections):e instanceof Pe?o(e.sections):e.eachChild(t))},e=r.value;e._styleExpression&&t(e._styleExpression.expression)}return i}getProgramConfiguration(t){return new ca(this,t)}}var ip={paint:new Zo({"background-color":new Vo(Kt.paint_background["background-color"]),"background-pattern":new Ko(Kt.paint_background["background-pattern"]),"background-opacity":new Vo(Kt.paint_background["background-opacity"])})},op={paint:new Zo({"raster-opacity":new Vo(Kt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Vo(Kt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Vo(Kt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Vo(Kt.paint_raster["raster-brightness-max"]),"raster-saturation":new Vo(Kt.paint_raster["raster-saturation"]),"raster-contrast":new Vo(Kt.paint_raster["raster-contrast"]),"raster-resampling":new Vo(Kt.paint_raster["raster-resampling"]),"raster-fade-duration":new Vo(Kt.paint_raster["raster-fade-duration"])})};class sp extends _a{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var ap={paint:new Zo({"sky-type":new Vo(Kt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Vo(Kt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Vo(Kt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Vo(Kt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Vo(Kt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Wo(Kt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Vo(Kt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Vo(Kt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Vo(Kt.paint_sky["sky-opacity"])})};function lp(t,e,r){const n=[0,0,1],i=Ql([]);return Yl(i,i,r?-l(t)+Math.PI:l(t)),Xl(i,i,-l(e)),Fl(n,n,i),Nl(n,n)}const up={circle:class extends _a{constructor(t){super(t,fl)}createBucket(t){return new Ha(t)}queryRadius(t){const e=t;return al("circle-radius",this,e)+al("circle-stroke-width",this,e)+ll(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,r,n,i,o,s,a){const l=cl(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r);return ru(t,n,o,s,a,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,u)}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new ca(this,t)}},heatmap:class extends _a{createBucket(t){return new au(t)}constructor(t){super(t,du),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=pu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return al("heatmap-radius",this,t)}queryIntersectsFeature(t,e,r,n,o,s,a,l){const u=this.paint.get("heatmap-radius").evaluate(e,r);return ru(t,n,s,a,l,!0,!0,new i(0,0),u)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new ca(this,t)}},hillshade:class extends _a{constructor(t){super(t,mu)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends _a{constructor(t){super(t,rc)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),r=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(t){return new ca(this,t)}recalculate(t,e){super.recalculate(t,e);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new tc(t)}queryRadius(){return ll(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,r,n,i,o){return!t.queryGeometry.isAboveHorizon&&Ya(ul(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),n)}isTileClipped(){return!0}},"fill-extrusion":class extends _a{constructor(t){super(t,Bc)}createBucket(t){return new xc(t)}queryRadius(){return ll(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new ca(this,t)}queryIntersectsFeature(t,e,r,n,o,s,a,l,u){const c=cl(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),h=this.paint.get("fill-extrusion-height").evaluate(e,r),f=this.paint.get("fill-extrusion-base").evaluate(e,r),d=[0,0],p=l&&s.elevation,m=s.elevation?s.elevation.exaggeration():1,g=t.tile.getBucket(this);if(p&&g instanceof xc){const t=g.centroidVertexArray,e=u+1;if(e<t.length){const r=t.get(e);d[0]=r.a_centroid_pos0,d[1]=r.a_centroid_pos1}}if(0===d[0]&&1===d[1])return!1;"globe"===s.projection.name&&(n=kc([n],[new i(0,0),new i(xa,xa)],t.tileID.canonical).map((t=>t.polygon)).flat());const y=function(t,e,r,n,o,s,a,l,u,c,h){return"globe"===t.projection.name?function(t,e,r,n,i,o,s,a,l,u,c){const h=[],f=[],d=t.projection.upVectorScale(c,t.center.lat,t.worldSize).metersToTile,p=[0,0,0,1],m=[0,0,0,1],g=(t,e,r,n)=>{t[0]=e,t[1]=r,t[2]=n,t[3]=1},y=Ic();r>0&&(r+=y),n+=y;for(const _ of e){const e=[],y=[];for(const h of _){const f=h.x+i.x,_=h.y+i.y,v=t.projection.projectTilePoint(f,_,c),b=t.projection.upVector(c,h.x,h.y);let w=r,x=n;if(s){const t=Fc(f,_,r,n,s,a,l,u);w+=t.base,x+=t.top}0!==r?g(p,v.x+b[0]*d*w,v.y+b[1]*d*w,v.z+b[2]*d*w):g(p,v.x,v.y,v.z),g(m,v.x+b[0]*d*x,v.y+b[1]*d*x,v.z+b[2]*d*x),jl(p,p,o),jl(m,m,o),e.push(jc(p)),y.push(jc(m))}h.push(e),f.push(y)}return[h,f]}(t,e,r,n,o,s,a,l,u,c,h):a?function(t,e,r,n,i,o,s,a,l){const u=[],c=[],h=[0,0,0,1];for(const f of t){const t=[],d=[];for(const u of f){const c=u.x+n.x,f=u.y+n.y,p=Fc(c,f,e,r,o,s,a,l);h[0]=c,h[1]=f,h[2]=p.base,h[3]=1,Zl(h,h,i),h[3]=Math.max(h[3],1e-5);const m=jc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);h[0]=c,h[1]=f,h[2]=p.top,h[3]=1,Zl(h,h,i),h[3]=Math.max(h[3],1e-5);const g=jc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);t.push(m),d.push(g)}u.push(t),c.push(d)}return[u,c]}(e,r,n,o,s,a,l,u,c):function(t,e,r,n,o){const s=[],a=[],l=o[8]*e,u=o[9]*e,c=o[10]*e,h=o[11]*e,f=o[8]*r,d=o[9]*r,p=o[10]*r,m=o[11]*r;for(const g of t){const t=[],e=[];for(const r of g){const s=r.x+n.x,a=r.y+n.y,g=o[0]*s+o[4]*a+o[12],y=o[1]*s+o[5]*a+o[13],_=o[2]*s+o[6]*a+o[14],v=o[3]*s+o[7]*a+o[15],b=g+l,w=y+u,x=_+c,E=Math.max(v+h,1e-5),S=g+f,M=y+d,T=_+p,A=Math.max(v+m,1e-5),C=new i(b/E,w/E);C.z=x/E,t.push(C);const I=new i(S/A,M/A);I.z=T/A,e.push(I)}s.push(t),a.push(e)}return[s,a]}(e,r,n,o,s)}(s,n,f,h,c,a,p?l:null,d,m,s.center.lat,t.tileID.canonical),_=t.queryGeometry;return function(t,e,r){let n=1/0;Ya(r,e)&&(n=Uc(r,e[0]));for(let i=0;i<e.length;i++){const o=e[i],s=t[i];for(let t=0;t<o.length-1;t++){const e=o[t],i=[e,o[t+1],s[t+1],s[t],e];Qa(r,i)&&(n=Math.min(n,Uc(r,i)))}}return n!==1/0&&n}(y[0],y[1],_.isPointQuery()?_.screenBounds:_.screenGeometry)}},line:class extends _a{constructor(t){super(t,Xc),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof yr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Yc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Hc(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new ca(this,t)}queryRadius(t){const e=t,r=Jc(al("line-width",this,e),al("line-gap-width",this,e)),n=al("line-offset",this,e);return r/2+Math.abs(n)+ll(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,r,n,o,s){if(t.queryGeometry.isAboveHorizon)return!1;const a=ul(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),l=t.pixelToTileUnitsFactor/2*Jc(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),u=this.paint.get("line-offset").evaluate(e,r);return u&&(n=function(t,e){const r=[],n=new i(0,0);for(let i=0;i<t.length;i++){const o=t[i],s=[];for(let t=0;t<o.length;t++){const r=o[t-1],i=o[t],a=o[t+1],l=0===t?n:i.sub(r)._unit()._perp(),u=t===o.length-1?n:a.sub(i)._unit()._perp(),c=l._add(u)._unit();c._mult(1/(c.x*u.x+c.y*u.y)),s.push(c._mult(e)._add(i))}r.push(s)}return r}(n,u*t.pixelToTileUnitsFactor)),function(t,e,r){for(let n=0;n<e.length;n++){const i=e[n];if(t.length>=3)for(let e=0;e<i.length;e++)if(il(t,i[e]))return!0;if(Ja(t,i,r))return!0}return!1}(a,n,l)}isTileClipped(){return!0}},symbol:np,background:class extends _a{constructor(t){super(t,ip)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends _a{constructor(t){super(t,op)}getProgramIds(){return["raster"]}},sky:class extends _a{constructor(t){super(t,ap),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=pu({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(t,e){if("atmosphere"===this.paint.get("sky-type")){const r=this.paint.get("sky-atmosphere-sun"),n=!r,i=t.style.light,o=i.properties.get("position");return n&&"viewport"===i.properties.get("anchor")&&R("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),n?lp(o.azimuthal,90-o.polar,e):lp(r[0],90-r[1],e)}const r=this.paint.get("sky-gradient-center");return lp(r[0],90-r[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}};class cp{constructor(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n)}update(t,r,n){const{width:i,height:o}=t,{context:s}=this,{gl:a}=s,{HTMLImageElement:l,HTMLCanvasElement:u,HTMLVideoElement:c,ImageData:h,ImageBitmap:f}=e;if(a.bindTexture(a.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!r||!1!==r.premultiply)),n||this.size&&this.size[0]===i&&this.size[1]===o){const{x:e,y:r}=n||{x:0,y:0};t instanceof l||t instanceof u||t instanceof c||t instanceof h||f&&t instanceof f?a.texSubImage2D(a.TEXTURE_2D,0,e,r,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,e,r,i,o,a.RGBA,a.UNSIGNED_BYTE,t.data)}else this.size=[i,o],t instanceof l||t instanceof u||t instanceof c||t instanceof h||f&&t instanceof f?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,i,o,0,this.format,a.UNSIGNED_BYTE,t.data);this.useMipmap=Boolean(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&a.generateMipmap(a.TEXTURE_2D)}bind(t,e){const{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?t===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class hp{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new hu({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const r=this.getKey(t,e);return this.positions[r]}trim(){const t=this.width,e=this.height=E(this.nextRow);this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,r){const n=[];let i=t.length%2==1?-t[t.length-1]*r:0,o=t[0]*r,s=!0;n.push({left:i,right:o,isDash:s,zeroLength:0===t[0]});let a=t[0];for(let l=1;l<t.length;l++){s=!s;const e=t[l];i=a*r,a+=e,o=a*r,n.push({left:i,right:o,isDash:s,zeroLength:0===e})}return n}addRoundDash(t,e,r){const n=e/2;for(let i=-r;i<=r;i++){const e=this.width*(this.nextRow+r+i);let o=0,s=t[o];for(let a=0;a<this.width;a++){a/s.right>1&&(s=t[++o]);const l=Math.abs(a-s.left),u=Math.abs(a-s.right),c=Math.min(l,u);let h;const f=i/r*(n+1);if(s.isDash){const t=n-Math.abs(f);h=Math.sqrt(c*c+t*t)}else h=n-Math.sqrt(c*c+f*f);this.image.data[e+a]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t,e){for(let a=t.length-1;a>=0;--a){const e=t[a],r=t[a+1];e.zeroLength?t.splice(a,1):r&&r.isDash===e.isDash&&(r.left=e.left,t.splice(a,1))}const r=t[0],n=t[t.length-1];r.isDash===n.isDash&&(r.left=n.left-this.width,n.right=r.right+this.width);const i=this.width*this.nextRow;let o=0,s=t[o];for(let a=0;a<this.width;a++){a/s.right>1&&(s=t[++o]);const r=Math.abs(a-s.left),n=Math.abs(a-s.right),l=Math.min(r,n);this.image.data[i+a]=Math.max(0,Math.min(255,(s.isDash?l:-l)+e+128))}}addDash(t,e){const r=this.getKey(t,e);if(this.positions[r])return this.positions[r];const n="round"===e,i=n?7:0,o=2*i+1;if(this.nextRow+o>this.height)return R("LineAtlas out of space"),null;0===t.length&&t.push(1);let s=0;for(let u=0;u<t.length;u++)t[u]<0&&(R("Negative value is found in line dasharray, replacing values with 0"),t[u]=0),s+=t[u];if(0!==s){const r=this.width/s,o=this.getDashRanges(t,this.width,r);n?this.addRoundDash(o,r,i):this.addRegularDash(o,"square"===e?.5*r:0)}const a=this.nextRow+i;this.nextRow+=o;const l={tl:[a,i],br:[s,0]};return this.positions[r]=l,l}}Pi(hp,"LineAtlas");class fp{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class dp{constructor(){this.tasks={},this.taskQueue=[],M(["process"],this),this.invoker=new fp(this.process),this.nextId=0}add(t,e){const r=this.nextId++,n=function({type:t,isSymbolTile:e,zoom:r}){return r=r||0,"message"===t?0:"maybePrepare"!==t||e?"parseTile"!==t||e?"parseTile"===t&&e?300-r:"maybePrepare"===t&&e?400-r:500:200-r:100-r}(e);if(0===n){D();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[r]={fn:t,metadata:e,priority:n,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:()=>{delete this.tasks[r]}}}process(){D();try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn()}finally{}}pick(){let t=null,e=1/0;for(let n=0;n<this.taskQueue.length;n++){const r=this.tasks[this.taskQueue[n]];r.priority<e&&(e=r.priority,t=n)}if(null===t)return null;const r=this.taskQueue[t];return this.taskQueue.splice(t,1),r}remove(){this.invoker.remove()}}class pp{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const mp=["tile","layer","source","sourceLayer","state"];class gp{constructor(t,e,r,n,i){this.type="Feature",this._vectorTileFeature=t,this._z=e,this._x=r,this._y=n,this.properties=t.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const e of mp)void 0!==this[e]&&(t[e]=this[e]);return t}}const yp=32,_p=33,vp=new Uint16Array(8184);for(let om=0;om<2046;om++){let t=om+2,e=0,r=0,n=0,i=0,o=0,s=0;for(1&t?n=i=o=yp:e=r=s=yp;(t>>=1)>1;){const a=e+n>>1,l=r+i>>1;1&t?(n=e,i=r,e=o,r=s):(e=n,r=i,n=o,i=s),o=a,s=l}const a=4*om;vp[a+0]=e,vp[a+1]=r,vp[a+2]=n,vp[a+3]=i}const bp=new Uint16Array(2178),wp=new Uint8Array(1089),xp=new Uint16Array(1089);function Ep(t){return 0===t?-.03125:32===t?.03125:0}var Sp=Jo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Mp={type:2,extent:xa,loadGeometry:()=>[[new i(0,0),new i(8193,0),new i(8193,8193),new i(0,8193),new i(0,0)]]};class Tp{constructor(t,e,r,n,i){this.tileID=t,this.uid=w(),this.uses=0,this.tileSize=e,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",n&&n.transform&&(this.projection=n.transform.projection)}registerFadeDuration(t){const e=t+this.timeAdded;e<Z.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Ed(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,e,r){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const r={};if(!e)return r;for(const n of t){const t=n.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){n.layers=t,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)r[e.id]=n}}return r}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof $d){if(this.hasSymbolBuckets=!0,!r)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof $d&&e.hasRTLText){this.hasRTLText=!0,Bo.isLoading()||Bo.isLoaded()||"deferred"!==ko()||Ro();break}}this.queryPadding=0;for(const t in this.buckets){const r=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(r))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new Cs}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const r in this.buckets){const e=this.buckets[r];e.uploadPending()&&e.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new cp(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new cp(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new cp(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,r,n,i,o,s,a){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:s,transform:o,params:i,tileTransform:this.tileTransform},t,e,r):{}}querySourceFeatures(t,e){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const n=r.loadVTLayers(),i=e?e.sourceLayer:"",o=n._geojsonTileLayer||n[i];if(!o)return;const s=Jn(e&&e.filter),{z:a,x:l,y:u}=this.tileID.canonical,c={z:a,x:l,y:u};for(let h=0;h<o.length;h++){const e=o.feature(h);if(s.needGeometry){const t=Ka(e,!0);if(!s.filter(new Po(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!s.filter(new Po(this.tileID.overscaledZ),e))continue;const n=r.getId(e,i),f=new gp(e,a,l,u,n);f.tile=c,t.push(f)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=L(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let r=!1;if(this.expirationTime>t)r=!1;else if(e)if(this.expirationTime<e)r=!0;else{const n=this.expirationTime-e;n?this.expirationTime=t+Math.max(n,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!e)return;const r=this.latestFeatureIndex.loadVTLayers(),n=e.style.listImages();for(const i in this.buckets){if(!e.style.hasLayer(i))continue;const o=this.buckets[i],s=o.layers[0].sourceLayer||"_geojsonTileLayer",a=r[s],l=t[s];if(!a||!l||0===Object.keys(l).length)continue;if(o.update(l,a,n,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof Hc||o instanceof tc){const t=e.style._getSourceCache(o.layers[0].source);e._terrain&&e._terrain.enabled&&t&&o.programConfigurations.needsUpload&&e._terrain._clearRenderCacheForTile(t.id,this.tileID)}const u=e&&e.style&&e.style.getLayer(i);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Z.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=Z.now()+t}setTexture(t,e){const r=e.context,n=r.gl;this.texture=e.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new cp(r,t,n.RGBA,{useMipmap:!0}),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),r.extTextureFilterAnisotropic&&n.texParameterf(n.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax))}setDependencies(t,e){const r={};for(const n of e)r[n]=!0;this.dependencies[t]=r}hasDependency(t,e){for(const r of t){const t=this.dependencies[r];if(t)for(const r of e)if(t[r])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,e){if(!e||"mercator"===e.name||this._tileDebugBuffer)return;const r=qa(Mp,this.tileID.canonical,this.tileTransform)[0],n=new ts,i=new Es;for(let o=0;o<r.length;o++){const{x:t,y:e}=r[o];n.emplaceBack(t,e),i.emplaceBack(o)}i.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(i),this._tileDebugBuffer=t.createVertexBuffer(n,Zf.members),this._tileDebugSegments=wa.simpleSegment(0,0,n.length,i.length)}_makeTileBoundsBuffers(t,e){if(this._tileBoundsBuffer||!e||"mercator"===e.name)return;const r=qa(Mp,this.tileID.canonical,this.tileTransform)[0];let n,i;if(this.isRaster){const t=function(t,e){const r=Ed(t,e),n=Math.pow(2,t.z);for(let u=0;u<_p;u++)for(let i=0;i<_p;i++){const o=Ra((t.x+(i+Ep(i))/yp)/n),s=Ba((t.y+(u+Ep(u))/yp)/n),a=e.project(o,s),l=u*_p+i;bp[2*l+0]=Math.round((a.x*r.scale-r.x)*xa),bp[2*l+1]=Math.round((a.y*r.scale-r.y)*xa)}wp.fill(0),xp.fill(0);for(let u=2045;u>=0;u--){const t=4*u,e=vp[t+0],r=vp[t+1],n=vp[t+2],i=vp[t+3],o=e+n>>1,s=r+i>>1,a=o+s-r,l=s+e-o,c=r*_p+e,h=i*_p+n,f=s*_p+o,d=Math.hypot((bp[2*c+0]+bp[2*h+0])/2-bp[2*f+0],(bp[2*c+1]+bp[2*h+1])/2-bp[2*f+1])>=16;if(wp[f]=wp[f]||(d?1:0),u<1022){const t=(r+l>>1)*_p+(e+a>>1),o=(i+l>>1)*_p+(n+a>>1);wp[f]=wp[f]||wp[t]||wp[o]}}const i=new rs,o=new gs;let s=0;function a(t,e){const r=e*_p+t;return 0===xp[r]&&(i.emplaceBack(bp[2*r+0],bp[2*r+1],t*xa/yp,e*xa/yp),xp[r]=++s),xp[r]-1}function l(t,e,r,n,i,s){const u=t+r>>1,c=e+n>>1;if(Math.abs(t-i)+Math.abs(e-s)>1&&wp[c*_p+u])l(i,s,t,e,u,c),l(r,n,i,s,u,c);else{const l=a(t,e),u=a(r,n),c=a(i,s);o.emplaceBack(l,u,c)}}return l(0,0,yp,yp,yp,0),l(yp,yp,0,0,0,yp),{vertices:i,indices:o}}(this.tileID.canonical,e);n=t.vertices,i=t.indices}else{n=new rs,i=new gs;for(const{x:e,y:i}of r)n.emplaceBack(e,i,0,0);const t=_u(n.int16,void 0,4);for(let e=0;e<t.length;e+=3)i.emplaceBack(t[e],t[e+1],t[e+2])}this._tileBoundsBuffer=t.createVertexBuffer(n,Sp.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(i),this._tileBoundsSegments=wa.simpleSegment(0,0,n.length,i.length)}_makeGlobeTileDebugBuffers(t,e){const r=e.projection;if(!r||"globe"!==r.name||e.freezeTileCoverage)return;const n=this.tileID.canonical,i=pd(id(n,e)),o=yd(e.zoom);let s;o>0&&(s=yl(new Float64Array(16),e.globeMatrix));const a=(n.x+.5)/(1<<n.z)-Ca(e.center.lng);let l=0;a>.5?l=-1:a<-.5&&(l=1),this._makeGlobeTileDebugBorderBuffer(t,n,e,i,s,o,l),this._makeGlobeTileDebugTextBuffer(t,n,e,i,s,o,l)}_globePoint(t,e,r,n,i,o,s,a){let l=hd(t,e,r);if(o){const i=1<<r.z,u=[((t/xa+r.x)/i+a)*n,(e/xa+r.y)/i*n,0];jl(u,u,o),l=vr(l,u,s)}return jl(l,l,i)}_makeGlobeTileDebugBorderBuffer(t,e,r,n,i,o,s){const a=new ts,l=new Es,u=new es,c=(t,c,h,f,d)=>{const p=(h-t)/(d-1),m=(f-c)/(d-1),g=a.length;for(let y=0;y<d;y++){const h=t+y*p,f=c+y*m;a.emplaceBack(h,f);const d=this._globePoint(h,f,e,r.worldSize,n,i,o,s);u.emplaceBack(d[0],d[1],d[2]),l.emplaceBack(g+y)}},h=xa;c(0,0,h,0,16),c(h,0,h,h,16),c(h,h,0,h,16),c(0,h,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(l),this._tileDebugBuffer=t.createVertexBuffer(a,Zf.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(u,Wf.members),this._tileDebugSegments=wa.simpleSegment(0,0,a.length,l.length)}_makeGlobeTileDebugTextBuffer(t,e,r,n,i,o,s){const a=new ts,l=new gs,u=new es,c=25;l.reserve(32),a.reserve(c),u.reserve(c);const h=(t,e)=>c*t+e;for(let f=0;f<c;f++){const t=2048*f;for(let l=0;l<c;l++){const c=2048*l;a.emplaceBack(c,t);const h=this._globePoint(c,t,e,r.worldSize,n,i,o,s);u.emplaceBack(h[0],h[1],h[2])}}for(let f=0;f<4;f++)for(let t=0;t<4;t++){const e=h(f,t),r=h(f,t+1),n=h(f+1,t),i=h(f+1,t+1);l.emplaceBack(e,r,n),l.emplaceBack(n,r,i)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(l),this._tileDebugTextBuffer=t.createVertexBuffer(a,Zf.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(u,Wf.members),this._tileDebugTextSegments=wa.simpleSegment(0,0,c,32)}}class Ap{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,r){const n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},v(this.stateChanges[t][n],r),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==n&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][n]){this.deletedStates[t][n]={};for(const e in this.state[t][n])r[e]||(this.deletedStates[t][n][e]=null)}else for(const i in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][i]&&delete this.deletedStates[t][n][i]}removeFeatureState(t,e,r){if(null===this.deletedStates[t])return;const n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][r]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(r in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][r]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}getState(t,e){const r=String(e),n=v({},(this.state[t]||{})[r],(this.stateChanges[t]||{})[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const r=this.deletedStates[t][e];if(null===r)return{};for(const t in r)delete n[t]}return n}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const r={};for(const n in this.stateChanges){this.state[n]=this.state[n]||{};const t={};for(const e in this.stateChanges[n])this.state[n][e]||(this.state[n][e]={}),v(this.state[n][e],this.stateChanges[n][e]),t[e]=this.state[n][e];r[n]=t}for(const n in this.deletedStates){this.state[n]=this.state[n]||{};const t={};if(null===this.deletedStates[n])for(const e in this.state[n])t[e]={},this.state[n][e]={};else for(const e in this.deletedStates[n]){if(null===this.deletedStates[n][e])this.state[n][e]={};else for(const t of Object.keys(this.deletedStates[n][e]))delete this.state[n][e][t];t[e]=this.state[n][e]}r[n]=r[n]||{},v(r[n],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const n in t)t[n].setFeatureState(r,e)}}class Cp{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const r=this.toIdx(t,e);return{min:this.minimums[r],max:this.maximums[r]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function Ip(t,e,r,n){let i=0,o=Number.MAX_VALUE;for(let s=0;s<3;s++)if(Math.abs(n[s])<1e-15){if(r[s]<t[s]||r[s]>e[s])return null}else{const a=1/n[s];let l=(t[s]-r[s])*a,u=(e[s]-r[s])*a;if(l>u){const t=l;l=u,u=t}if(l>i&&(i=l),u<o&&(o=u),i>o)return null}return i}function kp(t,e,r,n,i,o,s,a,l,u,c){const h=n-t,f=i-e,d=o-r,p=s-t,m=a-e,g=l-r,y=c[1]*g-c[2]*m,_=c[2]*p-c[0]*g,v=c[0]*m-c[1]*p,b=h*y+f*_+d*v;if(Math.abs(b)<1e-15)return null;const w=1/b,x=u[0]-t,E=u[1]-e,S=u[2]-r,M=(x*y+E*_+S*v)*w;if(M<0||M>1)return null;const T=E*d-S*f,A=S*h-x*d,C=x*f-E*h,I=(c[0]*T+c[1]*A+c[2]*C)*w;return I<0||M+I>1?null:(p*T+m*A+g*C)*w}function Rp(t,e,r){return(t-e)/(r-e)}function Bp(t,e,r,n,i,o,s,a,l){const u=1<<r,c=o-n,h=s-i,f=(t+1)/u*c+n,d=(e+0)/u*h+i,p=(e+1)/u*h+i;a[0]=(t+0)/u*c+n,a[1]=d,l[0]=f,l[1]=p}class Pp{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),r=[];let n=Math.ceil(Math.pow(2,e));const i=1/n,o=(t,e,r,n,i)=>{const o=n?1:0,s=(t+1)*r-o,a=e*r,l=(e+1)*r-o;i[0]=t*r,i[1]=a,i[2]=s,i[3]=l};let s=new Cp(n);const a=[];for(let l=0;l<n*n;l++){o(l%n,Math.floor(l/n),i,!1,a);const e=Lp(a[0],a[1],t),r=Lp(a[2],a[1],t),u=Lp(a[2],a[3],t),c=Lp(a[0],a[3],t);s.minimums.push(Math.min(e,r,u,c)),s.maximums.push(Math.max(e,r,u,c)),s.leaves.push(1)}for(r.push(s),n/=2;n>=1;n/=2){const t=r[r.length-1];s=new Cp(n);for(let e=0;e<n*n;e++){o(e%n,Math.floor(e/n),2,!0,a);const r=t.getElevation(a[0],a[1]),i=t.getElevation(a[2],a[1]),l=t.getElevation(a[2],a[3]),u=t.getElevation(a[0],a[3]),c=t.isLeaf(a[0],a[1]),h=t.isLeaf(a[2],a[1]),f=t.isLeaf(a[2],a[3]),d=t.isLeaf(a[0],a[3]),p=Math.min(r.min,i.min,l.min,u.min),m=Math.max(r.max,i.max,l.max,u.max),g=c&&h&&f&&d;s.maximums.push(m),s.minimums.push(p),s.leaves.push(m-p<=5&&g?1:0)}r.push(s)}return r}(this.dem),r=e.length-1,n=e[r];this._addNode(n.minimums[0],n.maximums[0],n.leaves[0]),this._construct(e,0,0,r,0)}raycastRoot(t,e,r,n,i,o,s=1){return Ip([t,e,-100],[r,n,this.maximums[0]*s],i,o)}raycast(t,e,r,n,i,o,s=1){if(!this.nodeCount)return null;const a=this.raycastRoot(t,e,r,n,i,o,s);if(null==a)return null;const l=[],u=[],c=[],h=[],f=[{idx:0,t:a,nodex:0,nodey:0,depth:0}];for(;f.length>0;){const{idx:a,t:d,nodex:p,nodey:m,depth:g}=f.pop();if(this.leaves[a]){Bp(p,m,g,t,e,r,n,c,h);const a=1<<g,l=(p+0)/a,u=(p+1)/a,f=(m+0)/a,y=(m+1)/a,_=Lp(l,f,this.dem)*s,v=Lp(u,f,this.dem)*s,b=Lp(u,y,this.dem)*s,w=Lp(l,y,this.dem)*s,x=kp(c[0],c[1],_,h[0],c[1],v,h[0],h[1],b,i,o),E=kp(h[0],h[1],b,c[0],h[1],w,c[0],c[1],_,i,o),S=Math.min(null!==x?x:Number.MAX_VALUE,null!==E?E:Number.MAX_VALUE);if(S!==Number.MAX_VALUE)return S;{const t=Ol([],i,o,d);if(Dp(_,v,w,b,Rp(t[0],c[0],h[0]),Rp(t[1],c[1],h[1]))>=t[2])return d}continue}let y=0;for(let f=0;f<this._siblingOffset.length;f++){Bp((p<<1)+this._siblingOffset[f][0],(m<<1)+this._siblingOffset[f][1],g+1,t,e,r,n,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[a]+f]*s;const d=Ip(c,h,i,o);if(null!=d){const t=d;l[f]=t;let e=!1;for(let r=0;r<y&&!e;r++)t>=l[u[r]]&&(u.splice(r,0,f),e=!0);e||(u[y]=f),y++}}for(let t=0;t<y;t++){const e=u[t];f.push({idx:this.childOffsets[a]+e,t:l[e],nodex:(p<<1)+this._siblingOffset[e][0],nodey:(m<<1)+this._siblingOffset[e][1],depth:g+1})}}return null}_addNode(t,e,r){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(r),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,r,n,i){if(1===t[n].isLeaf(e,r))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=n-1,s=t[o];let a=0,l=0;for(let u=0;u<this._siblingOffset.length;u++){const t=2*e+this._siblingOffset[u][0],n=2*r+this._siblingOffset[u][1],i=s.getElevation(t,n),o=s.isLeaf(t,n),c=this._addNode(i.min,i.max,o);o&&(a|=1<<u),l||(l=c)}for(let u=0;u<this._siblingOffset.length;u++)a&1<<u||this._construct(t,2*e+this._siblingOffset[u][0],2*r+this._siblingOffset[u][1],o,l+u)}}function Dp(t,e,r,n,i,o){return _r(_r(t,r,o),_r(e,n,o),i)}function Lp(t,e,r){const n=r.dim,i=p(t*n-.5,0,n-1),o=p(e*n-.5,0,n-1),s=Math.floor(i),a=Math.floor(o),l=Math.min(s+1,n-1),u=Math.min(a+1,n-1);return Dp(r.get(s,a),r.get(l,a),r.get(s,u),r.get(l,u),i-s,o-a)}const Op={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Np{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,r,n=!1,i=!1){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return R(`"${r}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const o=this.dim=e.height-2,s=new Uint32Array(e.data.buffer);if(this.pixels=new Uint8Array(e.data.buffer),this.encoding=r||"mapbox",this.borderReady=n,!n){for(let t=0;t<o;t++)s[this._idx(-1,t)]=s[this._idx(0,t)],s[this._idx(o,t)]=s[this._idx(o-1,t)],s[this._idx(t,-1)]=s[this._idx(t,0)],s[this._idx(t,o)]=s[this._idx(t,o-1)];s[this._idx(-1,-1)]=s[this._idx(0,0)],s[this._idx(o,-1)]=s[this._idx(o-1,0)],s[this._idx(-1,o)]=s[this._idx(0,o-1)],s[this._idx(o,o)]=s[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Pp(this)}get(t,e,r=!1){r&&(t=p(t,-1,this.dim),e=p(e,-1,this.dim));const n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}static getUnpackVector(t){return Op[t]}get unpackVector(){return Op[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,r){return(256*t*256+256*e+r)/10-1e4}_unpackTerrarium(t,e,r){return 256*t+e+r/256-32768}static pack(t,e){const r=[0,0,0,0],n=Np.getUnpackVector(e);let i=Math.floor((t+n[3])/n[2]);return r[2]=i%256,i=Math.floor(i/256),r[1]=i%256,i=Math.floor(i/256),r[0]=i,r}getPixels(){return new fu({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let n=e*this.dim,i=e*this.dim+this.dim,o=r*this.dim,s=r*this.dim+this.dim;switch(e){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:o=s-1;break;case 1:s=o+1}const a=-e*this.dim,l=-r*this.dim;for(let u=o;u<s;u++)for(let e=n;e<i;e++){const r=4*this._idx(e,u),n=4*this._idx(e+a,u+l);this.pixels[r+0]=t.pixels[n+0],this.pixels[r+1]=t.pixels[n+1],this.pixels[r+2]=t.pixels[n+2],this.pixels[r+3]=t.pixels[n+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Pi(Np,"DEMData"),Pi(Pp,"DemMinMaxQuadTree",{omit:["dem"]});class zp{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,r){const n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const i={value:e,timeout:void 0};if(void 0!==r&&(i.timeout=setTimeout((()=>{this.remove(t,i)}),r)),this.data[n].push(i),this.order.push(n),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const r=t.wrapped().key,n=void 0===e?0:this.data[r].indexOf(e),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const r in this.data)for(const n of this.data[r])t(n.value)||e.push(n);for(const r of e)this.remove(r.value.tileID,r)}}class Up{constructor(t,e,r){this.func=t,this.mask=e,this.range=r}}Up.ReadOnly=!1,Up.ReadWrite=!0,Up.disabled=new Up(519,Up.ReadOnly,[0,1]);const jp=7680;class Fp{constructor(t,e,r,n,i,o){this.test=t,this.ref=e,this.mask=r,this.fail=n,this.depthFail=i,this.pass=o}}Fp.disabled=new Fp({func:519,mask:0},0,0,jp,jp,jp);class Vp{constructor(t,e,r){this.blendFunction=t,this.blendColor=e,this.mask=r}}Vp.Replace=[1,0],Vp.disabled=new Vp(Vp.Replace,_e.transparent,[!1,!1,!1,!1]),Vp.unblended=new Vp(Vp.Replace,_e.transparent,[!0,!0,!0,!0]),Vp.alphaBlended=new Vp([1,771],_e.transparent,[!0,!0,!0,!0]);const Gp=1029,qp=2305;class Kp{constructor(t,e,r){this.enable=t,this.mode=e,this.frontFace=r}}Kp.disabled=new Kp(!1,Gp,qp),Kp.backCCW=new Kp(!0,Gp,qp),Kp.backCW=new Kp(!0,Gp,2304),Kp.frontCW=new Kp(!0,1028,2304),Kp.frontCCW=new Kp(!0,1028,qp);class Wp extends qt{constructor(t,e,r){super(),this.id=t,this._onlySymbols=r,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),e.on("error",(()=>{this._sourceErrored=!0})),this._source=e,this._tiles={},this._cache=new zp(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ap,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const e in this._tiles){const r=this._tiles[e];this._source.prepareTile(r)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,r.tileID),r.upload(t),r.prepare(this.map.style.imageManager)}else for(const e in this._tiles){const r=this._tiles[e];r.upload(t),r.prepare(this.map.style.imageManager)}}getIds(){return _(this._tiles).map((t=>t.tileID)).sort(Zp).map((t=>t.key))}getRenderableIds(t){const e=[];for(const r in this._tiles)this._isIdRenderable(+r,t)&&e.push(this._tiles[r]);return t?e.sort(((t,e)=>{const r=t.tileID,n=e.tileID,o=new i(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),s=new i(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||s.y-o.y||s.x-o.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(Zp).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const r=this._tiles[t];r&&("loading"!==r.state&&(r.state=e),this._loadTile(r,this._tileLoaded.bind(this,r,t,e)))}_tileLoaded(t,e,r,n){if(n)if(t.state="errored",404!==n.status)this._source.fire(new Gt(n,{tile:t}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const t=this.map.painter.terrain;this.update(this.transform,t.getScaledDemTileSize(),!0),t.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=Z.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Vt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let n=0;n<e.length;n++){const i=e[n];if(t.neighboringTiles&&t.neighboringTiles[i]){const e=this.getTileByID(i);r(t,e),r(e,t)}}function r(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let r=e.tileID.canonical.x-t.tileID.canonical.x;const n=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,r,n),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,r,n){for(const i in this._tiles){let o=this._tiles[i];if(n[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>r)continue;let s=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(s=t)}let a=s;for(;a.overscaledZ>e;)if(a=a.scaledTo(a.overscaledZ-1),t[a.key]){n[s.key]=s;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const r=this._loadedParentTiles[t.key];return r&&r.tileID.overscaledZ>=e?r:null}for(let r=t.overscaledZ-1;r>=e;r--){const e=t.scaledTo(r),n=this._getLoadedTile(e);if(n)return n}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const r=Math.ceil(t.width/e)+1,n=Math.ceil(t.height/e)+1,i=Math.floor(r*n*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,s="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(s)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const r in this._tiles){const n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),t[n.tileID.key]=n}this._tiles=t;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(t,e,r){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!r)return;let n;this.updateCacheSize(t,e),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new Oc(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(n=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(n=n.filter((t=>this._source.hasTile(t))))):n=[];const i=this._updateRetainedTiles(n);if(Hp(this._source.type)&&0!==n.length){const t={},e={},r=Object.keys(i);for(const n of r){const r=i[n],o=this._tiles[n];if(!o||o.fadeEndTime&&o.fadeEndTime<=Z.now())continue;const s=this.findLoadedParent(r,Math.max(r.overscaledZ-Wp.maxOverzooming,this._source.minzoom));s&&(this._addTile(s.tileID),t[s.tileID.key]=s.tileID),e[n]=r}const o=n[n.length-1].overscaledZ;for(const n in this._tiles){const t=this._tiles[n];if(i[n]||!t.hasData())continue;let r=t.tileID;for(;r.overscaledZ>o;){r=r.scaledTo(r.overscaledZ-1);const o=this._tiles[r.key];if(o&&o.hasData()&&e[r.key]){i[n]=t.tileID;break}}}for(const n in t)i[n]||(this._coveredTiles[n]=!0,i[n]=t[n])}for(const s in i)this._tiles[s].clearFadeHold();const o=function(t,e){const r=[];for(const n in t)n in e||r.push(n);return r}(this._tiles,i);for(const s of o){const t=this._tiles[s];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+s)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const r={},n=t.reduce(((t,e)=>Math.min(t,e.overscaledZ)),1/0),i=t[0].overscaledZ,o=Math.max(i-Wp.maxOverzooming,this._source.minzoom),s=Math.max(i+Wp.maxUnderzooming,this._source.minzoom),a={};for(const l of t){const t=this._addTile(l);e[l.key]=l,t.hasData()||n<this._source.maxzoom&&(a[l.key]=l)}this._retainLoadedChildren(a,n,s,e);for(const l of t){let t=this._tiles[l.key];if(t.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const t=l.children(this._source.maxzoom)[0],r=this.getTile(t);if(r&&r.hasData()){e[t.key]=t;continue}}else{const t=l.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let n=t.wasRequested();for(let i=l.overscaledZ-1;i>=o;--i){const o=l.scaledTo(i);if(r[o.key])break;if(r[o.key]=!0,t=this.getTile(o),!t&&n&&(t=this._addTile(o)),t&&(e[o.key]=o,n=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let r,n=this._tiles[t].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}e.push(n.key);const t=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(t),r)break;n=t}for(const t of e)this._loadedParentTiles[t]=r}}_addTile(t){let e=this._tiles[t.key];if(e)return this._source.prepareTile&&this._source.prepareTile(e),e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const r=Boolean(e);if(!r){const r=this.map?this.map.painter:null;e=new Tp(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._source.prepareTile&&this._source.prepareTile(e)||this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))}return e?(e.uses++,this._tiles[t.key]=e,r||this._source.fire(new Vt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),r))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,e,r){const n=[],i=this.transform;if(!i)return n;const o="globe"===i.projection.name,s=Ca(i.center.lng);for(const a in this._tiles){const l=this._tiles[a];if(r&&l.clearQueryDebugViz(),l.holdingForFade())continue;let u;if(o){const t=l.tileID.canonical;if(0===t.z){const e=[Math.abs(p(s,...Qp(t,-1))-s),Math.abs(p(s,...Qp(t,1))-s)];u=[0,2*e.indexOf(Math.min(...e))-1]}else{const e=[Math.abs(p(s,...Qp(t,-1))-s),Math.abs(p(s,...Qp(t,0))-s),Math.abs(p(s,...Qp(t,1))-s)];u=[e.indexOf(Math.min(...e))-1]}}else u=[0];for(const r of u){const o=t.containsTile(l,i,e,r);o&&n.push(o)}}return n}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const r of e)r.projMatrix=this.transform.calculateProjMatrix(r.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(Hp(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=Z.now())return!0}return!1}setFeatureState(t,e,r){this._state.updateState(t=t||"_geojsonTileLayer",e,r)}removeFeatureState(t,e,r){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,r)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,r){const n=this._tiles[t];n&&n.setDependencies(e,r)}reloadTilesForDependencies(t,e){for(const r in this._tiles)this._tiles[r].hasDependency(t,e)&&this._reloadTile(+r,"reloading");this._cache.filter((r=>!r.hasDependency(t,e)))}_preloadTiles(t,e){const r=new Map,n=Array.isArray(t)?t:[t],i=this.map.painter.terrain,o=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const s of n){const t=s.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)r.set(e.key,e);this.usedForTerrain&&s.updateElevation(!1)}y(Array.from(r.values()),((t,e)=>{const r=new Tp(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(r,(t=>{"raster-dem"===this._source.type&&r.dem&&this._backfillDEM(r),e(t,r)}))}),e)}}function Zp(t,e){const r=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-r||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Hp(t){return"raster"===t||"image"===t||"video"===t}function Qp(t,e){const r=1<<t.z;return[t.x/r+e,(t.x+1)/r+e]}Wp.maxOverzooming=10,Wp.maxUnderzooming=3;class Xp{constructor(t,e,r){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=r}static create(t,e,r){const n=r||t.findDEMTileFor(e);if(!n||!n.dem)return;const i=n.dem,o=n.tileID,s=1<<e.canonical.z-o.canonical.z;return new Xp(n,n.tileSize/xa/s,[(e.canonical.x/s-o.canonical.x)*i.dim,(e.canonical.y/s-o.canonical.y)*i.dim])}tileCoordToPixel(t,e){const r=e*this._scale+this._offset[1],n=Math.floor(t*this._scale+this._offset[0]),o=Math.floor(r);return new i(n,o)}getElevationAt(t,e,r,n){const i=t*this._scale+this._offset[0],o=e*this._scale+this._offset[1],s=Math.floor(i),a=Math.floor(o),l=this._dem;return n=!!n,r?_r(_r(l.get(s,a,n),l.get(s,a+1,n),o-a),_r(l.get(s+1,a,n),l.get(s+1,a+1,n),o-a),i-s):l.get(s,a,n)}getElevationAtPixel(t,e,r){return this._dem.get(t,e,!!r)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*ka(1,t)*this._dem.stride}}class Yp{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ki(xa,16,0),this.featureIndexArray=new Os,this.promoteId=e}insert(t,e,r,n,i,o=0){const s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i,o);const a=this.grid;for(let l=0;l<e.length;l++){const t=e[l],r=[1/0,1/0,-1/0,-1/0];for(let e=0;e<t.length;e++){const n=t[e];r[0]=Math.min(r[0],n.x),r[1]=Math.min(r[1],n.y),r[2]=Math.max(r[2],n.x),r[3]=Math.max(r[3],n.y)}r[0]<xa&&r[1]<xa&&r[2]>=0&&r[3]>=0&&a.insert(s,r[0],r[1],r[2],r[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new mc.VectorTile(new _h(this.rawTileData)).layers,this.sourceLayerCoder=new pp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,e,r,n){this.loadVTLayers();const i=t.params||{},o=Jn(i.filter),s=t.tileResult,a=t.transform,l=s.bufferedTilespaceBounds,u=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((t,e,r,n)=>ol(s.bufferedTilespaceGeometry,t,e,r,n)));u.sort($p);let c=null;a.elevation&&u.length>0&&(c=Xp.create(a.elevation,this.tileID));const h={};let f;for(let d=0;d<u.length;d++){const a=u[d];if(a===f)continue;f=a;const l=this.featureIndexArray.get(a);let p=null;this.loadMatchingFeature(h,l,o,i.layers,i.availableImages,e,r,n,((e,r,n,i=0)=>(p||(p=qa(e,this.tileID.canonical,t.tileTransform)),r.queryIntersectsFeature(s,e,n,p,this.z,t.transform,t.pixelPosMatrix,c,i))))}return h}loadMatchingFeature(t,e,r,n,i,o,s,a,l){const{featureIndex:u,bucketIndex:c,sourceLayerIndex:h,layoutVertexArrayOffset:f}=e,d=this.bucketLayerIDs[c];if(n&&!function(t,e){for(let r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1}(n,d))return;const p=this.sourceLayerCoder.decode(h),m=this.vtLayers[p].feature(u);if(r.needGeometry){const t=Ka(m,!0);if(!r.filter(new Po(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!r.filter(new Po(this.tileID.overscaledZ),m))return;const g=this.getId(m,p);for(let y=0;y<d.length;y++){const e=d[y];if(n&&n.indexOf(e)<0)continue;const r=o[e];if(!r)continue;let c={};void 0!==g&&a&&(c=a.getState(r.sourceLayer||"_geojsonTileLayer",g));const h=v({},s[e]);h.paint=Jp(h.paint,r.paint,m,c,i),h.layout=Jp(h.layout,r.layout,m,c,i);const p=!l||l(m,r,c,f);if(!p)continue;const _=new gp(m,this.z,this.x,this.y,g);_.layer=h;let b=t[e];void 0===b&&(b=t[e]=[]),b.push({featureIndex:u,feature:_,intersectionZ:p})}}lookupSymbolFeatures(t,e,r,n,i,o,s,a){const l={};this.loadVTLayers();const u=Jn(i);for(const c of t)this.loadMatchingFeature(l,{bucketIndex:r,sourceLayerIndex:n,featureIndex:c,layoutVertexArrayOffset:0},u,o,s,a,e);return l}loadFeature(t){const{featureIndex:e,sourceLayerIndex:r}=t;this.loadVTLayers();const n=this.sourceLayerCoder.decode(r),i=this.vtFeatures[n];if(i[e])return i[e];const o=this.vtLayers[n].feature(e);return i[e]=o,o}hasLayer(t){for(const e of this.bucketLayerIDs)for(const r of e)if(t===r)return!0;return!1}getId(t,e){let r=t.id;return this.promoteId&&(r=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof r&&(r=Number(r))),r}}function Jp(t,e,r,n,i){return A(t,((t,o)=>{const s=e instanceof Fo?e.get(o):null;return s&&s.evaluate?s.evaluate(r,n,i):s}))}function $p(t,e){return e-t}Pi(Yp,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class tm{constructor(t){const e={},r=[];for(const s in t){const n=t[s],i=e[s]={};for(const t in n.glyphs){const e=n.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const o=e.metrics.localGlyph?2:1,s={x:0,y:0,w:e.bitmap.width+2*o,h:e.bitmap.height+2*o};r.push(s),i[t]=s}}const{w:n,h:i}=Fh(r),o=new hu({width:n||1,height:i||1});for(const s in t){const r=t[s];for(const t in r.glyphs){const n=r.glyphs[+t];if(!n||0===n.bitmap.width||0===n.bitmap.height)continue;const i=e[s][t],a=n.metrics.localGlyph?2:1;hu.copy(n.bitmap,o,{x:0,y:0},{x:i.x+a,y:i.y+a},n.bitmap)}}this.image=o,this.positions=e}}Pi(tm,"GlyphAtlas");class em{constructor(t){this.tileID=new Oc(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Ed(t.tileID.canonical,t.projection),this.projection=t.projection}parse(t,e,r,n,i){this.status="parsing",this.data=t,this.collisionBoxArray=new Cs;const o=new pp(Object.keys(t.layers).sort()),s=new Yp(this.tileID,this.promoteId);s.bucketLayerIDs=[];const a={},l=new hp(256,256),u={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:r},c=e.familiesBySource[this.source];for(const _ in c){const e=t.layers[_];if(!e)continue;let n=!1,i=!1;for(const t of c[_])"symbol"===t[0].type?n=!0:i=!0;if(!0===this.isSymbolTile&&!n)continue;if(!1===this.isSymbolTile&&!i)continue;1===e.version&&R(`Vector tile source "${this.source}" layer "${_}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const l=o.encode(_),h=[];for(let t=0;t<e.length;t++){const r=e.feature(t),n=s.getId(r,_);h.push({feature:r,id:n,index:t,sourceLayerIndex:l})}for(const t of c[_]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(rm(t,this.zoom,r),(a[e.id]=e.createBucket({index:s.bucketLayerIDs.length,layers:t,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:r})).populate(h,u,this.tileID.canonical,this.tileTransform),s.bucketLayerIDs.push(t.map((t=>t.id))))}}let h,f,d,p;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=A(u.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(g).length?n.send("getGlyphs",{uid:this.uid,stacks:g},((t,e)=>{h||(h=t,f=e,b.call(this))}),void 0,!1,m):f={};const y=Object.keys(u.iconDependencies);y.length?n.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{h||(h=t,d=e,b.call(this))}),void 0,!1,m):d={};const v=Object.keys(u.patternDependencies);function b(){if(h)return i(h);if(f&&d&&p){const t=new tm(f),e=new Gh(d,p);for(const n in a){const i=a[n];i instanceof $d?(rm(i.layers,this.zoom,r),Lf(i,f,t.positions,d,e.iconPositions,this.showCollisionBoxes,r,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof Hc||i instanceof tc||i instanceof xc)&&(rm(i.layers,this.zoom,r),i.addFeatures(u,this.tileID.canonical,e.patternPositions,r,this.tileTransform))}this.status="done",i(null,{buckets:_(a).filter((t=>!t.isEmpty())),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:l,imageAtlas:e,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?t.positions:null})}}v.length?n.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{h||(h=t,p=e,b.call(this))}),void 0,!1,m):p={},b.call(this)}}function rm(t,e,r){const n=new Po(e);for(const i of t)i.recalculate(n,r)}class nm{constructor(t){this.entries={},this.scheduler=t}request(t,e,r,n){const i=this.entries[t]=this.entries[t]||{callbacks:[]};if(i.result){const[t,r]=i.result;return this.scheduler?this.scheduler.add((()=>{n(t,r)}),e):n(t,r),()=>{}}return i.callbacks.push(n),i.cancel||(i.cancel=r(((r,n)=>{i.result=[r,n];for(const t of i.callbacks)this.scheduler?this.scheduler.add((()=>{t(r,n)}),e):t(r,n);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((t=>t!==n)),i.callbacks.length||(i.cancel(),delete this.entries[t]))}}}function im(t,e,r){const n=JSON.stringify(t.request);return t.data&&(this.deduped.entries[n]={result:[null,t.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(e=>{const n=Bt(t.request,((t,n,i,o)=>{t?e(t):n&&e(null,{vectorTile:r?void 0:new mc.VectorTile(new _h(n)),rawData:n,cacheControl:i,expires:o})}));return()=>{n.cancel(),e()}}),e)}t.ARRAY_TYPE=pl,t.AUTH_ERR_MSG=nt,t.Aabb=eu,t.Actor=class{constructor(t,r,n){this.target=t,this.parent=r,this.mapId=n,this.callbacks={},this.cancelCallbacks={},M(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=D()?t:e,this.scheduler=new dp}send(t,e,r,n,i=!1,o){const s=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=o,this.callbacks[s]=r);const a=N(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:t,hasCallback:!!r,targetMapId:n,mustQueue:i,sourceMapId:this.mapId,data:Oi(e,a)},a),{cancel:()=>{r&&delete this.callbacks[s],this.target.postMessage({id:s,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(t){const e=t.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[r];delete this.cancelCallbacks[r],t&&t.cancel()}else if(e.mustQueue||D()){const t=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((()=>this.processTask(r,e)),t&&t.metadata||{type:"message"})}else this.processTask(r,e)}processTask(t,e){if("<response>"===e.type){const r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(Ni(e.error)):r(null,Ni(e.data)))}else{const r=N(this.globalScope)?void 0:[],n=e.hasCallback?(e,n)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Oi(e):null,data:Oi(n,r)},r)}:t=>{},i=Ni(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,i,n);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],i.source)[t[1]](i,n)}else n(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=Dc,t.Color=_e,t.ColorMode=Vp,t.CullFaceMode=Kp,t.DEMData=Np,t.DataConstantProperty=Vo,t.DedupedRequest=nm,t.DepthMode=Up,t.EXTENT=xa,t.Elevation=class{isDataAvailableAtPoint(t){const e=this._source();if(!e||t.y<0||t.y>1)return!1;const r=e.getSource().maxzoom,n=1<<r,i=Math.floor(t.x),o=Math.floor((t.x-i)*n),s=Math.floor(t.y*n),a=this.findDEMTileFor(new Oc(r,i,r,o,s));return!(!a||!a.dem)}getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,r=!0){null==e&&(e=null);const n=this._source();if(!n)return e;if(t.y<0||t.y>1)return e;const i=n.getSource().maxzoom,o=1<<i,s=Math.floor(t.x),a=t.x-s,l=new Oc(i,s,i,Math.floor(a*o),Math.floor(t.y*o)),u=this.findDEMTileFor(l);if(!u||!u.dem)return e;const c=u.dem,h=1<<u.tileID.canonical.z,f=(a*h-u.tileID.canonical.x)*c.dim,d=(t.y*h-u.tileID.canonical.y)*c.dim,p=Math.floor(f),m=Math.floor(d);return(r?this.exaggeration():1)*_r(_r(c.get(p,m),c.get(p,m+1),d-m),_r(c.get(p+1,m),c.get(p+1,m+1),d-m),f-p)}getAtTileOffset(t,e,r){const n=1<<t.canonical.z;return this.getAtPointOrZero(new Oa(t.wrap+(t.canonical.x+e/xa)/n,(t.canonical.y+r/xa)/n))}getAtTileOffsetFunc(t,e,r,n){return i=>{const o=this.getAtTileOffset(t,i.x,i.y),s=n.upVector(t.canonical,i.x,i.y);return Ll(s,s,o*n.upVectorScale(t.canonical,e,r).metersToTile),s}}getForTilePoints(t,e,r,n){const i=Xp.create(this,t,n);return!!i&&(e.forEach((t=>{t[2]=this.exaggeration()*i.getElevationAt(t[0],t[1],r)})),!0)}getMinMaxForTile(t){const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const r=e.dem.tree,n=e.tileID,i=1<<t.canonical.z-n.canonical.z;let o=t.canonical.x/i-n.canonical.x,s=t.canonical.y/i-n.canonical.y,a=0;for(let l=0;l<t.canonical.z-n.canonical.z&&!r.leaves[a];l++){o*=2,s*=2;const t=2*Math.floor(s)+Math.floor(o);a=r.childOffsets[a]+t,o%=1,s%=1}return{min:this.exaggeration()*r.minimums[a],max:this.exaggeration()*r.maximums[a]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,r){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Gt,t.EvaluationParameters=Po,t.Event=Vt,t.Evented=qt,t.FillExtrusionBucket=xc,t.Frustum=tu,t.FrustumCorners=$l,t.GLOBE_METERS_TO_ECEF=Qf,t.GLOBE_RADIUS=Hf,t.GLOBE_SCALE_MATCH_LATITUDE=45,t.GLOBE_ZOOM_THRESHOLD_MAX=6,t.GLOBE_ZOOM_THRESHOLD_MIN=5,t.GlobeSharedBuffers=class{constructor(t){this._createGrid(t),this._createPoles(t)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const t of this._wireframeSegments)t.destroy()}}_createGrid(t){const e=new ts,r=new gs,n=65;for(let i=0;i<n;i++)for(let t=0;t<n;t++)e.emplaceBack(t,i);this._gridSegments=[];for(let i=0,o=0;i<Xf.length;i++){const t=Xf[i];for(let i=0;i<t;i++)for(let t=0;t<64;t++){const e=i*n+t;r.emplaceBack(e+1,e,e+n),r.emplaceBack(e+n,e+n+1,e+1)}const e=64*t*2;this._gridSegments.push(wa.simpleSegment(0,o,(t+1)*n,e)),o+=e}this._gridBuffer=t.createVertexBuffer(e,Zf.members),this._gridIndexBuffer=t.createIndexBuffer(r,!0)}_createPoles(t){const e=new gs;for(let i=0;i<=64;i++)e.emplaceBack(0,i+1,i+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const r=new bs,n=new bs;this._poleSegments=[];for(let i=0,o=0;i<5;i++){const t=360/(1<<i);r.emplaceBack(0,-Hf,0,.5,0),n.emplaceBack(0,-Hf,0,.5,1);for(let e=0;e<=64;e++){const i=e/64,o=_r(0,t,i),[s,a,l]=ud(bd,wd,o,Hf);r.emplaceBack(s,a,l,i,0),n.emplaceBack(s,a,l,i,1)}this._poleSegments.push(wa.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(r,Kf,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(n,Kf,!1)}getGridBuffers(t){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[t]]}getPoleBuffers(t){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}getWirefameBuffers(t,e){if(!this._wireframeSegments){const e=new xs,r=64,n=r+1;this._wireframeSegments=[];for(let t=0,i=0;t<Xf.length;t++){const o=Xf[t];for(let t=0;t<o;t++)for(let i=0;i<r;i++){const r=t*n+i;e.emplaceBack(r,r+1),e.emplaceBack(r,r+n),e.emplaceBack(r,r+n+1)}const s=o*r*3;this._wireframeSegments.push(wa.simpleSegment(0,i,(o+1)*n,s)),i+=s}this._wireframeIndexBuffer=t.createIndexBuffer(e)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},t.GlyphManager=bf,t.ImagePosition=Vh,t.LineAtlas=hp,t.LngLat=Ma,t.LngLatBounds=Ea,t.LocalGlyphMode=vf,t.MAX_MERCATOR_LATITUDE=Da,t.MercatorCoordinate=Oa,t.ONE_EM=sh,t.OverscaledTileID=Oc,t.Properties=Zo,t.RGBAImage=fu,t.Ray=Jl,t.RequestManager=class{constructor(t,e,r){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",rt,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!it(t))return t;const r=at(t);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!it(t))return t;const r=at(t);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeSourceURL(t,e,r,n){if(!it(t))return t;const i=at(t);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),r&&i.params.push(`language=${r}`),n&&i.params.push(`worldview=${n}`),this._makeAPIURL(i,this._customAccessToken||e)}normalizeSpriteURL(t,e,r,n){const i=at(t);return it(t)?(i.path=`/styles/v1${i.path}/sprite${e}${r}`,this._makeAPIURL(i,this._customAccessToken||n)):(i.path+=`${e}${r}`,lt(i))}normalizeTileURL(t,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!it(t))return t;const n=at(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||r&&"raster"!==n.authority&&512===r?"@2x":""}${X.supported?".webp":"$1"}`),"raster"===n.authority?n.path=`/${Q.RASTER_URL_PREFIX}${n.path}`:(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path=`/${Q.TILE_URL_VERSION}${n.path}`);const i=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(n.params)||Q.ACCESS_TOKEN;return Q.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&n.params.push(`sku=${this._skuToken}`),this._makeAPIURL(n,i)}canonicalizeTileURL(t,e){const r=at(t);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return t;let n="mapbox://";r.path.match(/^\/raster\/v1\//)?n+=`raster/${r.path.replace(`/${Q.RASTER_URL_PREFIX}/`,"")}`:n+=`tiles/${r.path.replace(`/${Q.TILE_URL_VERSION}/`,"")}`;let i=r.params;return e&&(i=i.filter((t=>!t.match(/^access_token=/)))),i.length&&(n+=`?${i.join("&")}`),n}canonicalizeTileset(t,e){const r=!!e&&it(e),n=[];for(const i of t.tiles||[])ot(i)?n.push(this.canonicalizeTileURL(i,r)):n.push(i);return n}_makeAPIURL(t,e){const r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=at(Q.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==n.path&&(t.path=`${n.path}${t.path}`),!Q.REQUIRE_ACCESS_TOKEN)return lt(t);if(e=e||Q.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push(`access_token=${e||""}`),lt(t)}},t.ResourceType=Ct,t.SegmentVector=wa,t.SourceCache=Wp,t.StencilMode=Fp,t.StructArrayLayout1ui2=Es,t.StructArrayLayout2f1f2i16=ds,t.StructArrayLayout2i4=ts,t.StructArrayLayout2ui4=xs,t.StructArrayLayout3f12=ms,t.StructArrayLayout3ui6=gs,t.StructArrayLayout4i8=rs,t.StructArrayLayout5f20=bs,t.Texture=cp,t.Tile=Tp,t.Transitionable=Oo,t.Uniform1f=Js,t.Uniform1i=class extends Ys{constructor(t){super(t),this.current=0}set(t,e,r){this.fetchUniformLocation(t,e)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},t.Uniform2f=class extends Ys{constructor(t){super(t),this.current=[0,0]}set(t,e,r){this.fetchUniformLocation(t,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}},t.Uniform3f=class extends Ys{constructor(t){super(t),this.current=[0,0,0]}set(t,e,r){this.fetchUniformLocation(t,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}},t.Uniform4f=$s,t.UniformColor=ta,t.UniformMatrix2f=class extends Ys{constructor(t){super(t),this.current=na}set(t,e,r){if(this.fetchUniformLocation(t,e))for(let n=0;n<4;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}},t.UniformMatrix3f=class extends Ys{constructor(t){super(t),this.current=ra}set(t,e,r){if(this.fetchUniformLocation(t,e))for(let n=0;n<9;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}},t.UniformMatrix4f=class extends Ys{constructor(t){super(t),this.current=ea}set(t,e,r){if(this.fetchUniformLocation(t,e)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let t=1;t<16;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},t.UnwrappedTileID=Lc,t.ValidationError=Gn,t.VectorTileWorkerSource=class extends qt{constructor(t,e,r,n,i){super(),this.actor=t,this.layerIndex=e,this.availableImages=r,this.loadVectorData=i||im,this.loading={},this.loaded={},this.deduped=new nm(t.scheduler),this.isSpriteLoaded=n,this.scheduler=t.scheduler}loadTile(t,e){const r=t.uid,n=t&&t.request,i=n&&n.collectResourceTiming,o=this.loading[r]=new em(t);o.abort=this.loadVectorData(t,((s,a)=>{const l=!this.loading[r];if(delete this.loading[r],l||s||!a)return o.status="done",l||(this.loaded[r]=o),e(s);const u=a.rawData,c={};a.expires&&(c.expires=a.expires),a.cacheControl&&(c.cacheControl=a.cacheControl),o.vectorTile=a.vectorTile||new mc.VectorTile(new _h(u));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,r)=>{if(t||!r)return e(t);const o={};if(i){const t=F(n);t.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(t)))}e(null,v({rawTileData:u.slice(0)},r,c,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):h()})),this.loaded=this.loaded||{},this.loaded[r]=o}))}reloadTile(t,e){const r=this.loaded,n=t.uid,i=this;if(r&&r[n]){const o=r[n];o.showCollisionBoxes=t.showCollisionBoxes,o.enableTerrain=!!t.enableTerrain,o.projection=t.projection,o.tileTransform=Ed(t.tileID.canonical,t.projection);const s=(t,r)=>{const n=o.reloadCallback;n&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,n)),e(t,r)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}abortTile(t,e){const r=t.uid,n=this.loading[r];n&&(n.abort&&n.abort(),delete this.loading[r]),e()}removeTile(t,e){const r=this.loaded,n=t.uid;r&&r[n]&&delete r[n],e()}},t.WritingMode=qh,t.ZoomHistory=zi,t.add=kl,t.addDynamicAttributes=Qd,t.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t[0]=s*c-a*u,t[1]=i*u-n*c,t[2]=n*a-i*s,t[3]=a*l-o*c,t[4]=r*c-i*l,t[5]=i*o-r*a,t[6]=o*u-s*l,t[7]=n*l-r*u,t[8]=r*s-n*o,t},t.asyncAll=y,t.bezier=f,t.bindAll=M,t.boundsAttributes=Sp,t.bufferConvexPolygon=function(t,e){const r=[];for(let n=0;n<t.length;n++){const i=g(n-1,-1,t.length-1),o=g(n+1,-1,t.length-1),s=t[n],a=t[o],l=t[i].sub(s).unit(),u=a.sub(s).unit(),c=u.angleWithSep(l.x,l.y),h=l.add(u).unit().mult(-1*e/Math.sin(c/2));r.push(s.add(h))}return r},t.cacheEntryPossiblyAdded=function(t){At++,At>bt&&(t.getActor().send("enforceCacheSizeLimit",vt),At=0)},t.calculateGlobeLabelMatrix=function(t,e){const{x:r,y:n}=t.point,i=gd(r,n,t.worldSize/t._pixelsPerMercatorPixel,0,0);return _l(i,i,md(nd(e)))},t.calculateGlobeMatrix=function(t){const{x:e,y:r}=t.point,{lng:n,lat:i}=t._center;return gd(e,r,t.worldSize,n,i)},t.calculateGlobeMercatorMatrix=function(t){const e=t.pixelsPerMeter,r=e/ka(1,t.center.lat),n=gl(new Float64Array(16));return vl(n,n,[t.point.x,t.point.y,0]),bl(n,n,[r,r,e]),Float32Array.from(n)},t.circumferenceAtLatitude=Aa,t.clamp=p,t.clearTileCache=function(t){const e=Et(),r=[];for(const n in wt)e&&r.push(e.delete(n)),delete wt[n];t&&Promise.all(r).catch(t).then((()=>t()))},t.clipLine=mf,t.clone=function(t){var e=new pl(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=I,t.collisionCircleLayout=oh,t.config=Q,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new pl(16);return pl!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=ml,t.createExpression=Nn,t.createLayout=Jo,t.createStyleLayer=function(t){return"custom"===t.type?new sp(t):new up[t.type](t)},t.cross=Ul,t.degToRad=l,t.distance=function(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},t.div=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},t.dot=zl,t.ease=d,t.easeCubicInOut=h,t.emitValidationErrors=Ii,t.endsWith=T,t.enforceCacheSizeLimit=function(t){for(const e in wt)St(e),wt[e].then((e=>{e.keys().then((r=>{for(let n=0;n<r.length-t;n++)e.delete(r[n])}))}))},t.evaluateSizeForFeature=uh,t.evaluateSizeForZoom=ch,t.evaluateVariableOffset=Df,t.evented=Io,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=Z,t.exported$1=X,t.extend=v,t.extend$1=Wt,t.fillExtrusionHeightLift=Ic,t.filterObject=C,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=r+r,a=n+n,l=i+i,u=r*s,c=n*s,h=n*a,f=i*s,d=i*a,p=i*l,m=o*s,g=o*a,y=o*l;return t[0]=1-h-p,t[1]=c+y,t[2]=f-g,t[3]=0,t[4]=c-y,t[5]=1-u-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=El,t.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return c[e]},t.getAABBPointSquareDist=function(t,e,r){let n=0;for(let i=0;i<2;++i){const o=r?r[i]:0;t[i]>o&&(n+=(t[i]-o)*(t[i]-o)),e[i]<o&&(n+=(o-e[i])*(o-e[i]))}return n},t.getAnchorAlignment=rf,t.getAnchorJustification=Of,t.getBounds=function(t){let e=1/0,r=1/0,n=-1/0,o=-1/0;for(const i of t)e=Math.min(e,i.x),r=Math.min(r,i.y),n=Math.max(n,i.x),o=Math.max(o,i.y);return{min:new i(e,r),max:new i(n,o)}},t.getColumn=U,t.getGridMatrix=function(t,e,r){const n=e.getNorth(),i=e.getSouth(),o=e.getWest(),s=.015625;return[0,(e.getEast()-o)*s,1<<t.z,(i-n)/Xf[r],0,t.y,n,o,s]},t.getImage=Ut,t.getJSON=function(t,e){return Rt(v(t,{type:"json"}),e)},t.getLatitudinalLod=function(t){const e=80.051129;t=p(t,-80.051129,e)/e*90;const r=Math.pow(Math.abs(Math.sin(l(t))),3);return Math.round(r*(Xf.length-1))},t.getMapSessionAPI=gt,t.getPerformanceMeasurement=F,t.getProjection=qd,t.getRTLTextPluginStatus=ko,t.getReferrer=kt,t.getTilePoint=function(t,{x:e,y:r},n=0){return new i(((e-n)*t.scale-t.x)*xa,(r*t.scale-t.y)*xa)},t.getTileVec3=function(t,e,r=0){return Il(((e.x-r)*t.scale-t.x)*xa,(e.y*t.scale-t.y)*xa,Pa(e.z,e.y))},t.getVideo=function(t,r){const n=e.document.createElement("video");n.muted=!0,n.onloadstart=function(){r(null,n)};for(let i=0;i<t.length;i++){const r=e.document.createElement("source");Lt(t[i])||(n.crossOrigin="Anonymous"),r.src=t[i],n.appendChild(r)}return{cancel:()=>{}}},t.globeCenterToScreenPoint=function(t){const e=[0,0,0],r=gl(new Float64Array(16));return _l(r,t.pixelMatrix,t.globeMatrix),jl(e,e,r),new i(e[0],e[1])},t.globeDenormalizeECEF=md,t.globeECEFOrigin=function(t,e){const r=[0,0,0];return jl(r,r,pd(nd(e.canonical))),jl(r,r,t),r},t.globeNormalizeECEF=pd,t.globePixelsToTileUnits=function(t,e){return xa/(512*Math.pow(2,t))*fd(nd(e))},t.globePoleMatrixForTile=function(t,e,r){const n=gl(new Float64Array(16)),i=(e/(1<<t)-.5)*Math.PI*2;return xl(n,r.globeMatrix,i),Float32Array.from(n)},t.globeTileBounds=nd,t.globeTiltAtLngLat=_d,t.globeToMercatorTransition=yd,t.globeUseCustomAntiAliasing=function(t,e,r){const n=yd(r.zoom),i=t.style.map._antialias,o=!!e.extStandardDerivatives,s=e.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return 0===n&&!i&&!s&&o},t.identity=gl,t.identity$1=Ql,t.invert=yl,t.isFullscreen=function(){return!!e.document.fullscreenElement||!!e.document.webkitFullscreenElement},t.isLngLatBehindGlobe=function(t,e){return _d(t,e)>Math.PI/2*1.01},t.isMapAuthenticated=function(t){return yt.has(t)},t.isMapboxURL=it,t.isSafariWithAntialiasingBug=function(t){const e=t.navigator?t.navigator.userAgent:null;return!!N(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},t.latFromMercatorY=Ba,t.len=Kl,t.length=Cl,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.loadVectorTile=im,t.makeRequest=Rt,t.mapValue=function(t,e,r,n,i){return p((t-e)/(r-e)*(i-n)+n,n,i)},t.mercatorScale=La,t.mercatorXfromLng=Ca,t.mercatorYfromLat=Ia,t.mercatorZfromAltitude=ka,t.mul=Ml,t.mul$1=ql,t.multiply=_l,t.multiply$1=function(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=r[0],d=r[1],p=r[2],m=r[3],g=r[4],y=r[5],_=r[6],v=r[7],b=r[8];return t[0]=f*n+d*s+p*u,t[1]=f*i+d*a+p*c,t[2]=f*o+d*l+p*h,t[3]=m*n+g*s+y*u,t[4]=m*i+g*a+y*c,t[5]=m*o+g*l+y*h,t[6]=_*n+v*s+b*u,t[7]=_*i+v*a+b*c,t[8]=_*o+v*l+b*h,t},t.multiply$2=Bl,t.nextPowerOfTwo=E,t.normalize=Nl,t.normalize$1=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=r*r+n*n+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=o*s,t},t.number=_r,t.ortho=function(t,e,r,n,i,o,s){var a=1/(e-r),l=1/(n-i),u=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*a,t[13]=(i+n)*l,t[14]=(s+o)*u,t[15]=1,t},t.pbf=_h,t.perspective=function(t,e,r,n,i){var o,s=1/Math.tan(e/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+n)*(o=1/(n-i)),t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){const r={};for(let n=0;n<e.length;n++){const i=e[n];i in t&&(r[i]=t[i])}return r},t.plugin=Bo,t.pointGeometry=i,t.polygonContainsPoint=il,t.polygonIntersectsBox=ol,t.polygonIntersectsPolygon=Qa,t.polygonizeBounds=function(t,e,r=0,n=!0){const o=new i(r,r),s=t.sub(o),a=e.add(o),l=[s,new i(a.x,s.y),a,new i(s.x,a.y)];return n&&l.push(s.clone()),l},t.posAttributes=Zf,t.postMapLoadEvent=pt,t.postTurnstileEvent=ft,t.potpack=Fh,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=u,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:Mo,pluginURL:To}),Io.on("pluginStateChange",t),t},t.removeAuthState=function(t){yt.delete(t)},t.renderColorRamp=pu,t.resample=za,t.rotateX=wl,t.rotateX$1=Xl,t.rotateY=xl,t.rotateY$1=Yl,t.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],a=e[2],l=e[3],u=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*n,t[1]=s*i+c*n,t[2]=a*i+h*n,t[3]=l*i+f*n,t[4]=u*i-o*n,t[5]=c*i-s*n,t[6]=h*i-a*n,t[7]=f*i-l*n,t},t.rotateZ$1=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*a,t[1]=i*l-n*a,t[2]=o*l+s*a,t[3]=s*l-o*a,t},t.scale=bl,t.scale$1=Wl,t.scale$2=Ll,t.scaleAndAdd=Ol,t.setCacheLimits=function(t,e){vt=t,bt=e},t.setColumn=function(t,e,r){t[4*e+0]=r[0],t[4*e+1]=r[1],t[4*e+2]=r[2],t[4*e+3]=r[3]},t.setRTLTextPlugin=function(t,e,r=!1){if(Mo===wo||Mo===xo||Mo===Eo)throw new Error("setRTLTextPlugin cannot be called multiple times.");To=Z.resolveURL(t),Mo=wo,So=e,Co(),r||Ro()},t.smoothstep=m,t.spec=Kt,t.storeAuthState=function(t,e){e?yt.add(t):yt.delete(t)},t.sub=Gl,t.subtract=Rl,t.symbolSize=hh,t.tileAABB=function(t,e,r,n,i,o,s,a,l){if("globe"===l.name)return sd(t,e,new Dc(r,n,i));const u=Ed({z:r,x:n,y:i},l);return new eu([(o+u.x/u.scale)*e,e*(u.y/u.scale),s],[(o+u.x2/u.scale)*e,e*(u.y2/u.scale),a])},t.tileCornersToBounds=ad,t.tileTransform=Ed,t.transformMat3=function(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t},t.transformMat4=jl,t.transformMat4$1=Zl,t.transformQuat=Fl,t.transitionTileAABBinECEF=id,t.translate=vl,t.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},t.triggerPluginCompletionEvent=Ao,t.uniqueId=w,t.updateGlobeVertexNormal=function(t,e,r,n,i){const o=5*e+2;t.float32[o+0]=r,t.float32[o+1]=n,t.float32[o+2]=i},t.validateCustomStyleLayer=function(t){const e=[],r=t.id;return void 0===r&&e.push({message:`layers.${r}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${r}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateFilter=t=>Ci(ci(t)),t.validateFog=t=>Ci(wi(t)),t.validateLayer=t=>Ci(mi(t)),t.validateLight=t=>Ci(vi(t)),t.validateSource=t=>Ci(_i(t)),t.validateStyle=Mi,t.validateTerrain=t=>Ci(bi(t)),t.values=_,t.vectorTile=mc,t.version=V,t.warnOnce=R,t.window=e,t.wrap=g})),n(["./shared"],(function(t){function e(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t||null==t)return JSON.stringify(t);if(Array.isArray(t)){let r="[";for(const n of t)r+=`${e(n)},`;return`${r}]`}let r="{";for(const n of Object.keys(t).sort())r+=`${n}:${e(t[n])},`;return`${r}}`}function r(r){let n="";for(const i of t.refProperties)n+=`/${e(r[i])}`;return n}class n{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,n){for(const r of e)this._layerConfigs[r.id]=r,(this._layers[r.id]=t.createStyleLayer(r)).compileFilter(),this.keyCache[r.id]&&delete this.keyCache[r.id];for(const t of n)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const i=function(t,e){const n={};for(let o=0;o<t.length;o++){const i=e&&e[t[o].id]||r(t[o]);e&&(e[t[o].id]=i);let s=n[i];s||(s=n[i]=[]),s.push(t[o])}const i=[];for(const r in n)i.push(n[r]);return i}(t.values(this._layerConfigs),this.keyCache);for(const t of i){const e=t.map((t=>this._layers[t.id])),r=e[0];if("none"===r.visibility)continue;const n=r.source||"";let i=this.familiesBySource[n];i||(i=this.familiesBySource[n]={});const o=r.sourceLayer||"_geojsonTileLayer";let s=i[o];s||(s=i[o]=[]),s.push(e)}}}class i{loadTile(e,r){const{uid:n,encoding:i,rawImageData:o,padding:s,buildQuadTree:a}=e,l=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap?this.getImageData(o,s):o;r(null,new t.DEMData(n,l,i,s<1,a))}getImageData(t,e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const r=this.offscreenCanvasContext.getImageData(-e,-e,t.width+2*e,t.height+2*e);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),r}}var o=function t(e,r){var n,i=e&&e.type;if("FeatureCollection"===i)for(n=0;n<e.features.length;n++)t(e.features[n],r);else if("GeometryCollection"===i)for(n=0;n<e.geometries.length;n++)t(e.geometries[n],r);else if("Feature"===i)t(e.geometry,r);else if("Polygon"===i)s(e.coordinates,r);else if("MultiPolygon"===i)for(n=0;n<e.coordinates.length;n++)s(e.coordinates[n],r);return e};function s(t,e){if(0!==t.length){a(t[0],e);for(var r=1;r<t.length;r++)a(t[r],!e)}}function a(t,e){for(var r=0,n=0,i=0,o=t.length,s=o-1;i<o;s=i++){var a=(t[i][0]-t[s][0])*(t[s][1]+t[i][1]),l=r+a;n+=Math.abs(r)>=Math.abs(a)?r-l+a:a-l+r,r=l}r+n>=0!=!!e&&t.reverse()}const l=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class u{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const r of this._feature.geometry)e.push([new t.pointGeometry(r[0],r[1])]);return e}{const e=[];for(const r of this._feature.geometry){const n=[];for(const e of r)n.push(new t.pointGeometry(e[0],e[1]));e.push(n)}return e}}toGeoJSON(t,e,r){return l.call(this,t,e,r)}}class c{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new u(this._features[t])}}var h=t.vectorTile.VectorTileFeature,f=d;function d(t,e){this.options=e||{},this.features=t,this.length=t.length}function p(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}d.prototype.feature=function(t){return new p(this.features[t],this.options.extent)},p.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var r=0;r<e.length;r++){for(var n=e[r],i=[],o=0;o<n.length;o++)i.push(new t.pointGeometry(n[o][0],n[o][1]));this.geometry.push(i)}return this.geometry},p.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,r=-1/0,n=1/0,i=-1/0,o=0;o<t.length;o++)for(var s=t[o],a=0;a<s.length;a++){var l=s[a];e=Math.min(e,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.y)}return[e,n,r,i]},p.prototype.toGeoJSON=h.prototype.toGeoJSON;var m=y,g=f;function y(e){var r=new t.pbf;return function(t,e){for(var r in t.layers)e.writeMessage(3,_,t.layers[r])}(e,r),r.finish()}function _(t,e){var r;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<t.length;r++)n.feature=t.feature(r),e.writeMessage(2,v,n);var i=n.keys;for(r=0;r<i.length;r++)e.writeStringField(3,i[r]);var o=n.values;for(r=0;r<o.length;r++)e.writeMessage(4,S,o[r])}function v(t,e){var r=t.feature;void 0!==r.id&&e.writeVarintField(1,r.id),e.writeMessage(2,b,t),e.writeVarintField(3,r.type),e.writeMessage(4,E,r)}function b(t,e){var r=t.feature,n=t.keys,i=t.values,o=t.keycache,s=t.valuecache;for(var a in r.properties){var l=r.properties[a],u=o[a];if(null!==l){void 0===u&&(n.push(a),o[a]=u=n.length-1),e.writeVarint(u);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,f=s[h];void 0===f&&(i.push(l),s[h]=f=i.length-1),e.writeVarint(f)}}}function w(t,e){return(e<<3)+(7&t)}function x(t){return t<<1^t>>31}function E(t,e){for(var r=t.loadGeometry(),n=t.type,i=0,o=0,s=r.length,a=0;a<s;a++){var l=r[a],u=1;1===n&&(u=l.length),e.writeVarint(w(1,u));for(var c=3===n?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==n&&e.writeVarint(w(2,c-1));var f=l[h].x-i,d=l[h].y-o;e.writeVarint(x(f)),e.writeVarint(x(d)),i+=f,o+=d}3===n&&e.writeVarint(w(7,1))}}function S(t,e){var r=typeof t;"string"===r?e.writeStringField(1,t):"boolean"===r?e.writeBooleanField(7,t):"number"===r&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function M(t,e,r,n,i,o){if(i-n<=r)return;const s=n+i>>1;T(t,e,s,n,i,o%2),M(t,e,r,n,s-1,o+1),M(t,e,r,s+1,i,o+1)}function T(t,e,r,n,i,o){for(;i>n;){if(i-n>600){const s=i-n+1,a=r-n+1,l=Math.log(s),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(s-u)/s)*(a-s/2<0?-1:1);T(t,e,r,Math.max(n,Math.floor(r-a*u/s+c)),Math.min(i,Math.floor(r+(s-a)*u/s+c)),o)}const s=e[2*r+o];let a=n,l=i;for(A(t,e,n,r),e[2*i+o]>s&&A(t,e,n,i);a<l;){for(A(t,e,a,l),a++,l--;e[2*a+o]<s;)a++;for(;e[2*l+o]>s;)l--}e[2*n+o]===s?A(t,e,n,l):(l++,A(t,e,l,i)),l<=r&&(n=l+1),r<=l&&(i=l-1)}}function A(t,e,r,n){C(t,r,n),C(e,2*r,2*n),C(e,2*r+1,2*n+1)}function C(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function I(t,e,r,n){const i=t-r,o=e-n;return i*i+o*o}m.fromVectorTileJs=y,m.fromGeojsonVt=function(t,e){e=e||{};var r={};for(var n in t)r[n]=new f(t[n].features,e),r[n].name=n,r[n].version=e.version,r[n].extent=e.extent;return y({layers:r})},m.GeoJSONWrapper=g;const k=t=>t[0],R=t=>t[1];class B{constructor(t,e=k,r=R,n=64,i=Float64Array){this.nodeSize=n,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),a=this.coords=new i(2*t.length);for(let l=0;l<t.length;l++)s[l]=l,a[2*l]=e(t[l]),a[2*l+1]=r(t[l]);M(s,a,n,0,s.length-1,0)}range(t,e,r,n){return function(t,e,r,n,i,o,s){const a=[0,t.length-1,0],l=[];let u,c;for(;a.length;){const h=a.pop(),f=a.pop(),d=a.pop();if(f-d<=s){for(let s=d;s<=f;s++)u=e[2*s],c=e[2*s+1],u>=r&&u<=i&&c>=n&&c<=o&&l.push(t[s]);continue}const p=Math.floor((d+f)/2);u=e[2*p],c=e[2*p+1],u>=r&&u<=i&&c>=n&&c<=o&&l.push(t[p]);const m=(h+1)%2;(0===h?r<=u:n<=c)&&(a.push(d),a.push(p-1),a.push(m)),(0===h?i>=u:o>=c)&&(a.push(p+1),a.push(f),a.push(m))}return l}(this.ids,this.coords,t,e,r,n,this.nodeSize)}within(t,e,r){return function(t,e,r,n,i,o){const s=[0,t.length-1,0],a=[],l=i*i;for(;s.length;){const u=s.pop(),c=s.pop(),h=s.pop();if(c-h<=o){for(let i=h;i<=c;i++)I(e[2*i],e[2*i+1],r,n)<=l&&a.push(t[i]);continue}const f=Math.floor((h+c)/2),d=e[2*f],p=e[2*f+1];I(d,p,r,n)<=l&&a.push(t[f]);const m=(u+1)%2;(0===u?r-i<=d:n-i<=p)&&(s.push(h),s.push(f-1),s.push(m)),(0===u?r+i>=d:n+i>=p)&&(s.push(f+1),s.push(c),s.push(m))}return a}(this.ids,this.coords,t,e,r,this.nodeSize)}}const P={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},D=Math.fround||(L=new Float32Array(1),t=>(L[0]=+t,L[0]));var L;class O{constructor(t){this.options=q(Object.create(P),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:r,maxZoom:n,nodeSize:i}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;let s=[];for(let a=0;a<t.length;a++)t[a].geometry&&s.push(z(t[a],a));this.trees[n+1]=new B(s,K,W,i,Float32Array),e&&console.timeEnd(o);for(let a=n;a>=r;a--){const t=+Date.now();s=this._cluster(s,a),this.trees[a]=new B(s,K,W,i,Float32Array),e&&console.log("z%d: %d clusters in %dms",a,s.length,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let r=((t[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,t[1]));let i=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)r=-180,i=180;else if(r>i){const t=this.getClusters([r,n,180,o],e),s=this.getClusters([-180,n,i,o],e);return t.concat(s)}const s=this.trees[this._limitZoom(e)],a=s.range(F(r),V(o),F(i),V(n)),l=[];for(const u of a){const t=s.points[u];l.push(t.numPoints?U(t):this.points[t.index])}return l}getChildren(t){const e=this._getOriginId(t),r=this._getOriginZoom(t),n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);const o=i.points[e];if(!o)throw new Error(n);const s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),a=i.within(o.x,o.y,s),l=[];for(const u of a){const e=i.points[u];e.parentId===t&&l.push(e.numPoints?U(e):this.points[e.index])}if(0===l.length)throw new Error(n);return l}getLeaves(t,e,r){const n=[];return this._appendLeaves(n,t,e=e||10,r=r||0,0),n}getTile(t,e,r){const n=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:o,radius:s}=this.options,a=s/o,l=(r-a)/i,u=(r+1+a)/i,c={features:[]};return this._addTileFeatures(n.range((e-a)/i,l,(e+1+a)/i,u),n.points,e,r,i,c),0===e&&this._addTileFeatures(n.range(1-a/i,l,1,u),n.points,i,r,i,c),e===i-1&&this._addTileFeatures(n.range(0,l,a/i,u),n.points,-1,r,i,c),c.features.length?c:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e}_appendLeaves(t,e,r,n,i){const o=this.getChildren(e);for(const s of o){const e=s.properties;if(e&&e.cluster?i+e.point_count<=n?i+=e.point_count:i=this._appendLeaves(t,e.cluster_id,r,n,i):i<n?i++:t.push(s),t.length===r)break}return i}_addTileFeatures(t,e,r,n,i,o){for(const s of t){const t=e[s],a=t.numPoints;let l,u,c;if(a)l=j(t),u=t.x,c=t.y;else{const e=this.points[t.index];l=e.properties,u=F(e.geometry.coordinates[0]),c=V(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(u*i-r)),Math.round(this.options.extent*(c*i-n))]],tags:l};let f;a?f=t.id:this.options.generateId?f=t.index:this.points[t.index].id&&(f=this.points[t.index].id),void 0!==f&&(h.id=f),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}_cluster(t,e){const r=[],{radius:n,extent:i,reduce:o,minPoints:s}=this.options,a=n/(i*Math.pow(2,e));for(let l=0;l<t.length;l++){const n=t[l];if(n.zoom<=e)continue;n.zoom=e;const i=this.trees[e+1],u=i.within(n.x,n.y,a),c=n.numPoints||1;let h=c;for(const t of u){const r=i.points[t];r.zoom>e&&(h+=r.numPoints||1)}if(h>c&&h>=s){let t=n.x*c,s=n.y*c,a=o&&c>1?this._map(n,!0):null;const f=(l<<5)+(e+1)+this.points.length;for(const r of u){const l=i.points[r];if(l.zoom<=e)continue;l.zoom=e;const u=l.numPoints||1;t+=l.x*u,s+=l.y*u,l.parentId=f,o&&(a||(a=this._map(n,!0)),o(a,this._map(l)))}n.parentId=f,r.push(N(t/h,s/h,f,h,a))}else if(r.push(n),h>1)for(const t of u){const n=i.points[t];n.zoom<=e||(n.zoom=e,r.push(n))}}return r}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?q({},t.properties):t.properties;const r=this.points[t.index].properties,n=this.options.map(r);return e&&n===r?q({},n):n}}function N(t,e,r,n,i){return{x:D(t),y:D(e),zoom:1/0,id:r,parentId:-1,numPoints:n,properties:i}}function z(t,e){const[r,n]=t.geometry.coordinates;return{x:D(F(r)),y:D(V(n)),zoom:1/0,index:e,parentId:-1}}function U(t){return{type:"Feature",id:t.id,properties:j(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),G(t.y)]}};var e}function j(t){const e=t.numPoints,r=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return q(q({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function F(t){return t/360+.5}function V(t){const e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function G(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function q(t,e){for(const r in e)t[r]=e[r];return t}function K(t){return t.x}function W(t){return t.y}function Z(t,e,r,n){for(var i,o=n,s=r-e>>1,a=r-e,l=t[e],u=t[e+1],c=t[r],h=t[r+1],f=e+3;f<r;f+=3){var d=H(t[f],t[f+1],l,u,c,h);if(d>o)i=f,o=d;else if(d===o){var p=Math.abs(f-s);p<a&&(i=f,a=p)}}o>n&&(i-e>3&&Z(t,e,i,n),t[i+2]=o,r-i>3&&Z(t,i,r,n))}function H(t,e,r,n,i,o){var s=i-r,a=o-n;if(0!==s||0!==a){var l=((t-r)*s+(e-n)*a)/(s*s+a*a);l>1?(r=i,n=o):l>0&&(r+=s*l,n+=a*l)}return(s=t-r)*s+(a=e-n)*a}function Q(t,e,r,n){var i={id:void 0===t?null:t,type:e,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,r=t.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)X(t,e);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<e.length;n++)X(t,e[n]);else if("MultiPolygon"===r)for(n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)X(t,e[n][i])}(i),i}function X(t,e){for(var r=0;r<e.length;r+=3)t.minX=Math.min(t.minX,e[r]),t.minY=Math.min(t.minY,e[r+1]),t.maxX=Math.max(t.maxX,e[r]),t.maxY=Math.max(t.maxY,e[r+1])}function Y(t,e,r,n){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,s=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),a=[],l=e.id;if(r.promoteId?l=e.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===o)J(i,a);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)J(i[u],a);else if("LineString"===o)$(i,a,s,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(u=0;u<i.length;u++)$(i[u],a=[],s,!1),t.push(Q(l,"LineString",a,e.properties));return}tt(i,a,s,!1)}else if("Polygon"===o)tt(i,a,s,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<e.geometry.geometries.length;u++)Y(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];tt(i[u],c,s,!0),a.push(c)}}t.push(Q(l,o,a,e.properties))}}function J(t,e){e.push(et(t[0])),e.push(rt(t[1])),e.push(0)}function $(t,e,r,n){for(var i,o,s=0,a=0;a<t.length;a++){var l=et(t[a][0]),u=rt(t[a][1]);e.push(l),e.push(u),e.push(0),a>0&&(s+=n?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,Z(e,0,c,r),e[c+2]=1,e.size=Math.abs(s),e.start=0,e.end=e.size}function tt(t,e,r,n){for(var i=0;i<t.length;i++){var o=[];$(t[i],o,r,n),e.push(o)}}function et(t){return t/360+.5}function rt(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function nt(t,e,r,n,i,o,s,a){if(n/=e,o>=(r/=e)&&s<n)return t;if(s<r||o>=n)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,f=c.type,d=0===i?c.minX:c.minY,p=0===i?c.maxX:c.maxY;if(d>=r&&p<n)l.push(c);else if(!(p<r||d>=n)){var m=[];if("Point"===f||"MultiPoint"===f)it(h,m,r,n,i);else if("LineString"===f)ot(h,m,r,n,i,!1,a.lineMetrics);else if("MultiLineString"===f)at(h,m,r,n,i,!1);else if("Polygon"===f)at(h,m,r,n,i,!0);else if("MultiPolygon"===f)for(var g=0;g<h.length;g++){var y=[];at(h[g],y,r,n,i,!0),y.length&&m.push(y)}if(m.length){if(a.lineMetrics&&"LineString"===f){for(g=0;g<m.length;g++)l.push(Q(c.id,f,m[g],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===m.length?(f="LineString",m=m[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===m.length?"Point":"MultiPoint"),l.push(Q(c.id,f,m,c.tags))}}}return l.length?l:null}function it(t,e,r,n,i){for(var o=0;o<t.length;o+=3){var s=t[o+i];s>=r&&s<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function ot(t,e,r,n,i,o,s){for(var a,l,u=st(t),c=0===i?ut:ct,h=t.start,f=0;f<t.length-3;f+=3){var d=t[f],p=t[f+1],m=t[f+2],g=t[f+3],y=t[f+4],_=0===i?d:p,v=0===i?g:y,b=!1;s&&(a=Math.sqrt(Math.pow(d-g,2)+Math.pow(p-y,2))),_<r?v>r&&(l=c(u,d,p,g,y,r),s&&(u.start=h+a*l)):_>n?v<n&&(l=c(u,d,p,g,y,n),s&&(u.start=h+a*l)):lt(u,d,p,m),v<r&&_>=r&&(l=c(u,d,p,g,y,r),b=!0),v>n&&_<=n&&(l=c(u,d,p,g,y,n),b=!0),!o&&b&&(s&&(u.end=h+a*l),e.push(u),u=st(t)),s&&(h+=a)}var w=t.length-3;d=t[w],p=t[w+1],m=t[w+2],(_=0===i?d:p)>=r&&_<=n&&lt(u,d,p,m),w=u.length-3,o&&w>=3&&(u[w]!==u[0]||u[w+1]!==u[1])&&lt(u,u[0],u[1],u[2]),u.length&&e.push(u)}function st(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function at(t,e,r,n,i,o){for(var s=0;s<t.length;s++)ot(t[s],e,r,n,i,o,!1)}function lt(t,e,r,n){t.push(e),t.push(r),t.push(n)}function ut(t,e,r,n,i,o){var s=(o-e)/(n-e);return t.push(o),t.push(r+(i-r)*s),t.push(1),s}function ct(t,e,r,n,i,o){var s=(o-r)/(i-r);return t.push(e+(n-e)*s),t.push(o),t.push(1),s}function ht(t,e){for(var r=[],n=0;n<t.length;n++){var i,o=t[n],s=o.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)i=ft(o.geometry,e);else if("MultiLineString"===s||"Polygon"===s){i=[];for(var a=0;a<o.geometry.length;a++)i.push(ft(o.geometry[a],e))}else if("MultiPolygon"===s)for(i=[],a=0;a<o.geometry.length;a++){for(var l=[],u=0;u<o.geometry[a].length;u++)l.push(ft(o.geometry[a][u],e));i.push(l)}r.push(Q(o.id,s,i,o.tags))}return r}function ft(t,e){var r=[];r.size=t.size,void 0!==t.start&&(r.start=t.start,r.end=t.end);for(var n=0;n<t.length;n+=3)r.push(t[n]+e,t[n+1],t[n+2]);return r}function dt(t,e){if(t.transformed)return t;var r,n,i,o=1<<t.z,s=t.x,a=t.y;for(r=0;r<t.features.length;r++){var l=t.features[r],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(n=0;n<u.length;n+=2)l.geometry.push(pt(u[n],u[n+1],e,o,s,a));else for(n=0;n<u.length;n++){var h=[];for(i=0;i<u[n].length;i+=2)h.push(pt(u[n][i],u[n][i+1],e,o,s,a));l.geometry.push(h)}}return t.transformed=!0,t}function pt(t,e,r,n,i,o){return[Math.round(r*(t*n-i)),Math.round(r*(e*n-o))]}function mt(t,e,r,n,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<t.length;a++){s.numFeatures++,gt(s,t[a],o,i);var l=t[a].minX,u=t[a].minY,c=t[a].maxX,h=t[a].maxY;l<s.minX&&(s.minX=l),u<s.minY&&(s.minY=u),c>s.maxX&&(s.maxX=c),h>s.maxY&&(s.maxY=h)}return s}function gt(t,e,r,n){var i=e.geometry,o=e.type,s=[];if("Point"===o||"MultiPoint"===o)for(var a=0;a<i.length;a+=3)s.push(i[a]),s.push(i[a+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)yt(s,i,t,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(a=0;a<i.length;a++)yt(s,i[a],t,r,"Polygon"===o,0===a);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(a=0;a<u.length;a++)yt(s,u[a],t,r,!0,0===a)}if(s.length){var c=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var f={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(f.id=e.id),t.features.push(f)}}function yt(t,e,r,n,i,o){var s=n*n;if(n>0&&e.size<(i?s:n))r.numPoints+=e.length/3;else{for(var a=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>s)&&(r.numSimplified++,a.push(e[l]),a.push(e[l+1])),r.numPoints++;i&&function(t,e){for(var r=0,n=0,i=t.length,o=i-2;n<i;o=n,n+=2)r+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(r>0===e)for(n=0,i=t.length;n<i/2;n+=2){var s=t[n],a=t[n+1];t[n]=t[i-2-n],t[n+1]=t[i-1-n],t[i-2-n]=s,t[i-1-n]=a}}(a,o),t.push(a)}}function _t(t,e){var r=(e=this.options=function(t,e){for(var r in e)t[r]=e[r];return t}(Object.create(this.options),e)).debug;if(r&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(t,e){var r=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)Y(r,t.features[n],e,n);else Y(r,"Feature"===t.type?t:{geometry:t},e);return r}(t,e);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(t,e){var r=e.buffer/e.extent,n=t,i=nt(t,1,-1-r,r,0,-1,2,e),o=nt(t,1,1-r,2+r,0,-1,2,e);return(i||o)&&(n=nt(t,1,-r,1+r,0,-1,2,e)||[],i&&(n=ht(i,1).concat(n)),o&&(n=n.concat(ht(o,-1)))),n}(n,e)).length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function vt(t,e,r){return 32*((1<<t)*r+e)+t}function bt(t,e){const r=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n)return e(null,null);const i=new c(n.features);let o=m(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}_t.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},_t.prototype.splitTile=function(t,e,r,n,i,o,s){for(var a=[t,e,r,n],l=this.options,u=l.debug;a.length;){n=a.pop(),r=a.pop(),e=a.pop(),t=a.pop();var c=1<<e,h=vt(e,r,n),f=this.tiles[h];if(!f&&(u>1&&console.time("creation"),f=this.tiles[h]=mt(t,e,r,n,l),this.tileCoords.push({z:e,x:r,y:n}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,r,n,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(f.source=t,i){if(e===l.maxZoom||e===i)continue;var p=1<<i-e;if(r!==Math.floor(o/p)||n!==Math.floor(s/p))continue}else if(e===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==t.length){u>1&&console.time("clipping");var m,g,y,_,v,b,w=.5*l.buffer/l.extent,x=.5-w,E=.5+w,S=1+w;m=g=y=_=null,v=nt(t,c,r-w,r+E,0,f.minX,f.maxX,l),b=nt(t,c,r+x,r+S,0,f.minX,f.maxX,l),t=null,v&&(m=nt(v,c,n-w,n+E,1,f.minY,f.maxY,l),g=nt(v,c,n+x,n+S,1,f.minY,f.maxY,l),v=null),b&&(y=nt(b,c,n-w,n+E,1,f.minY,f.maxY,l),_=nt(b,c,n+x,n+S,1,f.minY,f.maxY,l),b=null),u>1&&console.timeEnd("clipping"),a.push(m||[],e+1,2*r,2*n),a.push(g||[],e+1,2*r,2*n+1),a.push(y||[],e+1,2*r+1,2*n),a.push(_||[],e+1,2*r+1,2*n+1)}}},_t.prototype.getTile=function(t,e,r){var n=this.options,i=n.extent,o=n.debug;if(t<0||t>24)return null;var s=1<<t,a=vt(t,e=(e%s+s)%s,r);if(this.tiles[a])return dt(this.tiles[a],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,r);for(var l,u=t,c=e,h=r;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[vt(u,c,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,h),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,r),o>1&&console.timeEnd("drilling down"),this.tiles[a]?dt(this.tiles[a],i):null):null};class wt extends t.VectorTileWorkerSource{constructor(t,e,r,n,i){super(t,e,r,n,bt),i&&(this.loadGeoJSON=i)}loadData(e,r){const n=e&&e.request,i=n&&n.collectResourceTiming;this.loadGeoJSON(e,((s,a)=>{if(s||!a)return r(s);if("object"!=typeof a)return r(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));{o(a,!0);try{if(e.filter){const r=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw new Error(r.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const n=a.features.filter((t=>r.value.evaluate({zoom:0},t)));a={type:"FeatureCollection",features:n}}this._geoJSONIndex=e.cluster?new O(function({superclusterOptions:e,clusterProperties:r}){if(!r||!e)return e;const n={},i={},o={accumulated:null,zoom:0},s={properties:null},a=Object.keys(r);for(const l of a){const[e,o]=r[l],s=t.createExpression(o),a=t.createExpression("string"==typeof e?[e,["accumulated"],["get",l]]:e);n[l]=s.value,i[l]=a.value}return e.map=t=>{s.properties=t;const e={};for(const r of a)e[r]=n[r].evaluate(o,s);return e},e.reduce=(t,e)=>{s.properties=e;for(const r of a)o.accumulated=t[r],t[r]=i[r].evaluate(o,s)},e}(e)).load(a.features):function(t,e){return new _t(t,e)}(a,e.geojsonVtOptions)}catch(s){return r(s)}this.loaded={};const l={};if(i){const r=t.getPerformanceMeasurement(n);r&&(l.resourceTiming={},l.resourceTiming[e.source]=JSON.parse(JSON.stringify(r)))}r(null,l)}}))}reloadTile(t,e){const r=this.loaded;return r&&r[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,r){if(e.request)t.getJSON(e.request,r);else{if("string"!=typeof e.data)return r(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));try{return r(null,JSON.parse(e.data))}catch(t){return r(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class xt{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=t.getProjection({name:"mercator"}),this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:wt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}clearCaches(t,e,r){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t],r()}checkIfReady(t,e,r){r()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,r){this.isSpriteLoaded[e]=r;for(const n in this.workerSources[e]){const i=this.workerSources[e][n];for(const e in i)i[e]instanceof t.VectorTileWorkerSource&&(i[e].isSpriteLoaded=r,i[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,r){this.availableImages[t]=e;for(const n in this.workerSources[t]){const r=this.workerSources[t][n];for(const t in r)r[t].availableImages=e}r()}enableTerrain(t,e,r){this.terrain=e,r()}setProjection(e,r){this.projections[e]=t.getProjection(r)}setLayers(t,e,r){this.getLayerIndex(t).replace(e),r()}updateLayers(t,e,r){this.getLayerIndex(t).update(e.layers,e.removedIds),r()}loadTile(e,r,n){const i=this.enableTerrain?t.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,r.type,r.source).loadTile(i,n)}loadDEMTile(e,r,n){const i=this.enableTerrain?t.extend({buildQuadTree:this.terrain},r):r;this.getDEMWorkerSource(e,r.source).loadTile(i,n)}reloadTile(e,r,n){const i=this.enableTerrain?t.extend({enableTerrain:this.terrain},r):r;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,r.type,r.source).reloadTile(i,n)}abortTile(t,e,r){this.getWorkerSource(t,e.type,e.source).abortTile(e,r)}removeTile(t,e,r){this.getWorkerSource(t,e.type,e.source).removeTile(e,r)}removeSource(t,e,r){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const n=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==n.removeSource?n.removeSource(e,r):r()}loadWorkerSource(t,e,r){try{this.self.importScripts(e.url),r()}catch(t){r(t.toString())}}syncRTLPluginState(e,r,n){try{t.plugin.setState(r);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const r=t.plugin.isParsed();n(r?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),r)}}catch(t){n(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new n),e}getWorkerSource(t,e,r){return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][r]||(this.workerSources[t][e][r]=new this.workerSourceTypes[e]({send:(e,r,n,i,o,s)=>{this.actor.send(e,r,n,t,o,s)},scheduler:this.actor.scheduler},this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded[t])),this.workerSources[t][e][r]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new i),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,r){t.enforceCacheSizeLimit(r)}getWorkerPerformanceMetrics(t,e,r){r(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xt(self)),xt})),n(["./shared"],(function(t){function e(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(!e(t[n],r[n]))return!1;return!0}return t===r}var r=n;function n(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{e=new Worker(n),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var r=e.getImageData(0,0,1,1);return r&&r.width===t.width}()?(void 0===i[e=t&&t.failIfMajorPerformanceCaveat]&&(i[e]=function(t){var e,r=function(t){var e=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}(t);if(!r)return!1;try{e=r.createShader(r.VERTEX_SHADER)}catch(t){return!1}return!(!e||r.isContextLost())&&(r.shaderSource(e,"void main() {}"),r.compileShader(e),!0===r.getShaderParameter(e,r.COMPILE_STATUS))}(e)),i[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var i={};function o(e,r,n){const i=t.window.document.createElement(e);return void 0!==r&&(i.className=r),n&&n.appendChild(i),i}function s(e,r,n){const i=t.window.document.createElementNS("http://www.w3.org/2000/svg",e);for(const t of Object.keys(r))i.setAttributeNS(null,t,r[t]);return n&&n.appendChild(i),i}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const a=t.window.document&&t.window.document.documentElement.style,l=a&&void 0!==a.userSelect?"userSelect":"WebkitUserSelect";let u;function c(){a&&l&&(u=a[l],a[l]="none")}function h(){a&&l&&(a[l]=u)}function f(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",f,!0)}function d(){t.window.addEventListener("click",f,!0),t.window.setTimeout((()=>{t.window.removeEventListener("click",f,!0)}),0)}function p(t,e){const r=t.getBoundingClientRect();return y(t,r,e)}function m(t,e){const r=t.getBoundingClientRect(),n=[];for(let i=0;i<e.length;i++)n.push(y(t,r,e[i]));return n}function g(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button}function y(e,r,n){const i=e.offsetWidth===r.width?1:e.offsetWidth/r.width;return new t.pointGeometry((n.clientX-r.left)*i,(n.clientY-r.top)*i)}function _(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],s=r*o-i*n;return s?(t[0]=o*(s=1/s),t[1]=-n*s,t[2]=-i*s,t[3]=r*s,t):null}function v(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class b extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}hasImage(t){return!!this.getImage(t)}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,r){let n=!0;return this._validateStretch(r.stretchX,r.data&&r.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),n=!1),this._validateStretch(r.stretchY,r.data&&r.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),n=!1),this._validateContent(r.content,r)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),n=!1),n}_validateStretch(t,e){if(!t)return!0;let r=0;for(const n of t){if(n[0]<r||n[1]<n[0]||e<n[1])return!1;r=n[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let r=!0;if(!this.isLoaded())for(const n of t)this.images[n]||(r=!1);this.isLoaded()||r?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,r){const n={};for(const i of e){this.images[i]||this.fire(new t.Event("styleimagemissing",{id:i}));const e=this.images[i];e?n[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}r(null,n)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const r=this.patterns[e],n=this.getImage(e);if(!n)return null;if(r&&r.position.version===n.version)return r.position;if(r)r.position.version=n.version;else{const r={w:n.data.width+2,h:n.data.height+2,x:0,y:0},i=new t.ImagePosition(r,n);this.patterns[e]={bin:r,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const r=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:r,h:n}=t.potpack(e),i=this.atlasImage;i.resize({width:r||1,height:n||1});for(const o in this.patterns){const{bin:e}=this.patterns[o],r=e.x+1,n=e.y+1,s=this.images[o].data,a=s.width,l=s.height;t.RGBAImage.copy(s,i,{x:0,y:0},{x:r,y:n},{width:a,height:l}),t.RGBAImage.copy(s,i,{x:0,y:l-1},{x:r,y:n-1},{width:a,height:1}),t.RGBAImage.copy(s,i,{x:0,y:0},{x:r,y:n+l},{width:a,height:1}),t.RGBAImage.copy(s,i,{x:a-1,y:0},{x:r-1,y:n},{width:1,height:l}),t.RGBAImage.copy(s,i,{x:0,y:0},{x:r+a,y:n},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];v(t)&&this.updateImage(e,t)}}}const w=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,r){return function([e,r,n]){const i=t.degToRad(r+90),o=t.degToRad(n);return{x:e*Math.cos(i)*Math.sin(o),y:e*Math.sin(i)*Math.sin(o),z:e*Math.cos(o),azimuthal:r,polar:n}}(e.expression.evaluate(r))}interpolate(e,r,n){return{x:t.number(e.x,r.x,n),y:t.number(e.y,r.y,n),z:t.number(e.z,r.z,n),azimuthal:t.number(e.azimuthal,r.azimuthal,n),polar:t.number(e.polar,r.polar,n)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),x="-transition";class E extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(w),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,r={}){if(!this._validate(t.validateLight,e,r))for(const n in e){const r=e[n];t.endsWith(n,x)?this._transitionable.setTransition(n.slice(0,-x.length),r):this._transitionable.setValue(n,r)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,r,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const S=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)}),M="-transition";class T extends t.Evented{constructor(e,r){super(),this._transitionable=new t.Transitionable(S),this.set(e),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=r}get(){return this._transitionable.serialize()}set(e){for(const r in e){const n=e[r];t.endsWith(r,M)?this._transitionable.setTransition(r.slice(0,-M.length),n):this._transitionable.setValue(r,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}}function A(e,r,n,i){const o=t.smoothstep(45,65,n),[s,a]=C(e,i),l=t.length(r);let u=1-Math.min(1,Math.exp((l-s)/(a-s)*-6));return u*=u*u,u=Math.min(1,1.00747*u),u*o*e.alpha}function C(t,e){const r=.5/Math.tan(.5*e);return[t.range[0]+r,t.range[1]+r]}const I=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"high-color":new t.DataConstantProperty(t.spec.fog["high-color"]),"space-color":new t.DataConstantProperty(t.spec.fog["space-color"]),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"]),"star-intensity":new t.DataConstantProperty(t.spec.fog["star-intensity"])}),k="-transition";class R extends t.Evented{constructor(e,r){super(),this._transitionable=new t.Transitionable(I),this.set(e),this._transitioning=this._transitionable.untransitioned(),this._transform=r}get state(){const e=this._transform,r="globe"===e.projection.name,n=t.globeToMercatorTransition(e.zoom),i=this.properties.get("range"),o=[.5,3];return{range:r?[t.number(o[0],i[0],n),t.number(o[1],i[1],n)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e,r={}){if(!this._validate(t.validateFog,e,r)){for(const r of Object.keys(t.spec.fog))e&&void 0===e[r]&&(e[r]=t.spec.fog[r].default);for(const r in e){const n=e[r];t.endsWith(r,k)?this._transitionable.setTransition(r.slice(0,-k.length),n):this._transitionable.setValue(r,n)}}}getOpacity(e){if(!this._transform.projection.supportsFog)return 0;const r=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:t.smoothstep(45,65,e))*r.a}getOpacityAtLatLng(e,r){return this._transform.projection.supportsFog?function(e,r,n){const i=t.MercatorCoordinate.fromLngLat(r),o=n.elevation?n.elevation.getAtPointOrZero(i):0,s=[i.x,i.y,o];return t.transformMat4(s,s,n.mercatorFogMatrix),A(e,s,n.pitch,n._fov)}(this.state,e,r):0}getFovAdjustedRange(t){return this._transform.projection.supportsFog?C(this.state,t):[0,1]}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,r,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class B{constructor(e,r){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const n=this.workerPool.acquire(this.id);for(let t=0;t<n.length;t++){const e=new B.Actor(n[t],r,this.id);e.name=`Worker ${t}`,this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(e,r,n){t.asyncAll(this.actors,((t,n)=>{t.send(e,r,n)}),n=n||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function P(e,r,n){return r*(t.EXTENT/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}B.Actor=t.Actor;class D{constructor(t,e,r,n){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,n)}static createFromScreenPoints(e,r){let n,i;if(e instanceof t.pointGeometry||"number"==typeof e[0]){const o=t.pointGeometry.convert(e);n=[t.pointGeometry.convert(e)],i=r.isPointAboveHorizon(o)}else{const o=t.pointGeometry.convert(e[0]),s=t.pointGeometry.convert(e[1]);n=[o,s],i=t.polygonizeBounds(o,s).every((t=>r.isPointAboveHorizon(t)))}return new D(n,r.getCameraPoint(),i,r)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new t.pointGeometry(1,1)):this.screenBounds[1],i=t.polygonizeBounds(r,n,0,!1);return this.cameraPoint.y>n.y&&(this.cameraPoint.x>r.x&&this.cameraPoint.x<n.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=n.x?i[2]=this.cameraPoint:this.cameraPoint.x<=r.x&&(i[3]=this.cameraPoint)),t.bufferConvexPolygon(i,e)}bufferedCameraGeometryGlobe(e){const r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new t.pointGeometry(1,1)):this.screenBounds[1],i=t.polygonizeBounds(r,n,e),o=this.cameraPoint.clone();switch(3*((o.y>r.y)+(o.y>n.y))+((o.x>r.x)+(o.x>n.x))){case 0:i[0]=o,i[4]=o.clone();break;case 1:i.splice(1,0,o);break;case 2:i[1]=o;break;case 3:i.splice(4,0,o);break;case 5:i.splice(2,0,o);break;case 6:i[3]=o;break;case 7:i.splice(3,0,o);break;case 8:i[2]=o}return i}containsTile(e,r,n,i=0){const o=e.queryPadding/r._pixelsPerMercatorPixel+1,s=n?this._bufferedCameraMercator(o,r):this._bufferedScreenMercator(o,r);let a=e.tileID.wrap+(s.unwrapped?i:0);const l=s.polygon.map((r=>t.getTilePoint(e.tileTransform,r,a)));if(!t.polygonIntersectsBox(l,0,0,t.EXTENT,t.EXTENT))return;a=e.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);const u=this.screenGeometryMercator.polygon.map((r=>t.getTileVec3(e.tileTransform,r,a))),c=u.map((e=>new t.pointGeometry(e[0],e[1]))),h=r.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),f=t.getTileVec3(e.tileTransform,h,a),d=u.map((e=>{const r=t.sub(e,e,f);return t.normalize(r,r),new t.Ray(f,r)})),p=P(e,1,r.zoom)*r._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:c,tilespaceRays:d,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=t.getBounds(l),m.min.x=t.clamp(m.min.x,0,t.EXTENT),m.min.y=t.clamp(m.min.y,0,t.EXTENT),m.max.x=t.clamp(m.max.x,0,t.EXTENT),m.max.y=t.clamp(m.max.y,0,t.EXTENT),m),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:p};var m}_bufferedScreenMercator(t,e){const r=N(t);if(this._screenRaycastCache[r])return this._screenRaycastCache[r];{let n;return n="globe"===e.projection.name?this._projectAndResample(this.bufferedScreenGeometry(t),e):{polygon:this.bufferedScreenGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._screenRaycastCache[r]=n,n}}_bufferedCameraMercator(t,e){const r=N(t);if(this._cameraRaycastCache[r])return this._cameraRaycastCache[r];{let n;return n="globe"===e.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(t),e):{polygon:this.bufferedCameraGeometry(t).map((t=>e.pointCoordinate3D(t))),unwrapped:!0},this._cameraRaycastCache[r]=n,n}}_projectAndResample(e,r){const n=function(e,r){const n=t.multiply([],r.pixelMatrix,r.globeMatrix),i=[0,-t.GLOBE_RADIUS,0,1],o=[0,t.GLOBE_RADIUS,0,1],s=[0,0,0,1];t.transformMat4$1(i,i,n),t.transformMat4$1(o,o,n),t.transformMat4$1(s,s,n);const a=new t.pointGeometry(i[0]/i[3],i[1]/i[3]),l=new t.pointGeometry(o[0]/o[3],o[1]/o[3]),u=t.polygonContainsPoint(e,a)&&i[3]<s[3],c=t.polygonContainsPoint(e,l)&&o[3]<s[3];if(!u&&!c)return null;const h=function(t,e,r){for(let n=1;n<t.length;n++){const i=O(e.pointCoordinate3D(t[n-1]).x),o=O(e.pointCoordinate3D(t[n]).x);if(r<0){if(i<o)return{idx:n,t:-i/(o-1-i)}}else if(o<i)return{idx:n,t:(1-i)/(o+1-i)}}return null}(e,r,u?-1:1);if(!h)return null;const{idx:f,t:d}=h;let p=f>1?L(e.slice(0,f),r):[],m=f<e.length?L(e.slice(f),r):[];p=p.map((e=>new t.pointGeometry(O(e.x),e.y))),m=m.map((e=>new t.pointGeometry(O(e.x),e.y)));const g=[...p];0===g.length&&g.push(m[m.length-1]);const y=t.number(g[g.length-1].y,(0===m.length?p[0]:m[0]).y,d);let _;return _=u?[new t.pointGeometry(0,y),new t.pointGeometry(0,0),new t.pointGeometry(1,0),new t.pointGeometry(1,y)]:[new t.pointGeometry(1,y),new t.pointGeometry(1,1),new t.pointGeometry(0,1),new t.pointGeometry(0,y)],g.push(..._),0===m.length?g.push(p[0]):g.push(...m),{polygon:g.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:!1}}(e,r);if(n)return n;const i=function(e,r){let n=!1,i=-1/0,o=0;for(let t=0;t<e.length-1;t++)e[t].x>i&&(i=e[t].x,o=t);for(let t=0;t<e.length-1;t++){const r=(o+t)%(e.length-1),i=e[r],s=e[r+1];Math.abs(i.x-s.x)>.5&&(i.x<s.x?(i.x+=1,0===r&&(e[e.length-1].x+=1)):(s.x+=1,r+1===e.length-1&&(e[0].x+=1)),n=!0)}const s=t.mercatorXfromLng(r.center.lng);return n&&s<Math.abs(s-1)&&e.forEach((t=>{t.x-=1})),{polygon:e,unwrapped:n}}(L(e,r).map((e=>new t.pointGeometry(O(e.x),e.y))),r);return{polygon:i.polygon.map((e=>new t.MercatorCoordinate(e.x,e.y))),unwrapped:i.unwrapped}}}function L(e,r){return t.resample(e,(t=>{const e=r.pointCoordinate3D(t);t.x=e.x,t.y=e.y}),1/256)}function O(t){return t<0?1+t%1:t%1}function N(t){return 100*t|0}function z(e,r,n,i,o){const s=function(n,i){if(n)return o(n);if(i){const n=t.pick(t.extend(i,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(n.vectorLayers=i.vector_layers,n.vectorLayerIds=n.vectorLayers.map((t=>t.id))),i.language_options&&(n.languageOptions=i.language_options),i.language&&i.language[i.id]&&(n.language=i.language[i.id]),i.worldview_options&&(n.worldviewOptions=i.worldview_options),i.worldview?n.worldview=i.worldview[i.id]:i.worldview_default&&(n.worldview=i.worldview_default),n.tiles=r.canonicalizeTileset(n,e.url),o(null,n)}};return e.url?t.getJSON(r.transformRequest(r.normalizeSourceURL(e.url,null,n,i),t.ResourceType.Source),s):t.exported.frame((()=>s(null,e)))}class U{constructor(e,r,n){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=r||0,this.maxzoom=n||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const r=Math.pow(2,e.z),n=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*r),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*r),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*r),s=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*r);return e.x>=n&&e.x<o&&e.y>=i&&e.y<s}}class j{constructor(t,e,r){this.context=t;const n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const F={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class V{constructor(t,e,r,n){this.length=e.length,this.attributes=r,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.context=t;const i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||e.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let r=0;r<this.attributes.length;r++){const n=e.attributes[this.attributes[r].name];void 0!==n&&t.enableVertexAttribArray(n)}}setVertexAttribPointers(t,e,r){for(let n=0;n<this.attributes.length;n++){const i=this.attributes[n],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[F[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class G{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class q extends G{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class K extends G{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class W extends G{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Z extends G{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class H extends G{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Q extends G{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class X extends G{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Y extends G{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class J extends G{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class $ extends G{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class tt extends G{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class et extends G{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class rt extends G{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class nt extends G{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class it extends G{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class ot extends G{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class st extends G{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class at extends G{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class lt extends G{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class ut extends G{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class ct extends G{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ht extends G{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ft extends G{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class dt extends G{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class pt extends G{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class mt extends G{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class gt extends G{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class yt extends G{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class _t extends G{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class vt extends G{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class bt extends G{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class wt extends G{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class xt extends wt{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Et extends wt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class St extends Et{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Mt{constructor(t,e,r,n){this.context=t,this.width=e,this.height=r;const i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new xt(t,i),n&&(this.depthAttachment=new Et(t,i))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class Tt{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new q(this),this.clearDepth=new K(this),this.clearStencil=new W(this),this.colorMask=new Z(this),this.depthMask=new H(this),this.stencilMask=new Q(this),this.stencilFunc=new X(this),this.stencilOp=new Y(this),this.stencilTest=new J(this),this.depthRange=new $(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new rt(this),this.blendFunc=new nt(this),this.blendColor=new it(this),this.blendEquation=new ot(this),this.cullFace=new st(this),this.cullFaceSide=new at(this),this.frontFace=new lt(this),this.program=new ut(this),this.activeTexture=new ct(this),this.viewport=new ht(this),this.bindFramebuffer=new ft(this),this.bindRenderbuffer=new dt(this),this.bindTexture=new pt(this),this.bindVertexBuffer=new mt(this),this.bindElementBuffer=new gt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new yt(this),this.pixelStoreUnpack=new _t(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new bt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t.getExtension("OES_standard_derivatives"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new j(this,t,e)}createVertexBuffer(t,e,r){return new V(this,t,e,r)}createRenderbuffer(t,e,r){const n=this.gl,i=n.createRenderbuffer();return this.bindRenderbuffer.set(i),n.renderbufferStorage(n.RENDERBUFFER,t,e,r),this.bindRenderbuffer.set(null),i}createFramebuffer(t,e,r){return new Mt(this,t,e,r)}clear({color:t,depth:e,stencil:r}){const n=this.gl;let i=0;t&&(i|=n.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(i|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),void 0!==r&&(i|=n.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),n.clear(i)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(r){e(r.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class At extends t.Evented{constructor(e,r,n,i){super(),this.id=e,this.dispatcher=n,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=z(this._options,this.map._requestManager,null,null,((e,r)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):r&&(t.extend(this,r),r.bounds&&(this.tileBounds=new U(r.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(r.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,r){const n=t.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),n,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),((n,i,o,s)=>(delete e.request,e.aborted?(e.state="unloaded",r(null)):n?(e.state="errored",r(n)):i?(this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:o,expires:s}),e.setTexture(i,this.map.painter),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),void r(null)):r(null))))}static loadTileData(t,e,r){t.setTexture(e,r)}static unloadTileData(t,e){t.texture&&e.saveTileTexture(t.texture)}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let Ct;function It(e,r,n,i,o,s,a,l){const u=[e,n,o,r,i,s,1,1,1],c=[a,l,1],h=t.adjoint([],u),[f,d,p]=t.transformMat3(c,c,t.transpose(h,h));return t.multiply$1(u,[f,0,0,0,d,0,0,0,p],u)}class kt extends t.Evented{constructor(t,e,r,n){super(),this.id=t,this.dispatcher=r,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=e}load(e,r){this._loaded=r||!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((r,n)=>{if(this._loaded=!0,r)this.fire(new t.ErrorEvent(r));else if(n){const{HTMLImageElement:r}=t.window;this.image=n instanceof r?t.exported.getImageData(n):n,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(e){this.coordinates=e,this._boundsArray=void 0;const r=e.map(t.MercatorCoordinate.fromLngLat);return this.tileID=function(e){let r=1/0,n=1/0,i=-1/0,o=-1/0;for(const t of e)r=Math.min(r,t.x),n=Math.min(n,t.y),i=Math.max(i,t.x),o=Math.max(o,t.y);const s=Math.max(i-r,o-n),a=Math.max(0,Math.floor(-Math.log(s)/Math.LN2)),l=Math.pow(2,a);return new t.CanonicalTileID(a,Math.floor((r+i)/2*l),Math.floor((n+o)/2*l))}(r),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(e){for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}if(this._boundsArray)return;const r=t.tileTransform(this.tileID,this.map.transform.projection),[n,i,o,s]=this.coordinates.map((e=>{const n=r.projection.project(e[0],e[1]);return t.getTilePoint(r,n)._round()}));this.perspectiveTransform=function(e,r,n,i,o,s,a,l,u,c){const h=It(0,0,e,0,0,r,e,r),f=It(n,i,o,s,a,l,u,c);return t.multiply$1(f,t.adjoint(h,h),f),[f[6]/f[8]*e/t.EXTENT,f[7]/f[8]*r/t.EXTENT]}(this.width,this.height,n.x,n.y,i.x,i.y,s.x,s.y,o.x,o.y);const a=this._boundsArray=new t.StructArrayLayout4i8;a.emplaceBack(n.x,n.y,0,0),a.emplaceBack(i.x,i.y,t.EXTENT,0),a.emplaceBack(s.x,s.y,0,t.EXTENT),a.emplaceBack(o.x,o.y,t.EXTENT,t.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=e.createVertexBuffer(a,t.boundsAttributes.members),this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,r=e.gl;this.texture?this.texture.update(this.image):(this.texture=new t.Texture(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this._prepareData(e)}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Rt={vector:class extends t.Evented{constructor(e,r,n,i){if(super(),this.id=e,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(r,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(e){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"}));const r=this.language||this.map._language,n=this.worldview||this.map._worldview;this._tileJSONRequest=z(this._options,this.map._requestManager,r,n,((i,o)=>{this._tileJSONRequest=null,this._loaded=!0,i?(r&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${r}`),n&&2!==n.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${n}`),this.fire(new t.ErrorEvent(i))):o&&(t.extend(this,o),o.bounds&&(this.tileBounds=new U(o.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(o.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),e&&e(i)}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load((()=>{const t=this.map.style._getSourceCaches(this.id);for(const e of t)e.clearTiles()}))}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}_setLanguage(t){return t===this.language||this.setSourceProperty((()=>{this.language=t})),this}_setWorldview(t){return t===this.worldview?this:this.worldviewOptions&&t&&!this.worldviewOptions[t]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${t}".`),this):(this.setSourceProperty((()=>{this.worldview=t})),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,r){const n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(n,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=r:e.request=e.actor.send("reloadTile",i,o.bind(this));else if(e.actor=this._tileWorkers[n]=this._tileWorkers[n]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const r=t.loadVectorTile.call({deduped:this._deduped},i,((t,r)=>{t||!r?o.call(this,t):(i.data={cacheControl:r.cacheControl,expires:r.expires,rawData:r.rawData.slice(0)},e.actor&&e.actor.send("loadTile",i,o.bind(this),void 0,!0))}),!0);e.request={cancel:r}}function o(n,i){return delete e.request,e.aborted?r(null):n&&404!==n.status?r(n):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:At,"raster-dem":class extends At{constructor(e,r,n,i){super(e,r,n,i),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}loadTile(e,r){const n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(t,n){t&&(e.state="errored",r(t)),n&&(e.dem=n,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",r(null))}e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),function(n,o,s,a){if(delete e.request,e.aborted)e.state="unloaded",r(null);else if(n)e.state="errored",r(n);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:s,expires:a});const r=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&(null==Ct&&(Ct=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),Ct),n=1-(o.width-t.prevPowerOfTwo(o.width))/2;n<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const l=r?o:t.exported.getImageData(o,n),u={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:n};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",u,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(e){const r=e.canonical,n=Math.pow(2,r.z),i=(r.x-1+n)%n,o=0===r.x?e.wrap-1:e.wrap,s=(r.x+1+n)%n,a=r.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,r.z,i,r.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,r.z,s,r.y).key]={backfilled:!1},r.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,r.z,i,r.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,r.z,s,r.y-1).key]={backfilled:!1}),r.y+1<n&&(l[new t.OverscaledTileID(e.overscaledZ,o,r.z,i,r.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,r.z,s,r.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:class extends t.Evented{constructor(e,r,n,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(i),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*o,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*o,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}onAdd(t){this.map=t,this.setData(this._data)}setData(t){return this._data=t,this._updateWorkerData(),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,r,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:r},n),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const e=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(e.request=this.map._requestManager.transformRequest(t.exported.resolveURL(r),t.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(r),this._pendingLoad=this.actor.send(`${this.type}.loadData`,e,((e,r)=>{if(this._loaded=!0,this._pendingLoad=null,e)this.fire(new t.ErrorEvent(e));else{const e={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[this.id]&&(e.resourceTiming=r.resourceTiming[this.id]),this.fire(new t.Event("data",e)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(e,r){const n=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(n,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((t,i)=>(delete e.request,e.unloadVectorData(),e.aborted?r(null):t?r(t):(e.loadVectorData(i,this.map.painter,"reloadTile"===n),r(null)))),void 0,"loadTile"===n)}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends kt{constructor(t,e,r,n){super(t,e,r,n),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const r of e.urls)this.urls.push(this.map._requestManager.transformRequest(r,t.ResourceType.Source).url);t.getVideo(this.urls,((e,r)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):r&&(this.video=r,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const r=this.video.seekable;e<r.start(0)||e>r.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,r=e.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(e)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:kt,canvas:class extends kt{constructor(e,r,n,i){super(e,r,n,i),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const r=this.map.painter.context;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(r,this.canvas,r.gl.RGBA,{premultiply:!0}),this._prepareData(r)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}},custom:class extends t.Evented{constructor(e,r,n,i){super(),this.id=e,this.type="custom",this._dataType="raster",this._dispatcher=n,this._implementation=r,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new t.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new t.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new U(this._implementation.bounds,this.minzoom,this.maxzoom)),r.update=this._update.bind(this),r.coveringTiles=this._coveringTiles.bind(this),t.extend(this,t.pick(r,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return t.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(e){this._map=e,this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(e),this.load()}onRemove(t){this._implementation.onRemove&&this._implementation.onRemove(t)}hasTile(t){if(this._implementation.hasTile){const{x:e,y:r,z:n}=t.canonical;return this._implementation.hasTile({x:e,y:r,z:n})}return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,r){const{x:n,y:i,z:o}=e.tileID.canonical,s=new t.window.AbortController,a=this._implementation.loadTile({x:n,y:i,z:o},{signal:s.signal});if(!a)return this.loadTileData(e,{width:this.tileSize,height:this.tileSize,data:null}),e.state="loaded",r(null);a.cancel=()=>s.abort(),e.request=a.then(function(n){return delete e.request,e.aborted?(e.state="unloaded",r(null)):n?function(e){return e instanceof t.window.ImageData||e instanceof t.window.ImageBitmap||e instanceof t.window.HTMLCanvasElement}(n)?(this.loadTileData(e,n),e.state="loaded",void r(null)):(e.state="errored",r(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(e,{width:this.tileSize,height:this.tileSize,data:null}),e.state="loaded",r(null))}.bind(this)).catch((t=>{20!==t.code&&(e.state="errored",r(t))}))}loadTileData(t,e){At.loadTileData(t,e,this._map.painter)}unloadTileData(t){At.unloadTileData(t,this._map.painter)}prepareTile(t){if(!this._implementation.prepareTile)return null;const{x:e,y:r,z:n}=t.tileID.canonical,i=this._implementation.prepareTile({x:e,y:r,z:n});return i?(this.loadTileData(t,i),t.state="loaded",i):null}unloadTile(t,e){if(this.unloadTileData(t),this._implementation.unloadTile){const{x:e,y:r,z:n}=t.tileID.canonical;this._implementation.unloadTile({x:e,y:r,z:n})}e()}abortTile(t,e){t.request&&t.request.cancel&&(t.request.cancel(),delete t.request),e()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((t=>({x:t.canonical.x,y:t.canonical.y,z:t.canonical.z})))}_update(){this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Bt=function(e,r,n,i){const o=new Rt[r.type](e,r,n,i);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Pt(e,r){const n=t.identity([]);return t.scale(n,n,[.5*e.width,.5*-e.height,1]),t.translate(n,n,[1,-1,0]),t.multiply(n,n,e.calculateProjMatrix(r.toUnwrapped())),Float32Array.from(n)}function Dt(t,e,r,n,i,o,s,a=!1){const l=t.tilesIn(n,s,a);l.sort(Ot);const u=[];for(const h of l)u.push({wrappedTileID:h.tile.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,r,t._state,h,i,o,Pt(t.transform,h.tile.tileID),a)});const c=function(t){const e={},r={};for(const n of t){const t=n.queryResults,i=n.wrappedTileID,o=r[i]=r[i]||{};for(const r in t){const n=t[r],i=o[r]=o[r]||{},s=e[r]=e[r]||[];for(const t of n)i[t.featureIndex]||(i[t.featureIndex]=!0,s.push(t))}}return e}(u);for(const h in c)c[h].forEach((e=>{const r=e.feature,n=r.layer;n&&"background"!==n.type&&"sky"!==n.type&&(r.source=n.source,n["source-layer"]&&(r.sourceLayer=n["source-layer"]),r.state=void 0!==r.id?t.getFeatureState(n["source-layer"],r.id):{})}));return c}function Lt(t,e){const r=t.getRenderableIds().map((e=>t.getTileByID(e))),n=[],i={};for(let o=0;o<r.length;o++){const t=r[o],s=t.tileID.canonical.key;i[s]||(i[s]=!0,t.querySourceFeatures(n,e))}return n}function Ot(t,e){const r=t.tileID,n=e.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}function Nt(){return null!=yo.workerClass?new yo.workerClass:new t.window.Worker(yo.workerUrl)}const zt="mapboxgl_preloaded_worker_pool";class Ut{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Ut.workerCount;)this.workers.push(new Nt);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}let jt;function Ft(){return jt||(jt=new Ut),jt}function Vt(e,r){const n={};for(const t in e)"ref"!==t&&(n[t]=e[t]);return t.refProperties.forEach((t=>{t in r&&(n[t]=r[t])})),n}function Gt(t){t=t.slice();const e=Object.create(null);for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(let r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Vt(t[r],e[t[r].ref]));return t}Ut.workerCount=2;const qt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Kt(t,e,r){r.push({command:qt.addSource,args:[t,e[t]]})}function Wt(t,e,r){e.push({command:qt.removeSource,args:[t]}),r[t]=!0}function Zt(t,e,r,n){Wt(t,r,n),Kt(t,e,r)}function Ht(t,r,n){let i;for(i in t[n])if(t[n].hasOwnProperty(i)&&"data"!==i&&!e(t[n][i],r[n][i]))return!1;for(i in r[n])if(r[n].hasOwnProperty(i)&&"data"!==i&&!e(t[n][i],r[n][i]))return!1;return!0}function Qt(t,r,n,i,o,s){let a;for(a in r=r||{},t=t||{})t.hasOwnProperty(a)&&(e(t[a],r[a])||n.push({command:s,args:[i,a,r[a],o]}));for(a in r)r.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(e(t[a],r[a])||n.push({command:s,args:[i,a,r[a],o]}))}function Xt(t){return t.id}function Yt(t,e){return t[e.id]=e,t}class Jt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let r=1;r<this.points.length;r++)this._distances[r]=this._distances[r-1]+this.points[r].dist(this.points[r-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let r=1,n=this._distances[r];const i=e*this.paddedLength+this.padding;for(;n<i&&r<this._distances.length;)n=this._distances[++r];const o=r-1,s=this._distances[o],a=n-s,l=a>0?(i-s)/a:0;return this.points[o].mult(1-l).add(this.points[r].mult(l))}}class $t{constructor(t,e,r){const n=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(e/r);for(let o=0;o<this.xCellCount*this.yCellCount;o++)n.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)}insertCircle(t,e,r,n){this._forEachCell(e-n,r-n,e+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(r),this.circles.push(n)}_insertBoxCell(t,e,r,n,i,o){this.boxCells[i].push(o)}_insertCircleCell(t,e,r,n,i,o){this.circleCells[i].push(o)}_query(t,e,r,n,i,o){if(r<0||t>this.width||n<0||e>this.height)return!i&&[];const s=[];if(t<=0&&e<=0&&this.width<=r&&this.height<=n){if(i)return!0;for(let t=0;t<this.boxKeys.length;t++)s.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],r=this.circles[3*t+1],n=this.circles[3*t+2];s.push({key:this.circleKeys[t],x1:e-n,y1:r-n,x2:e+n,y2:r+n})}return o?s.filter(o):s}return this._forEachCell(t,e,r,n,this._queryCell,s,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?s.length>0:s}_queryCircle(t,e,r,n,i){const o=t-r,s=t+r,a=e-r,l=e+r;if(s<0||o>this.width||l<0||a>this.height)return!n&&[];const u=[];return this._forEachCell(o,a,s,l,this._queryCellCircle,u,{hitTest:n,circle:{x:t,y:e,radius:r},seenUids:{box:{},circle:{}}},i),n?u.length>0:u}query(t,e,r,n,i){return this._query(t,e,r,n,!1,i)}hitTest(t,e,r,n,i){return this._query(t,e,r,n,!0,i)}hitTestCircle(t,e,r,n){return this._queryCircle(t,e,r,!0,n)}_queryCell(t,e,r,n,i,o,s,a){const l=s.seenUids,u=this.boxCells[i];if(null!==u){const i=this.bboxes;for(const c of u)if(!l.box[c]){l.box[c]=!0;const u=4*c;if(t<=i[u+2]&&e<=i[u+3]&&r>=i[u+0]&&n>=i[u+1]&&(!a||a(this.boxKeys[c]))){if(s.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[c],x1:i[u],y1:i[u+1],x2:i[u+2],y2:i[u+3]})}}}const c=this.circleCells[i];if(null!==c){const i=this.circles;for(const u of c)if(!l.circle[u]){l.circle[u]=!0;const c=3*u;if(this._circleAndRectCollide(i[c],i[c+1],i[c+2],t,e,r,n)&&(!a||a(this.circleKeys[u]))){if(s.hitTest)return o.push(!0),!0;{const t=i[c],e=i[c+1],r=i[c+2];o.push({key:this.circleKeys[u],x1:t-r,y1:e-r,x2:t+r,y2:e+r})}}}}}_queryCellCircle(t,e,r,n,i,o,s,a){const l=s.circle,u=s.seenUids,c=this.boxCells[i];if(null!==c){const t=this.bboxes;for(const e of c)if(!u.box[e]){u.box[e]=!0;const r=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[r+0],t[r+1],t[r+2],t[r+3])&&(!a||a(this.boxKeys[e])))return o.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const t=this.circles;for(const e of h)if(!u.circle[e]){u.circle[e]=!0;const r=3*e;if(this._circlesCollide(t[r],t[r+1],t[r+2],l.x,l.y,l.radius)&&(!a||a(this.circleKeys[e])))return o.push(!0),!0}}}_forEachCell(t,e,r,n,i,o,s,a){const l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(r),h=this._convertToYCellCoord(n);for(let f=l;f<=c;f++)for(let l=u;l<=h;l++)if(i.call(this,t,e,r,n,this.xCellCount*l+f,o,s,a))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,r,n,i,o){const s=n-t,a=i-e,l=r+o;return l*l>s*s+a*a}_circleAndRectCollide(t,e,r,n,i,o,s){const a=(o-n)/2,l=Math.abs(t-(n+a));if(l>a+r)return!1;const u=(s-i)/2,c=Math.abs(e-(i+u));if(c>u+r)return!1;if(l<=a||c<=u)return!0;const h=l-a,f=c-u;return h*h+f*f<=r*r}}const te=Math.tan(85*Math.PI/180);function ee(e,r,n,i,o,s,a){const l=t.create();if(n)if("globe"===s.name){const e=t.calculateGlobeLabelMatrix(o,r);t.multiply(l,l,e)}else{const e=_([],a);l[0]=e[0],l[1]=e[1],l[4]=e[2],l[5]=e[3],i||t.rotateZ(l,l,o.angle)}else t.multiply(l,o.labelPlaneMatrix,e);return l}function re(t,e,r,n,i,o,s){const a=ee(t,e,r,n,i,o,s);return"globe"===o.name&&r||(a[2]=a[6]=a[10]=a[14]=0),a}function ne(e,r,n,i,o,s,a){if(n){if("globe"===s.name){const l=ee(e,r,n,i,o,s,a);return t.invert(l,l),t.multiply(l,e,l),l}{const r=t.clone(e),n=t.identity([]);return n[0]=a[0],n[1]=a[1],n[4]=a[2],n[5]=a[3],t.multiply(r,r,n),i||t.rotateZ(r,r,-o.angle),r}}return o.glCoordMatrix}function ie(e,r,n=0){const i=[e.x,e.y,n,1];n?t.transformMat4$1(i,i,r):ye(i,i,r);const o=i[3];return{point:[i[0]/o,i[1]/o,i[2]/o],signedDistanceFromCamera:o}}function oe(e,r){const n=[e[0],e[1],e[2],1];t.transformMat4$1(n,n,r);const i=n[3];return{point:[n[0]/i,n[1]/i,n[2]/i],signedDistanceFromCamera:i}}function se(t,e){return Math.min(.5+t/e*.5,1.5)}function ae(t,e){const r=t[0]/t[3],n=t[1]/t[3];return r>=-e[0]&&r<=e[0]&&n>=-e[1]&&n<=e[1]}function le(e,r,n,i,o,s,a,l,u,c){const h=n.transform,f=i?e.textSizeData:e.iconSizeData,d=t.evaluateSizeForZoom(f,n.transform.zoom),p="globe"===h.projection.name,m=[256/n.width*2+1,256/n.height*2+1],g=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;g.clear();let y=null;p&&(y=i?e.text.globeExtVertexArray:e.icon.globeExtVertexArray);const _=e.lineVertexArray,v=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,b=n.transform.width/n.transform.height;let w=!1;for(let x=0;x<v.length;x++){const i=v.get(x);if(i.writingMode!==t.WritingMode.vertical||w||0!==x&&v.get(x-1).writingMode===t.WritingMode.horizontal||(w=!0),(i.hidden||i.writingMode===t.WritingMode.vertical)&&!w){ge(i.numGlyphs,g);continue}w=!1;const p=new t.pointGeometry(i.tileAnchorX,i.tileAnchorY),E=u?u(p):[0,0,0],S=h.projection.projectTilePoint(p.x,p.y,c.canonical),M=[S.x+E[0],S.y+E[1],S.z+E[2]],T=[...M,1];if(t.transformMat4$1(T,T,r),!ae(T,m)){ge(i.numGlyphs,g);continue}const A=se(n.transform.cameraToCenterDistance,T[3]),C=t.evaluateSizeForFeature(f,d,i),I=a?C/A:C*A,k=ie(new t.pointGeometry(M[0],M[1]),o,M[2]);if(k.signedDistanceFromCamera<=0){ge(i.numGlyphs,g);continue}let R={};const B=a?null:u,P=he(i,I,!1,l,r,o,s,e.glyphOffsetArray,_,g,y,k.point,p,R,b,B,h.projection,c,a);w=P.useVertical,B&&P.needsFlipping&&(R={}),(P.notEnoughRoom||w||P.needsFlipping&&he(i,I,!0,l,r,o,s,e.glyphOffsetArray,_,g,y,k.point,p,R,b,B,h.projection,c,a).notEnoughRoom)&&ge(i.numGlyphs,g)}i?(e.text.dynamicLayoutVertexBuffer.updateData(g),y&&e.text.globeExtVertexBuffer.updateData(y)):(e.icon.dynamicLayoutVertexBuffer.updateData(g),y&&e.icon.globeExtVertexBuffer.updateData(y))}function ue(t,e,r,n,i,o,s,a,l,u,c,h,f,d,p,m){const g=a.glyphStartIndex+a.numGlyphs,y=a.lineStartIndex,_=a.lineStartIndex+a.lineLength,v=e.getoffsetX(a.glyphStartIndex),b=e.getoffsetX(g-1),w=pe(t*v,r,n,i,o,s,a.segment,y,_,l,u,c,h,f,!0,d,p,m);if(!w)return null;const x=pe(t*b,r,n,i,o,s,a.segment,y,_,l,u,c,h,f,!0,d,p,m);return x?{first:w,last:x}:null}function ce(e,r,n,i){return e.writingMode===t.WritingMode.horizontal&&Math.abs(n.y-r.y)>Math.abs(n.x-r.x)*i?{useVertical:!0}:e.writingMode===t.WritingMode.vertical?r.y<n.y?{needsFlipping:!0}:null:0!==e.flipState&&function(t,e,r){const n=(e.x-t.x)*r;return 0===n||Math.abs((e.y-t.y)/n)>te}(r,n,i)?1===e.flipState?{needsFlipping:!0}:null:r.x>n.x?{needsFlipping:!0}:null}function he(e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g,y,_,v){const b=r/24,w=e.lineOffsetX*b,x=e.lineOffsetY*b;let E;if(e.numGlyphs>1){const r=e.glyphStartIndex+e.numGlyphs,o=e.lineStartIndex,c=e.lineStartIndex+e.lineLength,h=ue(b,l,w,x,n,f,d,e,u,s,p,g,!1,y,_,v);if(!h)return{notEnoughRoom:!0};const S=oe(h.first.point,a).point,M=oe(h.last.point,a).point,T=new t.pointGeometry(S[0],S[1]),A=new t.pointGeometry(M[0],M[1]);if(i&&!n){const t=ce(e,T,A,m);if(e.flipState=t&&t.needsFlipping?1:2,t)return t}E=[h.first];for(let t=e.glyphStartIndex+1;t<r-1;t++)E.push(pe(b*l.getoffsetX(t),w,x,n,f,d,e.segment,o,c,u,s,p,g,!1,!1,y,_,v));E.push(h.last)}else{if(i&&!n){const r=ie(d,o).point,n=e.lineStartIndex+e.segment+1,i=new t.pointGeometry(u.getx(n),u.gety(n)),s=ie(i,o),a=s.signedDistanceFromCamera>0?s.point:de(d,i,r,1,o,void 0,y,_.canonical),l=ce(e,new t.pointGeometry(r[0],r[1]),new t.pointGeometry(a[0],a[1]),m);if(e.flipState=l&&l.needsFlipping?1:2,l)return l}const r=pe(b*l.getoffsetX(e.glyphStartIndex),w,x,n,f,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,s,p,g,!1,!1,y,_,v);if(!r)return{notEnoughRoom:!0};E=[r]}if(h)for(const S of E)t.updateGlobeVertexNormal(h,c.length+0,S.up[0],S.up[1],S.up[2]),t.updateGlobeVertexNormal(h,c.length+1,S.up[0],S.up[1],S.up[2]),t.updateGlobeVertexNormal(h,c.length+2,S.up[0],S.up[1],S.up[2]),t.updateGlobeVertexNormal(h,c.length+3,S.up[0],S.up[1],S.up[2]),t.addDynamicAttributes(c,S.point[0],S.point[1],S.point[2],S.angle);else for(const S of E)t.addDynamicAttributes(c,S.point[0],S.point[1],S.point[2],S.angle);return{}}function fe(e,r,n,i,o){const s=i.projectTilePoint(e.x,e.y,r);if(!o)return ie(s,n,s.z);const a=o(e);return ie(new t.pointGeometry(s.x+a[0],s.y+a[1]),n,s.z+a[2])}function de(e,r,n,i,o,s,a,l){const u=fe(e.add(e.sub(r)._unit()),l,o,a,s).point,c=t.sub([],n,u);return t.scaleAndAdd([],n,c,i/t.length(c))}function pe(e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g,y,_){const v=i?e-r:e+r;let b=v>0?1:-1,w=0;i&&(b*=-1,w=Math.PI),b<0&&(w+=Math.PI);let x=b>0?l+a:l+a+1,E=o,S=o,M=0,T=0;const A=Math.abs(v),C=[],I=[];let k=s;const R=()=>{const e=x-b;return 0===M?s:new t.pointGeometry(c.getx(e),c.gety(e))},B=()=>de(R(),k,S,A-M+1,h,d,g,y.canonical);for(;M+T<=A;){if(x+=b,x<l||x>=u)return null;if(S=E,C.push(E),p&&I.push(k||R()),E=f[x],void 0===E){k=new t.pointGeometry(c.getx(x),c.gety(x));const e=fe(k,y.canonical,h,g,d);E=e.signedDistanceFromCamera>0?f[x]=e.point:B()}else k=null;M+=T,T=t.distance(S,E)}k=k||new t.pointGeometry(c.getx(x),c.gety(x));const P=R();m&&d&&(f[x]=E=void 0===f[x]?E:B(),T=t.distance(S,E));const D=(A-M)/T,L=k.sub(P).mult(D)._add(P),O=t.sub([],E,S),N=t.scaleAndAdd([],S,O,D);let z=[0,0,1],U=O[0],j=O[1];if(_&&(z=g.upVector(y.canonical,L.x,L.y),0!==z[0]||0!==z[1]||1!==z[2])){const e=[1,0,0],r=[0,1,0];e[0]=z[2],e[1]=0,e[2]=-z[0],t.cross(r,z,e),t.normalize(e,e),t.normalize(r,r),U=t.dot(O,e),j=t.dot(O,r)}if(n){const e=t.cross([],z,O);t.normalize(e,e),t.scaleAndAdd(N,N,e,n*b)}const F=w+Math.atan2(j,U);return C.push(N),p&&I.push(L),{point:N,angle:F,path:C,tilePath:I,up:z}}const me=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ge(t,e){for(let r=0;r<t;r++){const t=e.length;e.resize(t+4),e.float32.set(me,4*t)}}function ye(t,e,r){const n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t[3]=r[3]*n+r[7]*i+r[15],t}const _e=100;class ve{constructor(t,e,r=new $t(t.width+200,t.height+200,25),n=new $t(t.width+200,t.height+200,25)){this.transform=t,this.grid=r,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+_e,this.screenBottomBoundary=t.height+_e,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=e}placeCollisionBox(t,e,r,n,i,o,s,a){let l=r.projectedAnchorX,u=r.projectedAnchorY,c=r.projectedAnchorZ;const h=r.elevation,f=r.tileID;if(h&&f){const e=t.getProjection().upVector(f.canonical,r.tileAnchorX,r.tileAnchorY),n=t.getProjection().upVectorScale(f.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e[0]*h*n,u+=e[1]*h*n,c+=e[2]*h*n}const d=this.projectAndGetPerspectiveRatio(s,[l,u,c],r.tileID,"globe"===t.projection.name||!!h||this.transform.pitch>0,t.getProjection()),p=o*d.perspectiveRatio,m=(r.x1*e+n.x-r.padding)*p+d.point.x,g=(r.y1*e+n.y-r.padding)*p+d.point.y,y=(r.x2*e+n.x+r.padding)*p+d.point.x,_=(r.y2*e+n.y+r.padding)*p+d.point.y,v=d.perspectiveRatio<=.55||d.occluded;return!this.isInsideGrid(m,g,y,_)||!i&&this.grid.hitTest(m,g,y,_,a)||v?{box:[],offscreen:!1,occluded:d.occluded}:{box:[m,g,y,_],offscreen:this.isOffscreen(m,g,y,_),occluded:!1}}placeCollisionCircles(e,r,n,i,o,s,a,l,u,c,h,f,d,p,m){const g=[],y=this.transform.elevation,_=y?y.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,e.getProjection()):t=>[0,0,0],v=new t.pointGeometry(n.tileAnchorX,n.tileAnchorY),b=e.getProjection().projectTilePoint(n.tileAnchorX,n.tileAnchorY,m.canonical),w=_(v),x=[b.x+w[0],b.y+w[1],b.z+w[2]],E="globe"===e.projection.name,S=this.projectAndGetPerspectiveRatio(a,[x[0],x[1],x[2]],m,E||!!y||this.transform.pitch>0,e.getProjection()),{perspectiveRatio:M}=S,T=(h?s/M:s*M)/t.ONE_EM,A=ie(new t.pointGeometry(x[0],x[1]),l,x[2]).point,C=S.signedDistanceFromCamera>0?ue(T,o,n.lineOffsetX*T,n.lineOffsetY*T,!1,A,v,n,i,l,{},y&&!h?_:null,h&&!!y,e.getProjection(),m,h):null;let I=!1,k=!1,R=!0;if(C&&!S.occluded){const e=.5*d*M+p,n=new t.pointGeometry(-100,-100),i=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new Jt,s=C.first,a=C.last;let l=[];for(let t=s.path.length-1;t>=1;t--)l.push(s.path[t]);for(let t=1;t<a.path.length;t++)l.push(a.path[t]);const h=2.5*e;if(u){const t=l.map(y&&!E?(t,e)=>{const r=_(e<s.path.length-1?s.tilePath[s.path.length-1-e]:a.tilePath[e-s.path.length+2]);return t[2]=r[2],oe(t,u)}:t=>oe(t,u));l=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let m=[];if(l.length>0){const e=l.map((e=>new t.pointGeometry(e[0],e[1])));let r=1/0,o=-1/0,s=1/0,a=-1/0;for(let t=0;t<e.length;t++)r=Math.min(r,e[t].x),s=Math.min(s,e[t].y),o=Math.max(o,e[t].x),a=Math.max(a,e[t].y);m=r>=n.x&&o<=i.x&&s>=n.y&&a<=i.y?[e]:o<n.x||r>i.x||a<n.y||s>i.y?[]:t.clipLine([e],n.x,n.y,i.x,i.y)}for(const t of m){o.reset(t,.25*e);let n=0;n=o.length<=.5*e?1:Math.ceil(o.paddedLength/h)+1;for(let t=0;t<n;t++){const i=t/Math.max(n-1,1),s=o.lerp(i),a=s.x+_e,l=s.y+_e;g.push(a,l,e,0);const u=a-e,h=l-e,d=a+e,p=l+e;if(R=R&&this.isOffscreen(u,h,d,p),k=k||this.isInsideGrid(u,h,d,p),!r&&this.grid.hitTestCircle(a,l,e,f)&&(I=!0,!c))return{circles:[],offscreen:!1,collisionDetected:I,occluded:!1}}}}return{circles:!c&&I||!k?[]:g,offscreen:R,collisionDetected:I,occluded:S.occluded}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const r=[];let n=1/0,i=1/0,o=-1/0,s=-1/0;for(const c of e){const e=new t.pointGeometry(c.x+_e,c.y+_e);n=Math.min(n,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),s=Math.max(s,e.y),r.push(e)}const a=this.grid.query(n,i,o,s).concat(this.ignoredGrid.query(n,i,o,s)),l={},u={};for(const c of a){const e=c.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const n=[new t.pointGeometry(c.x1,c.y1),new t.pointGeometry(c.x2,c.y1),new t.pointGeometry(c.x2,c.y2),new t.pointGeometry(c.x1,c.y2)];t.polygonIntersectsPolygon(r,n)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===u[e.bucketInstanceId]&&(u[e.bucketInstanceId]=[]),u[e.bucketInstanceId].push(e.featureIndex))}return u}insertCollisionBox(t,e,r,n,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:i},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,r,n,i){const o=e?this.ignoredGrid:this.grid,s={bucketInstanceId:r,featureIndex:n,collisionGroupID:i};for(let a=0;a<t.length;a+=4)o.insertCircle(s,t[a],t[a+1],t[a+2])}projectAndGetPerspectiveRatio(e,r,n,i,o){const s=[r[0],r[1],r[2],1];let a=!1;if(r[2]||this.transform.pitch>0){t.transformMat4$1(s,s,e);const i="globe"===o.name;this.fogState&&n&&!i&&(a=function(e,r,n,i,o,s){const a=s.calculateFogTileMatrix(o),l=[r,n,i];return t.transformMat4(l,l,a),A(e,l,s.pitch,s._fov)}(this.fogState,r[0],r[1],r[2],n.toUnwrapped(),this.transform)>.9)}else ye(s,s,e);return{point:new t.pointGeometry((s[0]/s[3]+1)/2*this.transform.width+_e,(-s[1]/s[3]+1)/2*this.transform.height+_e),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(o)/s[3]*.5,1.5),signedDistanceFromCamera:s[3],occluded:i&&s[2]>s[3]||a}}isOffscreen(t,e,r,n){return r<_e||t>=this.screenRightBoundary||n<_e||e>this.screenBottomBoundary}isInsideGrid(t,e,r,n){return r>=0&&t<this.gridRightBoundary&&n>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function be(e,r,n){const i=r.createTileMatrix(e,e.worldSize,n.toUnwrapped());return t.multiply(new Float32Array(16),e.projMatrix,i)}function we(t,e,r){if(e.projection.name===r.projection.name)return t.projMatrix;const n=r.clone();return n.setProjection(e.projection),be(n,e.getProjection(),t)}function xe(t,e,r){return e.name===r.projection.name?t.projMatrix:be(r,e,t)}class Ee{constructor(t,e,r,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&r?1:0,this.placed=r}isHidden(){return 0===this.opacity&&!this.placed}}class Se{constructor(t,e,r,n,i,o=!1){this.text=new Ee(t?t.text:null,e,r,i),this.icon=new Ee(t?t.icon:null,e,n,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Me{constructor(t,e,r,n=!1){this.text=t,this.icon=e,this.skipFade=r,this.clipped=n}}class Te{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Ae{constructor(t,e,r,n,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=i}}class Ce{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Ie(e,r,n,i,o){const{horizontalAlign:s,verticalAlign:a}=t.getAnchorAlignment(e),l=-(s-.5)*r,u=-(a-.5)*n,c=t.evaluateVariableOffset(e,i);return new t.pointGeometry(l+c[0]*o,u+c[1]*o)}function ke(e,r,n,i,o){const s=new t.pointGeometry(e,r);return n&&s._rotate(i?o:-o),s}class Re{constructor(t,e,r,n,i){this.transform=t.clone(),this.projection=t.projection.name,this.collisionIndex=new ve(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Ce(r),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,r,n,i){const o=n.getBucket(r),s=n.latestFeatureIndex;if(!o||!s||r.id!==o.layerIds[0])return;const a=o.layers[0].layout,l=n.collisionBoxArray,u=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/t.EXTENT,h=n.tileID.toUnwrapped();this.transform.setProjection(o.projection);const f=(d=n.tileID,p=o.getProjection(),m=this.transform,p.name===this.projection?m.calculateProjMatrix(d.toUnwrapped()):be(m,p,d));var d,p,m;const g="map"===a.get("text-pitch-alignment"),y="map"===a.get("text-rotation-alignment");r.compileFilter();const _=r.dynamicFilter(),v=r.dynamicFilterNeedsFeature(),b=this.transform.calculatePixelsToTileUnitsMatrix(n),w=re(f,n.tileID.canonical,g,y,this.transform,o.getProjection(),b);let x=null;if(g){const e=ne(f,n.tileID.canonical,g,y,this.transform,o.getProjection(),b);x=t.multiply([],this.transform.labelPlaneMatrix,e)}let E=null;_&&n.latestFeatureIndex&&(E={unwrappedTileID:h,dynamicFilter:_,dynamicFilterNeedsFeature:v,featureIndex:n.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new Ae(o.bucketInstanceId,s,o.sourceLayerIndex,o.index,n.tileID);const S={bucket:o,layout:a,posMatrix:f,textLabelPlaneMatrix:w,labelToScreenMatrix:x,clippingData:E,scale:u,textPixelRatio:c,holdingForFade:n.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const t of o.sortKeyRanges){const{sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:i}=t;e.push({sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:i,parameters:S})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:S})}attemptAnchorPlacement(t,e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g,y){const _=[h.textOffset0,h.textOffset1],v=Ie(t,r,n,_,i),b=this.collisionIndex.placeCollisionBox(d,i,e,ke(v.x,v.y,o,s,this.transform.angle),c,a,l,u.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(d,d.getSymbolInstanceIconSize(y,this.transform.zoom,f),m,ke(v.x,v.y,o,s,this.transform.angle),c,a,l,u.predicate).box.length)&&b.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(e=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:_,width:r,height:n,anchor:t,textScale:i,prevAnchor:e},this.markUsedJustification(d,t,h,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,h),this.placedOrientations[h.crossTileID]=p),{shift:v,placedGlyphBoxes:b}}}placeLayerBucketPart(e,r,n,i){const{bucket:o,layout:s,posMatrix:a,textLabelPlaneMatrix:l,labelToScreenMatrix:u,clippingData:c,textPixelRatio:h,holdingForFade:f,collisionBoxArray:d,partiallyEvaluatedTextSize:p,partiallyEvaluatedIconSize:m,collisionGroup:g}=e.parameters,y=s.get("text-optional"),_=s.get("icon-optional"),v=s.get("text-allow-overlap"),b=s.get("icon-allow-overlap"),w="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),E="none"!==s.get("icon-text-fit"),S="viewport-y"===s.get("symbol-z-order");this.transform.setProjection(o.projection);let M=v&&(b||!o.hasIconData()||_),T=b&&(v||!o.hasTextData()||y);!o.collisionArrays&&d&&o.deserializeCollisionBoxes(d),n&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,d);const A=(e,i,d)=>{if(c){const n={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(c.dynamicFilterNeedsFeature){const t=this.retainedQueryData[o.bucketInstanceId];i=c.featureIndex.loadFeature({featureIndex:e.featureIndex,bucketIndex:t.bucketIndex,sourceLayerIndex:t.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,c.dynamicFilter)(n,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new t.pointGeometry(e.tileAnchorX,e.tileAnchorY),this.transform.calculateDistanceTileData(c.unwrappedTileID)))return this.placements[e.crossTileID]=new Me(!1,!1,!1,!0),void(r[e.crossTileID]=!0)}if(r[e.crossTileID])return;if(f)return void(this.placements[e.crossTileID]=new Me(!1,!1,!1));let S=!1,A=!1,C=!0,I=!1,k=!1,R=null,B={box:null,offscreen:null,occluded:null},P={box:null,offscreen:null,occluded:null},D=null,L=null,O=null,N=0,z=0,U=0;d.textFeatureIndex?N=d.textFeatureIndex:e.useRuntimeCollisionCircles&&(N=e.featureIndex),d.verticalTextFeatureIndex&&(z=d.verticalTextFeatureIndex);const j=t=>{t.tileID=this.retainedQueryData[o.bucketInstanceId].tileID,(this.transform.elevation||t.elevation)&&(t.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[o.bucketInstanceId].tileID,t.tileAnchorX,t.tileAnchorY):0)},F=d.textBox;if(F){j(F);const r=r=>{let n=t.WritingMode.horizontal;if(o.allowVerticalPlacement&&!r&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,n=t,this.markUsedOrientation(o,n,e))}return n},n=(r,n)=>{if(o.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&d.verticalTextBox){for(const e of o.writingModes)if(e===t.WritingMode.vertical?(B=n(),P=B):B=r(),B&&B.box&&B.box.length)break}else B=r()};if(s.get("text-variable-anchor")){let l=s.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];l.indexOf(t.anchor)>0&&(l=l.filter((e=>e!==t.anchor)),l.unshift(t.anchor))}const u=(t,r,n)=>{const s=o.getSymbolInstanceTextSize(p,e,this.transform.zoom,i),u=(t.x2-t.x1)*s+2*t.padding,c=(t.y2-t.y1)*s+2*t.padding,f=E&&!b?r:null;f&&j(f);let d={box:[],offscreen:!1,occluded:!1};const y=v?2*l.length:l.length;for(let _=0;_<y;++_){const r=this.attemptAnchorPlacement(l[_%l.length],t,u,c,s,w,x,h,a,g,_>=l.length,e,i,o,n,f,p,m);if(r&&(d=r.placedGlyphBoxes,d&&d.box&&d.box.length)){S=!0,R=r.shift;break}}return d};n((()=>u(F,d.iconBox,t.WritingMode.horizontal)),(()=>{const r=d.verticalTextBox;return r&&j(r),o.allowVerticalPlacement&&!(B&&B.box&&B.box.length)&&e.numVerticalGlyphVertices>0&&r?u(r,d.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),B&&(S=B.box,C=B.offscreen,I=B.occluded);const c=r(B&&B.box);if(!S&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(o,t.anchor,e,c))}}else{const s=(r,n)=>{const s=o.getSymbolInstanceTextSize(p,e,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(o,s,r,new t.pointGeometry(0,0),v,h,a,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,n,e),this.placedOrientations[e.crossTileID]=n),l};n((()=>s(F,t.WritingMode.horizontal)),(()=>{const r=d.verticalTextBox;return o.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&r?(j(r),s(r,t.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),r(B&&B.box&&B.box.length)}}if(D=B,S=D&&D.box&&D.box.length>0,C=D&&D.offscreen,I=D&&D.occluded,e.useRuntimeCollisionCircles){const r=o.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex),i=t.evaluateSizeForFeature(o.textSizeData,p,r),c=s.get("text-padding");L=this.collisionIndex.placeCollisionCircles(o,v,r,o.lineVertexArray,o.glyphOffsetArray,i,a,l,u,n,x,g.predicate,e.collisionCircleDiameter*i/t.ONE_EM,c,this.retainedQueryData[o.bucketInstanceId].tileID),S=v||L.circles.length>0&&!L.collisionDetected,C=C&&L.offscreen,I=L.occluded}if(d.iconFeatureIndex&&(U=d.iconFeatureIndex),d.iconBox){const e=e=>{j(e);const r=E&&R?ke(R.x,R.y,w,x,this.transform.angle):new t.pointGeometry(0,0),n=o.getSymbolInstanceIconSize(m,this.transform.zoom,i);return this.collisionIndex.placeCollisionBox(o,n,e,r,b,h,a,g.predicate)};P&&P.box&&P.box.length&&d.verticalIconBox?(O=e(d.verticalIconBox),A=O.box.length>0):(O=e(d.iconBox),A=O.box.length>0),C=C&&O.offscreen,k=O.occluded}const V=y||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,G=_||0===e.numIconVertices;if(V||G?G?V||(A=A&&S):S=A&&S:A=S=A&&S,S&&D&&D.box&&this.collisionIndex.insertCollisionBox(D.box,s.get("text-ignore-placement"),o.bucketInstanceId,P&&P.box&&z?z:N,g.ID),A&&O&&this.collisionIndex.insertCollisionBox(O.box,s.get("icon-ignore-placement"),o.bucketInstanceId,U,g.ID),L&&(S&&this.collisionIndex.insertCollisionCircles(L.circles,s.get("text-ignore-placement"),o.bucketInstanceId,N,g.ID),n)){const t=o.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new Te);for(let r=0;r<L.circles.length;r+=4)e.circles.push(L.circles[r+0]),e.circles.push(L.circles[r+1]),e.circles.push(L.circles[r+2]),e.circles.push(L.collisionDetected?1:0)}const q="globe"!==o.projection.name;M=M&&(q||!I),T=T&&(q||!k),this.placements[e.crossTileID]=new Me(S||M,A||T,C||o.justReloaded),r[e.crossTileID]=!0};if(S){const t=o.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const r=t[e];A(o.symbolInstances.get(r),r,o.collisionArrays[r])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)A(o.symbolInstances.get(t),t,o.collisionArrays[t]);if(n&&o.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[o.bucketInstanceId];t.invert(e.invProjMatrix,a),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(e,r,n,i){let o;o=i===t.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(r)];const s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];for(const t of s)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:n.crossTileID)}markUsedOrientation(e,r,n){const i=r===t.WritingMode.horizontal||r===t.WritingMode.horizontalOnly?r:0,o=r===t.WritingMode.vertical?r:0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];for(const t of s)e.text.placedSymbolArray.get(t).placedOrientation=i;n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let r=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const n=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},s=e?e.placedOrientations:{};for(const a in this.placements){const t=this.placements[a],e=i[a];e?(this.opacities[a]=new Se(e,n,t.text,t.icon,null,t.clipped),r=r||t.text!==e.text.placed||t.icon!==e.icon.placed):(this.opacities[a]=new Se(null,n,t.text,t.icon,t.skipFade,t.clipped),r=r||t.text||t.icon)}for(const a in i){const t=i[a];if(!this.opacities[a]){const e=new Se(t,n,!1,!1);e.isHidden()||(this.opacities[a]=e,r=r||t.text.placed||t.icon.placed)}}for(const a in o)this.variableOffsets[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.variableOffsets[a]=o[a]);for(const a in s)this.placedOrientations[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.placedOrientations[a]=s[a]);r?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const r={};for(const n of e){const e=n.getBucket(t);e&&n.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,r,n.collisionBoxArray)}}updateBucketOpacities(e,r,n){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const i=e.layers[0].layout,o=!!e.layers[0].dynamicFilter(),s=new Se(null,0,!1,!1,!0),a=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),u=i.get("text-variable-anchor"),c="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),f="none"!==i.get("icon-text-fit"),d=new Se(null,0,a&&(l||!e.hasIconData()||i.get("icon-optional")),l&&(a||!e.hasTextData()||i.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(n);const p=(t,e,r)=>{for(let n=0;n<e/4;n++)t.opacityVertexArray.emplaceBack(r)};let m=0;for(let g=0;g<e.symbolInstances.length;g++){const n=e.symbolInstances.get(g),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:a,crossTileID:l}=n;let y=this.opacities[l];r[l]?y=s:y||(y=d,this.opacities[l]=y),r[l]=!0;const _=i>0||a>0,v=n.numIconVertices>0,b=this.placedOrientations[n.crossTileID],w=b===t.WritingMode.vertical,x=b===t.WritingMode.horizontal||b===t.WritingMode.horizontalOnly;if(!_&&!v||y.isHidden()||m++,_){const t=je(y.text);p(e.text,i,w?Fe:t),p(e.text,a,x?Fe:t);const r=y.text.isHidden();[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=r||w?1:0)})),n.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).hidden=r||x?1:0);const o=this.variableOffsets[n.crossTileID];o&&this.markUsedJustification(e,o.anchor,n,b);const s=this.placedOrientations[n.crossTileID];s&&(this.markUsedJustification(e,"left",n,s),this.markUsedOrientation(e,s,n))}if(v){const t=je(y.icon);n.placedIconSymbolIndex>=0&&(p(e.icon,n.numIconVertices,w?Fe:t),e.icon.placedSymbolArray.get(n.placedIconSymbolIndex).hidden=y.icon.isHidden()),n.verticalPlacedIconSymbolIndex>=0&&(p(e.icon,n.numVerticalIconVertices,x?Fe:t),e.icon.placedSymbolArray.get(n.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const r=e.collisionArrays[g];if(r){let n=new t.pointGeometry(0,0),i=!0;if(r.textBox||r.verticalTextBox){if(u){const t=this.variableOffsets[l];t?(n=Ie(t.anchor,t.width,t.height,t.textOffset,t.textScale),c&&n._rotate(h?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!y.clipped),r.textBox&&Be(e.textCollisionBox.collisionVertexArray,y.text.placed,!i||w,n.x,n.y),r.verticalTextBox&&Be(e.textCollisionBox.collisionVertexArray,y.text.placed,!i||x,n.x,n.y)}const s=i&&Boolean(!x&&r.verticalIconBox);r.iconBox&&Be(e.iconCollisionBox.collisionVertexArray,y.icon.placed,s,f?n.x:0,f?n.y:0),r.verticalIconBox&&Be(e.iconCollisionBox.collisionVertexArray,y.icon.placed,!s,f?n.x:0,f?n.y:0)}}}if(e.fullyClipped=0===m,e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const r=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*r>t}setStale(){this.stale=!0}}function Be(t,e,r,n,i){t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0),t.emplaceBack(e?1:0,r?1:0,n||0,i||0)}const Pe=Math.pow(2,25),De=Math.pow(2,24),Le=Math.pow(2,17),Oe=Math.pow(2,16),Ne=Math.pow(2,9),ze=Math.pow(2,8),Ue=Math.pow(2,1);function je(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,r=Math.floor(127*t.opacity);return r*Pe+e*De+r*Le+e*Oe+r*Ne+e*ze+r*Ue+e}const Fe=0;class Ve{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,r,n,i){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,n,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;){const t=o[this._currentPartIndex];if(e.placeLayerBucketPart(t,this._seenCrossTileIDs,r,0===t.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class Ge{constructor(t,e,r,n,i,o,s,a){this.placement=new Re(t,i,o,s,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(e,r,n){const i=t.exported.now(),o=()=>{const e=t.exported.now()-i;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=r[e[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=i)&&(!t.maxzoom||t.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Ve(t)),this._inProgressLayer.continuePlacement(n[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const qe=512/t.EXTENT/2;class Ke{constructor(t,e,r){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(let n=0;n<e.length;n++){const r=e.get(n),i=r.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}}getScaledCoordinates(e,r){const n=qe/Math.pow(2,r.canonical.z-this.tileID.canonical.z);return{x:Math.floor((r.canonical.x*t.EXTENT+e.tileAnchorX)*n),y:Math.floor((r.canonical.y*t.EXTENT+e.tileAnchorY)*n)}}findMatches(t,e,r){const n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let i=0;i<t.length;i++){const o=t.get(i);if(o.crossTileID)continue;const s=this.indexedSymbolInstances[o.key];if(!s)continue;const a=this.getScaledCoordinates(o,e);for(const t of s)if(Math.abs(t.coord.x-a.x)<=n&&Math.abs(t.coord.y-a.y)<=n&&!r[t.crossTileID]){r[t.crossTileID]=!0,o.crossTileID=t.crossTileID;break}}}}class We{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ze{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const r in this.indexes){const t=this.indexes[r],n={};for(const r in t){const i=t[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}this.indexes[r]=n}this.lng=t}addBucket(t,e,r){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const n=this.usedCrossTileIDs[t.overscaledZ];for(const i in this.indexes){const r=this.indexes[i];if(Number(i)>t.overscaledZ)for(const i in r){const o=r[i];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,n)}else{const o=r[t.scaledTo(Number(i)).key];o&&o.findMatches(e.symbolInstances,t,n)}}for(let i=0;i<e.symbolInstances.length;i++){const t=e.symbolInstances.get(i);t.crossTileID||(t.crossTileID=r.generate(),n[t.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ke(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const r in e.indexedSymbolInstances)for(const n of e.indexedSymbolInstances[r])delete this.usedCrossTileIDs[t][n.crossTileID]}removeStaleBuckets(t){let e=!1;for(const r in this.indexes){const n=this.indexes[r];for(const i in n)t[n[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[i]),delete n[i],e=!0)}return e}}class He{constructor(){this.layerIndexes={},this.crossTileIDs=new We,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,r,n){let i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new Ze);let o=!1;const s={};"globe"!==n.name&&i.handleWrapJump(r);for(const a of e){const e=a.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(a.tileID,e,this.crossTileIDs)&&(o=!0),s[e.bucketInstanceId]=!0)}return i.removeStaleBuckets(s)&&(o=!0),o}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const r in this.layerIndexes)e[r]||delete this.layerIndexes[r]}}const Qe=(e,r)=>t.emitValidationErrors(e,r&&r.filter((t=>"source.canvas"!==t.identifier))),Xe=t.pick(qt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Ye=t.pick(qt,["setCenter","setZoom","setBearing","setPitch"]),Je={version:8,layers:[],sources:{}},$e={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class tr extends t.Evented{constructor(e,r={}){super(),this.map=e,this.dispatcher=new B(Ft(),this),this.imageManager=new b,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,r.localFontFamily?t.LocalGlyphMode.all:r.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,r.localFontFamily||r.localIdeographFontFamily),this.lineAtlas=new t.LineAtlas(256,512),this.crossTileSymbolIndex=new He,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const n=this;this._rtlTextPluginCallback=tr.registerForPluginStateChange((e=>{n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,r)=>{if(t.triggerPluginCompletionEvent(e),r&&r.every((t=>t)))for(const t in n._sourceCaches){const e=n._sourceCaches[t],r=e.getSource().type;"vector"!==r&&"geojson"!==r||e.reload()}}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const r in this._layers){const t=this._layers[r];t.source===e.id&&this._validateLayer(t)}}))}loadURL(e,r={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const n="boolean"==typeof r.validate?r.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,r.accessToken);const i=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(i,((e,r)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):r&&this._load(r,n)}))}loadJSON(e,r={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==r.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Je,!1)}_updateLayerCount(t,e){const r=e?1:-1;t.is3D()&&(this._num3DLayers+=r),"circle"===t.type&&(this._numCircleLayers+=r),"symbol"===t.type&&(this._numSymbolLayers+=r)}_load(e,r){if(r&&Qe(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=t.clone$1(e),this._updateMapProjection();for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const n=Gt(this.stylesheet.layers);this._order=n.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let i of n)i=t.createStyleLayer(i),i.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=i,this._serializedLayers[i.id]=i.serialize(),this._updateLayerCount(i,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new E(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(t){t?this.stylesheet.projection=t:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(e){this._spriteRequest=function(e,r,n){let i,o,s;const a=t.exported.devicePixelRatio>1?"@2x":"";let l=t.getJSON(r.transformRequest(r.normalizeSpriteURL(e,a,".json"),t.ResourceType.SpriteJSON),((t,e)=>{l=null,s||(s=t,i=e,c())})),u=t.getImage(r.transformRequest(r.normalizeSpriteURL(e,a,".png"),t.ResourceType.SpriteImage),((t,e)=>{u=null,s||(s=t,o=e,c())}));function c(){if(s)n(s);else if(i&&o){const e=t.exported.getImageData(o),r={};for(const n in i){const{width:o,height:s,x:a,y:l,sdf:u,pixelRatio:c,stretchX:h,stretchY:f,content:d}=i[n],p=new t.RGBAImage({width:o,height:s});t.RGBAImage.copy(e,p,{x:a,y:l},{x:0,y:0},{width:o,height:s}),r[n]={data:p,pixelRatio:c,sdf:u,stretchX:h,stretchY:f,content:d}}n(null,r)}}return{cancel(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,((e,r)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(r)for(const t in r)this.imageManager.addImage(t,r[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const r=this.getSource(e.source);if(!r)return;const n=e.sourceLayer;n&&("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${n}" does not exist on source "${r.id}" as specified by style layer "${e.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const r of t){const t=this._layers[r];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&$e[t.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const r=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(t.length||r.length)&&this._updateWorkerLayers(t,r);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const n in this._updatedPaintProps)this._layers[n].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}const n={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];n[t]=e.used,e.used=!1}for(const t of this._order){const r=this._layers[t];if(r.recalculate(e,this._availableImages),!r.isHidden(e.zoom)){const t=this._getLayerSourceCache(r);t&&(t.used=!0)}const n=this.map.painter;if(n){const t=r.getProgramIds();if(!t)continue;const i=r.getProgramConfiguration(e.zoom);for(const e of t)n.useProgram(e,i)}}for(const i in n){const e=this._sourceCaches[i];n[i]!==e.used&&e.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:e.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),r&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(r){if(this._checkLoaded(),Qe(this,t.validateStyle(r)))return!1;(r=t.clone$1(r)).layers=Gt(r.layers);const n=function(t,r){if(!t)return[{command:qt.setStyle,args:[r]}];let n=[];try{if(!e(t.version,r.version))return[{command:qt.setStyle,args:[r]}];e(t.center,r.center)||n.push({command:qt.setCenter,args:[r.center]}),e(t.zoom,r.zoom)||n.push({command:qt.setZoom,args:[r.zoom]}),e(t.bearing,r.bearing)||n.push({command:qt.setBearing,args:[r.bearing]}),e(t.pitch,r.pitch)||n.push({command:qt.setPitch,args:[r.pitch]}),e(t.sprite,r.sprite)||n.push({command:qt.setSprite,args:[r.sprite]}),e(t.glyphs,r.glyphs)||n.push({command:qt.setGlyphs,args:[r.glyphs]}),e(t.transition,r.transition)||n.push({command:qt.setTransition,args:[r.transition]}),e(t.light,r.light)||n.push({command:qt.setLight,args:[r.light]}),e(t.fog,r.fog)||n.push({command:qt.setFog,args:[r.fog]}),e(t.projection,r.projection)||n.push({command:qt.setProjection,args:[r.projection]});const i={},o=[];!function(t,r,n,i){let o;for(o in r=r||{},t=t||{})t.hasOwnProperty(o)&&(r.hasOwnProperty(o)||Wt(o,n,i));for(o in r)r.hasOwnProperty(o)&&(t.hasOwnProperty(o)?e(t[o],r[o])||("geojson"===t[o].type&&"geojson"===r[o].type&&Ht(t,r,o)?n.push({command:qt.setGeoJSONSourceData,args:[o,r[o].data]}):Zt(o,r,n,i)):Kt(o,r,n))}(t.sources,r.sources,o,i);const s=[];t.layers&&t.layers.forEach((t=>{t.source&&i[t.source]?n.push({command:qt.removeLayer,args:[t.id]}):s.push(t)}));let a=t.terrain;a&&i[a.source]&&(n.push({command:qt.setTerrain,args:[void 0]}),a=void 0),n=n.concat(o),e(a,r.terrain)||n.push({command:qt.setTerrain,args:[r.terrain]}),function(t,r,n){r=r||[];const i=(t=t||[]).map(Xt),o=r.map(Xt),s=t.reduce(Yt,{}),a=r.reduce(Yt,{}),l=i.slice(),u=Object.create(null);let c,h,f,d,p,m,g;for(c=0,h=0;c<i.length;c++)f=i[c],a.hasOwnProperty(f)?h++:(n.push({command:qt.removeLayer,args:[f]}),l.splice(l.indexOf(f,h),1));for(c=0,h=0;c<o.length;c++)f=o[o.length-1-c],l[l.length-1-c]!==f&&(s.hasOwnProperty(f)?(n.push({command:qt.removeLayer,args:[f]}),l.splice(l.lastIndexOf(f,l.length-h),1)):h++,m=l[l.length-c],n.push({command:qt.addLayer,args:[a[f],m]}),l.splice(l.length-c,0,f),u[f]=!0);for(c=0;c<o.length;c++)if(f=o[c],d=s[f],p=a[f],!u[f]&&!e(d,p))if(e(d.source,p.source)&&e(d["source-layer"],p["source-layer"])&&e(d.type,p.type)){for(g in Qt(d.layout,p.layout,n,f,null,qt.setLayoutProperty),Qt(d.paint,p.paint,n,f,null,qt.setPaintProperty),e(d.filter,p.filter)||n.push({command:qt.setFilter,args:[f,p.filter]}),e(d.minzoom,p.minzoom)&&e(d.maxzoom,p.maxzoom)||n.push({command:qt.setLayerZoomRange,args:[f,p.minzoom,p.maxzoom]}),d)d.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Qt(d[g],p[g],n,f,g.slice(6),qt.setPaintProperty):e(d[g],p[g])||n.push({command:qt.setLayerProperty,args:[f,g,p[g]]}));for(g in p)p.hasOwnProperty(g)&&!d.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Qt(d[g],p[g],n,f,g.slice(6),qt.setPaintProperty):e(d[g],p[g])||n.push({command:qt.setLayerProperty,args:[f,g,p[g]]}))}else n.push({command:qt.removeLayer,args:[f]}),m=l[l.lastIndexOf(f)+1],n.push({command:qt.addLayer,args:[p,m]})}(s,r.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:qt.setStyle,args:[r]}]}return n}(this.serialize(),r).filter((t=>!(t.command in Ye)));if(0===n.length)return!1;const i=n.filter((t=>!(t.command in Xe)));if(i.length>0)throw new Error(`Unimplemented: ${i.map((t=>t.command)).join(", ")}.`);return n.forEach((t=>{"setTransition"!==t.command&&"setProjection"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=r,this._updateMapProjection(),!0}addImage(e,r){return this.getImage(e)?this.fire(new t.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(e,r),this._afterImageUpdated(e),this)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){return this.getImage(e)?(this.imageManager.removeImage(e),this._afterImageUpdated(e),this):this.fire(new t.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(e,r,n={}){if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(t.validateSource,`sources.${e}`,r,null,n))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const i=Bt(e,r,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(e),source:i.serialize(),sourceId:e})));const o=r=>{const n=(r?"symbol:":"other:")+e,o=this._sourceCaches[n]=new t.SourceCache(n,i,r);(r?this._symbolSourceCaches:this._otherSourceCaches)[e]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==r.type&&"geojson"!==r.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const r=this.getSource(e);if(!r)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${i}" is using it.`)));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while terrain is using it.`)));const n=this._getSourceCaches(e);for(const i of n)delete this._sourceCaches[i.id],delete this._updatedSources[i.id],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i.getSource().id})),i.setEventedParent(null),i.clearTiles();return delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],r.setEventedParent(null),r.onRemove&&r.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}addLayer(e,r,n={}){this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let o;if("custom"===e.type){if(Qe(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateLayer,`layers.${i}`,e,{arrayIndex:-1},n))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const s=r?this._order.indexOf(r):this._order.length;if(r&&-1===s)return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${r}" does not exist on this map.`)));this._order.splice(s,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const a=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&a&&"custom"!==o.type){const t=this._removedLayers[i];delete this._removedLayers[i],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",a.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,r){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===r)return;const n=this._order.indexOf(e);this._order.splice(n,1);const i=r?this._order.indexOf(r):this._order.length;r&&-1===i?this.fire(new t.ErrorEvent(new Error(`Layer with id "${r}" does not exist on this map.`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const r=this._layers[e];if(!r)return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be removed.`)));r.setEventedParent(null),this._updateLayerCount(r,!1);const n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,r,n){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===r&&i.maxzoom===n||(null!=r&&(i.minzoom=r),null!=n&&(i.maxzoom=n),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(r,n,i={}){this._checkLoaded();const o=this.getLayer(r);if(o){if(!e(o.filter,n))return null==n?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateFilter,`layers.${o.id}.filter`,n,{layerType:o.type},i)||(o.filter=t.clone$1(n),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be filtered.`)))}getFilter(e){const r=this.getLayer(e);return r&&t.clone$1(r.filter)}setLayoutProperty(r,n,i,o={}){this._checkLoaded();const s=this.getLayer(r);s?e(s.getLayoutProperty(n),i)||(s.setLayoutProperty(n,i,o),this._updateLayer(s)):this.fire(new t.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(e,r){const n=this.getLayer(e);if(n)return n.getLayoutProperty(r);this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style.`)))}setPaintProperty(r,n,i,o={}){this._checkLoaded();const s=this.getLayer(r);s?e(s.getPaintProperty(n),i)||(s.setPaintProperty(n,i,o)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new t.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,e){const r=this.getLayer(t);return r&&r.getPaintProperty(e)}setFeatureState(e,r){this._checkLoaded();const n=e.source,i=e.sourceLayer,o=this.getSource(n);if(!o)return void this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const s=o.type;if("geojson"===s&&i)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===s&&!i)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const a=this._getSourceCaches(n);for(const t of a)t.setFeatureState(i,e.id,r)}removeFeatureState(e,r){this._checkLoaded();const n=e.source,i=this.getSource(n);if(!i)return void this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const o=i.type,s="vector"===o?e.sourceLayer:void 0;if("vector"===o&&!s)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(r&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const a=this._getSourceCaches(n);for(const t of a)t.removeFeatureState(s,e.id,r)}getFeatureState(e){this._checkLoaded();const r=e.source,n=e.sourceLayer,i=this.getSource(r);if(i){if("vector"!==i.type||n)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(r)[0].getFeatureState(n,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const r=this._sourceCaches[t].getSource();e[r.id]||(e[r.id]=r.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:e,layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0,t.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,r={},n=[];for(let o=this._order.length-1;o>=0;o--){const i=this._order[o];if(e(i)){r[i]=o;for(const e of t){const t=e[i];if(t)for(const e of t)n.push(e)}}}n.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const s=this._order[o];if(e(s))for(let t=n.length-1;t>=0;t--){const e=n[t].feature;if(r[e.layer.id]<o)break;i.push(e),n.pop()}else for(const e of t){const t=e[s];if(t)for(const e of t)i.push(e.feature)}}return i}queryRenderedFeatures(e,r,n){r&&r.filter&&this._validate(t.validateFilter,"queryRenderedFeatures.filter",r.filter,null,r);const i={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of r.layers){const r=this._layers[e];if(!r)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[r.source]=!0}}const o=[];r.availableImages=this._availableImages;const s=r&&r.layers?r.layers.some((t=>{const e=this.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),a=D.createFromScreenPoints(e,n);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;r.layers&&!i[e]||o.push(Dt(this._sourceCaches[t],this._layers,this._serializedLayers,a,r,n,s,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(t,e,r,n,i,o,s){const a={},l=o.queryRenderedSymbols(n),u=[];for(const c of Object.keys(l).map(Number))u.push(s[c]);u.sort(Ot);for(const c of u){const r=c.featureIndex.lookupSymbolFeatures(l[c.bucketInstanceId],e,c.bucketIndex,c.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(const t in r){const e=a[t]=a[t]||[],n=r[t];n.sort(((t,e)=>{const r=c.featureSortOrder;if(r){const n=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex}));for(const t of n)e.push(t)}}for(const c in a)a[c].forEach((e=>{const n=e.feature,i=r(t[c]).getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return a}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),a.screenGeometry,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,r){r&&r.filter&&this._validate(t.validateFilter,"querySourceFeatures.filter",r.filter,null,r);const n=this._getSourceCaches(e);let i=[];for(const t of n)i=i.concat(Lt(t,r));return i}addSourceType(t,e,r){return tr.getSourceType(t)?r(new Error(`A source type called "${t}" already exists.`)):(tr.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))}getLight(){return this.light.getLight()}setLight(t,r={}){this._checkLoaded();const n=this.light.getLight();let i=!1;for(const s in t)if(!e(t[s],n[s])){i=!0;break}if(!i)return;const o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(t,r),this.light.updateTransitions(o)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(r,n=1){if(this._checkLoaded(),!r)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===n){if("object"==typeof r.source){const e="terrain-dem-src";this.addSource(e,r.source),r=t.clone$1(r),r=t.extend(r,{source:e})}if(this._validate(t.validateTerrain,"terrain",r))return}if(!this.terrain||this.terrain&&n!==this.terrain.drapeRenderMode)this._createTerrain(r,n);else{const n=this.terrain,i=n.get();for(const e of Object.keys(t.spec.terrain))!r.hasOwnProperty(e)&&t.spec.terrain[e].default&&(r[e]=t.spec.terrain[e].default);for(const t in r)if(!e(r[t],i[t])){n.set(r),this.stylesheet.terrain=r;const t=this._setTransitionParameters({duration:0});n.updateTransitions(t);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(t){const e=this.fog=new R(t,this.map.transform);this.stylesheet.fog=t;const r=this._setTransitionParameters({duration:0});e.updateTransitions(r)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const t of this.map._markers)t._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const r=this.fog,n=r.get();0===Object.keys(t).length&&r.set(t);for(const i in t)if(!e(t[i],n[i])){r.set(t),this.stylesheet.fog=t;const e=this._setTransitionParameters({duration:0});r.updateTransitions(e);break}}else this._createFog(t);this._markersNeedUpdate=!0}_setTransitionParameters(e){return{now:t.exported.now(),transition:t.extend(e,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter((t=>this.isLayerDraped(this._layers[t]))),e=this._order.filter((t=>!this.isLayerDraped(this._layers[t])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(t,e){const r=this.terrain=new T(t,e);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const n=this._setTransitionParameters({duration:0});r.updateTransitions(n)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_forceSymbolLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"symbol"===e.type&&this._updateLayer(e)}}_validate(e,r,n,i,o={}){return(!o||!1!==o.validate)&&Qe(this,e.call(t.validateStyle,t.extend({key:r,style:this.serialize(),value:n,styleSpec:t.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const r of e)r.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const r of e)r.resume(),r.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,r,n,i,o=!1){let s=!1,a=!1;const l={};for(const t of this._order){const r=this._layers[t];if("symbol"!==r.type)continue;if(!l[r.source]){const t=this._getLayerSourceCache(r);if(!t)continue;l[r.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(r,l[r.source],e.center.lng,e.projection);s=s||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Ge(e,this._order,o,r,n,i,this.placement,this.fog&&e.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),a=!0),s&&this.pauseablePlacement.placement.setStale()),a||s)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,r){this.imageManager.getImages(e.icons,r),this._updateTilesForChangedImages();const n=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};n(this._otherSourceCaches[e.source]),n(this._symbolSourceCaches[e.source])}getGlyphs(t,e,r){this.glyphManager.getGlyphs(e.stacks,r)}getResource(e,r,n){return t.makeRequest(r,n)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}_isSourceCacheLoaded(e){const r=this._getSourceCaches(e);return 0===r.length?(this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`))),!1):r.every((t=>t.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}tr.getSourceType=function(t){return Rt[t]},tr.setSourceType=function(t,e){Rt[t]=e},tr.registerForPluginStateChange=t.registerForPluginStateChange;var er="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",rr="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",nr="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",ir="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",or="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let sr={},ar={};const lr=[];dr(er,lr),dr(nr,lr),dr(ir,lr),dr(or,lr),sr=pr("",nr),ar=pr(or,ir);const ur=pr("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),cr=er,hr="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var fr={background:pr("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:pr("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:pr("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);\n#else \nmat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:pr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\nvec3 pos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:pr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:pr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:pr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:pr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:pr("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:pr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:pr("uniform lowp vec3 u_lightpos;varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;varying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\nvoid main() {vec4 color=v_color;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(v_normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying highp vec3 v_normal;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;vec3 pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_normal=normal;v_depth=gl_Position.w;\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:pr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:pr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:pr("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nhighp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nvec4 out_color=color;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:pr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:pr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:pr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:pr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:pr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:pr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:pr("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:pr("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",rr),skyboxGradient:pr("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",rr),skyboxCapture:pr("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:pr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\nvec4 color=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;\n#ifdef GLOBE_POLES\nvec3 up_vector=normalize(globe_pos)*u_tile_up_scale;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:pr("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);\n#ifdef PROJECTION_GLOBE_VIEW\nfloat globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nfloat horizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function dr(t,e){const r=t.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let n of r)if(n=n.trim(),"#"===n[0]&&n.includes("if")&&!n.includes("endif")){n=n.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const t=n.split(" ");for(const r of t)e.includes(r)||e.push(r)}}function pr(t,e){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},o=[...lr];return dr(t,o),dr(e,o),{fragmentSource:t=t.replace(r,((t,e,r,n,o)=>(i[o]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${o}\nvarying ${r} ${n} ${o};\n#else\nuniform ${r} ${n} u_${o};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${o}\n    ${r} ${n} ${o} = u_${o};\n#endif\n`))),vertexSource:e=e.replace(r,((t,e,r,n,o)=>{const s="float"===n?"vec2":"vec4",a=o.match(/color/)?"color":s;return i[o]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${r} ${s} a_${o};\nvarying ${r} ${n} ${o};\n#else\nuniform ${r} ${n} u_${o};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = a_${o};\n#else\n    ${r} ${n} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = unpack_mix_${a}(a_${o}, u_${o}_t);\n#else\n    ${r} ${n} ${o} = u_${o};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${r} ${s} a_${o};\n#else\nuniform ${r} ${n} u_${o};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${r} ${n} ${o} = a_${o};\n#else\n    ${r} ${n} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${r} ${n} ${o} = unpack_mix_${a}(a_${o}, u_${o}_t);\n#else\n    ${r} ${n} ${o} = u_${o};\n#endif\n`})),staticAttributes:n,usedDefines:o}}class mr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(t,e,r,n,i,o,s){this.context=t;let a=this.boundPaintVertexBuffers.length!==n.length;for(let u=0;!a&&u<n.length;u++)this.boundPaintVertexBuffers[u]!==n[u]&&(a=!0);let l=this.boundDynamicVertexBuffers.length!==s.length;for(let u=0;!l&&u<s.length;u++)this.boundDynamicVertexBuffers[u]!==s[u]&&(l=!0);if(!t.extVertexArrayObject||!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==r||a||l||this.boundIndexBuffer!==i||this.boundVertexOffset!==o)this.freshBind(e,r,n,i,o,s);else{t.bindVertexArrayOES.set(this.vao);for(const t of s)t&&t.bind();i&&i.dynamicDraw&&i.bind()}}freshBind(t,e,r,n,i,o){let s;const a=t.numAttributes,l=this.context,u=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=o;else{s=l.currentNumAttributes||0;for(let t=a;t<s;t++)u.disableVertexAttribArray(t)}e.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,i);for(const c of r)c.enableAttributes(u,t),c.bind(),c.setVertexAttribPointers(u,t,i);for(const c of o)c&&(c.enableAttributes(u,t),c.bind(),c.setVertexAttribPointers(u,t,i));n&&n.bind(),l.currentNumAttributes=a}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function gr(e,r){const n=Math.pow(2,r.canonical.z),i=r.canonical.y;return[new t.MercatorCoordinate(0,i/n).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/n).toLngLat().lat]}function yr(e,r,n,i,o,s,a){const l=e.context,u=l.gl,c=n.fbo;if(!c)return;e.prepareDrawTile();const h=e.useProgram("hillshade");l.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());const f=((t,e,r,n)=>{const i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),s=r.paint.get("hillshade-accent-color");let a=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);const l=!t.options.moving;return{u_matrix:n||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:gr(0,e.tileID),u_light:[r.paint.get("hillshade-exaggeration"),a],u_shadow:i,u_highlight:o,u_accent:s}})(e,n,i,e.terrain?r.projMatrix:null);e.prepareDrawProgram(l,h,r.toUnwrapped());const{tileBoundsBuffer:d,tileBoundsIndexBuffer:p,tileBoundsSegments:m}=e.getTileBoundsBuffers(n);h.draw(l,u.TRIANGLES,o,s,a,t.CullFaceMode.disabled,f,i.id,d,p,m)}function _r(e,r,n){if(!r.needsDEMTextureUpload)return;const i=e.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||e.getTileTexture(n.stride);const s=n.getPixels();r.demTexture?r.demTexture.update(s,{premultiply:!1}):r.demTexture=new t.Texture(i,s,o.RGBA,{premultiply:!1}),r.needsDEMTextureUpload=!1}function vr(e,r,n,i,o,s){const a=e.context,l=a.gl;if(!r.dem)return;const u=r.dem;if(a.activeTexture.set(l.TEXTURE1),_r(e,r,u),!r.demTexture)return;r.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const c=u.dim;a.activeTexture.set(l.TEXTURE0);let h=r.fbo;if(!h){const e=new t.Texture(a,{width:c,height:c,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=r.fbo=a.createFramebuffer(c,c,!0),h.colorAttachment.set(e.texture)}a.bindFramebuffer.set(h.framebuffer),a.viewport.set([0,0,c,c]);const{tileBoundsBuffer:f,tileBoundsIndexBuffer:d,tileBoundsSegments:p}=e.getMercatorTileBoundsBuffers();e.useProgram("hillshadePrepare").draw(a,l.TRIANGLES,i,o,s,t.CullFaceMode.disabled,((e,r)=>{const n=r.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_unpack:r.unpackVector}})(r.tileID,u),n.id,f,d,p),r.needsHillshadePrepare=!1}const br=e=>({u_matrix:new t.UniformMatrix4f(e),u_image0:new t.Uniform1i(e),u_skirt_height:new t.Uniform1f(e)}),wr=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e}),xr=(t,e,r,n,i,o,s,a,l,u,c,h,f,d)=>({u_proj_matrix:Float32Array.from(t),u_globe_matrix:e,u_normalize_matrix:Float32Array.from(n),u_merc_matrix:r,u_zoom_transition:i,u_merc_center:o,u_image0:0,u_frustum_tl:s,u_frustum_tr:a,u_frustum_br:l,u_frustum_bl:u,u_globe_pos:c,u_globe_radius:h,u_viewport:f,u_grid_matrix:d?Float32Array.from(d):new Float32Array(9)});function Er(t,e){return null!=t&&null!=e&&!(!t.hasData()||!e.hasData())&&null!=t.demTexture&&null!=e.demTexture&&t.tileID.key!==e.tileID.key}const Sr=new class{constructor(){this.operations={}}newMorphing(t,e,r,n,i){if(t in this.operations){const e=this.operations[t];e.to.tileID.key!==r.tileID.key&&(e.queued=r)}else this.operations[t]={startTime:n,phase:0,duration:i,from:e,to:r,queued:null}}getMorphValuesForProxy(t){if(!(t in this.operations))return null;const e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}update(t){for(const e in this.operations){const r=this.operations[e];for(r.phase=(t-r.startTime)/r.duration;r.phase>=1||!this._validOp(r);)if(!this._nextOp(r,t)){delete this.operations[e];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},Mr={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Tr(t,e){const r=1<<t.z;return!e&&(0===t.x||t.x===r-1)||0===t.y||t.y===r-1}const Ar=t=>({u_matrix:t});function Cr(e,r,n,i,o){if(o>0){const s=t.exported.now(),a=(s-e.timeAdded)/o,l=r?(s-r.timeAdded)/o:-1,u=n.getSource(),c=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!r||Math.abs(r.tileID.overscaledZ-c)>Math.abs(e.tileID.overscaledZ-c),f=h&&e.refreshedUponExpiration?1:t.clamp(h?a:1-l,0,1);return e.refreshedUponExpiration&&a>=1&&(e.refreshedUponExpiration=!1),r?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}class Ir extends t.SourceCache{constructor(t){const e={type:"raster-dem",maxzoom:t.transform.maxZoom},r=new B(Ft(),null),n=Bt("mock-dem",e,r,t.style);super("mock-dem",n,!1),n.setEventedParent(this),this._sourceLoaded=!0}_loadTile(t,e){t.state="loaded",e(null)}}class kr extends t.SourceCache{constructor(t){const e=Bt("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new B(Ft(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,r,n){if(e.freezeTileCoverage)return;this.transform=e;const i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((r,n)=>{if(r[n.key]="",!this._tiles[n.key]){const r=new t.Tile(n,this._source.tileSize*n.overscaleFactor(),e.tileZoom);r.state="loaded",this._tiles[n.key]=r}return r}),{});for(const t in this._tiles)t in i||(this.freeFBO(t),this._tiles[t].unloadVectorData(),delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const r=Object.values(e);this.renderCachePool.push(...r),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach((t=>t.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Rr extends t.OverscaledTileID{constructor(t,e,r){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.projMatrix=r}}class Br extends t.Elevation{constructor(e,r){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[n,i,o]=function(e){const r=new t.StructArrayLayout4i8,n=new t.StructArrayLayout3ui6,i=131;r.reserve(17161),n.reserve(33800);const o=t.EXTENT/128,s=t.EXTENT+o/2,a=s+o;for(let u=-o;u<a;u+=o)for(let e=-o;e<a;e+=o){const n=e<0||e>s||u<0||u>s?24575:0,i=t.clamp(Math.round(e),0,t.EXTENT),o=t.clamp(Math.round(u),0,t.EXTENT);r.emplaceBack(i+n,o,i,o)}const l=(t,e)=>{const r=e*i+t;n.emplaceBack(r+1,r,r+i),n.emplaceBack(r+i,r+i+1,r+1)};for(let t=1;t<129;t++)for(let e=1;e<129;e++)l(e,t);return[0,129].forEach((t=>{for(let e=0;e<130;e++)l(e,t),l(t,e)})),[r,n,32768]}(),s=e.context;this.gridBuffer=s.createVertexBuffer(n,t.boundsAttributes.members),this.gridIndexBuffer=s.createIndexBuffer(i),this.gridSegments=t.SegmentVector.simpleSegment(0,0,n.length,i.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,n.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new kr(r.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,0,t.EXTENT,0,t.EXTENT,0,1);const a=s.gl;this._overlapStencilMode=new t.StencilMode({func:a.GEQUAL,mask:255},0,255,a.KEEP,a.KEEP,a.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=r,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Ir(r.map)}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency()}update(e,r,n){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const i=e.terrain.properties;this.sourceCache=0===e.terrain.drapeRenderMode?this._mockSourceCache:e._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&t.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const e=this.getScaledDemTileSize();this.sourceCache.update(r,e,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),r.updateElevation(!n),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(r),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(t){this._findCoveringTileCache[t]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&t.warnOnce(`Terrain render cache efficiency is not optimal (${e.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${e.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((t=>t.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const r=this.proxySourceCache,n=this.painter.transform;this._initializing&&(this._initializing=0===n._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(n.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=r.getIds().map((t=>{const e=r.getTileByID(t).tileID;return e.projMatrix=n.calculateProjMatrix(e.toUnwrapped()),e}));!function(e,r){const n=r.transform.pointCoordinate(r.transform.getCameraPoint()),i=new t.pointGeometry(n.x,n.y);e.sort(((e,r)=>{if(r.overscaledZ-e.overscaledZ)return r.overscaledZ-e.overscaledZ;const n=new t.pointGeometry(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),o=new t.pointGeometry(r.canonical.x+(1<<r.canonical.z)*r.wrap,r.canonical.y),s=i.mult(1<<e.canonical.z);return s.x-=.5,s.y-=.5,s.distSqr(n)-s.distSqr(o)}))}(i,this.painter),this._previousZoom=n.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach((t=>{this.proxyToSource[t.key]={}})),this.terrainTileForTile={};const s=this._style._sourceCaches;for(const t in s){const r=s[t];if(!r.used)continue;if(r!==this.sourceCache&&this.resetTileLookupCache(r.id),this._setupProxiedCoordsForOrtho(r,e[t],o),r.usedForTerrain)continue;const n=e[t];r.getSource().reparseOverscaled&&this._assignTerrainTiles(n)}this.proxiedCoords[r.id]=i.map((t=>new Rr(t,t.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const a={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const r=e.tileID.key;r in a||(this._visibleDemTiles.push(e),a[r]=r)}}_assignTerrainTiles(t){this._initializing||t.forEach((t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)}))}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const r in this.terrainTileForTile){const n=this.terrainTileForTile[r],i=n.dem;!i||n.demTexture&&!n.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),_r(this.painter,n,i))}}_prepareDemTileUniforms(t,e,r,n){if(!e||null==e.demTexture)return!1;const i=t.tileID.canonical,o=Math.pow(2,e.tileID.canonical.z-i.z),s=n||"";return r[`u_dem_tl${s}`]=[i.x*o%1,i.y*o%1],r[`u_dem_scale${s}`]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const e=this.painter.context,r=e.gl;if(!this._emptyDepthBufferTexture){const n=new t.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new t.Texture(e,n,r.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce(((e,r)=>{if(!r.dem)return e;const n=r.dem.tree.minimums[0];return n>0&&t++,e+n}),0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,r=e.gl;e.activeTexture.set(r.TEXTURE2);const n=this._getLoadedAreaMinimum(),i=new t.RGBAImage({width:1,height:1},new Uint8Array(t.DEMData.pack(n,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new t.Texture(e,i,r.RGBA,{premultiply:!1}),o}setupElevationDraw(e,r,n){const i=this.painter.context,o=i.gl,s=(a=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(a),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var a;s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();const l=this.painter.transform,u=l.projection,c=e.tileID.canonical;s.u_tile_tl_up=u.upVector(c,0,0),s.u_tile_tr_up=u.upVector(c,t.EXTENT,0),s.u_tile_br_up=u.upVector(c,t.EXTENT,t.EXTENT),s.u_tile_bl_up=u.upVector(c,0,t.EXTENT),s.u_tile_up_scale=n&&n.useDenormalizedUpVectorScale?t.GLOBE_METERS_TO_ECEF:u.upVectorScale(c,l.center.lat,l.worldSize).metersToTile;let h=null,f=null,d=1;if(n&&n.morphing&&this._useVertexMorphing){const t=n.morphing.srcDemTile,r=n.morphing.dstDemTile;d=n.morphing.phase,t&&r&&(this._prepareDemTileUniforms(e,t,s,"_prev")&&(f=t),this._prepareDemTileUniforms(e,r,s)&&(h=r))}if(f&&h?(i.activeTexture.set(o.TEXTURE2),h.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),f.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),s.u_dem_lerp=d):(h=this.terrainTileForTile[e.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(e,h,s)?h.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),i.activeTexture.set(o.TEXTURE3),n&&n.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.u_depth_size_inv=[1,1]),n&&n.useMeterToDem&&h){const e=(1<<h.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=e}n&&n.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),r.setTerrainUniformValues(i,s)}renderToBackBuffer(e){const r=this.painter,n=this.painter.context;0!==e.length&&(n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),r.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(e,r,n,i,o){if("globe"===e.transform.projection.name)!function(e,r,n,i,o){const s=e.context,a=s.gl;let l,u;const c=e.options.showTerrainWireframe?2:0,h=e.transform,f=t.globeUseCustomAntiAliasing(e,s,h),d=(t,r)=>{if(u===t)return;const n=[Mr[t],"PROJECTION_GLOBE_VIEW"];f&&n.push("CUSTOM_ANTIALIASING"),r&&n.push(Mr[c]),l=e.useProgram("globeRaster",null,n),u=t},p=e.colorModeForRenderPass(),m=new t.DepthMode(a.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);Sr.update(o);const g=t.calculateGlobeMercatorMatrix(h),y=[t.mercatorXfromLng(h.center.lng),t.mercatorYfromLat(h.center.lat)],_=c?[!1,!0]:[!1],v=e.globeSharedBuffers,b=[h.width*t.exported.devicePixelRatio,h.height*t.exported.devicePixelRatio],w=Float32Array.from(h.globeMatrix),x={useDenormalizedUpVectorScale:!0};if(_.forEach((c=>{u=-1;const f=c?a.LINES:a.TRIANGLES;for(const u of i){const i=n.getTile(u),_=t.StencilMode.disabled,E=r.prevTerrainTileForTile[u.key],S=r.terrainTileForTile[u.key];Er(E,S)&&Sr.newMorphing(u.key,E,S,o,250),s.activeTexture.set(a.TEXTURE0),i.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);const M=Sr.getMorphValuesForProxy(u.key),T=M?1:0;M&&t.extend$1(x,{morphing:{srcDemTile:M.from,dstDemTile:M.to,phase:t.easeCubicInOut(M.phase)}});const A=t.tileCornersToBounds(u.canonical),C=t.getLatitudinalLod(A.getCenter().lat),I=t.getGridMatrix(u.canonical,A,C),k=t.globeNormalizeECEF(t.globeTileBounds(u.canonical)),R=xr(h.projMatrix,w,g,k,t.globeToMercatorTransition(h.zoom),y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,b,I);if(d(T,c),r.setupElevationDraw(i,l,x),e.prepareDrawProgram(s,l,u.toUnwrapped()),v){const[r,n,i]=c?v.getWirefameBuffers(e.context,C):v.getGridBuffers(C);l.draw(s,f,m,_,p,t.CullFaceMode.backCCW,R,"globe_raster",r,n,i)}}})),v){const o=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];f&&o.push("CUSTOM_ANTIALIASING"),l=e.useProgram("globeRaster",null,o);for(const u of i){const{x:i,y:o,z:c}=u.canonical,f=0===o,d=o===(1<<c)-1,[g,_,w,E]=v.getPoleBuffers(c);if(E&&(f||d)){const o=n.getTile(u);s.activeTexture.set(a.TEXTURE0),o.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE);let v=t.globePoleMatrixForTile(c,i,h);const S=t.globeNormalizeECEF(t.globeTileBounds(u.canonical)),M=(e,r)=>e.draw(s,a.TRIANGLES,m,t.StencilMode.disabled,p,t.CullFaceMode.disabled,xr(h.projMatrix,v,v,S,0,y,h.frustumCorners.TL,h.frustumCorners.TR,h.frustumCorners.BR,h.frustumCorners.BL,h.globeCenterInViewSpace,h.globeRadius,b),"globe_pole_raster",r,w,E);r.setupElevationDraw(o,l,x),e.prepareDrawProgram(s,l,u.toUnwrapped()),f&&M(l,g),d&&(v=t.scale(t.create(),v,[1,-1,1]),M(l,_))}}}}(e,r,n,i,o);else{const s=e.context,a=s.gl;let l,u;const c=e.options.showTerrainWireframe?2:0,h=(t,r)=>{if(u===t)return;const n=[Mr[t]];r&&n.push(Mr[c]),l=e.useProgram("terrainRaster",null,n),u=t},f=e.colorModeForRenderPass(),d=new t.DepthMode(a.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);Sr.update(o);const p=e.transform,m=6*Math.pow(1.5,22-p.zoom)*r.exaggeration();(c?[!1,!0]:[!1]).forEach((c=>{u=-1;const g=c?a.LINES:a.TRIANGLES,[y,_]=c?r.getWirefameBuffer():[r.gridIndexBuffer,r.gridSegments];for(const u of i){const i=n.getTile(u),v=t.StencilMode.disabled,b=r.prevTerrainTileForTile[u.key],w=r.terrainTileForTile[u.key];Er(b,w)&&Sr.newMorphing(u.key,b,w,o,250),s.activeTexture.set(a.TEXTURE0),i.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);const x=Sr.getMorphValuesForProxy(u.key),E=x?1:0;let S;x&&(S={morphing:{srcDemTile:x.from,dstDemTile:x.to,phase:t.easeCubicInOut(x.phase)}});const M=wr(u.projMatrix,Tr(u.canonical,p.renderWorldCopies)?m/10:m);h(E,c),r.setupElevationDraw(i,l,S),e.prepareDrawProgram(s,l,u.toUnwrapped()),l.draw(s,g,d,v,f,t.CullFaceMode.backCCW,M,"terrain_raster",r.gridBuffer,y,_)}}))}}(r,this,this.proxySourceCache,e,this._updateTimestamp),this.renderingToTexture=!0,r.gpuTimingDeferredRenderEnd(),e.splice(0,e.length))}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const r=this.painter,n=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],s=this._drapedRenderBatches.shift(),a=[],l=r.style.order;let u=0;for(const c of o){const o=i.getTileByID(c.proxyTileKey),h=i.proxyCachedFBO[c.key]?i.proxyCachedFBO[c.key][e]:void 0,f=void 0!==h?i.renderCache[h]:this.pool[u++],d=void 0!==h;if(o.texture=f.tex,d&&!f.dirty){a.push(o.tileID);continue}let p;n.bindFramebuffer.set(f.fb.framebuffer),this.renderedToTile=!1,f.dirty&&(n.clear({color:t.Color.transparent,stencil:0}),f.dirty=!1);for(let t=s.start;t<=s.end;++t){const e=r.style._layers[l[t]];if(e.isHidden(r.transform.zoom))continue;const i=r.style._getLayerSourceCache(e),o=i?this.proxyToSource[c.key][i.id]:[c];if(!o)continue;const s=o;n.viewport.set([0,0,f.fb.width,f.fb.height]),p!==(i?i.id:null)&&(this._setupStencil(f,o,e,i),p=i?i.id:null),r.renderLayer(r,i,e,s)}this.renderedToTile?(f.dirty=!0,a.push(o.tileID)):d||--u,5===u&&(u=0,this.renderToBackBuffer(a))}return this.renderToBackBuffer(a),this.renderingToTexture=!1,n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),s.end+1}postRender(){}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let r,n=0,i=0,o=!1;for(let s=0;s<e;++s){const e=t._layers[t.order[s]];this._style.isLayerDraped(e)?(o&&++n,++i):o||(o=!0,r=e.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-n/i),firstUndrapedLayer:r}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter((t=>t.dem)).forEach((e=>{t=Math.min(t,e.dem.tree.minimums[0])})),0===t?t:(t-30)*this._exaggeration}raycast(t,e,r){if(!this._visibleDemTiles)return null;const n=this._visibleDemTiles.filter((t=>t.dem)).map((n=>{const i=n.tileID,o=1<<i.overscaledZ,{x:s,y:a}=i.canonical,l=s/o,u=(s+1)/o,c=a/o,h=(a+1)/o;return{minx:l,miny:c,maxx:u,maxy:h,t:n.dem.tree.raycastRoot(l,c,u,h,t,e,r),tile:n}}));n.sort(((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)));for(const i of n){if(null==i.t)return null;const n=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,t,e,r);if(null!=n)return n}return null}_createFBO(){const e=this.painter.context,r=e.gl,n=this.drapeBufferSize;e.activeTexture.set(r.TEXTURE0);const i=new t.Texture(e,{width:n[0],height:n[1],data:null},r.RGBA);i.bind(r.LINEAR,r.CLAMP_TO_EDGE);const o=e.createFramebuffer(n[0],n[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new St(e,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,n[0],n[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&r.texParameterf(r.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((t=>{const e=this._style._layers[t],r=e.isHidden(this.painter.transform.zoom),n=e.getCrossfadeParameters(),i=!!n&&1!==n.t,o=e.hasTransition();return"custom"!==e.type&&!r&&(i||o)}))}_clearRasterFadeFromRenderCache(){let t=!1;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e]._source instanceof At){t=!0;break}if(t)for(let e=0;e<this._style.order.length;++e){const t=this._style._layers[this._style.order[e]],r=t.isHidden(this.painter.transform.zoom),n=this._style._getLayerSourceCache(t);if("raster"!==t.type||r||!n)continue;const i=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][n.id];if(t)for(const e of t){const t=Cr(n.getTile(e),n.findLoadedParent(e,0),n,this.painter.transform,i);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(n.id,e)}}}}_setupDrapedRenderBatches(){const t=this._style.order,e=t.length;if(0===e)return;const r=[];let n,i=0,o=this._style._layers[t[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<e;)o=this._style._layers[t[i]];for(;i<e;++i){const e=this._style._layers[t[i]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===n&&(n=i):void 0!==n&&(r.push({start:n,end:i-1}),n=void 0))}void 0!==n&&r.push({start:n,end:i-1}),this._drapedRenderBatches=r}_setupRenderCache(t){const e=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,e.renderCache.length>e.renderCachePool.length){const t=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={};for(let r=0;r<t.length;++r){const n=Object.values(t[r]);e.renderCachePool.push(...n)}}return}this._clearRasterFadeFromRenderCache();const r=this.proxyCoords,n=this._tilesDirty;for(let o=r.length-1;o>=0;o--){const i=r[o];if(e.getTileByID(i.key),void 0!==e.proxyCachedFBO[i.key]){const r=t[i.key],o=this.proxyToSource[i.key];let s=0;for(const t in o){const e=o[t],i=r[t];if(!i||i.length!==e.length||e.some(((e,r)=>e!==i[r]||n[t]&&n[t].hasOwnProperty(e.key)))){s=-1;break}++s}for(const t in e.proxyCachedFBO[i.key])e.renderCache[e.proxyCachedFBO[i.key][t]].dirty=s<0||s!==Object.values(r).length}}const i=[...this._drapedRenderBatches];i.sort(((t,e)=>e.end-e.start-(t.end-t.start)));for(const o of i)for(const t of r){if(e.proxyCachedFBO[t.key])continue;let r=e.renderCachePool.pop();void 0===r&&e.renderCache.length<50&&(r=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==r&&(e.proxyCachedFBO[t.key]={},e.proxyCachedFBO[t.key][o.start]=r,e.renderCache[r].dirty=!0)}this._tilesDirty={}}_setupStencil(t,e,r,n){if(!n||!this._sourceTilesOverlap[n.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(e.length<=1)return void(this._overlapStencilType=!1);let s;if(r.isTileClipped())s=e.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);s=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+s>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=s,this._overlapStencilMode.ref=this._stencilRef,r.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,r){const n=this.painter,i=this.painter.context,o=i.gl;n._tileClippingMaskIDs={},i.setColorMode(t.ColorMode.disabled),i.setDepthMode(t.DepthMode.disabled);const s=n.useProgram("clippingMask");for(const a of e){const e=n._tileClippingMaskIDs[a.key]=--r;s.draw(i,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},e,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Ar(a.projMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}pointCoordinate(e){const r=this.painter.transform;if(e.x<0||e.x>r.width||e.y<0||e.y>r.height)return null;const n=[e.x,e.y,1,1];t.transformMat4$1(n,n,r.pixelMatrixInverse),t.scale$1(n,n,1/n[3]),n[0]/=r.worldSize,n[1]/=r.worldSize;const i=r._camera.position,o=t.mercatorZfromAltitude(1,r.center.lat),s=[i[0],i[1],i[2]/o,0],a=t.subtract([],n.slice(0,3),s);t.normalize(a,a);const l=this.raycast(s,a,this._exaggeration);return null!==l&&l?(t.scaleAndAdd(s,s,a,l),s[3]=s[2],s[2]*=o,s):null}drawDepth(){const e=this.painter,r=e.context,n=this.proxySourceCache,i=Math.ceil(e.width),o=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const e=r.gl,n=r.createFramebuffer(i,o,!0);r.activeTexture.set(e.TEXTURE0);const s=new t.Texture(r,{width:i,height:o,data:null},e.RGBA);s.bind(e.NEAREST,e.CLAMP_TO_EDGE),n.colorAttachment.set(s.texture);const a=r.createRenderbuffer(r.gl.DEPTH_COMPONENT16,i,o);n.depthAttachment.set(a),this._depthFBO=n,this._depthTexture=s}r.bindFramebuffer.set(this._depthFBO.framebuffer),r.viewport.set([0,0,i,o]),function(e,r,n,i){if("globe"===e.transform.projection.name)return;const o=e.context,s=o.gl;o.clear({depth:1});const a=e.useProgram("terrainDepth"),l=new t.DepthMode(s.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const u of i){const e=n.getTile(u),i=wr(u.projMatrix,0);r.setupElevationDraw(e,a),a.draw(o,s.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,i,"terrain_depth",r.gridBuffer,r.gridIndexBuffer,r.gridNoSkirtSegments)}}(e,this,n,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,e,r){if(t.getSource()instanceof kt)return this._setupProxiedCoordsForImageSource(t,e,r);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const n=this.proxiedCoords[t.id]=[],i=this.proxyCoords;for(let s=0;s<i.length;s++){const e=i[s],o=this._findTileCoveringTileID(e,t);if(o){const i=this._createProxiedId(e,o,r[e.key]&&r[e.key][t.id]);n.push(i),this.proxyToSource[e.key][t.id]=[i]}}let o=!1;for(let s=0;s<e.length;s++){const i=t.getTile(e[s]);if(!i||!i.hasData())continue;const a=this._findTileCoveringTileID(i.tileID,this.proxySourceCache);if(a&&a.tileID.canonical.z!==i.tileID.canonical.z){const e=this.proxyToSource[a.tileID.key][t.id],s=this._createProxiedId(a.tileID,i,r[a.tileID.key]&&r[a.tileID.key][t.id]);e?e.splice(e.length-1,0,s):this.proxyToSource[a.tileID.key][t.id]=[s],n.push(s),o=!0}}this._sourceTilesOverlap[t.id]=o}_setupProxiedCoordsForImageSource(e,r,n){if(!e.getSource().loaded())return;const i=this.proxiedCoords[e.id]=[],o=this.proxyCoords,s=e.getSource(),a=new t.pointGeometry(s.tileID.x,s.tileID.y)._div(1<<s.tileID.z),l=s.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce(((t,e)=>(t.min.x=Math.min(t.min.x,e.x-a.x),t.min.y=Math.min(t.min.y,e.y-a.y),t.max.x=Math.max(t.max.x,e.x-a.x),t.max.y=Math.max(t.max.y,e.y-a.y),t)),{min:new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=(e,r)=>{const n=e.wrap+e.canonical.x/(1<<e.canonical.z),i=e.canonical.y/(1<<e.canonical.z),o=t.EXTENT/(1<<e.canonical.z),s=r.wrap+r.canonical.x/(1<<r.canonical.z),a=r.canonical.y/(1<<r.canonical.z);return n+o<s+l.min.x||n>s+l.max.x||i+o<a+l.min.y||i>a+l.max.y};for(let t=0;t<o.length;t++){const s=o[t];for(let t=0;t<r.length;t++){const o=e.getTile(r[t]);if(!o||!o.hasData())continue;if(u(s,o.tileID))continue;const a=this._createProxiedId(s,o,n[s.key]&&n[s.key][e.id]),l=this.proxyToSource[s.key][e.id];l?l.push(a):this.proxyToSource[s.key][e.id]=[a],i.push(a)}}}_createProxiedId(e,r,n){let i=this.orthoMatrix;if(n){const t=n.find((t=>t.key===r.tileID.key));if(t)return t}if(r.tileID.key!==e.key){const n=e.canonical.z-r.tileID.canonical.z;let o,s,a;i=t.create();const l=r.tileID.wrap-e.wrap<<e.overscaledZ;n>0?(o=t.EXTENT>>n,s=o*((r.tileID.canonical.x<<n)-e.canonical.x+l),a=o*((r.tileID.canonical.y<<n)-e.canonical.y)):(o=t.EXTENT<<-n,s=t.EXTENT*(r.tileID.canonical.x-(e.canonical.x+l<<-n)),a=t.EXTENT*(r.tileID.canonical.y-(e.canonical.y<<-n))),t.ortho(i,0,o,0,o,0,1),t.translate(i,i,[s,a,0])}return new Rr(r.tileID,e.key,i)}_findTileCoveringTileID(e,r){let n=r.getTile(e);if(n&&n.hasData())return n;const i=this._findCoveringTileCache[r.id],o=i[e.key];if(n=o?r.getTileByID(o):null,n&&n.hasData()||null===o)return n;let s=n?n.tileID:e,a=s.overscaledZ;const l=r.getSource().minzoom,u=[];if(!o){const i=r.getSource().maxzoom;if(e.canonical.z>=i){const n=e.canonical.z-i;r.getSource().reparseOverscaled?(a=Math.max(e.canonical.z+2,r.transform.tileZoom),s=new t.OverscaledTileID(a,e.wrap,i,e.canonical.x>>n,e.canonical.y>>n)):0!==n&&(a=i,s=new t.OverscaledTileID(a,e.wrap,i,e.canonical.x>>n,e.canonical.y>>n))}s.key!==e.key&&(u.push(s.key),n=r.getTile(s))}const c=t=>{u.forEach((e=>{i[e]=t})),u.length=0};for(a-=1;a>=l&&(!n||!n.hasData());a--){n&&c(n.tileID.key);const t=s.calculateScaledKey(a);if(n=r.getTileByID(t),n&&n.hasData())break;const e=i[t];if(null===e)break;void 0===e?u.push(t):n=r.getTileByID(e)}return c(n?n.tileID.key:null),n&&n.hasData()?n:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(t,e){let r=this._tilesDirty[t];r||(r=this._tilesDirty[t]={}),r[e.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const e=function(e){let r=0;const n=new t.StructArrayLayout2ui4,i=131;for(let t=1;t<129;t++){for(let e=1;e<129;e++)r=t*i+e,n.emplaceBack(r,r+1),n.emplaceBack(r,r+i),n.emplaceBack(r+1,r+i),128===t&&n.emplaceBack(r+i,r+i+1);n.emplaceBack(r+1,r+1+i)}return n}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Pr{static cacheKey(t,e,r,n){let i=`${e}${n?n.cacheKey:""}`;for(const o of r)t.usedDefines.includes(o)&&(i+=`/${o}`);return i}constructor(e,r,n,i,o,s){const a=e.gl;this.program=a.createProgram();const l=function(t){const e=[];for(let r=0;r<t.length;r++){if(null===t[r])continue;const n=t[r].split(" ");e.push(n.pop())}return e}(n.staticAttributes),u=i?i.getBinderAttributes():[],c=l.concat(u);let h=i?i.defines():[];h=h.concat(s.map((t=>`#define ${t}`)));const f=h.concat(e.extStandardDerivatives?"#extension GL_OES_standard_derivatives : enable\n".concat(hr):hr,hr,cr,ur.fragmentSource,ar.fragmentSource,n.fragmentSource).join("\n"),d=h.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",cr,ur.vertexSource,ar.vertexSource,sr.vertexSource,n.vertexSource).join("\n"),p=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);a.shaderSource(p,f),a.compileShader(p),a.attachShader(this.program,p);const m=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(m,d),a.compileShader(m),a.attachShader(this.program,m),this.attributes={},this.numAttributes=c.length;for(let t=0;t<this.numAttributes;t++)c[t]&&(a.bindAttribLocation(this.program,t,c[t]),this.attributes[c[t]]=t);a.linkProgram(this.program),a.deleteShader(m),a.deleteShader(p),this.fixedUniforms=o(e),this.binderUniforms=i?i.getUniforms(e):[],-1!==s.indexOf("TERRAIN")&&(this.terrainUniforms=(e=>({u_dem:new t.Uniform1i(e),u_dem_prev:new t.Uniform1i(e),u_dem_unpack:new t.Uniform4f(e),u_dem_tl:new t.Uniform2f(e),u_dem_scale:new t.Uniform1f(e),u_dem_tl_prev:new t.Uniform2f(e),u_dem_scale_prev:new t.Uniform1f(e),u_dem_size:new t.Uniform1f(e),u_dem_lerp:new t.Uniform1f(e),u_exaggeration:new t.Uniform1f(e),u_depth:new t.Uniform1i(e),u_depth_size_inv:new t.Uniform2f(e),u_meter_to_dem:new t.Uniform1f(e),u_label_plane_matrix_inv:new t.UniformMatrix4f(e),u_tile_tl_up:new t.Uniform3f(e),u_tile_tr_up:new t.Uniform3f(e),u_tile_br_up:new t.Uniform3f(e),u_tile_bl_up:new t.Uniform3f(e),u_tile_up_scale:new t.Uniform1f(e)}))(e)),-1!==s.indexOf("FOG")&&(this.fogUniforms=(e=>({u_fog_matrix:new t.UniformMatrix4f(e),u_fog_range:new t.Uniform2f(e),u_fog_color:new t.Uniform4f(e),u_fog_horizon_blend:new t.Uniform1f(e),u_fog_temporal_offset:new t.Uniform1f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_globe_transition:new t.Uniform1f(e),u_is_globe:new t.Uniform1i(e),u_viewport:new t.Uniform2f(e)}))(e))}}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const r=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)r[t].set(this.program,t,e[t])}}setFogUniformValues(t,e){if(!this.fogUniforms)return;const r=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)r[t].set(this.program,t,e[t])}}draw(t,e,r,n,i,o,s,a,l,u,c,h,f,d,p){const m=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(r),t.setStencilMode(n),t.setColorMode(i),t.setCullFace(o);for(const y of Object.keys(this.fixedUniforms))this.fixedUniforms[y].set(this.program,y,s[y]);d&&d.setUniforms(this.program,t,this.binderUniforms,h,{zoom:f});const g={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[e];for(const y of c.get()){const r=y.vaos||(y.vaos={});(r[a]||(r[a]=new mr)).bind(t,this,l,d?d.getPaintVertexBuffers():[],u,y.vertexOffset,p||[]),m.drawElements(e,y.primitiveLength*g,m.UNSIGNED_SHORT,y.primitiveOffset*g*2)}}}function Dr(t,e,r){const n=1/P(r,1,e.transform.tileZoom),i=Math.pow(2,r.tileID.overscaledZ),o=r.tileSize*Math.pow(2,e.transform.tileZoom)/i,s=o*(r.tileID.canonical.x+r.tileID.wrap*i),a=o*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[n,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[s>>16,a>>16],u_pixel_coord_lower:[65535&s,65535&a]}}const Lr=t.create(),Or=(e,r,n,i,o,s,a,l,u,c,h)=>{const f=r.style.light,d=f.properties.get("position"),p=[d.x,d.y,d.z],m=t.create$1();"viewport"===f.properties.get("anchor")&&(t.fromRotation(m,-r.transform.angle),t.transformMat3(p,p,m));const g=f.properties.get("color"),y=r.transform,_={u_matrix:e,u_lightpos:p,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+n,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Lr,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:o,u_edge_radius:s};return"globe"===y.projection.name&&(_.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],_.u_zoom_transition=u,_.u_inv_rot_matrix=h,_.u_merc_center=c,_.u_up_dir=y.projection.upVector(new t.CanonicalTileID(0,0,0),c[0]*t.EXTENT,c[1]*t.EXTENT),_.u_height_lift=l),_},Nr=(e,r,n,i,o,s,a,l,u,c,h,f,d)=>{const p=Or(e,r,n,i,o,s,a,c,h,f,d),m={u_height_factor:-Math.pow(2,a.overscaledZ)/u.tileSize/8};return t.extend(p,Dr(l,r,u),m)},zr=t=>({u_matrix:t}),Ur=(e,r,n,i)=>t.extend(zr(e),Dr(n,r,i)),jr=(t,e)=>({u_matrix:t,u_world:e}),Fr=(e,r,n,i,o)=>t.extend(Ur(e,r,n,i),{u_world:o}),Vr=t.create(),Gr=(e,r,n,i,o,s)=>{const a=e.transform,l="globe"===a.projection.name;let u;if("map"===s.paint.get("circle-pitch-alignment"))if(l){const e=t.globePixelsToTileUnits(a.zoom,r.canonical)*a._pixelsPerMercatorPixel;u=Float32Array.from([e,0,0,e])}else u=a.calculatePixelsToTileUnitsMatrix(n);else u=new Float32Array([a.pixelsToGLUnits[0],0,0,a.pixelsToGLUnits[1]]);const c={u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:e.translatePosMatrix(r.projMatrix,n,s.paint.get("circle-translate"),s.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:u,u_inv_rot_matrix:Vr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){c.u_inv_rot_matrix=i,c.u_merc_center=o,c.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],c.u_zoom_transition=t.globeToMercatorTransition(a.zoom);const e=o[0]*t.EXTENT,n=o[1]*t.EXTENT;c.u_up_dir=a.projection.upVector(new t.CanonicalTileID(0,0,0),e,n)}return c},qr=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},Kr=(e,r,n,i)=>{const o=t.EXTENT/n.tileSize;return{u_matrix:e,u_camera_to_center_distance:r.getCameraToCenterDistance(i),u_extrude_scale:[r.pixelsToGLUnits[0]/o,r.pixelsToGLUnits[1]/o]}},Wr=(t,e,r=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:r}),Zr=t.create(),Hr=(e,r,n,i,o,s,a)=>{const l=e.transform,u="globe"===l.projection.name,c=u?t.globePixelsToTileUnits(l.zoom,r.canonical)*l._pixelsPerMercatorPixel:P(n,1,s),h={u_matrix:r.projMatrix,u_extrude_scale:c,u_intensity:a,u_inv_rot_matrix:Zr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(u){h.u_inv_rot_matrix=i,h.u_merc_center=o,h.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],h.u_zoom_transition=t.globeToMercatorTransition(l.zoom);const e=o[0]*t.EXTENT,n=o[1]*t.EXTENT;h.u_up_dir=l.projection.upVector(new t.CanonicalTileID(0,0,0),e,n)}return h},Qr=(t,e,r,n,i,o,s,a)=>{const l=t.transform,u=l.calculatePixelsToTileUnitsMatrix(e),c={u_matrix:Jr(t,e,r,i),u_pixels_to_tile_units:u,u_device_pixel_ratio:s,u_units_to_pixels:[1/l.pixelsToGLUnits[0],1/l.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:o,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:a};if($r(r)){const r=Yr(e,t.transform);c.u_texsize=e.lineAtlasTexture.size,c.u_scale=[r,n.fromScale,n.toScale],c.u_mix=n.t}return c},Xr=(t,e,r,n,i,o)=>{const s=t.transform,a=Yr(e,s);return{u_matrix:Jr(t,e,r,i),u_texsize:e.imageAtlasTexture.size,u_pixels_to_tile_units:s.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:o,u_image:0,u_scale:[a,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Yr(t,e){return 1/P(t,1,e.tileZoom)}function Jr(t,e,r,n){return t.translatePosMatrix(n||e.tileID.projMatrix,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}function $r(t){const e=t.paint.get("line-dasharray").value;return e.value||"constant"!==e.kind}const tn=(t,e,r,n,i,o)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:r,u_fade_t:n.mix,u_opacity:n.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(s=i.paint.get("raster-contrast"),s>0?1/(1-s):1+s),u_spin_weights:en(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var s,a};function en(t){t*=Math.PI/180;const e=Math.sin(t),r=Math.cos(t);return[(2*r+1)/3,(-Math.sqrt(3)*e-r+1)/3,(Math.sqrt(3)*e-r+1)/3]}const rn=t.create(),nn=(e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g)=>{const y=o.transform,_={u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+n,u_aspect_ratio:y.width/y.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:a,u_coord_matrix:l,u_is_text:+u,u_pitch_with_map:+i,u_texsize:c,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:rn,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:rn,u_up_vector:[0,-1,0]};return"globe"===g.name&&(_.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],_.u_zoom_transition=f,_.u_inv_rot_matrix=p,_.u_merc_center=d,_.u_camera_forward=y._camera.forward(),_.u_ecef_origin=t.globeECEFOrigin(y.globeMatrix,h.toUnwrapped()),_.u_tile_matrix=Float32Array.from(y.globeMatrix),_.u_up_vector=m),_},on=(e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g,y)=>t.extend(nn(e,r,n,i,o,s,a,l,u,c,f,d,p,m,g,y),{u_gamma_scale:i?o.transform.cameraToCenterDistance*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+h}),sn=(e,r,n,i,o,s,a,l,u,c,h,f,d,p,m,g)=>t.extend(on(e,r,n,i,o,s,a,l,!0,u,!0,h,f,d,p,m,g),{u_texsize_icon:c,u_texture_icon:1}),an=(t,e,r)=>({u_matrix:t,u_opacity:e,u_color:r}),ln=(e,r,n,i,o,s)=>t.extend(function(t,e,r,n){const i=r.imageManager.getPattern(t.from.toString()),o=r.imageManager.getPattern(t.to.toString()),{width:s,height:a}=r.imageManager.getPixelSize(),l=Math.pow(2,n.tileID.overscaledZ),u=n.tileSize*Math.pow(2,r.transform.tileZoom)/l,c=u*(n.tileID.canonical.x+n.tileID.wrap*l),h=u*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,a],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/P(n,1,r.transform.tileZoom),u_pixel_coord_upper:[c>>16,h>>16],u_pixel_coord_lower:[65535&c,65535&h]}}(i,s,n,o),{u_matrix:e,u_opacity:r}),un={fillExtrusion:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e)}),fillExtrusionPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_lightpos:new t.Uniform3f(e),u_lightintensity:new t.Uniform1f(e),u_lightcolor:new t.Uniform3f(e),u_vertical_gradient:new t.Uniform1f(e),u_height_factor:new t.Uniform1f(e),u_edge_radius:new t.Uniform1f(e),u_ao:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_up_dir:new t.Uniform3f(e),u_height_lift:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_scale:new t.Uniform3f(e),u_fade:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e)}),fill:e=>({u_matrix:new t.UniformMatrix4f(e)}),fillPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_scale:new t.Uniform3f(e),u_fade:new t.Uniform1f(e)}),fillOutline:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e)}),fillOutlinePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_world:new t.Uniform2f(e),u_image:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_scale:new t.Uniform3f(e),u_fade:new t.Uniform1f(e)}),circle:e=>({u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),collisionBox:e=>({u_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_extrude_scale:new t.Uniform2f(e)}),collisionCircle:e=>({u_matrix:new t.UniformMatrix4f(e),u_inv_matrix:new t.UniformMatrix4f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_viewport_size:new t.Uniform2f(e)}),debug:e=>({u_color:new t.UniformColor(e),u_matrix:new t.UniformMatrix4f(e),u_overlay:new t.Uniform1i(e),u_overlay_scale:new t.Uniform1f(e)}),clippingMask:e=>({u_matrix:new t.UniformMatrix4f(e)}),heatmap:e=>({u_extrude_scale:new t.Uniform1f(e),u_intensity:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_up_dir:new t.Uniform3f(e)}),heatmapTexture:e=>({u_image:new t.Uniform1i(e),u_color_ramp:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e)}),hillshade:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_latrange:new t.Uniform2f(e),u_light:new t.Uniform2f(e),u_shadow:new t.UniformColor(e),u_highlight:new t.UniformColor(e),u_accent:new t.UniformColor(e)}),hillshadePrepare:e=>({u_matrix:new t.UniformMatrix4f(e),u_image:new t.Uniform1i(e),u_dimension:new t.Uniform2f(e),u_zoom:new t.Uniform1f(e),u_unpack:new t.Uniform4f(e)}),line:e=>({u_matrix:new t.UniformMatrix4f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_units_to_pixels:new t.Uniform2f(e),u_dash_image:new t.Uniform1i(e),u_gradient_image:new t.Uniform1i(e),u_image_height:new t.Uniform1f(e),u_texsize:new t.Uniform2f(e),u_scale:new t.Uniform3f(e),u_mix:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e),u_trim_offset:new t.Uniform2f(e)}),linePattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_texsize:new t.Uniform2f(e),u_pixels_to_tile_units:new t.UniformMatrix2f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_units_to_pixels:new t.Uniform2f(e),u_scale:new t.Uniform3f(e),u_fade:new t.Uniform1f(e),u_alpha_discard_threshold:new t.Uniform1f(e)}),raster:e=>({u_matrix:new t.UniformMatrix4f(e),u_tl_parent:new t.Uniform2f(e),u_scale_parent:new t.Uniform1f(e),u_fade_t:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_image0:new t.Uniform1i(e),u_image1:new t.Uniform1i(e),u_brightness_low:new t.Uniform1f(e),u_brightness_high:new t.Uniform1f(e),u_saturation_factor:new t.Uniform1f(e),u_contrast_factor:new t.Uniform1f(e),u_spin_weights:new t.Uniform3f(e),u_perspective_transform:new t.Uniform2f(e)}),symbolIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_texture:new t.Uniform1i(e)}),symbolSDF:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_tile_id:new t.Uniform3f(e),u_zoom_transition:new t.Uniform1f(e),u_inv_rot_matrix:new t.UniformMatrix4f(e),u_merc_center:new t.Uniform2f(e),u_camera_forward:new t.Uniform3f(e),u_tile_matrix:new t.UniformMatrix4f(e),u_up_vector:new t.Uniform3f(e),u_ecef_origin:new t.Uniform3f(e),u_is_halo:new t.Uniform1i(e)}),symbolTextAndIcon:e=>({u_is_size_zoom_constant:new t.Uniform1i(e),u_is_size_feature_constant:new t.Uniform1i(e),u_size_t:new t.Uniform1f(e),u_size:new t.Uniform1f(e),u_camera_to_center_distance:new t.Uniform1f(e),u_rotate_symbol:new t.Uniform1i(e),u_aspect_ratio:new t.Uniform1f(e),u_fade_change:new t.Uniform1f(e),u_matrix:new t.UniformMatrix4f(e),u_label_plane_matrix:new t.UniformMatrix4f(e),u_coord_matrix:new t.UniformMatrix4f(e),u_is_text:new t.Uniform1i(e),u_pitch_with_map:new t.Uniform1i(e),u_texsize:new t.Uniform2f(e),u_texsize_icon:new t.Uniform2f(e),u_texture:new t.Uniform1i(e),u_texture_icon:new t.Uniform1i(e),u_gamma_scale:new t.Uniform1f(e),u_device_pixel_ratio:new t.Uniform1f(e),u_is_halo:new t.Uniform1i(e)}),background:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_color:new t.UniformColor(e)}),backgroundPattern:e=>({u_matrix:new t.UniformMatrix4f(e),u_opacity:new t.Uniform1f(e),u_image:new t.Uniform1i(e),u_pattern_tl_a:new t.Uniform2f(e),u_pattern_br_a:new t.Uniform2f(e),u_pattern_tl_b:new t.Uniform2f(e),u_pattern_br_b:new t.Uniform2f(e),u_texsize:new t.Uniform2f(e),u_mix:new t.Uniform1f(e),u_pattern_size_a:new t.Uniform2f(e),u_pattern_size_b:new t.Uniform2f(e),u_scale_a:new t.Uniform1f(e),u_scale_b:new t.Uniform1f(e),u_pixel_coord_upper:new t.Uniform2f(e),u_pixel_coord_lower:new t.Uniform2f(e),u_tile_units_to_pixels:new t.Uniform1f(e)}),terrainRaster:br,terrainDepth:br,skybox:e=>({u_matrix:new t.UniformMatrix4f(e),u_sun_direction:new t.Uniform3f(e),u_cubemap:new t.Uniform1i(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxGradient:e=>({u_matrix:new t.UniformMatrix4f(e),u_color_ramp:new t.Uniform1i(e),u_center_direction:new t.Uniform3f(e),u_radius:new t.Uniform1f(e),u_opacity:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e)}),skyboxCapture:e=>({u_matrix_3f:new t.UniformMatrix3f(e),u_sun_direction:new t.Uniform3f(e),u_sun_intensity:new t.Uniform1f(e),u_color_tint_r:new t.Uniform4f(e),u_color_tint_m:new t.Uniform4f(e),u_luminance:new t.Uniform1f(e)}),globeRaster:e=>({u_proj_matrix:new t.UniformMatrix4f(e),u_globe_matrix:new t.UniformMatrix4f(e),u_normalize_matrix:new t.UniformMatrix4f(e),u_merc_matrix:new t.UniformMatrix4f(e),u_zoom_transition:new t.Uniform1f(e),u_merc_center:new t.Uniform2f(e),u_image0:new t.Uniform1i(e),u_grid_matrix:new t.UniformMatrix3f(e),u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_globe_pos:new t.Uniform3f(e),u_globe_radius:new t.Uniform1f(e),u_viewport:new t.Uniform2f(e)}),globeAtmosphere:e=>({u_frustum_tl:new t.Uniform3f(e),u_frustum_tr:new t.Uniform3f(e),u_frustum_br:new t.Uniform3f(e),u_frustum_bl:new t.Uniform3f(e),u_horizon:new t.Uniform1f(e),u_transition:new t.Uniform1f(e),u_fadeout_range:new t.Uniform1f(e),u_color:new t.Uniform4f(e),u_high_color:new t.Uniform4f(e),u_space_color:new t.Uniform4f(e),u_star_intensity:new t.Uniform1f(e),u_star_density:new t.Uniform1f(e),u_star_size:new t.Uniform1f(e),u_temporal_offset:new t.Uniform1f(e),u_horizon_angle:new t.Uniform1f(e),u_rotation_matrix:new t.UniformMatrix4f(e)})};let cn;function hn(e,r,n,i,o,s,a){const l=e.context,u=l.gl,c=e.transform,h=e.useProgram("collisionBox"),f=[];let d=0,p=0;for(let w=0;w<i.length;w++){const m=i[w],g=r.getTile(m),y=g.getBucket(n);if(!y)continue;const _=we(m,y,c);let v=_;0===o[0]&&0===o[1]||(v=e.translatePosMatrix(_,g,o,s));const b=a?y.textCollisionBox:y.iconCollisionBox,x=y.collisionCircleArray;if(x.length>0){const e=t.create(),r=v;t.mul(e,y.placementInvProjMatrix,c.glCoordMatrix),t.mul(e,e,y.placementViewportMatrix),f.push({circleArray:x,circleOffset:p,transform:r,invTransform:e,projection:y.getProjection()}),d+=x.length/4,p=d}b&&(e.terrain&&e.terrain.setupElevationDraw(g,h),h.draw(l,u.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,Kr(v,c,g,y.getProjection()),n.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,c.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]))}if(!a||!f.length)return;const m=e.useProgram("collisionCircle"),g=new t.StructArrayLayout2f1f2i16;g.resize(4*d),g._trim();let y=0;for(const t of f)for(let e=0;e<t.circleArray.length/4;e++){const r=4*e,n=t.circleArray[r+0],i=t.circleArray[r+1],o=t.circleArray[r+2],s=t.circleArray[r+3];g.emplace(y++,n,i,o,s,0),g.emplace(y++,n,i,o,s,1),g.emplace(y++,n,i,o,s,2),g.emplace(y++,n,i,o,s,3)}(!cn||cn.length<2*d)&&(cn=function(e){const r=2*e,n=new t.StructArrayLayout3ui6;n.resize(r),n._trim();for(let t=0;t<r;t++){const e=6*t;n.uint16[e+0]=4*t+0,n.uint16[e+1]=4*t+1,n.uint16[e+2]=4*t+2,n.uint16[e+3]=4*t+2,n.uint16[e+4]=4*t+3,n.uint16[e+5]=4*t+0}return n}(d));const _=l.createIndexBuffer(cn,!0),v=l.createVertexBuffer(g,t.collisionCircleLayout.members,!0);for(const w of f){const r={u_matrix:w.transform,u_inv_matrix:w.invTransform,u_camera_to_center_distance:(b=c).getCameraToCenterDistance(w.projection),u_viewport_size:[b.width,b.height]};m.draw(l,u.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,r,n.id,v,_,t.SegmentVector.simpleSegment(0,2*w.circleOffset,w.circleArray.length,w.circleArray.length/2),null,c.zoom)}var b;v.destroy(),_.destroy()}const fn=t.create();function dn(e,r,n,i,o,s){const{horizontalAlign:a,verticalAlign:l}=t.getAnchorAlignment(e),u=-(a-.5)*r,c=-(l-.5)*n,h=t.evaluateVariableOffset(e,i);return new t.pointGeometry((u/o+h[0])*s,(c/o+h[1])*s)}function pn(e,r,n,i,o,s,a,l,u,c,h){const f=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,p=e.icon.dynamicLayoutVertexArray,m={},g=xe(l,e.getProjection(),s),y=s.elevation,_=e.getProjection().upVectorScale(l.canonical,s.center.lat,s.worldSize);d.clear();for(let v=0;v<f.length;v++){const p=f.get(v),b=e.allowVerticalPlacement&&!p.placedOrientation,w=p.hidden||!p.crossTileID||b?null:i[p.crossTileID];if(w){const i=new t.pointGeometry(p.tileAnchorX,p.tileAnchorY),f=e.getProjection().upVector(l.canonical,i.x,i.y),v=y?y.getAtTileOffset(l,i.x,i.y):0,b=oe([p.projectedAnchorX+v*f[0]*_.metersToTile,p.projectedAnchorY+v*f[1]*_.metersToTile,p.projectedAnchorZ+v*f[2]*_.metersToTile],n?g:a),x=se(s.getCameraToCenterDistance(e.getProjection()),b.signedDistanceFromCamera);let E=o.evaluateSizeForFeature(e.textSizeData,c,p)*x/t.ONE_EM;n&&(E*=e.tilePixelRatio/u);const{width:S,height:M,anchor:T,textOffset:A,textScale:C}=w,I=dn(T,S,M,A,C,E);let k;if(n){const t=i.add(I),{x:r,y:n,z:o}=e.getProjection().projectTilePoint(t.x,t.y,l.canonical);k=oe([r+v*f[0]*_.metersToTile,n+v*f[1]*_.metersToTile,o+v*f[2]*_.metersToTile],a).point}else{const t=r?I.rotate(-s.angle):I;k=[b.point[0]+t.x,b.point[1]+t.y,0]}const R=e.allowVerticalPlacement&&p.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<p.numGlyphs;e++)t.addDynamicAttributes(d,k[0],k[1],k[2],R);h&&p.associatedIconIndex>=0&&(m[p.associatedIconIndex]={shiftedAnchor:k,angle:R})}else ge(p.numGlyphs,d)}if(h){p.clear();const r=e.icon.placedSymbolArray;for(let e=0;e<r.length;e++){const n=r.get(e);if(n.hidden)ge(n.numGlyphs,p);else{const r=m[e];if(r)for(let e=0;e<n.numGlyphs;e++)t.addDynamicAttributes(p,r.shiftedAnchor[0],r.shiftedAnchor[1],r.shiftedAnchor[2],r.angle);else ge(n.numGlyphs,p)}}e.icon.dynamicLayoutVertexBuffer.updateData(p)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function mn(t,e,r){return r.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function gn(e,r,n,i,o,s,a,l,u,c,h,f){const d=e.context,p=d.gl,m=e.transform,g="map"===l,y="map"===u,_=g&&"point"!==n.layout.get("symbol-placement"),v=g&&!y&&!_,b=void 0!==n.layout.get("symbol-sort-key").constantOr(1);let w=!1;const x=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),E=[t.mercatorXfromLng(m.center.lng),t.mercatorYfromLat(m.center.lat)],S=n.layout.get("text-variable-anchor"),M="globe"===m.projection.name,T=[],A=[0,-1,0];let C=A;!M&&!m.mercatorFromTransition||g||(C=function(e){const r=e._camera.getWorldToCamera(e.worldSize,1),n=t.multiply([],r,e.globeMatrix);t.invert(n,n);const i=[0,0,0],o=[0,1,0,0];return t.transformMat4$1(o,o,n),i[0]=o[0],i[1]=o[1],i[2]=o[2],t.normalize(i,i),i}(m));for(const I of i){const i=r.getTile(I),l=i.getBucket(n);if(!l)continue;if("mercator"===l.projection.name&&M)continue;const u=o?l.text:l.icon;if(!u||l.fullyClipped||!u.segments.get().length)continue;const h=u.programConfigurations.get(n.id),f=o||l.sdfIcons,d=o?l.textSizeData:l.iconSizeData,x=y||0!==m.pitch,k=t.evaluateSizeForZoom(d,m.zoom);let R,B,P,D,L=[0,0],O=null;if(o){if(B=i.glyphAtlasTexture,P=p.LINEAR,R=i.glyphAtlasTexture.size,l.iconsInText){L=i.imageAtlasTexture.size,O=i.imageAtlasTexture;const t="composite"===d.kind||"camera"===d.kind;D=x||e.options.rotating||e.options.zooming||t?p.LINEAR:p.NEAREST}}else{const t=1!==n.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;B=i.imageAtlasTexture,P=f||e.options.rotating||e.options.zooming||t||x?p.LINEAR:p.NEAREST,R=i.imageAtlasTexture.size}const N="globe"===l.projection.name,z=N?C:A,U=N?t.globeToMercatorTransition(m.zoom):0,j=xe(I,l.getProjection(),m),F=m.calculatePixelsToTileUnitsMatrix(i),V=ee(j,i.tileID.canonical,y,g,m,l.getProjection(),F),G=e.terrain&&y&&_?t.invert(t.create(),V):fn,q=ne(j,i.tileID.canonical,y,g,m,l.getProjection(),F),K=S&&l.hasTextData(),W="none"!==n.layout.get("icon-text-fit")&&K&&l.hasIconData();if(_){const t=m.elevation,r=t?t.getAtTileOffsetFunc(I,m.center.lat,m.worldSize,l.getProjection()):t=>[0,0,0],n=re(j,i.tileID.canonical,y,g,m,l.getProjection(),F);le(l,j,e,o,n,q,y,c,r,I)}const Z=_||o&&S||W,H=e.translatePosMatrix(j,i,s,a),Q=Z?fn:V,X=e.translatePosMatrix(q,i,s,a,!0),Y=l.getProjection().createInversionMatrix(m,I.canonical),J=[];e.terrain&&y&&J.push("PITCH_WITH_MAP_TERRAIN"),N&&J.push("PROJECTION_GLOBE_VIEW"),Z&&J.push("PROJECTED_POS_ON_VIEWPORT");const $=f&&0!==n.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let tt;tt=f?l.iconsInText?sn(d.kind,k,v,y,e,H,Q,X,R,L,I,U,E,Y,z,l.getProjection()):on(d.kind,k,v,y,e,H,Q,X,o,R,!0,I,U,E,Y,z,l.getProjection()):nn(d.kind,k,v,y,e,H,Q,X,o,R,I,U,E,Y,z,l.getProjection());const et={program:e.useProgram(mn(f,o,l),h,J),buffers:u,uniformValues:tt,atlasTexture:B,atlasTextureIcon:O,atlasInterpolation:P,atlasInterpolationIcon:D,isSDF:f,hasHalo:$,tile:i,labelPlaneMatrixInv:G};if(b&&l.canOverlap){w=!0;const e=u.segments.get();for(const r of e)T.push({segments:new t.SegmentVector([r]),sortKey:r.sortKey,state:et})}else T.push({segments:u.segments,sortKey:0,state:et})}w&&T.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of T){const r=t.state;if(e.terrain&&e.terrain.setupElevationDraw(r.tile,r.program,{useDepthForOcclusion:!M,labelPlaneMatrixInv:r.labelPlaneMatrixInv}),d.activeTexture.set(p.TEXTURE0),r.atlasTexture.bind(r.atlasInterpolation,p.CLAMP_TO_EDGE),r.atlasTextureIcon&&(d.activeTexture.set(p.TEXTURE1),r.atlasTextureIcon&&r.atlasTextureIcon.bind(r.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),r.isSDF){const i=r.uniformValues;r.hasHalo&&(i.u_is_halo=1,yn(r.buffers,t.segments,n,e,r.program,x,h,f,i)),i.u_is_halo=0}yn(r.buffers,t.segments,n,e,r.program,x,h,f,r.uniformValues)}}function yn(e,r,n,i,o,s,a,l,u){const c=i.context,h=[e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer,e.globeExtVertexBuffer];o.draw(c,c.gl.TRIANGLES,s,a,l,t.CullFaceMode.disabled,u,n.id,e.layoutVertexBuffer,e.indexBuffer,r,n.paint,i.transform.zoom,e.programConfigurations.get(n.id),h)}function _n(e,r,n,i,o,s,a){const l=e.context.gl,u=n.paint.get("fill-pattern"),c=u&&u.constantOr(1),h=n.getCrossfadeParameters();let f,d,p,m,g;a?(d=c&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",f=l.LINES):(d=c?"fillPattern":"fill",f=l.TRIANGLES);for(const y of i){const i=r.getTile(y);if(c&&!i.patternsLoaded())continue;const _=i.getBucket(n);if(!_)continue;e.prepareDrawTile();const v=_.programConfigurations.get(n.id),b=e.useProgram(d,v);c&&(e.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(h));const w=u.constantOr(null);if(w&&i.imageAtlas){const t=i.imageAtlas,e=t.patternPositions[w.to.toString()],r=t.patternPositions[w.from.toString()];e&&r&&v.setConstantPatternPositions(e,r)}const x=e.translatePosMatrix(y.projMatrix,i,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){m=_.indexBuffer2,g=_.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];p="fillOutlinePattern"===d&&c?Fr(x,e,h,i,t):jr(x,t)}else m=_.indexBuffer,g=_.segments,p=c?Ur(x,e,h,i):zr(x);e.prepareDrawProgram(e.context,b,y.toUnwrapped()),b.draw(e.context,f,o,e.stencilModeForClipping(y),s,t.CullFaceMode.disabled,p,n.id,_.layoutVertexBuffer,m,g,n.paint,e.transform.zoom,v)}}function vn(e,r,n,i,o,s,a){const l=e.context,u=l.gl,c=e.transform,h=n.paint.get("fill-extrusion-pattern"),f=h.constantOr(1),d=n.getCrossfadeParameters(),p=n.paint.get("fill-extrusion-opacity"),m=[n.paint.get("fill-extrusion-ambient-occlusion-intensity"),n.paint.get("fill-extrusion-ambient-occlusion-radius")],g=n.layout.get("fill-extrusion-edge-radius"),y="globe"===c.projection.name?t.fillExtrusionHeightLift():0,_="globe"===c.projection.name,v=_?t.globeToMercatorTransition(c.zoom):0,b=[t.mercatorXfromLng(c.center.lng),t.mercatorYfromLat(c.center.lat)],w=[];_&&(w.push("PROJECTION_GLOBE_VIEW"),e.style.terrainSetForDrapingOnly()&&w.push("TERRAIN")),m[0]>0&&w.push("FAUX_AO");for(const x of i){const i=r.getTile(x),E=i.getBucket(n);if(!E||E.projection.name!==c.projection.name)continue;const S=E.programConfigurations.get(n.id),M=e.useProgram(f?"fillExtrusionPattern":"fillExtrusion",S,w);if(e.terrain){const t=e.terrain;if(e.style.terrainSetForDrapingOnly())t.setupElevationDraw(i,M,{useMeterToDem:!0});else{if(!E.enableTerrain)continue;if(t.setupElevationDraw(i,M,{useMeterToDem:!0}),bn(l,r,x,E,n,t),!E.centroidVertexBuffer){const t=M.attributes.a_centroid_pos;void 0!==t&&u.vertexAttrib2f(t,0,0)}}}f&&(e.context.activeTexture.set(u.TEXTURE0),i.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),S.updatePaintBuffers(d));const T=h.constantOr(null);if(T&&i.imageAtlas){const t=i.imageAtlas,e=t.patternPositions[T.to.toString()],r=t.patternPositions[T.from.toString()];e&&r&&S.setConstantPatternPositions(e,r)}const A=e.translatePosMatrix(x.projMatrix,i,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),C=c.projection.createInversionMatrix(c,x.canonical),I=n.paint.get("fill-extrusion-vertical-gradient"),k=f?Nr(A,e,I,p,m,g,x,d,i,y,v,b,C):Or(A,e,I,p,m,g,x,y,v,b,C);e.prepareDrawProgram(l,M,x.toUnwrapped());const R=[];e.terrain&&R.push(E.centroidVertexBuffer),_&&R.push(E.layoutVertexExtBuffer),M.draw(l,l.gl.TRIANGLES,o,s,a,t.CullFaceMode.backCCW,k,n.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,n.paint,e.transform.zoom,S,R)}}function bn(e,r,n,i,o,s){const a=[e=>{let r=e.canonical.x-1,n=e.wrap;return r<0&&(r=(1<<e.canonical.z)-1,n--),new t.OverscaledTileID(e.overscaledZ,n,e.canonical.z,r,e.canonical.y)},e=>{let r=e.canonical.x+1,n=e.wrap;return r===1<<e.canonical.z&&(r=0,n++),new t.OverscaledTileID(e.overscaledZ,n,e.canonical.z,r,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=r.getSource().minzoom,n=t=>{const e=r.getTileByID(t);if(e&&e.hasData())return e.getBucket(o)},i=[0,-1,1];for(const r of i){if(t.overscaledZ+r<e)continue;const i=n(t.calculateScaledKey(t.overscaledZ+r));if(i)return i}},u=[0,0,0],c=(e,r)=>(u[0]=Math.min(e.min.y,r.min.y),u[1]=Math.max(e.max.y,r.max.y),u[2]=t.EXTENT-r.min.x>e.max.x?r.min.x-t.EXTENT:e.max.x,u),h=(e,r)=>(u[0]=Math.min(e.min.x,r.min.x),u[1]=Math.max(e.max.x,r.max.x),u[2]=t.EXTENT-r.min.y>e.max.y?r.min.y-t.EXTENT:e.max.y,u),f=[(t,e)=>c(t,e),(t,e)=>c(e,t),(t,e)=>h(t,e),(t,e)=>h(e,t)],d=new t.pointGeometry(0,0);let p,m,g;const y=(e,r,i,o,a)=>{const l=[[o?i:e,o?e:i,0],[o?i:r,o?r:i,0]],u=a<0?t.EXTENT+a:a,c=[o?u:(e+r)/2,o?(e+r)/2:u,0];return 0===i&&a<0||0!==i&&a>0?s.getForTilePoints(g,[c],!0,m):l.push(c),s.getForTilePoints(n,l,!0,p),Math.max(l[0][2],l[1][2],c[2])/s.exaggeration()};for(let _=0;_<4;_++){const e=(_<2?1:5)-_,r=i.borders[_];if(0===r.length)continue;const o=g=a[_](n),u=l(o);if(!(u&&u instanceof t.FillExtrusionBucket&&u.enableTerrain))continue;if(i.borderDoneWithNeighborZ[_]===u.canonical.z&&u.borderDoneWithNeighborZ[e]===i.canonical.z)continue;if(m=s.findDEMTileFor(o),!m||!m.dem)continue;if(!p){const t=s.findDEMTileFor(n);if(!t||!t.dem)return;p=t}const c=u.borders[e];let h=0;const v=u.borderDoneWithNeighborZ[e]!==i.canonical.z;if(i.canonical.z===u.canonical.z){for(let n=0;n<r.length;n++){const o=i.featuresOnBorder[r[n]],s=o.borders[_];let a;for(;h<c.length&&(a=u.featuresOnBorder[c[h]],!(a.borders[e][1]>s[0]+3));)v&&u.encodeCentroid(void 0,a,!1),h++;if(a&&h<c.length){const r=h;let n=0;for(;!(a.borders[e][0]>s[1]-3)&&(n++,++h!==c.length);)a=u.featuresOnBorder[c[h]];if(a=u.featuresOnBorder[c[r]],o.intersectsCount()>1||a.intersectsCount()>1||1!==n){1!==n&&(h=r),i.encodeCentroid(void 0,o,!1),v&&u.encodeCentroid(void 0,a,!1);continue}const l=f[_](o,a),p=_%2?t.EXTENT-1:0;d.x=y(l[0],Math.min(t.EXTENT-1,l[1]),p,_<2,l[2]),d.y=0,i.encodeCentroid(d,o,!1),v&&u.encodeCentroid(d,a,!1)}else i.encodeCentroid(void 0,o,!1)}i.borderDoneWithNeighborZ[_]=u.canonical.z,i.needsCentroidUpdate=!0,v&&(u.borderDoneWithNeighborZ[e]=i.canonical.z,u.needsCentroidUpdate=!0)}else{for(const t of r)i.encodeCentroid(void 0,i.featuresOnBorder[t],!1);if(v){for(const t of c)u.encodeCentroid(void 0,u.featuresOnBorder[t],!1);u.borderDoneWithNeighborZ[e]=i.canonical.z,u.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[_]=u.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(e)}const wn=new t.Color(1,0,0,1),xn=new t.Color(0,1,0,1),En=new t.Color(0,0,1,1),Sn=new t.Color(1,0,1,1),Mn=new t.Color(0,1,1,1);function Tn(e,r,n){const i=e.context,o=e.transform,s=i.gl,a="globe"===o.projection.name,l=a?["PROJECTION_GLOBE_VIEW"]:null;let u=n.projMatrix;if(a&&t.globeToMercatorTransition(o.zoom)>0){const e=t.transitionTileAABBinECEF(n.canonical,o),r=t.globeDenormalizeECEF(e);u=t.multiply(new Float32Array(16),o.globeMatrix,r),t.multiply(u,o.projMatrix,u)}const c=e.useProgram("debug",null,l),h=r.getTileByID(n.key);e.terrain&&e.terrain.setupElevationDraw(h,c);const f=t.DepthMode.disabled,d=t.StencilMode.disabled,p=e.colorModeForRenderPass(),m="$debug";i.activeTexture.set(s.TEXTURE0),e.emptyTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),a?h._makeGlobeTileDebugBuffers(e.context,o):h._makeDebugTileBoundsBuffers(e.context,o.projection);const g=h._tileDebugBuffer||e.debugBuffer,y=h._tileDebugIndexBuffer||e.debugIndexBuffer,_=h._tileDebugSegments||e.debugSegments;c.draw(i,s.LINE_STRIP,f,d,p,t.CullFaceMode.disabled,Wr(u,t.Color.red),m,g,y,_,null,null,null,[h._globeTileDebugBorderBuffer]);const v=h.latestRawTileData,b=Math.floor((v&&v.byteLength||0)/1024),w=r.getTile(n).tileSize,x=512/Math.min(w,512)*(n.overscaledZ/o.zoom)*.5;let E=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(E+=` => ${n.overscaledZ}`),E+=` ${b}kb`,function(t,e){t.initDebugOverlayCanvas();const r=t.debugOverlayCanvas,n=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,r.width,r.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(r),t.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(e,E);const S=h._tileDebugTextBuffer||e.debugBuffer,M=h._tileDebugTextIndexBuffer||e.quadTriangleIndexBuffer,T=h._tileDebugTextSegments||e.debugSegments;c.draw(i,s.TRIANGLES,f,d,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,Wr(u,t.Color.transparent,x),m,S,M,T,null,null,null,[h._globeTileDebugTextBuffer])}function An(t,e,r,n){In(t,0,e+r/2,t.transform.width,r,n)}function Cn(t,e,r,n){In(t,e-r/2,0,r,t.transform.height,n)}function In(e,r,n,i,o,s){const a=e.context,l=a.gl;l.enable(l.SCISSOR_TEST),l.scissor(r*t.exported.devicePixelRatio,n*t.exported.devicePixelRatio,i*t.exported.devicePixelRatio,o*t.exported.devicePixelRatio),a.clear({color:s}),l.disable(l.SCISSOR_TEST)}const kn=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Rn}=kn;function Bn(t,e,r,n){t.emplaceBack(e,r,n)}class Pn{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,Bn(this.vertexArray,-1,-1,1),Bn(this.vertexArray,1,-1,1),Bn(this.vertexArray,-1,1,1),Bn(this.vertexArray,1,1,1),Bn(this.vertexArray,-1,-1,-1),Bn(this.vertexArray,1,-1,-1),Bn(this.vertexArray,-1,1,-1),Bn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,Rn),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function Dn(e,r,n,i,o,s){const a=e.gl,l=r.paint.get("sky-atmosphere-color"),u=r.paint.get("sky-atmosphere-halo-color"),c=r.paint.get("sky-atmosphere-sun-intensity"),h=((t,e,r,n,i)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:r,u_color_tint_r:[n.r,n.g,n.b,n.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(t.fromMat4(t.create$1(),i),o,c,l,u);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+s,r.skyboxTexture,0),n.draw(e,a.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,h,"skyboxCapture",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}const Ln=t.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class On{constructor(e){const r=new t.StructArrayLayout5f20;r.emplaceBack(-1,1,1,0,0),r.emplaceBack(1,1,1,1,0),r.emplaceBack(1,-1,1,1,1),r.emplaceBack(-1,-1,1,0,1);const n=new t.StructArrayLayout3ui6;n.emplaceBack(0,1,2),n.emplaceBack(2,3,0),this.vertexBuffer=e.createVertexBuffer(r,Ln.members),this.indexBuffer=e.createIndexBuffer(n),this.segments=t.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Nn={symbol:function(e,r,n,i,o){if("translucent"!==e.renderPass)return;const s=t.StencilMode.disabled,a=e.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(e,r,n,i,o,s,a){const l=r.transform,u="map"===o,c="map"===s;for(const h of e){const e=i.getTile(h),r=e.getBucket(n);if(!r||!r.text||!r.text.segments.get().length)continue;const o=t.evaluateSizeForZoom(r.textSizeData,l.zoom),s=xe(h,r.getProjection(),l),f=l.calculatePixelsToTileUnitsMatrix(e),d=ee(s,e.tileID.canonical,c,u,l,r.getProjection(),f),p="none"!==n.layout.get("icon-text-fit")&&r.hasIconData();if(o){const n=Math.pow(2,l.zoom-e.tileID.overscaledZ);pn(r,u,c,a,t.symbolSize,l,d,h,n,o,p)}}}(i,e,n,r,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),o),0!==n.paint.get("icon-opacity").constantOr(1)&&gn(e,r,n,i,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),s,a),0!==n.paint.get("text-opacity").constantOr(1)&&gn(e,r,n,i,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),s,a),r.map.showCollisionBoxes&&(hn(e,r,n,i,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),hn(e,r,n,i,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))},circle:function(e,r,n,i){if("translucent"!==e.renderPass)return;const o=n.paint.get("circle-opacity"),s=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity"),l=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===s.constantOr(1)||0===a.constantOr(1)))return;const u=e.context,c=u.gl,h=e.transform,f=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,p=e.colorModeForRenderPass(),m="globe"===h.projection.name,g=[t.mercatorXfromLng(h.center.lng),t.mercatorYfromLat(h.center.lat)],y=[];for(let v=0;v<i.length;v++){const o=i[v],s=r.getTile(o),a=s.getBucket(n);if(!a||a.projection.name!==h.projection.name)continue;const u=a.programConfigurations.get(n.id),c=qr(n);m&&c.push("PROJECTION_GLOBE_VIEW");const f=e.useProgram("circle",u,c),d=a.layoutVertexBuffer,p=a.globeExtVertexBuffer,_=a.indexBuffer,b=h.projection.createInversionMatrix(h,o.canonical),w={programConfiguration:u,program:f,layoutVertexBuffer:d,globeExtVertexBuffer:p,indexBuffer:_,uniformValues:Gr(e,o,s,b,g,n),tile:s};if(l){const e=a.segments.get();for(const r of e)y.push({segments:new t.SegmentVector([r]),sortKey:r.sortKey,state:w})}else y.push({segments:a.segments,sortKey:0,state:w})}l&&y.sort(((t,e)=>t.sortKey-e.sortKey));const _={useDepthForOcclusion:!m};for(const v of y){const{programConfiguration:r,program:i,layoutVertexBuffer:o,globeExtVertexBuffer:s,indexBuffer:a,uniformValues:l,tile:m}=v.state,g=v.segments;e.terrain&&e.terrain.setupElevationDraw(m,i,_),e.prepareDrawProgram(u,i,m.tileID.toUnwrapped()),i.draw(u,c.TRIANGLES,f,d,p,t.CullFaceMode.disabled,l,n.id,o,a,g,n.paint,h.zoom,r,[s])}},heatmap:function(e,r,n,i){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,s=o.gl,a=t.StencilMode.disabled,l=new t.ColorMode([s.ONE,s.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,r,n){const i=t.gl,o=e.width*n,s=e.height*n;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,o,s]);let a=r.heatmapFbo;if(!a||a&&(a.width!==o||a.height!==s)){a&&a.destroy();const e=i.createTexture();i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),a=r.heatmapFbo=t.createFramebuffer(o,s,!1),function(t,e,r,n,i,o){const s=t.gl;s.texImage2D(s.TEXTURE_2D,0,s.RGBA,i,o,0,s.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:s.UNSIGNED_BYTE,null),n.colorAttachment.set(r)}(t,0,e,a,o,s)}else i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),t.bindFramebuffer.set(a.framebuffer)}(o,e,n,"globe"===e.transform.projection.name?.5:.25),o.clear({color:t.Color.transparent});const u=e.transform,c="globe"===u.projection.name,h=c?["PROJECTION_GLOBE_VIEW"]:null,f=c?t.CullFaceMode.frontCCW:t.CullFaceMode.disabled,d=[t.mercatorXfromLng(u.center.lng),t.mercatorYfromLat(u.center.lat)];for(let p=0;p<i.length;p++){const m=i[p];if(r.hasRenderableParent(m))continue;const g=r.getTile(m),y=g.getBucket(n);if(!y||y.projection.name!==u.projection.name)continue;const _=y.programConfigurations.get(n.id),v=e.useProgram("heatmap",_,h),{zoom:b}=e.transform;e.terrain&&e.terrain.setupElevationDraw(g,v),e.prepareDrawProgram(o,v,m.toUnwrapped());const w=u.projection.createInversionMatrix(u,m.canonical);v.draw(o,s.TRIANGLES,t.DepthMode.disabled,a,l,f,Hr(e,m,g,w,d,b,n.paint.get("heatmap-intensity")),n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,e.transform.zoom,_,c?[y.globeExtVertexBuffer]:null)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,r){const n=e.context,i=n.gl,o=r.heatmapFbo;if(!o)return;n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),n.activeTexture.set(i.TEXTURE1);let s=r.colorRampTexture;s||(s=r.colorRampTexture=new t.Texture(n,r.colorRamp,i.RGBA)),s.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,i.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((t,e,r,n)=>({u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}))(0,r),r.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,r.paint,e.transform.zoom)}(e,n))},line:function(e,r,n,i){if("translucent"!==e.renderPass)return;const o=n.paint.get("line-opacity"),s=n.paint.get("line-width");if(0===o.constantOr(1)||0===s.constantOr(1))return;const a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),u=e.terrain&&e.terrain.renderingToTexture?1:t.exported.devicePixelRatio,c=n.paint.get("line-dasharray"),h=c.constantOr(1),f=n.layout.get("line-cap"),d=n.paint.get("line-pattern"),p=d.constantOr(1),m=n.paint.get("line-gradient"),g=n.getCrossfadeParameters(),y=p?"linePattern":"line",_=e.context,v=_.gl,b=(t=>{const e=[];$r(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");const r=t.paint.get("line-trim-offset");0===r[0]&&0===r[1]||e.push("RENDER_LINE_TRIM_OFFSET");const n=t.paint.get("line-pattern").constantOr(1),i=1!==t.paint.get("line-opacity").constantOr(1);return!n&&i&&e.push("RENDER_LINE_ALPHA_DISCARD"),e})(n);let w=b.includes("RENDER_LINE_ALPHA_DISCARD");e.terrain&&e.terrain.clipOrMaskOverlapStencilType()&&(w=!1);for(const x of i){const i=r.getTile(x);if(p&&!i.patternsLoaded())continue;const o=i.getBucket(n);if(!o)continue;e.prepareDrawTile();const s=o.programConfigurations.get(n.id),E=e.useProgram(y,s,b),S=d.constantOr(null);if(S&&i.imageAtlas){const t=i.imageAtlas,e=t.patternPositions[S.to.toString()],r=t.patternPositions[S.from.toString()];e&&r&&s.setConstantPatternPositions(e,r)}const M=c.constantOr(null),T=f.constantOr(null);if(!p&&M&&T&&i.lineAtlas){const t=i.lineAtlas,e=t.getDash(M.to,T),r=t.getDash(M.from,T);e&&r&&s.setConstantPatternPositions(e,r)}let[A,C]=n.paint.get("line-trim-offset");if("round"===T||"square"===T){const t=1;A!==C&&(0===A&&(A-=t),1===C&&(C+=t))}const I=e.terrain?x.projMatrix:null,k=p?Xr(e,i,n,g,I,u):Qr(e,i,n,g,I,o.lineClipsArray.length,u,[A,C]);if(m){const i=o.gradients[n.id];let s=i.texture;if(n.gradientVersion!==i.version){let a=256;if(n.stepInterpolant){const n=r.getSource().maxzoom,i=x.canonical.z===n?Math.ceil(1<<e.transform.maxZoom-x.canonical.z):1;a=t.clamp(t.nextPowerOfTwo(o.maxLineLength/t.EXTENT*1024*i),256,_.maxTextureSize)}i.gradient=t.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:a,image:i.gradient||void 0,clips:o.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new t.Texture(_,i.gradient,v.RGBA),i.version=n.gradientVersion,s=i.texture}_.activeTexture.set(v.TEXTURE1),s.bind(n.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}h&&(_.activeTexture.set(v.TEXTURE0),i.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),s.updatePaintBuffers(g)),p&&(_.activeTexture.set(v.TEXTURE0),i.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),s.updatePaintBuffers(g)),e.prepareDrawProgram(_,E,x.toUnwrapped());const R=r=>{E.draw(_,v.TRIANGLES,a,r,l,t.CullFaceMode.disabled,k,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,n.paint,e.transform.zoom,s,[o.layoutVertexBuffer2])};if(w){const r=e.stencilModeForClipping(x).ref;0===r&&e.terrain&&_.clear({stencil:0});const n={func:v.EQUAL,mask:255};k.u_alpha_discard_threshold=.8,R(new t.StencilMode(n,r,255,v.KEEP,v.KEEP,v.INVERT)),k.u_alpha_discard_threshold=0,R(new t.StencilMode(n,r,255,v.KEEP,v.KEEP,v.KEEP))}else R(e.stencilModeForClipping(x))}w&&(e.resetStencilClippingMasks(),e.terrain&&_.clear({stencil:0}))},fill:function(e,r,n,i){const o=n.paint.get("fill-color"),s=n.paint.get("fill-opacity");if(0===s.constantOr(1))return;const a=e.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===s.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){const o=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);_n(e,r,n,i,o,a,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){const o=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);_n(e,r,n,i,o,a,!0)}},"fill-extrusion":function(e,r,n,i){const o=n.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===e.renderPass){const s=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==o||n.paint.get("fill-extrusion-pattern").constantOr(1))vn(e,r,n,i,s,t.StencilMode.disabled,t.ColorMode.disabled),vn(e,r,n,i,s,e.stencilModeFor3D(),e.colorModeForRenderPass()),e.resetStencilClippingMasks();else{const o=e.colorModeForRenderPass();vn(e,r,n,i,s,t.StencilMode.disabled,o)}}},hillshade:function(e,r,n,i){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const o=e.context,s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),a=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[u,c]="translucent"!==e.renderPass||l?[{},i]:e.stencilConfigForOverlap(i);for(const h of c){const i=r.getTile(h);if(i.needsHillshadePrepare&&"offscreen"===e.renderPass)vr(e,i,n,s,t.StencilMode.disabled,a);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(h):u[h.overscaledZ];yr(e,h,i,n,s,t,a)}}o.viewport.set([0,0,e.width,e.height]),e.resetStencilClippingMasks()},raster:function(e,r,n,i,o,s){if("translucent"!==e.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!i.length)return;const a=e.context,l=a.gl,u=r.getSource(),c=e.useProgram("raster"),h=e.colorModeForRenderPass(),f=e.terrain&&e.terrain.renderingToTexture,[d,p]=u instanceof kt||f?[{},i]:e.stencilConfigForOverlap(i),m=p[p.length-1].overscaledZ,g=!e.options.moving;for(const y of p){const i=f?t.DepthMode.disabled:e.depthModeForSublayer(y.overscaledZ-m,1===n.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),o=y.toUnwrapped(),p=r.getTile(y);if(f&&(!p||!p.hasData()))continue;const _=f?y.projMatrix:e.transform.calculateProjMatrix(o,g),v=e.terrain&&f?e.terrain.stencilModeForRTTOverlap(y):d[y.overscaledZ],b=s?0:n.paint.get("raster-fade-duration");p.registerFadeDuration(b);const w=r.findLoadedParent(y,0),x=Cr(p,w,r,e.transform,b);let E,S;e.terrain&&e.terrain.prepareDrawTile();const M="nearest"===n.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;a.activeTexture.set(l.TEXTURE0),p.texture.bind(M,l.CLAMP_TO_EDGE),a.activeTexture.set(l.TEXTURE1),w?(w.texture.bind(M,l.CLAMP_TO_EDGE),E=Math.pow(2,w.tileID.overscaledZ-p.tileID.overscaledZ),S=[p.tileID.canonical.x*E%1,p.tileID.canonical.y*E%1]):p.texture.bind(M,l.CLAMP_TO_EDGE);const T=tn(_,S||[0,0],E||1,x,n,u instanceof kt?u.perspectiveTransform:[0,0]);if(e.prepareDrawProgram(a,c,o),u instanceof kt)u.boundsBuffer&&u.boundsSegments&&c.draw(a,l.TRIANGLES,i,t.StencilMode.disabled,h,t.CullFaceMode.disabled,T,n.id,u.boundsBuffer,e.quadTriangleIndexBuffer,u.boundsSegments);else{const{tileBoundsBuffer:r,tileBoundsIndexBuffer:o,tileBoundsSegments:s}=e.getTileBoundsBuffers(p);c.draw(a,l.TRIANGLES,i,v,h,t.CullFaceMode.disabled,T,n.id,r,o,s)}}e.resetStencilClippingMasks()},background:function(e,r,n,i){const o=n.paint.get("background-color"),s=n.paint.get("background-opacity");if(0===s)return;const a=e.context,l=a.gl,u=e.transform,c=u.tileSize,h=n.paint.get("background-pattern");if(e.isPatternMissing(h))return;const f=!h&&1===o.a&&1===s&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==f)return;const d=t.StencilMode.disabled,p=e.depthModeForSublayer(0,"opaque"===f?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),m=e.colorModeForRenderPass(),g=e.useProgram(h?"backgroundPattern":"background");let y,_=i;_||(y=e.getBackgroundTiles(),_=Object.values(y).map((t=>t.tileID))),h&&(a.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));const v=n.getCrossfadeParameters();for(const b of _){const f=b.toUnwrapped(),_=i?b.projMatrix:e.transform.calculateProjMatrix(f);e.prepareDrawTile();const w=r?r.getTile(b):y?y[b.key]:new t.Tile(b,c,u.zoom,e),x=h?ln(_,s,e,h,{tileID:b,tileSize:c},v):an(_,s,o);e.prepareDrawProgram(a,g,f);const{tileBoundsBuffer:E,tileBoundsIndexBuffer:S,tileBoundsSegments:M}=e.getTileBoundsBuffers(w);g.draw(a,l.TRIANGLES,p,d,m,t.CullFaceMode.disabled,x,n.id,E,S,M)}},sky:function(e,r,n){const i=e.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:t.smoothstep(7,8,i.zoom),s=n.paint.get("sky-opacity")*o;if(0===s)return;const a=e.context,l=n.paint.get("sky-type"),u=new t.DepthMode(a.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),c=e.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===e.renderPass?n.needsSkyboxCapture(e)&&(function(e,r,n,i){const o=e.context,s=o.gl;let a=r.skyboxFbo;if(!a){a=r.skyboxFbo=o.createFramebuffer(32,32,!1),r.skyboxGeometry=new Pn(o),r.skyboxTexture=o.gl.createTexture(),s.bindTexture(s.TEXTURE_CUBE_MAP,r.skyboxTexture),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_CUBE_MAP,s.TEXTURE_MAG_FILTER,s.LINEAR);for(let t=0;t<6;++t)s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,s.RGBA,32,32,0,s.RGBA,s.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(a.framebuffer),o.viewport.set([0,0,32,32]);const l=r.getCenter(e,!0),u=e.useProgram("skyboxCapture"),c=new Float64Array(16);t.identity(c),t.rotateY(c,c,.5*-Math.PI),Dn(o,r,u,c,l,0),t.identity(c),t.rotateY(c,c,.5*Math.PI),Dn(o,r,u,c,l,1),t.identity(c),t.rotateX(c,c,.5*-Math.PI),Dn(o,r,u,c,l,2),t.identity(c),t.rotateX(c,c,.5*Math.PI),Dn(o,r,u,c,l,3),t.identity(c),Dn(o,r,u,c,l,4),t.identity(c),t.rotateY(c,c,Math.PI),Dn(o,r,u,c,l,5),o.viewport.set([0,0,e.width,e.height])}(e,n),n.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,r,n,i,o){const s=e.context,a=s.gl,l=e.transform,u=e.useProgram("skybox");s.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_CUBE_MAP,r.skyboxTexture);const c=((t,e,r,n,i)=>({u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:n,u_temporal_offset:i}))(l.skyboxMatrix,r.getCenter(e,!1),0,i,o);e.prepareDrawProgram(s,u),u.draw(s,a.TRIANGLES,n,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,c,"skybox",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(e,n,u,s,c):"gradient"===l&&"sky"===e.renderPass&&function(e,r,n,i,o){const s=e.context,a=s.gl,l=e.transform,u=e.useProgram("skyboxGradient");r.skyboxGeometry||(r.skyboxGeometry=new Pn(s)),s.activeTexture.set(a.TEXTURE0);let c=r.colorRampTexture;c||(c=r.colorRampTexture=new t.Texture(s,r.colorRamp,a.RGBA)),c.bind(a.LINEAR,a.CLAMP_TO_EDGE);const h=((e,r,n,i,o)=>({u_matrix:e,u_color_ramp:0,u_center_direction:r,u_radius:t.degToRad(n),u_opacity:i,u_temporal_offset:o}))(l.skyboxMatrix,r.getCenter(e,!1),r.paint.get("sky-gradient-radius"),i,o);e.prepareDrawProgram(s,u),u.draw(s,a.TRIANGLES,n,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,h,"skyboxGradient",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(e,n,u,s,c)},debug:function(t,e,r){for(let n=0;n<r.length;n++)Tn(t,e,r[n])},custom:function(e,r,n){const i=e.context,o=n.implementation;if(e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes("custom"))t.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===e.renderPass){const t=o.prerender;t&&(e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),t.call(o,i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),i.setStencilMode(t.StencilMode.disabled);const r="3d"===o.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);i.setDepthMode(r),o.render(i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState(),i.bindFramebuffer.set(null)}}};class zn{constructor(e,r){this.context=new Tt(e),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new He,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(t,e){const r=!!t&&!!t.terrain&&this.transform.projection.supportsTerrain;if(!(r||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Br(this,t));const n=this._terrain;this.transform.elevation=r?n:null,n.update(t,this.transform,e)}_updateFog(t){const e=t.fog;if(!e||"globe"===this.transform.projection.name||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[r,n]=e.getFovAdjustedRange(this.transform._fov);if(r>n)return void(this.transform.fogCullDistSq=null);const i=r+.78*(n-r);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,r){if(this.width=e*t.exported.devicePixelRatio,this.height=r*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(r,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const i=new t.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(t.EXTENT,0,t.EXTENT,0),o.emplaceBack(0,t.EXTENT,0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.mercatorBoundsBuffer=e.createVertexBuffer(o,t.boundsAttributes.members),this.mercatorBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);const a=new t.StructArrayLayout1ui2;for(const t of[0,1,3,2,0])a.emplaceBack(t);this.debugIndexBuffer=e.createIndexBuffer(a),this.emptyTexture=new t.Texture(e,new t.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),e.gl.RGBA),this.identityMat=t.create();const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now()),this.atmosphereBuffer=new On(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(t){return t._makeTileBoundsBuffers(this.context,this.transform.projection),t._tileBoundsBuffer?{tileBoundsBuffer:t._tileBoundsBuffer,tileBoundsIndexBuffer:t._tileBoundsIndexBuffer,tileBoundsSegments:t._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const e=this.context,r=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(e,r.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,Ar(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(e,r,n){if(!r||this.currentStencilSource===r.id||!e.isTileClipped()||!n||0===n.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let t=!1;for(const e of n)if(void 0===this._tileClippingMaskIDs[e.key]){t=!0;break}if(!t)return}this.currentStencilSource=r.id;const i=this.context,o=i.gl;this.nextStencilID+n.length>256&&this.clearStencil(),i.setColorMode(t.ColorMode.disabled),i.setDepthMode(t.DepthMode.disabled);const s=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const a of n){const e=r.getTile(a),n=this._tileClippingMaskIDs[a.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:u,tileBoundsSegments:c}=this.getTileBoundsBuffers(e);s.draw(i,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},n,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Ar(a.projMatrix),"$clipping",l,u,c)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,r=this.context.gl;return new t.StencilMode({func:r.NOTEQUAL,mask:255},e,255,r.KEEP,r.KEEP,r.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const r=this.context.gl;return new t.StencilMode({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,r.KEEP,r.KEEP,r.REPLACE)}stencilConfigForOverlap(e){const r=this.context.gl,n=e.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),i=n[n.length-1].overscaledZ,o=n[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const e={};for(let n=0;n<o;n++)e[n+i]=new t.StencilMode({func:r.GEQUAL,mask:255},n+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=o,[e,n]}return[{[i]:t.StencilMode.disabled},n]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const r=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(r,r,r,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,r,n){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(n||this.context.gl.LEQUAL,r,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,r){this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const n=this.style.order,i=this.style._sourceCaches;for(const t in i){const e=i[t];e.used&&e.prepare(this.context)}const o={},s={},a={};for(const t in i){const e=i[t];o[t]=e.getVisibleCoordinates(),s[t]=o[t].slice().reverse(),a[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<n.length;t++)if(this.style._layers[n[t]].is3D()){this.opaquePassCutoff=t;break}if(this.terrain&&(this.terrain.updateTileBinding(a),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new t.GlobeSharedBuffers(this.context)),t.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const t of n){const r=this.style._layers[t],n=e._getLayerSourceCache(r);if(!r.hasOffscreenPass()||r.isHidden(this.transform.zoom))continue;const i=n?s[n.id]:void 0;("custom"===r.type||r.isSky()||i&&i.length)&&this.renderLayer(this,n,r,i)}if(this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:r.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[n[this.currentLayer]],r=e._getLayerSourceCache(t);if(t.isSky())continue;const i=r?s[r.id]:void 0;this._renderTileClippingMasks(t,r,i),this.renderLayer(this,r,t,i)}if(this.style.fog&&this.transform.projection.supportsFog&&function(e,r){const n=e.context,i=n.gl,o=e.transform,s=new t.DepthMode(i.LEQUAL,t.DepthMode.ReadOnly,[0,1]),a=e.useProgram("globeAtmosphere",null,"globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=t.globeToMercatorTransition(o.zoom),u=r.properties.get("color").toArray01(),c=r.properties.get("high-color").toArray01(),h=r.properties.get("space-color").toArray01PremultipliedAlpha(),f=t.identity$1([]);t.rotateY$1(f,f,-t.degToRad(o._center.lng)),t.rotateX$1(f,f,t.degToRad(o._center.lat)),t.rotateZ$1(f,f,o.angle),t.rotateX$1(f,f,-o._pitch);const d=t.fromQuat(new Float32Array(16),f),p=t.mapValue(r.properties.get("star-intensity"),0,1,0,.25),m=5e-4,g=t.mapValue(r.properties.get("horizon-blend"),0,1,m,.25),y=t.globeUseCustomAntiAliasing(e,n,o)&&g===m?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,_=e.frameCounter/1e3%1,v=t.length(o.globeCenterInViewSpace),b=Math.sqrt(Math.pow(v,2)-Math.pow(y,2)),w=Math.acos(b/v),x=((e,r,n,i,o,s,a,l,u,c,h,f,d,p)=>({u_frustum_tl:e,u_frustum_tr:r,u_frustum_br:n,u_frustum_bl:i,u_horizon:o,u_transition:s,u_fadeout_range:a,u_color:l,u_high_color:u,u_space_color:c,u_star_intensity:h,u_star_size:5*t.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:f,u_horizon_angle:d,u_rotation_matrix:p}))(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,l,g,u,c,h,p,_,w,d);e.prepareDrawProgram(n,a);const E=e.atmosphereBuffer;E&&a.draw(n,i.TRIANGLES,s,t.StencilMode.disabled,t.ColorMode.alphaBlended,t.CullFaceMode.backCW,x,"skybox",E.vertexBuffer,E.indexBuffer,E.segments)}(this,this.style.fog),this.renderPass="sky",(t.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){const t=this.style._layers[n[this.currentLayer]],r=e._getLayerSourceCache(t);t.isSky()&&this.renderLayer(this,r,t,r?s[r.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;){const t=this.style._layers[n[this.currentLayer]],r=e._getLayerSourceCache(t);if(t.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(t)){if(t.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=r?("symbol"===t.type?a:s)[r.id]:void 0;this._renderTileClippingMasks(t,r,r?o[r.id]:void 0),this.renderLayer(this,r,t,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let r=null;t.values(this.style._layers).forEach((t=>{const n=e._getLayerSourceCache(t);n&&!t.isHidden(this.transform.zoom)&&(!r||r.getSource().maxzoom<n.getSource().maxzoom)&&(r=n)})),r&&this.options.showTileBoundaries&&Nn.debug(this,r,r.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;An(t,t.transform.height-(e.top||0),3,wn),An(t,e.bottom||0,3,xn),Cn(t,e.left||0,3,En),Cn(t,t.transform.width-(e.right||0),3,Sn);const r=t.transform.centerPoint;!function(t,e,r,n){In(t,e-1,r-10,2,20,n),In(t,e-10,r-1,20,2,n)}(t,r.x,t.transform.height-r.y,Mn)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}}renderLayer(t,e,r,n){r.isHidden(this.transform.zoom)||("background"===r.type||"sky"===r.type||"custom"===r.type||n&&n.length)&&(this.id=r.id,this.gpuTimingStart(r),t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes(r.type)||Nn[r.type](t,e,r,n,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let r=this.gpuTimers[t.id];r||(r=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),r.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,r.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const t=this.context.extTimerQuery,e=t.createQueryEXT();this.deferredRenderGpuTimeQueries.push(e),t.beginQueryEXT(t.TIME_ELAPSED_EXT,e)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}collectDeferredRenderGpuQueries(){const t=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],t}queryGpuTimers(t){const e={};for(const r in t){const n=t[r],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(n.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n.query),e[r]=o}return e}queryGpuTimeDeferredRender(t){if(!this.options.gpuTimingDeferredRender)return 0;const e=this.context.extTimerQuery;let r=0;for(const n of t)r+=e.getQueryObjectEXT(n,e.QUERY_RESULT_EXT)/1e6,e.deleteQueryEXT(n);return r}translatePosMatrix(e,r,n,i,o){if(!n[0]&&!n[1])return e;const s=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(s){const t=Math.sin(s),e=Math.cos(s);n=[n[0]*e-n[1]*t,n[0]*t+n[1]*e]}const a=[o?n[0]:P(r,n[0],this.transform.zoom),o?n[1]:P(r,n[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,a),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),r=this.imageManager.getPattern(t.to.toString());return!e||!r}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,e=this.style&&this.style.fog,r=[];return this.terrain&&!this.terrain.renderingToTexture&&r.push("TERRAIN"),e&&!t&&0!==e.getOpacity(this.transform.pitch)&&r.push("FOG"),t&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}useProgram(t,e,r){this.cache=this.cache||{};const n=r||[],i=this.currentGlobalDefines().concat(n),o=Pr.cacheKey(fr[t],t,i,e);return this.cache[o]||(this.cache[o]=new Pr(this.context,t,fr[t],e,un[t],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(e,r,n){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const o=i.getOpacity(this.transform.pitch),s=((e,r,n,i,o,s,a,l,u,c,h)=>{const f=e.transform,d=r.properties.get("color").toArray01();d[3]=i;const p=e.frameCounter/1e3%1;return{u_fog_matrix:n?f.calculateFogTileMatrix(n):e.identityMat,u_fog_range:r.getFovAdjustedRange(f._fov),u_fog_color:d,u_fog_horizon_blend:r.properties.get("horizon-blend"),u_fog_temporal_offset:p,u_frustum_tl:o,u_frustum_tr:s,u_frustum_br:a,u_frustum_bl:l,u_globe_pos:u,u_globe_radius:c,u_viewport:h,u_globe_transition:t.globeToMercatorTransition(f.zoom),u_is_globe:+("globe"===f.projection.name)}})(this,i,n,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*t.exported.devicePixelRatio,this.transform.height*t.exported.devicePixelRatio]);r.setFogUniformValues(e,s)}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}getBackgroundTiles(){const e=this._backgroundTiles,r=this._backgroundTiles={},n=this.transform.coveringTiles({tileSize:512});for(const i of n)r[i.key]=e[i.key]||new t.Tile(i,512,this.transform.tileZoom,this);return r}clearBackgroundTiles(){this._backgroundTiles={}}}class Un{constructor(t=0,e=0,r=0,n=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(r)||r<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=r,this.right=n}interpolate(e,r,n){return null!=r.top&&null!=e.top&&(this.top=t.number(e.top,r.top,n)),null!=r.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,r.bottom,n)),null!=r.left&&null!=e.left&&(this.left=t.number(e.left,r.left,n)),null!=r.right&&null!=e.right&&(this.right=t.number(e.right,r.right,n)),this}getCenter(e,r){const n=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+r-this.bottom)/2,0,r);return new t.pointGeometry(n,i)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Un(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function jn(e,r){const n=t.getColumn(e,3);t.fromQuat(e,r),t.setColumn(e,3,n)}function Fn(e,r){const n=t.identity$1([]);return t.rotateZ$1(n,n,-r),t.rotateX$1(n,n,-e),n}function Vn(e,r){const n=[e[0],e[1],0],i=[r[0],r[1],0];if(t.length(n)>=1e-15){const e=t.normalize([],n);t.scale$2(i,e,t.dot(i,e)),r[0]=i[0],r[1]=i[1]}const o=t.cross([],r,e);if(t.len(o)<1e-15)return null;const s=Math.atan2(-o[1],o[0]);return Fn(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),s)}class Gn{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){if(e){const r=e instanceof t.MercatorCoordinate?e:new t.MercatorCoordinate(e[0],e[1],e[2]);this._renderWorldCopies&&(r.x=t.wrap(r.x,0,1)),this._position=r}else this._position=null}lookAtPoint(e,r){if(this.orientation=null,!this.position)return;const n=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,i=this.position,o=t.MercatorCoordinate.fromLngLat(e,n),s=[o.x-i.x,o.y-i.y,o.z-i.z];r||(r=[0,0,1]),r[2]=Math.abs(r[2]),this.orientation=Vn(s,r)}setPitchBearing(e,r){this.orientation=Fn(t.degToRad(e),t.degToRad(-r))}}class qn{constructor(e,r){this._transform=t.identity([]),this.orientation=r,this.position=e}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const e=t.getColumn(this._transform,3);return[e[0],e[1],e[2]]}set position(e){var r;e&&t.setColumn(this._transform,3,[(r=e)[0],r[1],r[2],1])}get orientation(){return this._orientation}set orientation(e){this._orientation=e||t.identity$1([]),e&&jn(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=Fn(t,e),jn(this._transform,this._orientation)}forward(){const e=t.getColumn(this._transform,2);return[-e[0],-e[1],-e[2]]}up(){const e=t.getColumn(this._transform,1);return[-e[0],-e[1],-e[2]]}right(){const e=t.getColumn(this._transform,0);return[e[0],e[1],e[2]]}getCameraToWorld(e,r){const n=new Float64Array(16);return t.invert(n,this.getWorldToCamera(e,r)),n}getWorldToCameraPosition(e,r,n){const i=this.position;t.scale$2(i,i,-e);const o=new Float64Array(16);return t.fromScaling(o,[n,n,n]),t.translate(o,o,i),o[10]*=r,o}getWorldToCamera(e,r){const n=new Float64Array(16),i=new Float64Array(4),o=this.position;return t.conjugate(i,this._orientation),t.scale$2(o,o,-e),t.fromQuat(n,i),t.translate(n,n,o),n[1]*=-1,n[5]*=-1,n[9]*=-1,n[13]*=-1,n[8]*=r,n[9]*=r,n[10]*=r,n[11]*=r,n}getCameraToClipPerspective(e,r,n,i){const o=new Float64Array(16);return t.perspective(o,e,r,n,i),o}getDistanceToElevation(e){const r=0===e?0:t.mercatorZfromAltitude(e,this.position[1]),n=this.forward();return(r-this.position[2])/n[2]}clone(){return new qn([...this.position],[...this.orientation])}}function Kn(e,r){const n=Zn(e.projection,e.zoom,e.width,e.height),i=function(e,r,n,i,o){const s=new t.LngLat(n.lng-180*Hn,n.lat),a=new t.LngLat(n.lng+180*Hn,n.lat),l=e.project(s.lng,s.lat),u=e.project(a.lng,a.lat),c=-Math.atan2(u.y-l.y,u.x-l.x),h=t.MercatorCoordinate.fromLngLat(n);h.y=t.clamp(h.y,-.999975,.999975);const f=h.toLngLat(),d=e.project(f.lng,f.lat),p=t.MercatorCoordinate.fromLngLat(f);p.x+=Hn;const m=p.toLngLat(),g=e.project(m.lng,m.lat),y=Xn(g.x-d.x,g.y-d.y,c),_=t.MercatorCoordinate.fromLngLat(f);_.y+=Hn;const v=_.toLngLat(),b=e.project(v.lng,v.lat),w=Xn(b.x-d.x,b.y-d.y,c),x=Math.abs(y.x)/Math.abs(w.y),E=t.identity([]);t.rotateZ(E,E,-c*(1-(o?0:i)));const S=t.identity([]);return t.scale(S,S,[1,1-(1-x)*i,1]),S[4]=-w.x/w.y*i,t.rotateZ(S,S,c),t.multiply(S,E,S),S}(e.projection,0,e.center,n,r),o=Wn(e);return t.scale(i,i,[o,o,1]),i}function Wn(e){const r=e.projection,n=Zn(e.projection,e.zoom,e.width,e.height),i=Qn(r,e.center),o=Qn(r,t.LngLat.convert(r.center));return Math.pow(2,i*n+(1-n)*o)}function Zn(e,r,n,i,o=1/0){const s=e.range;if(!s)return 0;const a=Math.min(o,Math.max(n,i)),l=Math.log(a/1024)/Math.LN2;return t.smoothstep(s[0]+l,s[1]+l,r)}const Hn=1/4e4;function Qn(e,r){const n=t.clamp(r.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),i=new t.LngLat(r.lng-180*Hn,n),o=new t.LngLat(r.lng+180*Hn,n),s=e.project(i.lng,n),a=e.project(o.lng,n),l=t.MercatorCoordinate.fromLngLat(i),u=t.MercatorCoordinate.fromLngLat(o),c=a.x-s.x,h=a.y-s.y,f=u.x-l.x,d=u.y-l.y,p=Math.sqrt((f*f+d*d)/(c*c+h*h));return Math.log(p)/Math.LN2}function Xn(t,e,r){const n=Math.cos(r),i=Math.sin(r);return{x:t*n-e*i,y:t*i+e*n}}class Yn{constructor(e,r,n,i,o,s,a){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=r||22,this._minPitch=null==n?0:n,this._maxPitch=null==i?60:i,this.setProjection(s),this.setMaxBounds(a),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Un,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new qn,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const t=new Yn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,t.tileSize=this.tileSize,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._seaLevelZoom=this._seaLevelZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._nearZ=this._nearZ,t._farZ=this._farZ,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t.frustumCorners=this.frustumCorners,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(t){const e=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||e)&&this._updateCameraOnTerrain(),(t||e)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return t.pick(this.projection,["name","center","parallels"])}setProjection(r){this.projectionOptions=r||{name:"mercator"};const n=this.projection?this.getProjection():void 0;this.projection=t.getProjection(this.projectionOptions);const i=!e(n,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}setMercatorFromTransition(){const e=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=t.getProjection({name:"mercator"});const r=e!==this.projection.name;return r&&this._calcMatrices(),r}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return t.wrap(this.rotation,-180,180)}set bearing(t){this.rotation=t}get rotation(){return-this.angle/Math.PI*180}set rotation(e){const r=-e*Math.PI/180;var n;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=(n=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(t,e,r){var n=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(r),l=Math.cos(r);t[0]=n*l+o*a,t[1]=i*l+s*a,t[2]=n*-a+o*l,t[3]=i*-a+s*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const r=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const t=this._elevation;this._centerAltitude=t.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=t.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,r=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],n=this.horizonLineFromTop();let i=0,o=0;for(let s=0;s<r.length;s++){const a=new t.pointGeometry(r[s][0]*this.width,n+r[s][1]*(this.height-n)),l=e.pointCoordinate(a);if(!l)continue;const u=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*u,o+=u}return 0===o?NaN:i/o}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const t=this._seaLevelZoom,e=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),r=this.pixelsPerMeter/this.worldSize*e,n=this._mercatorZfromZoom(t),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(n-r,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let n;n=e.z<this._camera.position[2]?[r.x,r.y,r.z]:[e.x,e.y,e.z];const i=t.length(t.sub([],this._camera.position,n));return t.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let r=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(r=this._setCameraOrientation(e.orientation)),e.position){const n=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(n,this._camera.position)||(this._setCameraPosition(n),r=!0)}r&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,r=new Gn;return r.position=new t.MercatorCoordinate(e[0],e[1],e[2]),r.orientation=this._camera.orientation,r._elevation=this.elevation,r._renderWorldCopies=this.renderWorldCopies,r}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const r=t.transformQuat([],[0,0,-1],e),n=t.transformQuat([],[0,-1,0],e);if(n[2]<0)return!1;const i=Vn(r,n);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(e){const r=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;e[2]=t.clamp(e[2],i/n,i/r),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,r){this._unmodified=!1,this._edgeInsets.interpolate(t,e,r),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const r=[new t.UnwrappedTileID(0,e)];if(this.renderWorldCopies){const n=this.pointCoordinate(new t.pointGeometry(0,0)),i=this.pointCoordinate(new t.pointGeometry(this.width,0)),o=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),s=this.pointCoordinate(new t.pointGeometry(0,this.height)),a=Math.floor(Math.min(n.x,i.x,o.x,s.x)),l=Math.floor(Math.max(n.x,i.x,o.x,s.x)),u=1;for(let c=a-u;c<=l+u;c++)0!==c&&r.push(new t.UnwrappedTileID(c,e))}return r}coveringTiles(e){let r=this.coveringZoomLevel(e);const n=r,i=this.elevation&&!e.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==e.minzoom&&r<e.minzoom)return[];void 0!==e.maxzoom&&r>e.maxzoom&&(r=e.maxzoom);const s=this.locationCoordinate(this.center),a=this.center.lat,l=1<<r,u=[l*s.x,l*s.y,0],c="globe"===this.projection.name,h=!c,f=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,h),d=c?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),p=l*t.mercatorZfromAltitude(1,this.center.lat),m=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),g=[l*d.x,l*d.y,m*(h?1:p)],y=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),_=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?r:0,v=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,b=e.isTerrainDEM?-v:this._elevation?this._elevation.getMinElevationBelowMSL():0,w=this.projection.isReprojectedInTileSpace?Wn(this):1,x=e=>{const r=1/4e4,n=new t.MercatorCoordinate(e.x+r,e.y,e.z),i=new t.MercatorCoordinate(e.x,e.y+r,e.z),o=e.toLngLat(),s=n.toLngLat(),a=i.toLngLat(),l=this.locationCoordinate(o),u=this.locationCoordinate(s),c=this.locationCoordinate(a),h=Math.hypot(u.x-l.x,u.y-l.y),f=Math.hypot(c.x-l.x,c.y-l.y);return Math.sqrt(h*f)*w/r},E=e=>{const r=v,n=b;return{aabb:t.tileAABB(this,l,0,0,0,e,n,r,this.projection),zoom:0,x:0,y:0,minZ:n,maxZ:r,wrap:e,fullyVisible:!1}},S=[];let M=[];const T=r,A=e.reparseOverscaled?n:r,C=t=>t*t,I=C((m-this._centerAltitude)*p),k=t=>{if(!this._elevation||!t.tileID||!o)return;const e=this._elevation.getMinMaxForTile(t.tileID),r=t.aabb;e?(r.min[2]=e.min,r.max[2]=e.max,r.center[2]=(r.min[2]+r.max[2])/2):(t.shouldSplit=R(t),t.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=this._centerAltitude))},R=e=>{if(e.zoom<_)return!0;if(e.zoom===T)return!1;if(null!=e.shouldSplit)return e.shouldSplit;const r=e.aabb.distanceX(g),o=e.aabb.distanceY(g);let s=I,l=1;if(c){s=C(e.aabb.distanceZ(g));const r=Math.pow(2,e.zoom),n=t.latFromMercatorY((e.y+1)/r),i=t.latFromMercatorY(e.y/r),o=Math.min(Math.max(a,n),i),u=t.circumferenceAtLatitude(o)/t.circumferenceAtLatitude(a);if(l=o===a?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,u/this._mercatorScaleRatio),this.zoom<=t.GLOBE_ZOOM_THRESHOLD_MIN&&e.zoom===T-1&&u>=.9)return!0}else if(i&&(s=C(e.aabb.distanceZ(g)*p)),this.projection.isReprojectedInTileSpace&&n<=5){const r=Math.pow(2,e.zoom),n=x(new t.MercatorCoordinate((e.x+.5)/r,(e.y+.5)/r));l=n>.85?1:n}const u=r*r+o*o+s;return u<C((1<<T-e.zoom)*y*l*((t,e)=>{if(e*C(.707)<t)return 1;const r=Math.sqrt(e/t);return r/(1.4144271570014144+(Math.pow(1.1,r-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(s,I),u))};if(this.renderWorldCopies)for(let t=1;t<=3;t++)S.push(E(-t)),S.push(E(t));for(S.push(E(0));S.length>0;){const n=S.pop(),s=n.x,a=n.y;let h=n.fullyVisible;if(!h){const t=n.aabb.intersects(f);if(0===t)continue;h=2===t}if(n.zoom!==T&&R(n))for(let e=0;e<4;e++){const r=(s<<1)+e%2,u=(a<<1)+(e>>1),f={aabb:o?n.aabb.quadrant(e):t.tileAABB(this,l,n.zoom+1,r,u,n.wrap,n.minZ,n.maxZ,this.projection),zoom:n.zoom+1,x:r,y:u,wrap:n.wrap,fullyVisible:h,tileID:void 0,shouldSplit:void 0,minZ:n.minZ,maxZ:n.maxZ};i&&!c&&(f.tileID=new t.OverscaledTileID(n.zoom+1===T?A:n.zoom+1,n.wrap,n.zoom+1,r,u),k(f)),S.push(f)}else{const i=n.zoom===T?A:n.zoom;if(e.minzoom&&e.minzoom>i)continue;const o=u[0]-(.5+s+(n.wrap<<n.zoom))*(1<<r-n.zoom),l=u[1]-.5-a,c=n.tileID?n.tileID:new t.OverscaledTileID(i,n.wrap,n.zoom,s,a);M.push({tileID:c,distanceSq:o*o+l*l})}}if(this.fogCullDistSq){const r=this.fogCullDistSq,n=this.horizonLineFromTop();M=M.filter((i=>{const o=[0,0,0,1],s=[t.EXTENT,t.EXTENT,0,1],a=this.calculateFogTileMatrix(i.tileID.toUnwrapped());t.transformMat4$1(o,o,a),t.transformMat4$1(s,s,a);const l=t.getAABBPointSquareDist(o,s);if(0===l)return!0;let u=!1;const c=this._elevation;if(c&&l>r&&0!==n){const r=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;e.isTerrainDEM||(o=c.getMinMaxForTile(i.tileID)),o||(o={min:b,max:v});const s=t.furthestTileCorner(this.rotation),a=[s[0]*t.EXTENT,s[1]*t.EXTENT,o.max];t.transformMat4(a,a,r),u=(1-a[1])*this.height*.5<n}return l<r||u}))}return M.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const r=t.clamp(e.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),n=this.projection.project(e.lng,r);return new t.pointGeometry(n.x*this.worldSize,n.y*this.worldSize)}unproject(t){return this.projection.unproject(t.x/this.worldSize,t.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(e,r){let n,i;const o=this.centerPoint;if("globe"===this.projection.name){const t=this.worldSize;n=(r.x-o.x)/t,i=(r.y-o.y)/t}else{const t=this.pointCoordinate(r),e=this.pointCoordinate(o);n=t.x-e.x,i=t.y-e.y}const s=this.locationCoordinate(e);this.setLocation(new t.MercatorCoordinate(s.x-n,s.y-i))}setLocation(t){this.center=this.coordinateLocation(t),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(t){return this.projection.locationPoint(this,t)}locationPoint3D(t){return this.projection.locationPoint(this,t,!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e,r){const n=r?t.mercatorZfromAltitude(r,e.lat):void 0,i=this.projection.project(e.lng,e.lat);return new t.MercatorCoordinate(i.x,i.y,n)}coordinateLocation(t){return this.projection.unproject(t.x,t.y)}pointRayIntersection(e,r){const n=null!=r?r:this._centerAltitude,i=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4$1(i,i,this.pixelMatrixInverse),t.transformMat4$1(o,o,this.pixelMatrixInverse);const s=o[3];t.scale$1(i,i,1/i[3]),t.scale$1(o,o,1/s);const a=i[2],l=o[2];return{p0:i,p1:o,t:a===l?0:(n-a)/(l-a)}}screenPointToMercatorRay(e){const r=[e.x,e.y,0,1],n=[e.x,e.y,1,1];return t.transformMat4$1(r,r,this.pixelMatrixInverse),t.transformMat4$1(n,n,this.pixelMatrixInverse),t.scale$1(r,r,1/r[3]),t.scale$1(n,n,1/n[3]),r[2]=t.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,t.scale$1(r,r,1/this.worldSize),t.scale$1(n,n,1/this.worldSize),new t.Ray([r[0],r[1],r[2]],t.normalize([],t.sub([],n,r)))}rayIntersectionCoordinate(e){const{p0:r,p1:n,t:i}=e,o=t.mercatorZfromAltitude(r[2],this._center.lat),s=t.mercatorZfromAltitude(n[2],this._center.lat);return new t.MercatorCoordinate(t.number(r[0],n[0],i)/this.worldSize,t.number(r[1],n[1],i)/this.worldSize,t.number(o,s,i))}pointCoordinate(t,e=this._centerAltitude){return this.projection.pointCoordinate(this,t.x,t.y,e)}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);let r=this.projection.pointCoordinate3D(this,e.x,e.y);if(r)return new t.MercatorCoordinate(r[0],r[1],r[2]);let n=0,i=this.horizonLineFromTop();if(e.y>i)return this.pointCoordinate(e);const o=.02*i,s=e.clone();for(let a=0;a<10&&i-n>o;a++){s.y=t.number(n,i,.66);const e=this.projection.pointCoordinate3D(this,s.x,s.y);e?(i=s.y,r=e):n=s.y}return r?new t.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){return this.projection.isPointAboveHorizon(this,t)}_coordinatePoint(e,r){const n=r&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,i=[e.x*this.worldSize,e.y*this.worldSize,n+e.toAltitude(),1];return t.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new t.pointGeometry(i[0]/i[3],i[1]/i[3]):new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(e,r){const n=new t.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),i=new t.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),o=new t.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),s=new t.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let a=this.pointCoordinate(n,e),l=this.pointCoordinate(i,e);const u=this.pointCoordinate(o,r),c=this.pointCoordinate(s,r),h=(t,e)=>(e.y-t.y)/(e.x-t.x);return a.y>1&&l.y>=0?a=new t.MercatorCoordinate((1-c.y)/h(c,a)+c.x,1):a.y<0&&l.y<=1&&(a=new t.MercatorCoordinate(-c.y/h(c,a)+c.x,0)),l.y>1&&a.y>=0?l=new t.MercatorCoordinate((1-u.y)/h(u,l)+u.x,1):l.y<0&&a.y<=1&&(l=new t.MercatorCoordinate(-u.y/h(u,l)+u.x,0)),(new t.LngLatBounds).extend(this.coordinateLocation(a)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(c)).extend(this.coordinateLocation(u))}_getBounds3D(){const t=this.elevation;if(!t.visibleDemTiles.length)return this._getBounds(0,0);const e=t.visibleDemTiles.reduce(((t,e)=>{if(e.dem){const r=e.dem.tree;t.min=Math.min(t.min,r.minimums[0]),t.max=Math.max(t.max,r.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});return this._getBounds(e.min*t.exaggeration(),e.max*t.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(t=!0){const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,r=this.height/2-e*(1-this._horizonShift);return t?Math.max(0,r):r}getMaxBounds(){return this.maxBounds}setMaxBounds(e){this.maxBounds=e,this.minLat=-t.MAX_MERCATOR_LATITUDE,this.maxLat=t.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,e&&(this.minLat=e.getSouth(),this.maxLat=e.getNorth(),this.minLng=e.getWest(),this.maxLng=e.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=t.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=t.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=t.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=t.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(t,e){return this.projection.createTileMatrix(this,e,t)}calculateDistanceTileData(e){const r=e.key,n=this._distanceTileDataCache;if(n[r])return n[r];const i=e.canonical,o=1/this.height,s=this.cameraWorldSize/this.zoomScale(i.z),a=(i.x+Math.pow(2,i.z)*e.wrap)*s,l=i.y*s,u=this.point,c=this.angle,h=Math.sin(-c),f=-Math.cos(-c);return n[r]={bearing:[h,f],center:[(u.x-a)*o,(u.y-l)*o],scale:s/t.EXTENT*o},n[r]}calculateFogTileMatrix(e){const r=e.key,n=this._fogTileMatrixCache;if(n[r])return n[r];const i=this.projection.createTileMatrix(this,this.cameraWorldSize,e);return t.multiply(i,this.worldToFogMatrix,i),n[r]=new Float32Array(i),n[r]}calculateProjMatrix(e,r=!1){const n=e.key,i=r?this._alignedProjMatrixCache:this._projMatrixCache;if(i[n])return i[n];const o=this.calculatePosMatrix(e,this.worldSize);return t.multiply(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:r?this.alignedProjMatrix:this.projMatrix,o),i[n]=new Float32Array(o),i[n]}calculatePixelsToTileUnitsMatrix(e){const r=e.tileID.key,n=this._pixelsToTileUnitsCache;if(n[r])return n[r];const i=function(e,r){const{scale:n}=e.tileTransform,i=n*t.EXTENT/(e.tileSize*Math.pow(2,r.zoom-e.tileID.overscaledZ+e.tileID.canonical.z));return o=new Float32Array(4),l=(s=r.inverseAdjustmentMatrix)[1],u=s[2],c=s[3],f=(a=[i,i])[1],o[0]=s[0]*(h=a[0]),o[1]=l*h,o[2]=u*f,o[3]=c*f,o;var o,s,a,l,u,c,h,f}(e,this);return n[r]=i,n[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const e=this._elevation;this._updateCameraState();const r=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(r),i=this._camera.forward(),o=t.mercatorZfromAltitude(1,this._center.lat);n[2]/=o,i[2]/=o,t.normalize(i,i);const s=e.raycast(n,i,e.exaggeration());if(s){const e=t.scaleAndAdd([],n,i,s),r=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),a=(r.z+t.length([r.x-n[0],r.y-n[1],r.z-n[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(a),this._centerAltitude=r.toAltitude(),this._center=this.coordinateLocation(r),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const r=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(r),i=e.getAtPointOrZero(new t.MercatorCoordinate(...n)),o=this._minimumHeightOverTerrain()*Math.cos(t.degToRad(this._maxPitch)),s=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*i;if(s<o){const e=this.locationCoordinate(this._center,this._centerAltitude),r=[e.x-n[0],e.y-n[1],e.z-n[2]],i=t.length(r);r[2]-=(o-s)/this._pixelsPerMercatorPixel;const a=t.length(r);if(0===a)return;t.scale$2(r,r,i/a*this._pixelsPerMercatorPixel),this._camera.position=[e.x-r[0],e.y-r[1],e.z*this._pixelsPerMercatorPixel-r[2]],this._camera.orientation=Vn(r,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||e){const r=this.center;return r.lat=t.clamp(r.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!e)&&(r.lng=t.clamp(r.lng,this.minLng,this.maxLng)),this.center=r,void(this._constraining=!1)}const r=this._unmodified,{x:n,y:i}=this.point;let o=0,s=n,a=i;const l=this.width/2,u=this.height/2,c=this.worldMinY*this.scale,h=this.worldMaxY*this.scale;if(i-u<c&&(a=c+u),i+u>h&&(a=h-u),h-c<this.height&&(o=Math.max(o,this.height/(h-c)),a=(h+c)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const t=this.worldMinX*this.scale,e=this.worldMaxX*this.scale,r=this.worldSize/2-(t+e)/2;s=(n+r+this.worldSize)%this.worldSize-r,s-l<t&&(s=t+l),s+l>e&&(s=e-l),e-t<this.width&&(o=Math.max(o,this.width/(e-t)),s=(e+t)/2)}s===n&&a===i||(this.center=this.unproject(new t.pointGeometry(s,a))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCameraAltitude(),this._unmodified=r,this._constraining=!1}_minZoomForBounds(){let t=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(t=Math.max(t,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),t}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,r=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=t.mercatorZfromAltitude(1,this.center.lat)/t.mercatorZfromAltitude(1,t.GLOBE_SCALE_MATCH_LATITUDE));const n=Zn(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,n),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?r:1),o=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);o[8]=2*-e.x/this.width,o[9]=2*e.y/this.height;let s=t.mul([],o,i);if(this.projection.isReprojectedInTileSpace){const e=this.locationCoordinate(this.center),r=t.identity([]);t.translate(r,r,[e.x*this.worldSize,e.y*this.worldSize,0]),t.multiply(r,r,Kn(this)),t.translate(r,r,[-e.x*this.worldSize,-e.y*this.worldSize,0]),t.multiply(s,s,r),this.inverseAdjustmentMatrix=function(t){const e=Kn(t,!0);return _([],[e[0],e[1],e[4],e[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=t.scale([],s,[this.worldSize,this.worldSize,this.worldSize/r,1]),this.projMatrix=s,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const a=t.invert([],o);this.frustumCorners=t.FrustumCorners.fromInvProjectionMatrix(a,this.horizonLineFromTop(),this.height);const l=new Float32Array(16);t.identity(l),t.scale(l,l,[1,-1,1]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle);const u=t.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),c=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;u[8]=2*-e.x/this.width,u[9]=2*(e.y+c)/this.height,this.skyboxMatrix=t.multiply(l,u,l);const h=this.point,f=h.x,d=h.y,p=this.width%2/2,m=this.height%2/2,g=Math.cos(this.angle),y=Math.sin(this.angle),v=f-Math.round(f)+g*p+y*m,b=d-Math.round(d)+g*m+y*p,w=new Float64Array(s);if(t.translate(w,w,[v>.5?v-1:v,b>.5?b-1:b,0]),this.alignedProjMatrix=w,s=t.create(),t.scale(s,s,[this.width/2,-this.height/2,1]),t.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=t.create(),t.scale(s,s,[1,-1,1]),t.translate(s,s,[-1,-1,0]),t.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=t.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=t.calculateGlobeMatrix(this);const e=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=t.transformMat4(e,e,i),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSize,r=this.cameraPixelsPerMeter,n=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,o=[e,e,r];t.scale$2(o,o,i),t.scale$2(n,n,-1),t.multiply$2(n,n,o);const s=t.create();t.translate(s,s,n),t.scale(s,s,o),this.mercatorFogMatrix=s,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,r,i)}_computeCameraPosition(t){const e=(t=t||this.pixelsPerMeter)/this.pixelsPerMeter,r=this._camera.forward(),n=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*e-t/this.worldSize*this._centerAltitude;return[n.x/this.worldSize-r[0]*i,n.y/this.worldSize-r[1]*i,t/this.worldSize*this._centerAltitude-r[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(e){const r=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=e[2];let i=1;n>0&&(i=Math.min((r-this._camera.position[2])/n,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,i),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const e=this._camera.position,r=this._camera.forward(),{pitch:n,bearing:i}=this._camera.getPitchBearing(),o=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),a=Math.max((e[2]-o)/Math.cos(n),s),l=this._zoomFromMercatorZ(a);t.scaleAndAdd(e,e,r,a),this._pitch=t.clamp(n,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(i,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new t.MercatorCoordinate(e[0],e[1],e[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(t.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(e,r){const n=Math.min(e.x,r.x),i=Math.max(e.x,r.x),o=Math.min(e.y,r.y),s=Math.max(e.y,r.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const a=[new t.pointGeometry(n,o),new t.pointGeometry(i,s),new t.pointGeometry(n,s),new t.pointGeometry(i,o)],l=this.renderWorldCopies?-3:0,u=this.renderWorldCopies?4:1;for(const t of a){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const r=this.rayIntersectionCoordinate(e);if(r.x<l||r.y<0||r.x>u||r.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new t.pointGeometry(0,0),new t.pointGeometry(this.width,this.height))}zoomDeltaToMovement(e,r){const n=t.length(t.sub([],this._camera.position,e)),i=this._zoomFromMercatorZ(n)+r;return n-this._mercatorZfromZoom(i)}getCameraPoint(){if("globe"===this.projection.name){const e=function(e,r){const n=[e[0],e[1],e[2],1];t.transformMat4$1(n,n,r);const i=Math.max(n[3],1e-6);return[n[0]/i,n[1]/i,n[2]/i,i]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new t.pointGeometry(e[0],e[1])}{const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}}getCameraToCenterDistance(t){const e=Zn(t,this.zoom,this.width,this.height,1024),r=t.pixelSpaceConversion(this.center.lat,this.worldSize,e);return.5/Math.tan(.5*this._fov)*this.height*r}}function Jn(t,e){let r=!1,n=null;const i=()=>{n=null,r&&(t(),n=setTimeout(i,e),r=!1)};return()=>(r=!0,n||i(),n)}class $n{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Jn(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),e.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),t.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const e=this._map;if(!e)return"";const r=ti(e);if(this._hashName){const e=this._hashName;let n=!1;const i=t.window.location.hash.slice(1).split("&").map((t=>{const i=t.split("=")[0];return i===e?(n=!0,`${i}=${r}`):t})).filter((t=>t));return n||i.push(`${e}=${r}`),`#${i.join("&")}`}return`#${r}`}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((t=>t.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._map;if(!t)return!1;const e=this._getCurrentHash();if(e.length>=3&&!e.some((t=>isNaN(t)))){const r=t.dragRotate.isEnabled()&&t.touchZoomRotate.isEnabled()?+(e[3]||0):t.getBearing();return t.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:r,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}function ti(t,e){const r=t.getCenter(),n=Math.round(100*t.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),s=Math.round(r.lng*o)/o,a=Math.round(r.lat*o)/o,l=t.getBearing(),u=t.getPitch();let c=e?`/${s}/${a}/${n}`:`${n}/${a}/${s}`;return(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+=`/${Math.round(u)}`),c}const ei={linearity:.3,easing:t.bezier(0,0,.3,1)},ri=t.extend({deceleration:2500,maxSpeed:1400},ei),ni=t.extend({deceleration:20,maxSpeed:1400},ei),ii=t.extend({deceleration:1e3,maxSpeed:360},ei),oi=t.extend({deceleration:1e3,maxSpeed:90},ei);class si{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,r=t.exported.now();for(;e.length>0&&r-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)r.zoom+=t.zoomDelta||0,r.bearing+=t.bearingDelta||0,r.pitch+=t.pitchDelta||0,t.panDelta&&r.pan._add(t.panDelta),t.around&&(r.around=t.around),t.pinchAround&&(r.pinchAround=t.pinchAround);const n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(r.pan.mag()){const o=li(r.pan.mag(),n,t.extend({},ri,e||{}));i.offset=r.pan.mult(o.amount/r.pan.mag()),i.center=this._map.transform.center,ai(i,o)}if(r.zoom){const t=li(r.zoom,n,ni);i.zoom=this._map.transform.zoom+t.amount,ai(i,t)}if(r.bearing){const e=li(r.bearing,n,ii);i.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),ai(i,e)}if(r.pitch){const t=li(r.pitch,n,oi);i.pitch=this._map.transform.pitch+t.amount,ai(i,t)}if(i.zoom||i.bearing){const t=void 0===r.pinchAround?r.around:r.pinchAround;i.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function ai(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function li(e,r,n){const{maxSpeed:i,linearity:o,deceleration:s}=n,a=t.clamp(e*o/(r/1e3),-i,i),l=Math.abs(a)/(s*o);return{easing:n.easing,duration:1e3*l,amount:a*(l/2)}}class ui extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,n,i={}){const o=p(r.getCanvasContainer(),n),s=r.unproject(o);super(e,t.extend({point:o,lngLat:s,originalEvent:n},i)),this._defaultPrevented=!1,this.target=r}}class ci extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,n){const i="touchend"===e?n.changedTouches:n.touches,o=m(r.getCanvasContainer(),i),s=o.map((t=>r.unproject(t))),a=o.reduce(((t,e,r,n)=>t.add(e.div(n.length))),new t.pointGeometry(0,0));super(e,{points:o,point:a,lngLats:s,lngLat:r.unproject(a),originalEvent:n}),this._defaultPrevented=!1}}class hi extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,r){super(t,{originalEvent:r}),this._defaultPrevented=!1}}class fi{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){this._mousedownPos=void 0}wheel(t){return this._firePreventable(new hi(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new ui(t.type,this._map,t))}mouseup(t){this._map.fire(new ui(t.type,this._map,t))}preclick(e){const r=t.extend({},e);r.type="preclick",this._map.fire(new ui(r.type,this._map,r))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||(this.preclick(t),this._map.fire(new ui(t.type,this._map,t)))}dblclick(t){return this._firePreventable(new ui(t.type,this._map,t))}mouseover(t){this._map.fire(new ui(t.type,this._map,t))}mouseout(t){this._map.fire(new ui(t.type,this._map,t))}touchstart(t){return this._firePreventable(new ci(t.type,this._map,t))}touchmove(t){this._map.fire(new ci(t.type,this._map,t))}touchend(t){this._map.fire(new ci(t.type,this._map,t))}touchcancel(t){this._map.fire(new ci(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class di{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(t){this._map.fire(new ui(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ui("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new ui(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pi{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(c(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const r=e;if(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)return;const n=this._startPos;this._lastPos=r,this._box||(this._box=o("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const i=Math.min(n.x,r.x),s=Math.max(n.x,r.x),a=Math.min(n.y,r.y),l=Math.max(n.y,r.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${i}px,${a}px)`,this._box.style.width=s-i+"px",this._box.style.height=l-a+"px")}))}mouseupWindow(e,r){if(!this._active)return;if(0!==e.button)return;const n=this._startPos,i=r;if(this.reset(),d(),n.x!==i.x||n.y!==i.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(n,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),h(),delete this._startPos,delete this._lastPos}_fireEvent(e,r){return this._map.fire(new t.Event(e,{originalEvent:r}))}}function mi(t,e){const r={};for(let n=0;n<t.length;n++)r[t[n].identifier]=e[n];return r}class gi{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(e,r,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=function(e){const r=new t.pointGeometry(0,0);for(const t of e)r._add(t);return r.div(e.length)}(r),this.touches=mi(n,r)))}touchmove(t,e,r){if(this.aborted||!this.centroid)return;const n=mi(r,e);for(const i in this.touches){const t=this.touches[i],e=n[i];(!e||e.dist(t)>30)&&(this.aborted=!0)}}touchend(t,e,r){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class yi{constructor(t){this.singleTap=new gi(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(t,e,r){this.singleTap.touchstart(t,e,r)}touchmove(t,e,r){this.singleTap.touchmove(t,e,r)}touchend(t,e,r){const n=this.singleTap.touchend(t,e,r);if(n){const e=t.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(n)<30;if(e&&r||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class _i{constructor(){this._zoomIn=new yi({numTouches:1,numTaps:2}),this._zoomOut=new yi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,r){this._zoomIn.touchstart(t,e,r),this._zoomOut.touchstart(t,e,r)}touchmove(t,e,r){this._zoomIn.touchmove(t,e,r),this._zoomOut.touchmove(t,e,r)}touchend(t,e,r){const n=this._zoomIn.touchend(t,e,r),i=this._zoomOut.touchend(t,e,r);return n?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(n)},{originalEvent:t})}):i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(i)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const vi={0:1,2:2};class bi{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const r=g(t);this._correctButton(t,r)&&(this._lastPoint=e,this._eventButton=r)}mousemoveWindow(t,e){const r=this._lastPoint;if(r)if(t.preventDefault(),null!=this._eventButton&&function(t,e){const r=vi[e];return void 0===t.buttons||(t.buttons&r)!==r}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(r,e)}mouseupWindow(t){this._lastPoint&&g(t)===this._eventButton&&(this._moved&&d(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wi extends bi{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class xi extends bi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const r=.8*(e.x-t.x);if(r)return this._active=!0,{bearingDelta:r}}contextmenu(t){t.preventDefault()}}class Ei extends bi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const r=-.5*(e.y-t.y);if(r)return this._active=!0,{pitchDelta:r}}contextmenu(t){t.preventDefault()}}class Si{constructor(e,r){this._map=e,this._el=e.getCanvasContainer(),this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset(),t.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0)}touchstart(t,e,r){return this._calculateTransform(t,e,r)}touchmove(e,r,n){if(this._active&&!(n.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===n.length&&!t.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.cancelable&&e.preventDefault(),this._calculateTransform(e,r,n)}}touchend(t,e,r){this._calculateTransform(t,e,r),this._active&&r.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,r,n){n.length>0&&(this._active=!0);const i=mi(n,r),o=new t.pointGeometry(0,0),s=new t.pointGeometry(0,0);let a=0;for(const t in i){const e=i[t],r=this._touches[t];r&&(o._add(e),s._add(e.sub(r)),a++,i[t]=e)}if(this._touches=i,a<this._minTouches||!s.mag())return;const l=s.div(a);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(a),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Mi{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(t){}_move(t,e,r){return{}}touchstart(t,e,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,r){const n=this._firstTwoTouches;if(!n)return;t.preventDefault();const[i,o]=n,s=Ti(r,e,i),a=Ti(r,e,o);if(!s||!a)return;const l=this._aroundCenter?null:s.add(a).div(2);return this._move([s,a],l,t)}touchend(t,e,r){if(!this._firstTwoTouches)return;const[n,i]=this._firstTwoTouches,o=Ti(r,e,n),s=Ti(r,e,i);o&&s||(this._active&&d(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ti(t,e,r){for(let n=0;n<t.length;n++)if(t[n].identifier===r)return e[n]}function Ai(t,e){return Math.log(t/e)/Math.LN2}class Ci extends Mi{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const r=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Ai(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ai(this._distance,r),pinchAround:e}}}function Ii(t,e){return 180*t.angleWith(e)/Math.PI}class ki extends Mi{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const r=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ii(this._vector,r),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,r=Ii(t,this._startVector);return Math.abs(r)<e}}function Ri(t){return Math.abs(t.y)>Math.abs(t.x)}class Bi extends Mi{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(t){this._lastPoints=t,Ri(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,r){const n=this._lastPoints;if(!n)return;const i=t[0].sub(n[0]),o=t[1].sub(n[1]);return this._map._cooperativeGestures&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(i,o,r.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(i.y+o.y)/2*-.5})}gestureBeginsVertically(t,e,r){if(void 0!==this._valid)return this._valid;const n=t.mag()>=2,i=e.mag()>=2;if(!n&&!i)return;if(!n||!i)return null==this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return Ri(t)&&Ri(e)&&o}}const Pi={panStep:100,bearingStep:15,pitchStep:10};class Di{constructor(){const t=Pi;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,r=0,n=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?n=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(r=0,n=0),{cameraAnimation:s=>{const a=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Li,zoom:e?Math.round(a)+e*(t.shiftKey?2:1):a,bearing:s.getBearing()+r*this._bearingStep,pitch:s.getPitch()+n*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:s.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Li(t){return t*(2-t)}const Oi=4.000244140625;class Ni{constructor(e,r){this._map=e,this._el=e.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(e.ctrlKey||e.metaKey||this.isZooming()||t.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let r=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const n=t.exported.now(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==r&&r%Oi==0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),e.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=e,this._delta-=r,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=p(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform,r=()=>e._terrainEnabled()&&this._aroundCoord?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>Oi?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);const i=r(),o=Math.pow(2,i),s="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(s*n))),"wheel"===this._type&&(this._startZoom=i,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:r(),i=this._startZoom,o=this._easing;let s,a=!1;if("wheel"===this._type&&i&&o){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),r=o(e);s=t.number(i,n,r),e<1?this._frameId||(this._frameId=!0):a=!0}else s=n,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:s-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let r=t.ease;if(this._prevEase){const e=this._prevEase,n=(t.exported.now()-e.start)/e.duration,i=e.easing(n+.01)-e.easing(n),o=.27/Math.sqrt(i*i+1e-4)*.01,s=Math.sqrt(.0729-o*o);r=t.bezier(o,s,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:r},r}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(t.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class zi{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ui{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(t,e){return t.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:r.getZoom()+(t.shiftKey?-1:1),around:r.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ji{constructor(){this._tap=new yi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(t,e,r){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=e[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(t,e,r))}touchmove(t,e,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;const n=e[0],i=n.y-this._swipePoint.y;return this._swipePoint=n,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,r)}touchend(t,e,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(t,e,r)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fi{constructor(t,e,r){this._el=t,this._mousePan=e,this._touchPan=r}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Vi{constructor(t,e,r){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Gi{constructor(t,e,r,n){this._el=t,this._touchZoom=e,this._touchRotate=r,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qi=t=>t.zoom||t.drag||t.pitch||t.rotate;class Ki extends t.Event{}class Wi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,r){const n=t.sub([],r,e);this.radius=t.length(n[2]<0?t.div([],n,this.constants):[n[0],n[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$1(e,e,this.constants);const r=t.scale$2([],e,this.radius);if(r[2]>0){const e=t.scale$2([],[0,0,1],t.dot(r,[0,0,1])),n=t.scale$2([],t.normalize([],[r[0],r[1],0]),this.radius),i=t.add([],r,t.scale$2([],t.sub([],t.add([],n,e),r),2));r[0]=i[0],r[1]=i[1]}return r}}function Zi(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Hi{constructor(e,r){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new si(e),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Wi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),t.bindAll(["handleEvent","handleWindowEvent"],this);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[i,o,s]of this._listeners)i.addEventListener(o,i===t.window.document?this.handleWindowEvent:this.handleEvent,s)}destroy(){for(const[e,r,n]of this._listeners)e.removeEventListener(r,e===t.window.document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(t){const e=this._map,r=e.getCanvasContainer();this._add("mapEvent",new fi(e,t));const n=e.boxZoom=new pi(e,t);this._add("boxZoom",n);const i=new _i,o=new Ui;e.doubleClickZoom=new zi(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const s=new ji;this._add("tapDragZoom",s);const a=e.touchPitch=new Bi(e);this._add("touchPitch",a);const l=new xi(t),u=new Ei(t);e.dragRotate=new Vi(t,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);const c=new wi(t),h=new Si(e,t);e.dragPan=new Fi(r,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);const f=new ki,d=new Ci;e.touchZoomRotate=new Gi(r,d,f,s),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]),this._add("blockableMapEvent",new di(e));const p=e.scrollZoom=new Ni(e,this);this._add("scrollZoom",p,["mousePan"]);const m=e.keyboard=new Di;this._add("keyboard",m);for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[g]&&e[g].enable(t[g])}_add(t,e,r){this._handlers.push({handlerName:t,handler:e,allowed:r}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!qi(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,e,r){for(const n in t)if(n!==r&&(!e||e.indexOf(n)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const r of t)this._el.contains(r.target)&&e.push(r);return e}handleEvent(t,e){this._updatingCamera=!0;const r="renderFrame"===t.type,n=r?void 0:t,i={needsRenderFrame:!1},o={},s={},a=t.touches?this._getMapTouches(t.touches):void 0,l=a?m(this._el,a):r?void 0:p(this._el,t);for(const{handlerName:h,handler:f,allowed:d}of this._handlers){if(!f.isEnabled())continue;let r;this._blockedByActive(s,d,h)?f.reset():f[e||t.type]&&(r=f[e||t.type](t,l,a),this.mergeHandlerResult(i,o,r,h,n),r&&r.needsRenderFrame&&this._triggerRenderFrame()),(r||f.isActive())&&(s[h]=f)}const u={};for(const h in this._previousActiveHandlers)s[h]||(u[h]=n);this._previousActiveHandlers=s,(Object.keys(u).length||Zi(i))&&(this._changes.push([i,o,u]),this._triggerRenderFrame()),(Object.keys(s).length||Zi(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:c}=i;c&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],c(this._map))}mergeHandlerResult(e,r,n,i,o){if(!n)return;t.extend(e,n);const s={handlerName:i,originalEvent:n.originalEvent||o};void 0!==n.zoomDelta&&(r.zoom=s),void 0!==n.panDelta&&(r.drag=s),void 0!==n.pitchDelta&&(r.pitch=s),void 0!==n.bearingDelta&&(r.rotate=s)}_applyChanges(){const e={},r={},n={};for(const[i,o,s]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.aroundCoord&&(e.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.extend(r,o),t.extend(n,s);this._updateMapTransform(e,r,n),this._changes=[]}_updateMapTransform(e,r,n){const i=this._map,o=i.transform,s=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!Zi(e)){const t=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",t!==o.zoom&&this._map._update(!0)}if(!Zi(e))return void this._fireEvents(r,n,!0);let{panDelta:a,zoomDelta:l,bearingDelta:u,pitchDelta:c,around:h,aroundCoord:f,pinchAround:d}=e;void 0!==d&&(h=d),(t=>r.drag&&!this._eventsInProgress.drag)()&&h&&(this._dragOrigin=s(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),h=h||i.transform.centerPoint,u&&(o.bearing+=u),c&&(o.pitch+=c),o._updateCameraState();const p=[0,0,0];if(a)if("mercator"===o.projection.name){const t=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h).dir),e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h.sub(a)).dir);p[0]=e[0]-t[0],p[1]=e[1]-t[1]}else{const e=o.pointCoordinate(h);if("globe"===o.projection.name){a=a.rotate(-o.angle);const r=o._pixelsPerMercatorPixel/o.worldSize;p[0]=-a.x*t.mercatorScale(t.latFromMercatorY(e.y))*r,p[1]=-a.y*t.mercatorScale(o.center.lat)*r}else{const t=o.pointCoordinate(h.sub(a));e&&t&&(p[0]=t.x-e.x,p[1]=t.y-e.y)}}const m=o.zoom,g=[0,0,0];if(l){const e=s(f||o.pointCoordinate3D(h)),r={dir:t.normalize([],t.sub([],e,o._camera.position))};if(r.dir[2]<0){const n=o.zoomDeltaToMovement(e,l);t.scale$2(g,r.dir,n)}}const y=t.add(p,p,g);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(r,n,!0)}_fireEvents(e,r,n){const i=qi(this._eventsInProgress),o=qi(e),s={};for(const t in e){const{originalEvent:r}=e[t];this._eventsInProgress[t]||(s[`${t}start`]=r),this._eventsInProgress[t]=e[t]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in s)this._fireEvent(t,s[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:r}=e[t];this._fireEvent(t,r)}const a={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:n}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=r[e]||n,a[`${t}end`]=l)}for(const t in a)this._fireEvent(t,a[t]);const u=qi(this._eventsInProgress);if(n&&(i||o)&&!u){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),r=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(r(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),r(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,r){this._map.fire(new t.Event(e,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{this._frameId=void 0,this.handleEvent(new Ki("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Qi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Xi extends t.Evented{constructor(e,r){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,r,n){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},r),n)}panTo(e,r,n){return this.easeTo(t.extend({center:e},r),n)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,r,n){return this.easeTo(t.extend({zoom:e},r),n)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,r,n){return this.easeTo(t.extend({bearing:e},r),n)}resetNorth(e,r){return this.rotateTo(0,t.extend({duration:1e3},e),r),this}resetNorthPitch(e,r){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),r),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,r){"globe"===this.transform.projection.name&&t.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),e=t.LngLatBounds.convert(e);const n=r&&r.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,r)}_extendCameraOptions(e){const r={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(r,e.padding),e}_cameraForBoxAndBearing(e,r,n,i){const o=this._extendCameraOptions(i),s=this.transform,a=s.padding,l=s.project(t.LngLat.convert(e)),u=s.project(t.LngLat.convert(r)),c=new t.pointGeometry(l.x,u.y),h=new t.pointGeometry(u.x,l.y),f=-t.degToRad(n),d=l.rotate(f),p=u.rotate(f),m=c.rotate(f),g=h.rotate(f),y=new t.pointGeometry(Math.max(d.x,p.x,m.x,g.x),Math.max(d.y,p.y,m.y,g.y)),_=new t.pointGeometry(Math.min(d.x,p.x,m.x,g.x),Math.min(d.y,p.y,m.y,g.y)),v=y.sub(_),b=(s.width-((a.left||0)+(a.right||0)+o.padding.left+o.padding.right))/v.x,w=(s.height-((a.top||0)+(a.bottom||0)+o.padding.top+o.padding.bottom))/v.y;if(w<0||b<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const x=Math.min(s.scaleZoom(s.scale*Math.min(b,w)),o.maxZoom),E="number"==typeof o.offset.x&&"number"==typeof o.offset.y?new t.pointGeometry(o.offset.x,o.offset.y):t.pointGeometry.convert(o.offset),S=new t.pointGeometry((o.padding.left-o.padding.right)/2,(o.padding.top-o.padding.bottom)/2).rotate(n*Math.PI/180),M=E.add(S).mult(s.scale/s.zoomScale(x));return{center:s.unproject(l.add(u).div(2).sub(M)),zoom:x,bearing:n}}_cameraForBox(e,r,n,i,o){const s=this._extendCameraOptions(o);n=n||0,i=i||0,e=t.LngLat.convert(e),r=t.LngLat.convert(r);const a=this.transform.clone();a.padding=s.padding;const l=this.getFreeCameraOptions(),u=new t.LngLat(.5*(e.lng+r.lng),.5*(e.lat+r.lat)),c=.5*(n+i);if(a._camera.position[2]<t.mercatorZfromAltitude(c,u.lat))return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(u),a.setFreeCameraOptions(l);const h=t.MercatorCoordinate.fromLngLat(e),f=t.MercatorCoordinate.fromLngLat(r),d=a.pointRayIntersection(a.centerPoint,c),p=[(m=a.rayIntersectionCoordinate(d)).x,m.y,m.z];var m;const g=a.screenPointToMercatorRay(a.centerPoint),y="globe"!==a.projection.name;let _,v=0;do{const r=Math.floor(a.zoom),o=1<<r,s=Math.min(o*h.x,o*f.x),l=Math.min(o*h.y,o*f.y),u=Math.max(o*h.x,o*f.x),c=Math.max(o*h.y,o*f.y),d=new t.Aabb([s,l,n],[u,c,i]),m=t.Frustum.fromInvProjectionMatrix(a.invProjMatrix,a.worldSize,r,y);if(2!==d.intersects(m)){_&&(a._camera.position=t.scaleAndAdd([],a._camera.position,g.dir,-_),a._updateStateFromCamera());break}const v=t.sub([],a._camera.position,p);_=.5*t.length(v),a._camera.position=t.scaleAndAdd([],a._camera.position,g.dir,_);try{a._updateStateFromCamera()}catch(e){return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++v<10);return{center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch}}fitBounds(e,r,n){return"globe"===this.transform.projection.name&&t.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(e,r),r,n)}_raycastElevationBox(e,r){const n=this.transform.elevation;if(!n)return;const i=new t.pointGeometry(e.x,r.y),o=new t.pointGeometry(r.x,e.y),s=n.pointCoordinate(e);if(!s)return;const a=n.pointCoordinate(r);if(!a)return;const l=n.pointCoordinate(i);if(!l)return;const u=n.pointCoordinate(o);if(!u)return;const c=new t.MercatorCoordinate(s[0],s[1]).toLngLat(),h=new t.MercatorCoordinate(a[0],a[1]).toLngLat(),f=new t.MercatorCoordinate(l[0],l[1]).toLngLat(),d=new t.MercatorCoordinate(u[0],u[1]).toLngLat(),p=Math.min(c.lng,Math.min(h.lng,Math.min(f.lng,d.lng))),m=Math.min(c.lat,Math.min(h.lat,Math.min(f.lat,d.lat))),g=Math.max(c.lng,Math.max(h.lng,Math.max(f.lng,d.lng))),y=Math.max(c.lat,Math.max(h.lat,Math.max(f.lat,d.lat))),_=Math.min(s[3],Math.min(a[3],Math.min(l[3],u[3]))),v=Math.max(s[3],Math.max(a[3],Math.max(l[3],u[3])));return{minLngLat:new t.LngLat(p,m),maxLngLat:new t.LngLat(g,y),minAltitude:_,maxAltitude:v}}fitScreenCoordinates(e,r,n,i,o){let s,a,l,u;"globe"===this.transform.projection.name&&t.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const c=t.pointGeometry.convert(e),h=t.pointGeometry.convert(r),f=this._raycastElevationBox(c,h);if(f)s=f.minLngLat,a=f.maxLngLat,l=f.minAltitude,u=f.maxAltitude;else{if(this.transform.anyCornerOffEdge(c,h))return this;s=this.transform.pointLocation(c),a=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(r)),n,i):this._cameraForBox(s,a,l,u,i),i,o)}_fitInternal(e,r,n){return e?(delete(r=t.extend(e,r)).padding,r.linear?this.easeTo(r,n):this.flyTo(r,n)):this}jumpTo(e,r){this.stop();const n=e.preloadOnly?this.transform.clone():this.transform;let i=!1,o=!1,s=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(i=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=t.LngLat.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(o=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(s=!0,n.pitch=+e.pitch),null==e.padding||n.isPaddingEqual(e.padding)||(n.padding=e.padding),e.preloadOnly?(this._preloadTiles(n),this):(this.fire(new t.Event("movestart",r)).fire(new t.Event("move",r)),i&&this.fire(new t.Event("zoomstart",r)).fire(new t.Event("zoom",r)).fire(new t.Event("zoomend",r)),o&&this.fire(new t.Event("rotatestart",r)).fire(new t.Event("rotate",r)).fire(new t.Event("rotateend",r)),s&&this.fire(new t.Event("pitchstart",r)).fire(new t.Event("pitch",r)).fire(new t.Event("pitchend",r)),this.fire(new t.Event("moveend",r)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||t.warnOnce(Qi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,r){const n=this.transform;if(!n.projection.supportsFreeCamera)return t.warnOnce(Qi),this;this.stop();const i=n.zoom,o=n.pitch,s=n.bearing;n.setFreeCameraOptions(e);const a=i!==n.zoom,l=o!==n.pitch,u=s!==n.bearing;return this.fire(new t.Event("movestart",r)).fire(new t.Event("move",r)),a&&this.fire(new t.Event("zoomstart",r)).fire(new t.Event("zoom",r)).fire(new t.Event("zoomend",r)),u&&this.fire(new t.Event("rotatestart",r)).fire(new t.Event("rotate",r)).fire(new t.Event("rotateend",r)),l&&this.fire(new t.Event("pitchstart",r)).fire(new t.Event("pitch",r)).fire(new t.Event("pitchend",r)),this.fire(new t.Event("moveend",r)),this}easeTo(e,r){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const n=this.transform,i=this.getZoom(),o=this.getBearing(),s=this.getPitch(),a=this.getPadding(),l="zoom"in e?+e.zoom:i,u="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:s,h="padding"in e?e.padding:n.padding,f=t.pointGeometry.convert(e.offset);let d,p,m;if("globe"===n.projection.name){const r=t.MercatorCoordinate.fromLngLat(n.center),i=f.rotate(-n.angle);r.x+=i.x/n.worldSize,r.y+=i.y/n.worldSize;const o=r.toLngLat(),s=t.LngLat.convert(e.center||o);this._normalizeCenter(s),d=n.centerPoint.add(i),p=new t.pointGeometry(r.x,r.y).mult(n.worldSize),m=new t.pointGeometry(t.mercatorXfromLng(s.lng),t.mercatorYfromLat(s.lat)).mult(n.worldSize).sub(p)}else{d=n.centerPoint.add(f);const r=n.pointLocation(d),i=t.LngLat.convert(e.center||r);this._normalizeCenter(i),p=n.project(r),m=n.project(i).sub(p)}const g=n.zoomScale(l-i);let y,_;e.around&&(y=t.LngLat.convert(e.around),_=n.locationPoint(y));const v=this._zooming||l!==i,b=this._rotating||o!==u,w=this._pitching||c!==s,x=!n.isPaddingEqual(h),E=n=>E=>{if(v&&(n.zoom=t.number(i,l,E)),b&&(n.bearing=t.number(o,u,E)),w&&(n.pitch=t.number(s,c,E)),x&&(n.interpolatePadding(a,h,E),d=n.centerPoint.add(f)),y)n.setLocationAtPoint(y,_);else{const t=n.zoomScale(n.zoom-i),e=l>i?Math.min(2,g):Math.max(.5,g),r=Math.pow(e,1-E),o=n.unproject(p.add(m.mult(E*r)).mult(t));n.setLocationAtPoint(n.renderWorldCopies?o.wrap():o,d)}return e.preloadOnly||this._fireMoveEvents(r),n};if(e.preloadOnly){const t=this._emulate(E,e.duration,n);return this._preloadTiles(t),this}const S={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=v,this._rotating=b,this._pitching=w,this._padding=x,this._easeId=e.easeId,this._prepareEase(r,e.noMoveStart,S),this._ease(E(n),(t=>{n.recenterOnTerrain(),this._afterEase(r,t)}),e),this}_prepareEase(e,r,n={}){this._moving=!0,this.transform.cameraElevationReference="sea",r||n.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!n.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!n.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!n.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,r){if(this._easeId&&r&&this._easeId===r)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const n=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,r){if(!e.essential&&t.exported.prefersReducedMotion){const n=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,r)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const n=this.transform,i=this.getZoom(),o=this.getBearing(),s=this.getPitch(),a=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,n.minZoom,n.maxZoom):i,u="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:s,h="padding"in e?e.padding:n.padding,f=n.zoomScale(l-i),d=t.pointGeometry.convert(e.offset);let p=n.centerPoint.add(d);const m=n.pointLocation(p),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);const y=n.project(m),_=n.project(g).sub(y);let v=e.curve;const b=Math.max(n.width,n.height),w=b/f,x=_.mag();if("minZoom"in e){const r=t.clamp(Math.min(e.minZoom,i,l),n.minZoom,n.maxZoom),o=b/n.zoomScale(r-i);v=Math.sqrt(o/x*2)}const E=v*v;function S(t){const e=(w*w-b*b+(t?-1:1)*E*E*x*x)/(2*(t?w:b)*E*x);return Math.log(Math.sqrt(e*e+1)-e)}function M(t){return(Math.exp(t)-Math.exp(-t))/2}function T(t){return(Math.exp(t)+Math.exp(-t))/2}const A=S(0);let C=function(t){return T(A)/T(A+v*t)},I=function(t){return b*((T(A)*(M(e=A+v*t)/T(e))-M(A))/E)/x;var e},k=(S(1)-A)/v;if(Math.abs(x)<1e-6||!isFinite(k)){if(Math.abs(b-w)<1e-6)return this.easeTo(e,r);const t=w<b?-1:1;k=Math.abs(Math.log(w/b))/v,I=function(){return 0},C=function(e){return Math.exp(t*v*e)}}e.duration="duration"in e?+e.duration:1e3*k/("screenSpeed"in e?+e.screenSpeed/v:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0);const R=o!==u,B=c!==s,P=!n.isPaddingEqual(h),D=n=>f=>{const m=f*k,v=1/C(m);n.zoom=1===f?l:i+n.scaleZoom(v),R&&(n.bearing=t.number(o,u,f)),B&&(n.pitch=t.number(s,c,f)),P&&(n.interpolatePadding(a,h,f),p=n.centerPoint.add(d));const b=1===f?g:n.unproject(y.add(_.mult(I(m))).mult(v));return n.setLocationAtPoint(n.renderWorldCopies?b.wrap():b,p),n._updateCameraOnTerrain(),e.preloadOnly||this._fireMoveEvents(r),n};if(e.preloadOnly){const t=this._emulate(D,e.duration,n);return this._preloadTiles(t),this}return this._zooming=!0,this._rotating=R,this._pitching=B,this._padding=P,this._prepareEase(r,!1),this._ease(D(n),(()=>this._afterEase(r)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const t=this._onEaseEnd;this._onEaseEnd=void 0,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,r,n){!1===n.animate||0===n.duration?(e(1),r()):(this._easeStart=t.exported.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1),r=this._onEaseFrame;r&&r(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,r){e=t.wrap(e,-180,180);const n=Math.abs(e-r);return Math.abs(e-360-r)<n&&(e-=360),Math.abs(e+360-r)<n&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.maxBounds)return;const r=t.lng-e.center.lng;t.lng+=r>180?-360:r<-180?360:0}_emulate(t,e,r){const n=Math.ceil(15*e/1e3),i=[],o=t(r.clone());for(let s=0;s<=n;s++){const t=o(s/n);i.push(t.clone())}return i}}class Yi{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o("button","mapboxgl-ctrl-attrib-button",this._container),o("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const r=this._map._getUIString(`AttributionControl.${e}`);t.setAttribute("aria-label",r),t.removeAttribute("title"),t.firstElementChild&&t.firstElementChild.setAttribute("title",r)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const n=r.reduce(((t,e,n)=>(e.value&&(t+=`${e.key}=${e.value}${n<r.length-1?"&":""}`),t)),"?");e.href=`${t.config.FEEDBACK_URL}/${n}#${ti(this._map,!0)}`,e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const n in e){const r=e[n];if(r.used){const e=r.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,r)=>{for(let n=r+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=[...this.options.customAttribution,...t]:t.unshift(this.options.customAttribution));const r=t.join(" | ");r!==this._attribHTML&&(this._attribHTML=r,t.length?(this._innerContainer.innerHTML=r,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ji{constructor(){t.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(t){this._map=t,this._container=o("div","mapboxgl-ctrl");const e=o("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const r=t[e].getSource();if(r.hasOwnProperty("mapbox_logo")&&!r.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class $i{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,r=e?this._queue.concat(e):this._queue;for(const n of r)if(n.id===t)return void(n.cancelled=!0)}run(t=0){const e=this._currentlyRunning=this._queue;this._queue=[];for(const r of e)if(!r.cancelled&&(r.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function to(e,r,n){if(e=new t.LngLat(e.lng,e.lat),r){const i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),s=360*Math.ceil(Math.abs(e.lng-n.center.lng)/360),a=n.locationPoint(e).distSqr(r),l=r.x<0||r.y<0||r.x>n.width||r.y>n.height;n.locationPoint(i).distSqr(r)<a&&(l||Math.abs(i.lng-n.center.lng)<s)?e=i:n.locationPoint(o).distSqr(r)<a&&(l||Math.abs(o.lng-n.center.lng)<s)&&(e=o)}for(;Math.abs(e.lng-n.center.lng)>180;){const t=n.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=n.width&&t.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}const eo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class ro extends t.Evented{constructor(e,r){if(super(),(e instanceof t.window.HTMLElement||r)&&(e=t.extend({element:e},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o("div");const r=41,n=27,i=s("svg",{display:"block",height:r*this._scale+"px",width:n*this._scale+"px",viewBox:`0 0 ${n} ${r}`},this._element),a=s("radialGradient",{id:"shadowGradient"},s("defs",{},i));s("stop",{offset:"10%","stop-opacity":.4},a),s("stop",{offset:"100%","stop-opacity":.05},a),s("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),s("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),s("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),s("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()}));const n=this._element.classList;for(const t in eo)n.remove(`mapboxgl-marker-anchor-${t}`);n.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(t){return t===this._map||(this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._updateMoving),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),t.on("click",this._onMapClick)),this}remove(){const t=this._map;return t&&(t.off("click",this._onMapClick),t.off("move",this._updateMoving),t.off("moveend",this._update),t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler),t.off("mouseup",this._onUp),t.off("touchend",this._onUp),t.off("mousemove",this._onMove),t.off("touchmove",this._onMove),t.off("remove",this._clearFadeTimer),t._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,r=13.5,n=Math.sqrt(Math.pow(r,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[n,-1*(e-r+n)],"bottom-right":[-n,-1*(e-r+n)],left:[r,-1*(e-r)],right:[-r,-1*(e-r)]}:this._offset}this._popup=t,t._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(t){const e=t.code,r=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==r&&13!==r||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,r=this._element;this._popup&&(e===r||r.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?(t.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(t.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const t=this._map;if(!t)return!1;const e=t.unproject(this._pos),r=t.getFreeCameraOptions();if(!r.position)return!1;const n=r.position.toLngLat();return n.distanceTo(e)<.9*n.distanceTo(this._lngLat)}_evaluateOpacity(){const e=this._map;if(!e)return;const r=this._pos;if(!r||r.x<0||r.x>e.transform.width||r.y<0||r.y>e.transform.height)return void this._clearFadeTimer();const n=e.unproject(r);let i;e._showingGlobe()&&t.isLngLatBehindGlobe(e.transform,this._lngLat)?i=0:(i=1-e._queryFogOpacity(n),e.transform._terrainEnabled()&&e.getTerrain()&&this._behindTerrain()&&(i*=.2)),this._element.style.opacity=`${i}`,this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const t=this._pos;if(!t||!this._map)return;const e=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${t.x}px,${t.y}px)\n            ${eo[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${e.x}px,${e.y}px)\n        `}_calculateXYTransform(){const e=this._pos,r=this._map,n=this.getPitchAlignment();if(!r||!e||"map"!==n)return"";if(!r._showingGlobe()){const t=r.getPitch();return t?`rotateX(${t}deg)`:""}const i=t.radToDeg(t.globeTiltAtLngLat(r.transform,this._lngLat)),o=e.sub(t.globeCenterToScreenPoint(r.transform)),s=Math.abs(o.x)+Math.abs(o.y);if(0===s)return"";const a=i/s;return`rotateX(${-o.y*a}deg) rotateY(${o.x*a}deg)`}_calculateZTransform(){const e=this._pos,r=this._map;if(!r||!e)return"";let n=0;const i=this.getRotationAlignment();if("map"===i)if(r._showingGlobe()){const e=r.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),i=r.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(e);n=t.radToDeg(Math.atan2(i.y,i.x))-90}else n=-r.getBearing();else if("horizon"===i){const i=t.smoothstep(4,6,r.getZoom()),o=t.globeCenterToScreenPoint(r.transform);o.y+=i*r.transform.height;const s=e.sub(o),a=t.radToDeg(Math.atan2(s.y,s.x));n=(a>90?a-270:a+90)*(1-i)}return n+=this._rotation,n?`rotateZ(${n}deg)`:""}_update(e){t.window.cancelAnimationFrame(this._updateFrameId);const r=this._map;r&&(r.transform.renderWorldCopies&&(this._lngLat=to(this._lngLat,this._pos,r.transform)),this._pos=r.project(this._lngLat),!0===e?this._updateFrameId=t.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),r._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(r._showingGlobe()||r.getTerrain()||r.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){const r=this._map;if(r){if(!this._isDragging){const t=this._clickTolerance||r._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=r.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const e=this._map;e&&(e.off("mousemove",this._onMove),e.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){const e=this._map;e&&this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos),this._pointerdownPos=t.point,this._state="pending",e.on("mousemove",this._onMove),e.on("touchmove",this._onMove),e.once("mouseup",this._onUp),e.once("touchend",this._onUp))}setDraggable(t){this._draggable=!!t;const e=this._map;return e&&(t?(e.on("mousedown",this._addDragHandler),e.on("touchstart",this._addDragHandler)):(e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}}class no{constructor(t){this.jumpTo(t)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const r=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-r)+this._end*r}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,e,r){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+r}}const io={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},oo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function so(t){t.parentNode&&t.parentNode.removeChild(t)}const ao={showCompass:!0,showZoom:!0,visualizePitch:!1};class lo{constructor(e,r,n=!1){this._clickTolerance=10,this.element=r,this.mouseRotate=new xi({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,n&&(this.mousePitch=new Ei({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener("mousedown",this.mousedown),r.addEventListener("touchstart",this.touchstart,{passive:!1}),r.addEventListener("touchmove",this.touchmove),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),c()}move(t,e){const r=this.map,n=this.mouseRotate.mousemoveWindow(t,e),i=n&&n.bearingDelta;if(i&&r.setBearing(r.getBearing()+i),this.mousePitch){const n=this.mousePitch.mousemoveWindow(t,e),i=n&&n.pitchDelta;i&&r.setPitch(r.getPitch()+i)}}off(){const t=this.element;t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("touchstart",this.touchstart,{passive:!1}),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){h(),t.window.removeEventListener("mousemove",this.mousemove),t.window.removeEventListener("mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),p(this.element,e)),t.window.addEventListener("mousemove",this.mousemove),t.window.addEventListener("mouseup",this.mouseup)}mousemove(t){this.move(t,p(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=m(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=m(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const uo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},co={maxWidth:100,unit:"metric"};function ho(t,e,r){const n=fo(e),i=n/e,o={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[r];this._map._requestDomTask((()=>{this._container.style.width=t*i+"px",this._container.innerHTML=`${n}&nbsp;${o}`}))}function fo(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let r=t/e;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(r),e*r}const po={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},mo=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function go(e=new t.pointGeometry(0,0),r="bottom"){if("number"==typeof e){const n=Math.round(Math.sqrt(.5*Math.pow(e,2)));switch(r){case"top":return new t.pointGeometry(0,e);case"top-left":return new t.pointGeometry(n,n);case"top-right":return new t.pointGeometry(-n,n);case"bottom":return new t.pointGeometry(0,-e);case"bottom-left":return new t.pointGeometry(n,-n);case"bottom-right":return new t.pointGeometry(-n,-n);case"left":return new t.pointGeometry(e,0);case"right":return new t.pointGeometry(-e,0)}return new t.pointGeometry(0,0)}return e instanceof t.pointGeometry||Array.isArray(e)?t.pointGeometry.convert(e):t.pointGeometry.convert(e[r]||[0,0])}const yo={version:t.version,supported:r,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Xi{constructor(e){if(null!=(e=t.extend({},oo,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(e.antialias&&t.isSafariWithAntialiasingBug(t.window)&&(e.antialias=!1,t.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Yn(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._minTileCacheSize=e.minTileCacheSize,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._language="auto"===e.language?t.window.navigator.language:e.language,this._worldview=e.worldview,this._renderTaskQueue=new $i,this._domRenderTaskQueue=new $i,this._controls=[],this._markers=[],this._mapId=t.uniqueId(),this._locale=t.extend({},io,e.locale),this._clickTolerance=e.clickTolerance,this._cooperativeGestures=e.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new no(0),this._useExplicitProjection=!1,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),this._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof t.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(this._container.childNodes.length>0&&t.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1),t.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Hi(this,e),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.projection&&this.setProjection(e.projection),this._hash=e.hash&&new $n("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.attributionControl&&this.addControl(new Yi({customAttribution:e.customAttribution})),this._logoControl=new Ji,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))}))}_getMapId(){return this._mapId}addControl(e,r){if(void 0===r&&(r=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[r];return-1!==r.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(e);return r>-1&&this._controls.splice(r,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(e){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const r=!this._moving;return r&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),r&&this.fire(new t.Event("moveend",e)),this}getBounds(){return"globe"===this.transform.projection.name&&t.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}getLanguage(){return this._language}setLanguage(e){if(this._language="auto"===e?t.window.navigator.language:e,this.style)for(const t in this.style._sourceCaches){const e=this.style._sourceCaches[t]._source;e._setLanguage&&e._setLanguage(this._language)}for(const t of this._controls)t._setLanguage&&t._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(t){if(this._worldview=t,this.style)for(const e in this.style._sourceCaches){const r=this.style._sourceCaches[e]._source;r._setWorldview&&r._setWorldview(t)}return this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(t){return this._lazyInitEmptyStyle(),t?"string"==typeof t&&(t={name:t}):t=null,this._useExplicitProjection=!!t,this._prioritizeAndUpdateProjection(t,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const e=this.transform,r=e.projection.name;let n;"globe"===r&&e.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?(e.setMercatorFromTransition(),n=!0):"mercator"===r&&e.zoom<t.GLOBE_ZOOM_THRESHOLD_MAX&&(e.setProjection({name:"globe"}),n=!0),n&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(t,e){return this._updateProjection(t||e||{name:"mercator"})}_updateProjection(e){let r;if(r="globe"===e.name&&this.transform.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(e),this.style.applyProjectionUpdate(),r){this.painter.clearBackgroundTiles();for(const t in this.style._sourceCaches)this.style._sourceCaches[t].clearTiles();this._update(!0)}return this}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.pointGeometry.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(t,e,r){if("mouseenter"===t||"mouseover"===t){let n=!1;const i=i=>{const o=e.filter((t=>this.getLayer(t))),s=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];s.length?n||(n=!0,r.call(this,new ui(t,this,i.originalEvent,{features:s}))):n=!1},o=()=>{n=!1};return{layers:new Set(e),listener:r,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===t||"mouseout"===t){let n=!1;const i=i=>{const o=e.filter((t=>this.getLayer(t)));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?n=!0:n&&(n=!1,r.call(this,new ui(t,this,i.originalEvent)))},o=e=>{n&&(n=!1,r.call(this,new ui(t,this,e.originalEvent)))};return{layers:new Set(e),listener:r,delegates:{mousemove:i,mouseout:o}}}{const n=t=>{const n=e.filter((t=>this.getLayer(t))),i=n.length?this.queryRenderedFeatures(t.point,{layers:n}):[];i.length&&(t.features=i,r.call(this,t),delete t.features)};return{layers:new Set(e),listener:r,delegates:{[t]:n}}}}on(t,e,r){if(void 0===r)return super.on(t,e);Array.isArray(e)||(e=[e]);const n=this._createDelegatedListener(t,e,r);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(n);for(const i in n.delegates)this.on(i,n.delegates[i]);return this}once(t,e,r){if(void 0===r)return super.once(t,e);Array.isArray(e)||(e=[e]);const n=this._createDelegatedListener(t,e,r);for(const i in n.delegates)this.once(i,n.delegates[i]);return this}off(t,e,r){if(void 0===r)return super.off(t,e);e=new Set(Array.isArray(e)?e:[e]);const n=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[t]:void 0;return i&&(t=>{for(let i=0;i<t.length;i++){const o=t[i];if(o.listener===r&&n(o.layers,e)){for(const t in o.delegates)this.off(t,o.delegates[t]);return t.splice(i,1),this}}})(i),this}queryRenderedFeatures(e,r){return this.style?(void 0!==r||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(r=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],r=r||{},this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}queryTerrainElevation(e,r){const n=this.transform.elevation;return n?(r=t.extend({},{exaggerated:!0},r),n.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,r.exaggerated)):null}setStyle(e,r){return!1!==(r=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&r.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._localFontFamily=r.localFontFamily,this._updateStyle(e,r))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),t&&(this.style=new tr(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new tr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,r){if("string"==typeof e){const n=this._requestManager.normalizeStyleURL(e),i=this._requestManager.transformRequest(n,t.ResourceType.Style);t.getJSON(i,((e,n)=>{e?this.fire(new t.ErrorEvent(e)):n&&this._updateDiff(n,r)}))}else"object"==typeof e&&this._updateDiff(e,r)}_updateDiff(e,r){try{this.style.setState(e)&&this._update(!0)}catch(n){t.warnOnce(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(e,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(t.warnOnce("There is no style added to the map."),!1)}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(t){return!!this.style&&this.style._isSourceCacheLoaded(t)}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const r=t[e]._tiles;for(const t in r){const e=r[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,r){this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,r)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,r,{pixelRatio:n=1,sdf:i=!1,stretchX:o,stretchY:s,content:a}={}){if(this._lazyInitEmptyStyle(),r instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&r instanceof t.window.ImageBitmap){const{width:l,height:u,data:c}=t.exported.getImageData(r);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:u},c),pixelRatio:n,stretchX:o,stretchY:s,content:a,sdf:i,version:0})}else if(void 0===r.width||void 0===r.height)this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:u}=r,c=r;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:u},new Uint8Array(c.data)),pixelRatio:n,stretchX:o,stretchY:s,content:a,sdf:i,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}}updateImage(e,r){const n=this.style.getImage(e);if(!n)return void this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=r instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&r instanceof t.window.ImageBitmap?t.exported.getImageData(r):r,{width:o,height:s}=i;void 0!==o&&void 0!==s?o===n.data.width&&s===n.data.height?(n.data.replace(i.data,!(r instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&r instanceof t.window.ImageBitmap)),this.style.updateImage(e,n)):this.fire(new t.ErrorEvent(new Error(`The width and height of the updated image (${o}, ${s})\n                must be that same as the previous version of the image\n                (${n.data.width}, ${n.data.height})`))):this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,r){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),((e,n)=>{r(e,n instanceof t.window.HTMLImageElement?t.exported.getImageData(n):n)}))}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,r){return this.style.setLayerZoomRange(t,e,r),this._update(!0)}setFilter(t,e,r={}){return this.style.setFilter(t,e,r),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,r,n={}){return this.style.setPaintProperty(t,e,r,n),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,r,n={}){return this.style.setLayoutProperty(t,e,r,n),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),!t&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}_updateContainerDimensions(){if(!this._container)return;const e=this._container.getBoundingClientRect().width||400,r=this._container.getBoundingClientRect().height||300;let n,i,o,s=this._container;for(;s&&(!i||!o);){const e=t.window.getComputedStyle(s).transform;e&&"none"!==e&&(n=e.match(/matrix.*\((.+)\)/)[1].split(", "),n[0]&&"0"!==n[0]&&"1"!==n[0]&&(i=n[0]),n[3]&&"0"!==n[3]&&"1"!==n[3]&&(o=n[3])),s=s.parentElement}this._containerWidth=i?Math.abs(e/i):e,this._containerHeight=o?Math.abs(r/o):r}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=o("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=o("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=o("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const r=this._controlContainer=o("div","mapboxgl-control-container",t),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{n[t]=o("div",`mapboxgl-ctrl-${t}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,r){const n=t.exported.devicePixelRatio||1;this._canvas.width=n*Math.ceil(e),this._canvas.height=n*Math.ceil(r),this._canvas.style.width=`${e}px`,this._canvas.style.height=`${r}px`}_addMarker(t){this._markers.push(t)}_removeMarker(t){const e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}_setupPainter(){const e=t.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);n?(t.storeAuthState(n,!0),this.painter=new zn(n,this.transform),this.on("data",(t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)})),t.exported$1.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_requestDomTask(t){!this.loaded()||this.loaded()&&!this.isMoving()?t():this._domRenderTaskQueue.add(t)}_render(e){let r;const n=this.painter.context.extTimerQuery,i=t.exported.now();if(this.listens("gpu-timing-frame")&&(r=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,r)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),this._removed)return;this._updateProjectionTransition();let o=!1;const s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,r=this.transform.pitch,n=t.exported.now();this.style.zoomHistory.update(e,n);const i=new t.EvaluationParameters(e,{now:n,fadeDuration:s,pitch:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=i.crossFadingFactor();1===a&&a===this._crossFadingFactor||(o=!0,this._crossFadingFactor=a),this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let a=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),a=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerUpdate()):a=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),r){const e=t.exported.now()-i;n.endQueryEXT(n.TIME_ELAPSED_EXT,r),setTimeout((()=>{const o=n.getQueryObjectEXT(r,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:o})),t.window.performance.mark("frame-gpu",{startTime:i,detail:{gpuTime:o}})}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const r=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:r}))}),50)}if(this.listens("gpu-timing-deferred-render")){const e=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const r=this.painter.queryGpuTimeDeferredRender(e);this.fire(new t.Event("gpu-timing-deferred-render",{gpuTime:r}))}),50)}const l=this._sourcesDirty||this._styleDirty||this._placementDirty||a;if(l||this._repaint)this.triggerRepaint();else{const e=!this.isMoving()&&this.loaded();if(e&&(a=this._updateAverageElevation(i,!0)),a)this.triggerRepaint();else if(this._triggerFrame(!1),e&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||l||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const t of this._markers)t._update()}_updateAverageElevation(t,e=!1){const r=t=>(this.transform.averageElevation=t,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);if((e||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){const e=this.transform.averageElevation;let n=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(n)?n=0:this._averageElevationLastSampledAt=t;const o=Math.abs(e-n);if(o>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(n),r(n);this._averageElevation.easeTo(n,t,300)}else if(o>1e-4)return this._averageElevation.jumpTo(n),r(n)}return!!this._averageElevation.isEasing(t)&&r(this._averageElevation.getValue(t))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){const e=this.painter.context.gl;t.storeAuthState(e,!1),this._logoControl instanceof Ji&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const r=this.painter.context.gl,n=r.createFramebuffer();function i(t){r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0);const e=new Uint8Array(r.drawingBufferWidth*r.drawingBufferHeight*4);return r.readPixels(0,0,r.drawingBufferWidth,r.drawingBufferHeight,r.RGBA,r.UNSIGNED_BYTE,e),e}return r.bindFramebuffer(r.FRAMEBUFFER,n),this._canvasPixelComparison(i(t),e.canvasCopies.map(i),e.timeStamps)}_canvasPixelComparison(t,e,r){let n=r[1]-r[0];const i=t.length/4;for(let o=0;o<e.length;o++){const s=e[o];let a=0;for(let e=0;e<s.length;e+=4)s[e]===t[e]&&s[e+1]===t[e+1]&&s[e+2]===t[e+2]&&s[e+3]===t[e+3]&&(a+=1);n+=(r[o+2]-r[o+1])*(1-a/i)}return n}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),so(this._canvasContainer),so(this._controlContainer),so(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame((t=>{const e=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,e&&this._render(t)})))}_preloadTiles(e){const r=this.style?Object.values(this.style._sourceCaches):[];return t.asyncAll(r,((t,r)=>t._preloadTiles(e,r)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,r){t.setCacheLimits(e,r)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},ao,e),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(t=>{this._map&&this._map.zoomIn({},{originalEvent:t})})),o("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(t=>{this._map&&this._map.zoomOut({},{originalEvent:t})})),o("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(t=>{const e=this._map;e&&(this.options.visualizePitch?e.resetNorthPitch({},{originalEvent:t}):e.resetNorth({},{originalEvent:t}))})),this._compassIcon=o("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map;if(!t)return;const e=t.getZoom(),r=e===t.getMaxZoom(),n=e===t.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const t=this._map;if(!t)return;const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5)}) rotateX(${t.transform.pitch}deg) rotateZ(${t.transform.angle*(180/Math.PI)}deg)`:`rotate(${t.transform.angle*(180/Math.PI)}deg)`;t._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=e)}))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),t.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&t.on("pitch",this._rotateCompassArrow),t.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lo(t,this._compass,this.options.visualizePitch)),this._container}onRemove(){const t=this._map;t&&(this._container.remove(),this.options.showZoom&&t.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&t.off("pitch",this._rotateCompassArrow),t.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(t,e){const r=o("button",t,this._container);return r.type="button",r.addEventListener("click",e),r}_setButtonTitle(t,e){if(!this._map)return;const r=this._map._getUIString(`NavigationControl.${e}`);t.setAttribute("aria-label",r),t.firstElementChild&&t.firstElementChild.setAttribute("title",r)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({geolocation:t.window.navigator.geolocation},uo,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Jn(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(t){return this._map=t,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(e){void 0!==this._supportsGeolocation?e(this._supportsGeolocation):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((t=>{this._supportsGeolocation="denied"!==t.state,e(this._supportsGeolocation)})):(this._supportsGeolocation=!!this.options.geolocation,e(this._supportsGeolocation))}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),r=t.coords;return!!e&&(r.longitude<e.getWest()||r.longitude>e.getEast()||r.latitude<e.getSouth()||r.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const r=new t.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(n),o,{geolocateSource:!0})}_updateMarker(e){if(e){const r=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map.transform,r=t.mercatorZfromAltitude(1,e._center.lat)*e.worldSize,n=Math.ceil(2*this._accuracy*r);this._circleElement.style.width=`${n}px`,this._circleElement.style.height=`${n}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=o("button","mapboxgl-ctrl-geolocate",this._container),o("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o("div","mapboxgl-user-location"),this._dotElement.appendChild(o("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ro({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ro({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}_onDeviceOrientation(t){this._userLocationDotMarker&&(t.webkitCompassHeading?this._heading=t.webkitCompassHeading:!0===t.absolute&&(this._heading=-1*t.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(t={maximumAge:6e5,timeout:0},this._noTimeout=!0):(t=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const e=()=>{t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((t=>{"granted"===t&&e()})).catch(console.error):e()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientation),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Yi,ScaleControl:class{constructor(e){this.options=t.extend({},co,e),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch(t){return!1}}()||(this._setScale=ho.bind(this)),t.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const t=this.options.maxWidth||100,e=this._map,r=e._containerHeight/2,n=e._containerWidth/2-t/2,i=e.unproject([n,r]),o=e.unproject([n+t,r]),s=i.distanceTo(o);if("imperial"===this.options.unit){const e=3.2808*s;e>5280?this._setScale(t,e/5280,"mile"):this._setScale(t,e,"foot")}else"nautical"===this.options.unit?this._setScale(t,s/1852,"nautical-mile"):s>=1e3?this._setScale(t,s/1e3,"kilometer"):this._setScale(t,s,"meter")}_setScale(t,e,r){const n=fo(e),i=n/e;this._map._requestDomTask((()=>{this._container.style.width=t*i+"px",this._container.innerHTML="nautical-mile"!==r?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:r}).format(n):`${n}&nbsp;nm`}))}onAdd(t){return this._map=t,this._language=t.getLanguage(),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(t){this._language=t,this._update()}setUnit(t){this.options.unit=t,this._update()}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=o("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",t)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(po),e),t.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(e&&e.className?e.className.trim().split(/\s+/):[])}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&e.on("preclick",this._onClose),this.options.closeOnMove&&e.on("move",this._onClose),e.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(e.on("mousemove",this._onMouseEvent),e.on("mouseup",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")):e.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const e=this._map;return e&&(e.off("move",this._update),e.off("move",this._onClose),e.off("preclick",this._onClose),e.off("click",this._onClose),e.off("remove",this.remove),e.off("mousemove",this._onMouseEvent),e.off("mouseup",this._onMouseEvent),e.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update();const r=this._map;return r&&(r.on("move",this._update),r.off("mousemove",this._onMouseEvent),r._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const t=this._map;return t&&(t.off("move",this._update),t.on("mousemove",this._onMouseEvent),t.on("drag",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const r=t.window.document.createDocumentFragment(),n=t.window.document.createElement("body");let i;for(n.innerHTML=e;i=n.firstChild,i;)r.appendChild(i);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){let e=this._content;if(e)for(;e.hasChildNodes();)e.firstChild&&e.removeChild(e.firstChild);else e=this._content=o("div","mapboxgl-popup-content",this._container||void 0);if(e.appendChild(t),this.options.closeButton){const t=this._closeButton=o("button","mapboxgl-popup-close-button",e);t.type="button",t.setAttribute("aria-label","Close popup"),t.setAttribute("aria-hidden","true"),t.innerHTML="&#215;",t.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(t){return this._classList.add(t),this._updateClassList(),this}removeClassName(t){return this._classList.delete(t),this._updateClassList(),this}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){let e;return this._classList.delete(t)?e=!1:(this._classList.add(t),e=!0),this._updateClassList(),e}_onMouseEvent(t){this._update(t.point)}_getAnchor(t){if(this.options.anchor)return this.options.anchor;const e=this._map,r=this._container,n=this._pos;if(!e||!r||!n)return"bottom";const i=r.offsetWidth,o=r.offsetHeight,s=n.x<i/2,a=n.x>e.transform.width-i/2;if(n.y+t<o)return s?"top-left":a?"top-right":"top";if(n.y>e.transform.height-o){if(s)return"bottom-left";if(a)return"bottom-right"}return s?"left":a?"right":"bottom"}_updateClassList(){const t=this._container;if(!t)return;const e=[...this._classList];e.push("mapboxgl-popup"),this._anchor&&e.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&e.push("mapboxgl-popup-track-pointer"),t.className=e.join(" ")}_update(e){const r=this._map,n=this._content;if(!r||!this._lngLat&&!this._trackPointer||!n)return;let i=this._container;if(i||(i=this._container=o("div","mapboxgl-popup",r.getContainer()),this._tip=o("div","mapboxgl-popup-tip",i),i.appendChild(n)),this.options.maxWidth&&i.style.maxWidth!==this.options.maxWidth&&(i.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=to(this._lngLat,this._pos,r.transform)),!this._trackPointer||e){const t=this._pos=this._trackPointer&&e?e:r.project(this._lngLat),n=go(this.options.offset),i=this._anchor=this._getAnchor(n.y),o=go(this.options.offset,i),s=t.add(o).round();r._requestDomTask((()=>{this._container&&i&&(this._container.style.transform=`${eo[i]} translate(${s.x}px,${s.y}px)`)}))}if(!this._marker&&r._showingGlobe()){const e=t.isLngLatBehindGlobe(r.transform,this._lngLat)?0:1;this._setOpacity(e)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(mo);t&&t.focus()}_onClose(){this.remove()}_setOpacity(t){this._container&&(this._container.style.opacity=`${t}`),this._content&&(this._content.style.pointerEvents=t?"auto":"none")}},Marker:ro,Style:tr,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:Gn,Evented:t.Evented,config:t.config,prewarm:function(){Ft().acquire(zt)},clearPrewarmedResources:function(){const t=jt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(zt),jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Ut.workerCount},set workerCount(t){Ut.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return yo})),r}()},function(t,e){},function(t,e,r){"use strict";(function(e,n){var i=65536,o=4294967295;var s=r(1).Buffer,a=e.crypto||e.msCrypto;a&&a.getRandomValues?t.exports=function(t,e){if(t>o)throw new RangeError("requested too many random bytes");var r=s.allocUnsafe(t);if(t>0)if(t>i)for(var l=0;l<t;l+=i)a.getRandomValues(r.slice(l,l+i));else a.getRandomValues(r);if("function"===typeof e)return n.nextTick((function(){e(null,r)}));return r}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r(6),r(5))},function(t,e,r){"use strict";var n={};function i(t,e,r){r||(r=Error);var i=function(t){var r,n;function i(r,n,i){return t.call(this,function(t,r,n){return"string"===typeof e?e:e(t,r,n)}(r,n,i))||this}return n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=t,n[t]=i}function o(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i,s,a;if("string"===typeof e&&(i="not ",e.substr(!s||s<0?0:+s,i.length)===i)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))a="The ".concat(t," ").concat(n," ").concat(o(e,"type"));else{var l=function(t,e,r){return"number"!==typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(l," ").concat(n," ").concat(o(e,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},function(t,e,r){"use strict";(function(e){var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=u;var i=r(107),o=r(111);r(0)(u,i);for(var s=n(o.prototype),a=0;a<s.length;a++){var l=s[a];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(t){if(!(this instanceof u))return new u(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||e.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,r(5))},function(t,e,r){var n=r(1).Buffer;function i(t,e){this._block=n.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"===typeof t&&(e=e||"utf8",t=n.from(t,e));for(var r=this._block,i=this._blockSize,o=t.length,s=this._len,a=0;a<o;){for(var l=s%i,u=Math.min(o-a,i-l),c=0;c<u;c++)r[l+c]=t[a+c];a+=u,(s+=u)%i===0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},function(t,e,r){"use strict";var n={};function i(t,e,r){r||(r=Error);var i=function(t){var r,n;function i(r,n,i){return t.call(this,function(t,r,n){return"string"===typeof e?e:e(t,r,n)}(r,n,i))||this}return n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=t,n[t]=i}function o(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i,s,a;if("string"===typeof e&&(i="not ",e.substr(!s||s<0?0:+s,i.length)===i)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))a="The ".concat(t," ").concat(n," ").concat(o(e,"type"));else{var l=function(t,e,r){return"number"!==typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(l," ").concat(n," ").concat(o(e,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},function(t,e,r){"use strict";(function(e){var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=u;var i=r(133),o=r(137);r(0)(u,i);for(var s=n(o.prototype),a=0;a<s.length;a++){var l=s[a];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(t){if(!(this instanceof u))return new u(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||e.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,r(5))},function(t,e,r){var n=r(2);r(4);var i=t.exports=n.pem=n.pem||{};function o(t){for(var e=t.name+": ",r=[],n=function(t,e){return" "+e},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+"\r\n";var o=0,s=-1;for(i=0;i<e.length;++i,++o)if(o>65&&-1!==s){var a=e[s];","===a?(++s,e=e.substr(0,s)+"\r\n "+e.substr(s)):e=e.substr(0,s)+"\r\n"+a+e.substr(s+1),o=i-s-1,s=-1,++i}else" "!==e[i]&&"\t"!==e[i]&&","!==e[i]||(s=i);return e}function s(t){return t.replace(/^\s+/,"")}i.encode=function(t,e){e=e||{};var r,i="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(i+=o(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]})),t.contentDomain&&(i+=o(r={name:"Content-Domain",values:[t.contentDomain]})),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),i+=o(r)),t.headers)for(var s=0;s<t.headers.length;++s)i+=o(t.headers[s]);return t.procType&&(i+="\r\n"),i+=n.util.encode64(t.body,e.maxline||64)+"\r\n",i+="-----END "+t.type+"-----\r\n"},i.decode=function(t){for(var e,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,o=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;e=i.exec(t);){var l=e[1];"NEW CERTIFICATE REQUEST"===l&&(l="CERTIFICATE REQUEST");var u={type:l,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(e[3])};if(r.push(u),e[2]){for(var c=e[2].split(a),h=0;e&&h<c.length;){for(var f=c[h].replace(/\s+$/,""),d=h+1;d<c.length;++d){var p=c[d];if(!/\s/.test(p[0]))break;f+=p,h=d}if(e=f.match(o)){for(var m={name:e[1],values:[]},g=e[2].split(","),y=0;y<g.length;++y)m.values.push(s(g[y]));if(u.procType)if(u.contentDomain||"Content-Domain"!==m.name)if(u.dekInfo||"DEK-Info"!==m.name)u.headers.push(m);else{if(0===m.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:g[0],parameters:g[1]||null}}else u.contentDomain=g[0]||"";else{if("Proc-Type"!==m.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==m.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:g[0],type:g[1]}}}++h}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},function(t,e,r){"use strict";t.exports=r(407)},function(t,e,r){(e=t.exports=r(96)).Stream=e,e.Readable=e,e.Writable=r(61),e.Duplex=r(19),e.Transform=r(100),e.PassThrough=r(215)},function(t,e,r){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"===typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"===typeof t},e.isString=function(t){return"string"===typeof t},e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"===typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"===typeof t},e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=r(3).Buffer.isBuffer},function(t,e,r){"use strict";var n=r(0),i=r(65),o=r(67),s=r(68),a=r(18);function l(t){a.call(this,"digest"),this._hash=t}n(l,a),l.prototype._update=function(t){this._hash.update(t)},l.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new i:"rmd160"===t||"ripemd160"===t?new o:new l(s(t))}},function(t,e,r){t.exports=i;var n=r(13).EventEmitter;function i(){n.call(this)}r(0)(i,n),i.Readable=r(35),i.Writable=r(254),i.Duplex=r(255),i.Transform=r(256),i.PassThrough=r(257),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",a),r.on("close",l));var s=!1;function a(){s||(s=!0,t.end())}function l(){s||(s=!0,"function"===typeof t.destroy&&t.destroy())}function u(t){if(c(),0===n.listenerCount(this,"error"))throw t}function c(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",l),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("error",u),t.on("error",u),r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t}},function(t,e,r){(function(e){t.exports=function(t,r){for(var n=Math.min(t.length,r.length),i=new e(n),o=0;o<n;++o)i[o]=t[o]^r[o];return i}}).call(this,r(3).Buffer)},function(t,e,r){"use strict";var n=r(14),i=r(8);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},function(t,e,r){"use strict";const n=r(0),i=r(81).Reporter,o=r(79).Buffer;function s(t,e){i.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function a(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return a.isEncoderBuffer(t)||(t=new a(t,e)),this.length+=t.length,t}),this);else if("number"===typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"===typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}n(s,i),e.DecoderBuffer=s,s.isDecoderBuffer=function(t){if(t instanceof s)return!0;return"object"===typeof t&&o.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"===typeof t.offset&&"number"===typeof t.length&&"function"===typeof t.save&&"function"===typeof t.restore&&"function"===typeof t.isEmpty&&"function"===typeof t.readUInt8&&"function"===typeof t.skip&&"function"===typeof t.raw},s.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},s.prototype.restore=function(t){const e=new s(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},s.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const r=new s(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},s.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=a,a.isEncoderBuffer=function(t){if(t instanceof a)return!0;return"object"===typeof t&&"EncoderBuffer"===t.constructor.name&&"number"===typeof t.length&&"function"===typeof t.join},a.prototype.join=function(t,e){return t||(t=o.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(t,e),e+=r.length})):("number"===typeof this.value?t[e]=this.value:"string"===typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OAuth2Client=e.CertificateFormat=e.CodeChallengeMethod=void 0;const n=r(63),i=r(38),o=r(155),s=r(104),a=r(336),l=r(156);var u;!function(t){t.Plain="plain",t.S256="S256"}(e.CodeChallengeMethod||(e.CodeChallengeMethod={})),function(t){t.PEM="PEM",t.JWK="JWK"}(u=e.CertificateFormat||(e.CertificateFormat={}));class c extends a.AuthClient{constructor(t,e,r){super(),this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=u.PEM,this.refreshTokenPromises=new Map;const n=t&&"object"===typeof t?t:{clientId:t,clientSecret:e,redirectUri:r};this._clientId=n.clientId,this._clientSecret=n.clientSecret,this.redirectUri=n.redirectUri,this.eagerRefreshThresholdMillis=n.eagerRefreshThresholdMillis||3e5,this.forceRefreshOnFailure=!!n.forceRefreshOnFailure}generateAuthUrl(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.code_challenge_method&&!t.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");t.response_type=t.response_type||"code",t.client_id=t.client_id||this._clientId,t.redirect_uri=t.redirect_uri||this.redirectUri,t.scope instanceof Array&&(t.scope=t.scope.join(" "));return c.GOOGLE_OAUTH2_AUTH_BASE_URL_+"?"+n.stringify(t)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){const t=s.createCrypto(),e=t.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-");return{codeVerifier:e,codeChallenge:(await t.sha256DigestBase64(e)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_")}}getToken(t,e){const r="string"===typeof t?{code:t}:t;if(!e)return this.getTokenAsync(r);this.getTokenAsync(r).then((t=>e(null,t.tokens,t.res)),(t=>e(t,null,t.response)))}async getTokenAsync(t){const e=c.GOOGLE_OAUTH2_TOKEN_URL_,r={code:t.code,client_id:t.client_id||this._clientId,client_secret:this._clientSecret,redirect_uri:t.redirect_uri||this.redirectUri,grant_type:"authorization_code",code_verifier:t.codeVerifier},i=await this.transporter.request({method:"POST",url:e,data:n.stringify(r),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),o=i.data;return i.data&&i.data.expires_in&&(o.expiry_date=(new Date).getTime()+1e3*i.data.expires_in,delete o.expires_in),this.emit("tokens",o),{tokens:o,res:i}}async refreshToken(t){if(!t)return this.refreshTokenNoCache(t);if(this.refreshTokenPromises.has(t))return this.refreshTokenPromises.get(t);const e=this.refreshTokenNoCache(t).then((e=>(this.refreshTokenPromises.delete(t),e)),(e=>{throw this.refreshTokenPromises.delete(t),e}));return this.refreshTokenPromises.set(t,e),e}async refreshTokenNoCache(t){if(!t)throw new Error("No refresh token is set.");const e=c.GOOGLE_OAUTH2_TOKEN_URL_,r={refresh_token:t,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i=await this.transporter.request({method:"POST",url:e,data:n.stringify(r),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),o=i.data;return i.data&&i.data.expires_in&&(o.expiry_date=(new Date).getTime()+1e3*i.data.expires_in,delete o.expires_in),this.emit("tokens",o),{tokens:o,res:i}}refreshAccessToken(t){if(!t)return this.refreshAccessTokenAsync();this.refreshAccessTokenAsync().then((e=>t(null,e.credentials,e.res)),t)}async refreshAccessTokenAsync(){const t=await this.refreshToken(this.credentials.refresh_token),e=t.tokens;return e.refresh_token=this.credentials.refresh_token,this.credentials=e,{credentials:this.credentials,res:t.res}}getAccessToken(t){if(!t)return this.getAccessTokenAsync();this.getAccessTokenAsync().then((e=>t(null,e.token,e.res)),t)}async getAccessTokenAsync(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)throw new Error("No refresh token is set.");const t=await this.refreshAccessTokenAsync();if(!t.credentials||t.credentials&&!t.credentials.access_token)throw new Error("Could not refresh access token.");return{token:t.credentials.access_token,res:t.res}}return{token:this.credentials.access_token}}async getRequestHeaders(t){return(await this.getRequestMetadataAsync(t)).headers}async getRequestMetadataAsync(t){const e=this.credentials;if(!e.access_token&&!e.refresh_token&&!this.apiKey)throw new Error("No access, refresh token or API key is set.");if(e.access_token&&!this.isTokenExpiring()){e.token_type=e.token_type||"Bearer";const t={Authorization:e.token_type+" "+e.access_token};return{headers:this.addSharedMetadataHeaders(t)}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let r=null,n=null;try{r=await this.refreshToken(e.refresh_token),n=r.tokens}catch(s){const t=s;throw!t.response||403!==t.response.status&&404!==t.response.status||(t.message=`Could not refresh access token: ${t.message}`),t}const i=this.credentials;i.token_type=i.token_type||"Bearer",n.refresh_token=i.refresh_token,this.credentials=n;const o={Authorization:i.token_type+" "+n.access_token};return{headers:this.addSharedMetadataHeaders(o),res:r.res}}static getRevokeTokenUrl(t){const e=n.stringify({token:t});return`${c.GOOGLE_OAUTH2_REVOKE_URL_}?${e}`}revokeToken(t,e){const r={url:c.getRevokeTokenUrl(t),method:"POST"};if(!e)return this.transporter.request(r);this.transporter.request(r).then((t=>e(null,t)),e)}revokeCredentials(t){if(!t)return this.revokeCredentialsAsync();this.revokeCredentialsAsync().then((e=>t(null,e)),t)}async revokeCredentialsAsync(){const t=this.credentials.access_token;if(this.credentials={},t)return this.revokeToken(t);throw new Error("No access token to revoke.")}request(t,e){if(!e)return this.requestAsync(t);this.requestAsync(t).then((t=>e(null,t)),(t=>e(t,t.response)))}async requestAsync(t){let e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const r=await this.getRequestMetadataAsync(t.url);t.headers=t.headers||{},r.headers&&r.headers["x-goog-user-project"]&&(t.headers["x-goog-user-project"]=r.headers["x-goog-user-project"]),r.headers&&r.headers.Authorization&&(t.headers.Authorization=r.headers.Authorization),this.apiKey&&(t.headers["X-Goog-Api-Key"]=this.apiKey),e=await this.transporter.request(t)}catch(n){const e=n.response;if(e){const n=e.status,o=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),s=e.config.data instanceof i.Readable,a=401===n||403===n;if(!r&&a&&!s&&o)return await this.refreshAccessTokenAsync(),this.requestAsync(t,!0)}throw n}return e}verifyIdToken(t,e){if(e&&"function"!==typeof e)throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(!e)return this.verifyIdTokenAsync(t);this.verifyIdTokenAsync(t).then((t=>e(null,t)),e)}async verifyIdTokenAsync(t){if(!t.idToken)throw new Error("The verifyIdToken method requires an ID Token");const e=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(t.idToken,e.certs,t.audience,c.ISSUERS_,t.maxExpiry)}async getTokenInfo(t){const{data:e}=await this.transporter.request({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${t}`},url:c.GOOGLE_TOKEN_INFO_URL}),r=Object.assign({expiry_date:(new Date).getTime()+1e3*e.expires_in,scopes:e.scope.split(" ")},e);return delete r.expires_in,delete r.scope,r}getFederatedSignonCerts(t){if(!t)return this.getFederatedSignonCertsAsync();this.getFederatedSignonCertsAsync().then((e=>t(null,e.certs,e.res)),t)}async getFederatedSignonCertsAsync(){const t=(new Date).getTime(),e=s.hasBrowserCrypto()?u.JWK:u.PEM;if(this.certificateExpiry&&t<this.certificateExpiry.getTime()&&this.certificateCacheFormat===e)return{certs:this.certificateCache,format:e};let r,n;switch(e){case u.PEM:n=c.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_;break;case u.JWK:n=c.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_;break;default:throw new Error(`Unsupported certificate format ${e}`)}try{r=await this.transporter.request({url:n})}catch(h){throw h.message=`Failed to retrieve verification certificates: ${h.message}`,h}const i=r?r.headers["cache-control"]:void 0;let o=-1;if(i){const t=new RegExp("max-age=([0-9]*)").exec(i);t&&2===t.length&&(o=1e3*Number(t[1]))}let a={};switch(e){case u.PEM:a=r.data;break;case u.JWK:for(const t of r.data.keys)a[t.kid]=t;break;default:throw new Error(`Unsupported certificate format ${e}`)}const l=new Date;return this.certificateExpiry=-1===o?null:new Date(l.getTime()+o),this.certificateCache=a,this.certificateCacheFormat=e,{certs:a,format:e,res:r}}getIapPublicKeys(t){if(!t)return this.getIapPublicKeysAsync();this.getIapPublicKeysAsync().then((e=>t(null,e.pubkeys,e.res)),t)}async getIapPublicKeysAsync(){let t;const e=c.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_;try{t=await this.transporter.request({url:e})}catch(r){throw r.message=`Failed to retrieve verification certificates: ${r.message}`,r}return{pubkeys:t.data,res:t}}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(t,e,r,n,i){const a=s.createCrypto();i||(i=c.MAX_TOKEN_LIFETIME_SECS_);const u=t.split(".");if(3!==u.length)throw new Error("Wrong number of segments in token: "+t);const h=u[0]+"."+u[1];let f,d,p=u[2];try{f=JSON.parse(a.decodeBase64StringUtf8(u[0]))}catch(w){throw w.message=`Can't parse token envelope: ${u[0]}': ${w.message}`,w}if(!f)throw new Error("Can't parse token envelope: "+u[0]);try{d=JSON.parse(a.decodeBase64StringUtf8(u[1]))}catch(w){throw w.message=`Can't parse token payload '${u[0]}`,w}if(!d)throw new Error("Can't parse token payload: "+u[1]);if(!Object.prototype.hasOwnProperty.call(e,f.kid))throw new Error("No pem found for envelope: "+JSON.stringify(f));const m=e[f.kid];"ES256"===f.alg&&(p=o.joseToDer(p,"ES256").toString("base64"));if(!await a.verify(m,h,p))throw new Error("Invalid token signature: "+t);if(!d.iat)throw new Error("No issue time in token: "+JSON.stringify(d));if(!d.exp)throw new Error("No expiration time in token: "+JSON.stringify(d));const g=Number(d.iat);if(isNaN(g))throw new Error("iat field using invalid format");const y=Number(d.exp);if(isNaN(y))throw new Error("exp field using invalid format");const _=(new Date).getTime()/1e3;if(y>=_+i)throw new Error("Expiration time too far in future: "+JSON.stringify(d));const v=g-c.CLOCK_SKEW_SECS_,b=y+c.CLOCK_SKEW_SECS_;if(_<v)throw new Error("Token used too early, "+_+" < "+v+": "+JSON.stringify(d));if(_>b)throw new Error("Token used too late, "+_+" > "+b+": "+JSON.stringify(d));if(n&&n.indexOf(d.iss)<0)throw new Error("Invalid issuer, expected one of ["+n+"], but got "+d.iss);if("undefined"!==typeof r&&null!==r){const t=d.aud;let e=!1;if(e=r.constructor===Array?r.indexOf(t)>-1:t===r,!e)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new l.LoginTicket(f,d)}isTokenExpiring(){const t=this.credentials.expiry_date;return!!t&&t<=(new Date).getTime()+this.eagerRefreshThresholdMillis}}e.OAuth2Client=c,c.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo",c.GOOGLE_OAUTH2_AUTH_BASE_URL_="https://accounts.google.com/o/oauth2/v2/auth",c.GOOGLE_OAUTH2_TOKEN_URL_="https://oauth2.googleapis.com/token",c.GOOGLE_OAUTH2_REVOKE_URL_="https://oauth2.googleapis.com/revoke",c.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_="https://www.googleapis.com/oauth2/v1/certs",c.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_="https://www.googleapis.com/oauth2/v3/certs",c.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_="https://www.gstatic.com/iap/verify/public_key",c.CLOCK_SKEW_SECS_=300,c.MAX_TOKEN_LIFETIME_SECS_=86400,c.ISSUERS_=["accounts.google.com","https://accounts.google.com"]},function(t,e,r){var n=r(2);r(17),r(4),(t.exports=n.hmac=n.hmac||{}).create=function(){var t=null,e=null,r=null,i=null,o={start:function(o,s){if(null!==o)if("string"===typeof o){if(!((o=o.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+o+'"');e=n.md.algorithms[o].create()}else e=o;if(null===s)s=t;else{if("string"===typeof s)s=n.util.createBuffer(s);else if(n.util.isArray(s)){var a=s;s=n.util.createBuffer();for(var l=0;l<a.length;++l)s.putByte(a[l])}var u=s.length();u>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),u=s.length();for(l=0;l<u;++l){a=s.at(l);r.putByte(54^a),i.putByte(92^a)}if(u<e.blockLength)for(a=e.blockLength-u,l=0;l<a;++l)r.putByte(54),i.putByte(92);t=s,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(i),e.update(t),e.digest()}};return o.digest=o.getMac,o}},function(t,e,r){var n=r(2);r(17),r(4);var i=t.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=i,i.create=function(){s||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),64),s=!0);var t=null,e=n.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,o=0;o<r;++o)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=n.util.encodeUtf8(o));var l=o.length;i.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=l[1],l[1]=l[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,l[0]=l[1]/4294967296>>>0;return e.putBytes(o),a(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var s=n.util.createBuffer();s.putBytes(e.bytes());var l,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-u));for(var c=8*i.fullMessageLength[0],h=0;h<i.fullMessageLength.length-1;++h)c+=(l=8*i.fullMessageLength[h+1])/4294967296>>>0,s.putInt32(c>>>0),c=l>>>0;s.putInt32(c);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};a(f,r,s);var d=n.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d},i};var o=null,s=!1;function a(t,e,r){for(var n,i,o,s,a,l,u,c=r.length();c>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,l=t.h4,u=0;u<16;++u)n=r.getInt32(),e[u]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+l+1518500249+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<20;++u)n=(n=e[u-3]^e[u-8]^e[u-14]^e[u-16])<<1|n>>>31,e[u]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+l+1518500249+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<32;++u)n=(n=e[u-3]^e[u-8]^e[u-14]^e[u-16])<<1|n>>>31,e[u]=n,n=(i<<5|i>>>27)+(o^s^a)+l+1859775393+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<40;++u)n=(n=e[u-6]^e[u-16]^e[u-28]^e[u-32])<<2|n>>>30,e[u]=n,n=(i<<5|i>>>27)+(o^s^a)+l+1859775393+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<60;++u)n=(n=e[u-6]^e[u-16]^e[u-28]^e[u-32])<<2|n>>>30,e[u]=n,n=(i<<5|i>>>27)+(o&s|a&(o^s))+l+2400959708+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<80;++u)n=(n=e[u-6]^e[u-16]^e[u-28]^e[u-32])<<2|n>>>30,e[u]=n,n=(i<<5|i>>>27)+(o^s^a)+l+3395469782+n,l=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+l|0,c-=64}}},function(t,e,r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var r,a,l=s(t),u=1;u<arguments.length;u++){for(var c in r=Object(arguments[u]))i.call(r,c)&&(l[c]=r[c]);if(n){a=n(r);for(var h=0;h<a.length;h++)o.call(r,a[h])&&(l[a[h]]=r[a[h]])}}return l}},function(t,e,r){(function(t,n){var i;(function(){var o,s="Expected a function",a="__lodash_hash_undefined__",l="__lodash_placeholder__",u=16,c=32,h=64,f=128,d=256,p=1/0,m=9007199254740991,g=NaN,y=4294967295,_=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",c],["partialRight",h],["rearg",d]],v="[object Arguments]",b="[object Array]",w="[object Boolean]",x="[object Date]",E="[object Error]",S="[object Function]",M="[object GeneratorFunction]",T="[object Map]",A="[object Number]",C="[object Object]",I="[object Promise]",k="[object RegExp]",R="[object Set]",B="[object String]",P="[object Symbol]",D="[object WeakMap]",L="[object ArrayBuffer]",O="[object DataView]",N="[object Float32Array]",z="[object Float64Array]",U="[object Int8Array]",j="[object Int16Array]",F="[object Int32Array]",V="[object Uint8Array]",G="[object Uint8ClampedArray]",q="[object Uint16Array]",K="[object Uint32Array]",W=/\b__p \+= '';/g,Z=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,Y=RegExp(Q.source),J=RegExp(X.source),$=/<%-([\s\S]+?)%>/g,tt=/<%([\s\S]+?)%>/g,et=/<%=([\s\S]+?)%>/g,rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/[\\^$.*+?()[\]{}|]/g,st=RegExp(ot.source),at=/^\s+/,lt=/\s/,ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ct=/\{\n\/\* \[wrapped with (.+)\] \*/,ht=/,? & /,ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/[()=,{}\[\]\/\s]/,pt=/\\(\\)?/g,mt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,yt=/^[-+]0x[0-9a-f]+$/i,_t=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,bt=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Et=/($^)/,St=/['\n\r\u2028\u2029\\]/g,Mt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Tt="\\u2700-\\u27bf",At="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",It="\\ufe0e\\ufe0f",kt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rt="['\u2019]",Bt="[\\ud800-\\udfff]",Pt="["+kt+"]",Dt="["+Mt+"]",Lt="\\d+",Ot="[\\u2700-\\u27bf]",Nt="["+At+"]",zt="[^\\ud800-\\udfff"+kt+Lt+Tt+At+Ct+"]",Ut="\\ud83c[\\udffb-\\udfff]",jt="[^\\ud800-\\udfff]",Ft="(?:\\ud83c[\\udde6-\\uddff]){2}",Vt="[\\ud800-\\udbff][\\udc00-\\udfff]",Gt="["+Ct+"]",qt="(?:"+Nt+"|"+zt+")",Kt="(?:"+Gt+"|"+zt+")",Wt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Zt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ht="(?:"+Dt+"|"+Ut+")"+"?",Qt="[\\ufe0e\\ufe0f]?",Xt=Qt+Ht+("(?:\\u200d(?:"+[jt,Ft,Vt].join("|")+")"+Qt+Ht+")*"),Yt="(?:"+[Ot,Ft,Vt].join("|")+")"+Xt,Jt="(?:"+[jt+Dt+"?",Dt,Ft,Vt,Bt].join("|")+")",$t=RegExp(Rt,"g"),te=RegExp(Dt,"g"),ee=RegExp(Ut+"(?="+Ut+")|"+Jt+Xt,"g"),re=RegExp([Gt+"?"+Nt+"+"+Wt+"(?="+[Pt,Gt,"$"].join("|")+")",Kt+"+"+Zt+"(?="+[Pt,Gt+qt,"$"].join("|")+")",Gt+"?"+qt+"+"+Wt,Gt+"+"+Zt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lt,Yt].join("|"),"g"),ne=RegExp("[\\u200d\\ud800-\\udfff"+Mt+It+"]"),ie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],se=-1,ae={};ae[N]=ae[z]=ae[U]=ae[j]=ae[F]=ae[V]=ae[G]=ae[q]=ae[K]=!0,ae[v]=ae[b]=ae[L]=ae[w]=ae[O]=ae[x]=ae[E]=ae[S]=ae[T]=ae[A]=ae[C]=ae[k]=ae[R]=ae[B]=ae[D]=!1;var le={};le[v]=le[b]=le[L]=le[O]=le[w]=le[x]=le[N]=le[z]=le[U]=le[j]=le[F]=le[T]=le[A]=le[C]=le[k]=le[R]=le[B]=le[P]=le[V]=le[G]=le[q]=le[K]=!0,le[E]=le[S]=le[D]=!1;var ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ce=parseFloat,he=parseInt,fe="object"==typeof t&&t&&t.Object===Object&&t,de="object"==typeof self&&self&&self.Object===Object&&self,pe=fe||de||Function("return this")(),me=e&&!e.nodeType&&e,ge=me&&"object"==typeof n&&n&&!n.nodeType&&n,ye=ge&&ge.exports===me,_e=ye&&fe.process,ve=function(){try{var t=ge&&ge.require&&ge.require("util").types;return t||_e&&_e.binding&&_e.binding("util")}catch(e){}}(),be=ve&&ve.isArrayBuffer,we=ve&&ve.isDate,xe=ve&&ve.isMap,Ee=ve&&ve.isRegExp,Se=ve&&ve.isSet,Me=ve&&ve.isTypedArray;function Te(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Ae(t,e,r,n){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(n,s,r(s),t)}return n}function Ce(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function Ie(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function ke(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function Re(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}function Be(t,e){return!!(null==t?0:t.length)&&Ve(t,e,0)>-1}function Pe(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function De(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function Le(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function Oe(t,e,r,n){var i=-1,o=null==t?0:t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function Ne(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function ze(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Ue=We("length");function je(t,e,r){var n;return r(t,(function(t,r,i){if(e(t,r,i))return n=r,!1})),n}function Fe(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ve(t,e,r){return e===e?function(t,e,r){var n=r-1,i=t.length;for(;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):Fe(t,qe,r)}function Ge(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}function qe(t){return t!==t}function Ke(t,e){var r=null==t?0:t.length;return r?Qe(t,e)/r:g}function We(t){return function(e){return null==e?o:e[t]}}function Ze(t){return function(e){return null==t?o:t[e]}}function He(t,e,r,n,i){return i(t,(function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)})),r}function Qe(t,e){for(var r,n=-1,i=t.length;++n<i;){var s=e(t[n]);s!==o&&(r=r===o?s:r+s)}return r}function Xe(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function Ye(t){return t?t.slice(0,mr(t)+1).replace(at,""):t}function Je(t){return function(e){return t(e)}}function $e(t,e){return De(e,(function(e){return t[e]}))}function tr(t,e){return t.has(e)}function er(t,e){for(var r=-1,n=t.length;++r<n&&Ve(e,t[r],0)>-1;);return r}function rr(t,e){for(var r=t.length;r--&&Ve(e,t[r],0)>-1;);return r}function nr(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}var ir=Ze({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),or=Ze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sr(t){return"\\"+ue[t]}function ar(t){return ne.test(t)}function lr(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function ur(t,e){return function(r){return t(e(r))}}function cr(t,e){for(var r=-1,n=t.length,i=0,o=[];++r<n;){var s=t[r];s!==e&&s!==l||(t[r]=l,o[i++]=r)}return o}function hr(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function fr(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}function dr(t){return ar(t)?function(t){var e=ee.lastIndex=0;for(;ee.test(t);)++e;return e}(t):Ue(t)}function pr(t){return ar(t)?function(t){return t.match(ee)||[]}(t):function(t){return t.split("")}(t)}function mr(t){for(var e=t.length;e--&&lt.test(t.charAt(e)););return e}var gr=Ze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yr=function t(e){var r=(e=null==e?pe:yr.defaults(pe.Object(),e,yr.pick(pe,oe))).Array,n=e.Date,i=e.Error,lt=e.Function,Mt=e.Math,Tt=e.Object,At=e.RegExp,Ct=e.String,It=e.TypeError,kt=r.prototype,Rt=lt.prototype,Bt=Tt.prototype,Pt=e["__core-js_shared__"],Dt=Rt.toString,Lt=Bt.hasOwnProperty,Ot=0,Nt=function(){var t=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),zt=Bt.toString,Ut=Dt.call(Tt),jt=pe._,Ft=At("^"+Dt.call(Lt).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=ye?e.Buffer:o,Gt=e.Symbol,qt=e.Uint8Array,Kt=Vt?Vt.allocUnsafe:o,Wt=ur(Tt.getPrototypeOf,Tt),Zt=Tt.create,Ht=Bt.propertyIsEnumerable,Qt=kt.splice,Xt=Gt?Gt.isConcatSpreadable:o,Yt=Gt?Gt.iterator:o,Jt=Gt?Gt.toStringTag:o,ee=function(){try{var t=fo(Tt,"defineProperty");return t({},"",{}),t}catch(e){}}(),ne=e.clearTimeout!==pe.clearTimeout&&e.clearTimeout,ue=n&&n.now!==pe.Date.now&&n.now,fe=e.setTimeout!==pe.setTimeout&&e.setTimeout,de=Mt.ceil,me=Mt.floor,ge=Tt.getOwnPropertySymbols,_e=Vt?Vt.isBuffer:o,ve=e.isFinite,Ue=kt.join,Ze=ur(Tt.keys,Tt),_r=Mt.max,vr=Mt.min,br=n.now,wr=e.parseInt,xr=Mt.random,Er=kt.reverse,Sr=fo(e,"DataView"),Mr=fo(e,"Map"),Tr=fo(e,"Promise"),Ar=fo(e,"Set"),Cr=fo(e,"WeakMap"),Ir=fo(Tt,"create"),kr=Cr&&new Cr,Rr={},Br=jo(Sr),Pr=jo(Mr),Dr=jo(Tr),Lr=jo(Ar),Or=jo(Cr),Nr=Gt?Gt.prototype:o,zr=Nr?Nr.valueOf:o,Ur=Nr?Nr.toString:o;function jr(t){if(na(t)&&!Ws(t)&&!(t instanceof qr)){if(t instanceof Gr)return t;if(Lt.call(t,"__wrapped__"))return Fo(t)}return new Gr(t)}var Fr=function(){function t(){}return function(e){if(!ra(e))return{};if(Zt)return Zt(e);t.prototype=e;var r=new t;return t.prototype=o,r}}();function Vr(){}function Gr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function qr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function Kr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Wr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Zr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Hr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Zr;++e<r;)this.add(t[e])}function Qr(t){var e=this.__data__=new Wr(t);this.size=e.size}function Xr(t,e){var r=Ws(t),n=!r&&Ks(t),i=!r&&!n&&Xs(t),o=!r&&!n&&!i&&ha(t),s=r||n||i||o,a=s?Xe(t.length,Ct):[],l=a.length;for(var u in t)!e&&!Lt.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||bo(u,l))||a.push(u);return a}function Yr(t){var e=t.length;return e?t[Qn(0,e-1)]:o}function Jr(t,e){return No(ki(t),ln(e,0,t.length))}function $r(t){return No(ki(t))}function tn(t,e,r){(r!==o&&!Vs(t[e],r)||r===o&&!(e in t))&&sn(t,e,r)}function en(t,e,r){var n=t[e];Lt.call(t,e)&&Vs(n,r)&&(r!==o||e in t)||sn(t,e,r)}function rn(t,e){for(var r=t.length;r--;)if(Vs(t[r][0],e))return r;return-1}function nn(t,e,r,n){return dn(t,(function(t,i,o){e(n,t,r(t),o)})),n}function on(t,e){return t&&Ri(e,Pa(e),t)}function sn(t,e,r){"__proto__"==e&&ee?ee(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function an(t,e){for(var n=-1,i=e.length,s=r(i),a=null==t;++n<i;)s[n]=a?o:Ca(t,e[n]);return s}function ln(t,e,r){return t===t&&(r!==o&&(t=t<=r?t:r),e!==o&&(t=t>=e?t:e)),t}function un(t,e,r,n,i,s){var a,l=1&e,u=2&e,c=4&e;if(r&&(a=i?r(t,n,i,s):r(t)),a!==o)return a;if(!ra(t))return t;var h=Ws(t);if(h){if(a=function(t){var e=t.length,r=new t.constructor(e);e&&"string"==typeof t[0]&&Lt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!l)return ki(t,a)}else{var f=go(t),d=f==S||f==M;if(Xs(t))return Si(t,l);if(f==C||f==v||d&&!i){if(a=u||d?{}:_o(t),!l)return u?function(t,e){return Ri(t,mo(t),e)}(t,function(t,e){return t&&Ri(e,Da(e),t)}(a,t)):function(t,e){return Ri(t,po(t),e)}(t,on(a,t))}else{if(!le[f])return i?t:{};a=function(t,e,r){var n=t.constructor;switch(e){case L:return Mi(t);case w:case x:return new n(+t);case O:return function(t,e){var r=e?Mi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case N:case z:case U:case j:case F:case V:case G:case q:case K:return Ti(t,r);case T:return new n;case A:case B:return new n(t);case k:return function(t){var e=new t.constructor(t.source,gt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case R:return new n;case P:return i=t,zr?Tt(zr.call(i)):{}}var i}(t,f,l)}}s||(s=new Qr);var p=s.get(t);if(p)return p;s.set(t,a),la(t)?t.forEach((function(n){a.add(un(n,e,r,n,t,s))})):ia(t)&&t.forEach((function(n,i){a.set(i,un(n,e,r,i,t,s))}));var m=h?o:(c?u?oo:io:u?Da:Pa)(t);return Ce(m||t,(function(n,i){m&&(n=t[i=n]),en(a,i,un(n,e,r,i,t,s))})),a}function cn(t,e,r){var n=r.length;if(null==t)return!n;for(t=Tt(t);n--;){var i=r[n],s=e[i],a=t[i];if(a===o&&!(i in t)||!s(a))return!1}return!0}function hn(t,e,r){if("function"!=typeof t)throw new It(s);return Po((function(){t.apply(o,r)}),e)}function fn(t,e,r,n){var i=-1,o=Be,s=!0,a=t.length,l=[],u=e.length;if(!a)return l;r&&(e=De(e,Je(r))),n?(o=Pe,s=!1):e.length>=200&&(o=tr,s=!1,e=new Hr(e));t:for(;++i<a;){var c=t[i],h=null==r?c:r(c);if(c=n||0!==c?c:0,s&&h===h){for(var f=u;f--;)if(e[f]===h)continue t;l.push(c)}else o(e,h,n)||l.push(c)}return l}jr.templateSettings={escape:$,evaluate:tt,interpolate:et,variable:"",imports:{_:jr}},jr.prototype=Vr.prototype,jr.prototype.constructor=jr,Gr.prototype=Fr(Vr.prototype),Gr.prototype.constructor=Gr,qr.prototype=Fr(Vr.prototype),qr.prototype.constructor=qr,Kr.prototype.clear=function(){this.__data__=Ir?Ir(null):{},this.size=0},Kr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Kr.prototype.get=function(t){var e=this.__data__;if(Ir){var r=e[t];return r===a?o:r}return Lt.call(e,t)?e[t]:o},Kr.prototype.has=function(t){var e=this.__data__;return Ir?e[t]!==o:Lt.call(e,t)},Kr.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ir&&e===o?a:e,this},Wr.prototype.clear=function(){this.__data__=[],this.size=0},Wr.prototype.delete=function(t){var e=this.__data__,r=rn(e,t);return!(r<0)&&(r==e.length-1?e.pop():Qt.call(e,r,1),--this.size,!0)},Wr.prototype.get=function(t){var e=this.__data__,r=rn(e,t);return r<0?o:e[r][1]},Wr.prototype.has=function(t){return rn(this.__data__,t)>-1},Wr.prototype.set=function(t,e){var r=this.__data__,n=rn(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},Zr.prototype.clear=function(){this.size=0,this.__data__={hash:new Kr,map:new(Mr||Wr),string:new Kr}},Zr.prototype.delete=function(t){var e=co(this,t).delete(t);return this.size-=e?1:0,e},Zr.prototype.get=function(t){return co(this,t).get(t)},Zr.prototype.has=function(t){return co(this,t).has(t)},Zr.prototype.set=function(t,e){var r=co(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Hr.prototype.add=Hr.prototype.push=function(t){return this.__data__.set(t,a),this},Hr.prototype.has=function(t){return this.__data__.has(t)},Qr.prototype.clear=function(){this.__data__=new Wr,this.size=0},Qr.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Qr.prototype.get=function(t){return this.__data__.get(t)},Qr.prototype.has=function(t){return this.__data__.has(t)},Qr.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Wr){var n=r.__data__;if(!Mr||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Zr(n)}return r.set(t,e),this.size=r.size,this};var dn=Di(wn),pn=Di(xn,!0);function mn(t,e){var r=!0;return dn(t,(function(t,n,i){return r=!!e(t,n,i)})),r}function gn(t,e,r){for(var n=-1,i=t.length;++n<i;){var s=t[n],a=e(s);if(null!=a&&(l===o?a===a&&!ca(a):r(a,l)))var l=a,u=s}return u}function yn(t,e){var r=[];return dn(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function _n(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=vo),i||(i=[]);++o<s;){var a=t[o];e>0&&r(a)?e>1?_n(a,e-1,r,n,i):Le(i,a):n||(i[i.length]=a)}return i}var vn=Li(),bn=Li(!0);function wn(t,e){return t&&vn(t,e,Pa)}function xn(t,e){return t&&bn(t,e,Pa)}function En(t,e){return Re(e,(function(e){return $s(t[e])}))}function Sn(t,e){for(var r=0,n=(e=bi(e,t)).length;null!=t&&r<n;)t=t[Uo(e[r++])];return r&&r==n?t:o}function Mn(t,e,r){var n=e(t);return Ws(t)?n:Le(n,r(t))}function Tn(t){return null==t?t===o?"[object Undefined]":"[object Null]":Jt&&Jt in Tt(t)?function(t){var e=Lt.call(t,Jt),r=t[Jt];try{t[Jt]=o;var n=!0}catch(s){}var i=zt.call(t);n&&(e?t[Jt]=r:delete t[Jt]);return i}(t):function(t){return zt.call(t)}(t)}function An(t,e){return t>e}function Cn(t,e){return null!=t&&Lt.call(t,e)}function In(t,e){return null!=t&&e in Tt(t)}function kn(t,e,n){for(var i=n?Pe:Be,s=t[0].length,a=t.length,l=a,u=r(a),c=1/0,h=[];l--;){var f=t[l];l&&e&&(f=De(f,Je(e))),c=vr(f.length,c),u[l]=!n&&(e||s>=120&&f.length>=120)?new Hr(l&&f):o}f=t[0];var d=-1,p=u[0];t:for(;++d<s&&h.length<c;){var m=f[d],g=e?e(m):m;if(m=n||0!==m?m:0,!(p?tr(p,g):i(h,g,n))){for(l=a;--l;){var y=u[l];if(!(y?tr(y,g):i(t[l],g,n)))continue t}p&&p.push(g),h.push(m)}}return h}function Rn(t,e,r){var n=null==(t=Io(t,e=bi(e,t)))?t:t[Uo(Jo(e))];return null==n?o:Te(n,t,r)}function Bn(t){return na(t)&&Tn(t)==v}function Pn(t,e,r,n,i){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!==t&&e!==e:function(t,e,r,n,i,s){var a=Ws(t),l=Ws(e),u=a?b:go(t),c=l?b:go(e),h=(u=u==v?C:u)==C,f=(c=c==v?C:c)==C,d=u==c;if(d&&Xs(t)){if(!Xs(e))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new Qr),a||ha(t)?ro(t,e,r,n,i,s):function(t,e,r,n,i,o,s){switch(r){case O:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case L:return!(t.byteLength!=e.byteLength||!o(new qt(t),new qt(e)));case w:case x:case A:return Vs(+t,+e);case E:return t.name==e.name&&t.message==e.message;case k:case B:return t==e+"";case T:var a=lr;case R:var l=1&n;if(a||(a=hr),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;n|=2,s.set(t,e);var c=ro(a(t),a(e),n,i,o,s);return s.delete(t),c;case P:if(zr)return zr.call(t)==zr.call(e)}return!1}(t,e,u,r,n,i,s);if(!(1&r)){var p=h&&Lt.call(t,"__wrapped__"),m=f&&Lt.call(e,"__wrapped__");if(p||m){var g=p?t.value():t,y=m?e.value():e;return s||(s=new Qr),i(g,y,r,n,s)}}if(!d)return!1;return s||(s=new Qr),function(t,e,r,n,i,s){var a=1&r,l=io(t),u=l.length,c=io(e).length;if(u!=c&&!a)return!1;var h=u;for(;h--;){var f=l[h];if(!(a?f in e:Lt.call(e,f)))return!1}var d=s.get(t),p=s.get(e);if(d&&p)return d==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);var g=a;for(;++h<u;){var y=t[f=l[h]],_=e[f];if(n)var v=a?n(_,y,f,e,t,s):n(y,_,f,t,e,s);if(!(v===o?y===_||i(y,_,r,n,s):v)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(t),s.delete(e),m}(t,e,r,n,i,s)}(t,e,r,n,Pn,i))}function Dn(t,e,r,n){var i=r.length,s=i,a=!n;if(null==t)return!s;for(t=Tt(t);i--;){var l=r[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<s;){var u=(l=r[i])[0],c=t[u],h=l[1];if(a&&l[2]){if(c===o&&!(u in t))return!1}else{var f=new Qr;if(n)var d=n(c,h,u,t,e,f);if(!(d===o?Pn(h,c,3,n,f):d))return!1}}return!0}function Ln(t){return!(!ra(t)||(e=t,Nt&&Nt in e))&&($s(t)?Ft:vt).test(jo(t));var e}function On(t){return"function"==typeof t?t:null==t?ol:"object"==typeof t?Ws(t)?Vn(t[0],t[1]):Fn(t):pl(t)}function Nn(t){if(!Mo(t))return Ze(t);var e=[];for(var r in Tt(t))Lt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function zn(t){if(!ra(t))return function(t){var e=[];if(null!=t)for(var r in Tt(t))e.push(r);return e}(t);var e=Mo(t),r=[];for(var n in t)("constructor"!=n||!e&&Lt.call(t,n))&&r.push(n);return r}function Un(t,e){return t<e}function jn(t,e){var n=-1,i=Hs(t)?r(t.length):[];return dn(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Fn(t){var e=ho(t);return 1==e.length&&e[0][2]?Ao(e[0][0],e[0][1]):function(r){return r===t||Dn(r,t,e)}}function Vn(t,e){return xo(t)&&To(e)?Ao(Uo(t),e):function(r){var n=Ca(r,t);return n===o&&n===e?Ia(r,t):Pn(e,n,3)}}function Gn(t,e,r,n,i){t!==e&&vn(e,(function(s,a){if(i||(i=new Qr),ra(s))!function(t,e,r,n,i,s,a){var l=Ro(t,r),u=Ro(e,r),c=a.get(u);if(c)return void tn(t,r,c);var h=s?s(l,u,r+"",t,e,a):o,f=h===o;if(f){var d=Ws(u),p=!d&&Xs(u),m=!d&&!p&&ha(u);h=u,d||p||m?Ws(l)?h=l:Qs(l)?h=ki(l):p?(f=!1,h=Si(u,!0)):m?(f=!1,h=Ti(u,!0)):h=[]:sa(u)||Ks(u)?(h=l,Ks(l)?h=va(l):ra(l)&&!$s(l)||(h=_o(u))):f=!1}f&&(a.set(u,h),i(h,u,n,s,a),a.delete(u));tn(t,r,h)}(t,e,a,r,Gn,n,i);else{var l=n?n(Ro(t,a),s,a+"",t,e,i):o;l===o&&(l=s),tn(t,a,l)}}),Da)}function qn(t,e){var r=t.length;if(r)return bo(e+=e<0?r:0,r)?t[e]:o}function Kn(t,e,r){e=e.length?De(e,(function(t){return Ws(t)?function(e){return Sn(e,1===t.length?t[0]:t)}:t})):[ol];var n=-1;e=De(e,Je(uo()));var i=jn(t,(function(t,r,i){var o=De(e,(function(e){return e(t)}));return{criteria:o,index:++n,value:t}}));return function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(i,(function(t,e){return function(t,e,r){var n=-1,i=t.criteria,o=e.criteria,s=i.length,a=r.length;for(;++n<s;){var l=Ai(i[n],o[n]);if(l)return n>=a?l:l*("desc"==r[n]?-1:1)}return t.index-e.index}(t,e,r)}))}function Wn(t,e,r){for(var n=-1,i=e.length,o={};++n<i;){var s=e[n],a=Sn(t,s);r(a,s)&&ti(o,bi(s,t),a)}return o}function Zn(t,e,r,n){var i=n?Ge:Ve,o=-1,s=e.length,a=t;for(t===e&&(e=ki(e)),r&&(a=De(t,Je(r)));++o<s;)for(var l=0,u=e[o],c=r?r(u):u;(l=i(a,c,l,n))>-1;)a!==t&&Qt.call(a,l,1),Qt.call(t,l,1);return t}function Hn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==o){var o=i;bo(i)?Qt.call(t,i,1):fi(t,i)}}return t}function Qn(t,e){return t+me(xr()*(e-t+1))}function Xn(t,e){var r="";if(!t||e<1||e>m)return r;do{e%2&&(r+=t),(e=me(e/2))&&(t+=t)}while(e);return r}function Yn(t,e){return Do(Co(t,e,ol),t+"")}function Jn(t){return Yr(Va(t))}function $n(t,e){var r=Va(t);return No(r,ln(e,0,r.length))}function ti(t,e,r,n){if(!ra(t))return t;for(var i=-1,s=(e=bi(e,t)).length,a=s-1,l=t;null!=l&&++i<s;){var u=Uo(e[i]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=a){var h=l[u];(c=n?n(h,u,l):o)===o&&(c=ra(h)?h:bo(e[i+1])?[]:{})}en(l,u,c),l=l[u]}return t}var ei=kr?function(t,e){return kr.set(t,e),t}:ol,ri=ee?function(t,e){return ee(t,"toString",{configurable:!0,enumerable:!1,value:rl(e),writable:!0})}:ol;function ni(t){return No(Va(t))}function ii(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function oi(t,e){var r;return dn(t,(function(t,n,i){return!(r=e(t,n,i))})),!!r}function si(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e===e&&i<=2147483647){for(;n<i;){var o=n+i>>>1,s=t[o];null!==s&&!ca(s)&&(r?s<=e:s<e)?n=o+1:i=o}return i}return ai(t,e,ol,r)}function ai(t,e,r,n){var i=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=r(e))!==e,l=null===e,u=ca(e),c=e===o;i<s;){var h=me((i+s)/2),f=r(t[h]),d=f!==o,p=null===f,m=f===f,g=ca(f);if(a)var y=n||m;else y=c?m&&(n||d):l?m&&d&&(n||!p):u?m&&d&&!p&&(n||!g):!p&&!g&&(n?f<=e:f<e);y?i=h+1:s=h}return vr(s,4294967294)}function li(t,e){for(var r=-1,n=t.length,i=0,o=[];++r<n;){var s=t[r],a=e?e(s):s;if(!r||!Vs(a,l)){var l=a;o[i++]=0===s?0:s}}return o}function ui(t){return"number"==typeof t?t:ca(t)?g:+t}function ci(t){if("string"==typeof t)return t;if(Ws(t))return De(t,ci)+"";if(ca(t))return Ur?Ur.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function hi(t,e,r){var n=-1,i=Be,o=t.length,s=!0,a=[],l=a;if(r)s=!1,i=Pe;else if(o>=200){var u=e?null:Xi(t);if(u)return hr(u);s=!1,i=tr,l=new Hr}else l=e?[]:a;t:for(;++n<o;){var c=t[n],h=e?e(c):c;if(c=r||0!==c?c:0,s&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue t;e&&l.push(h),a.push(c)}else i(l,h,r)||(l!==a&&l.push(h),a.push(c))}return a}function fi(t,e){return null==(t=Io(t,e=bi(e,t)))||delete t[Uo(Jo(e))]}function di(t,e,r,n){return ti(t,e,r(Sn(t,e)),n)}function pi(t,e,r,n){for(var i=t.length,o=n?i:-1;(n?o--:++o<i)&&e(t[o],o,t););return r?ii(t,n?0:o,n?o+1:i):ii(t,n?o+1:0,n?i:o)}function mi(t,e){var r=t;return r instanceof qr&&(r=r.value()),Oe(e,(function(t,e){return e.func.apply(e.thisArg,Le([t],e.args))}),r)}function gi(t,e,n){var i=t.length;if(i<2)return i?hi(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],l=-1;++l<i;)l!=o&&(s[o]=fn(s[o]||a,t[l],e,n));return hi(_n(s,1),e,n)}function yi(t,e,r){for(var n=-1,i=t.length,s=e.length,a={};++n<i;){var l=n<s?e[n]:o;r(a,t[n],l)}return a}function _i(t){return Qs(t)?t:[]}function vi(t){return"function"==typeof t?t:ol}function bi(t,e){return Ws(t)?t:xo(t,e)?[t]:zo(ba(t))}var wi=Yn;function xi(t,e,r){var n=t.length;return r=r===o?n:r,!e&&r>=n?t:ii(t,e,r)}var Ei=ne||function(t){return pe.clearTimeout(t)};function Si(t,e){if(e)return t.slice();var r=t.length,n=Kt?Kt(r):new t.constructor(r);return t.copy(n),n}function Mi(t){var e=new t.constructor(t.byteLength);return new qt(e).set(new qt(t)),e}function Ti(t,e){var r=e?Mi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Ai(t,e){if(t!==e){var r=t!==o,n=null===t,i=t===t,s=ca(t),a=e!==o,l=null===e,u=e===e,c=ca(e);if(!l&&!c&&!s&&t>e||s&&a&&u&&!l&&!c||n&&a&&u||!r&&u||!i)return 1;if(!n&&!s&&!c&&t<e||c&&r&&i&&!n&&!s||l&&r&&i||!a&&i||!u)return-1}return 0}function Ci(t,e,n,i){for(var o=-1,s=t.length,a=n.length,l=-1,u=e.length,c=_r(s-a,0),h=r(u+c),f=!i;++l<u;)h[l]=e[l];for(;++o<a;)(f||o<s)&&(h[n[o]]=t[o]);for(;c--;)h[l++]=t[o++];return h}function Ii(t,e,n,i){for(var o=-1,s=t.length,a=-1,l=n.length,u=-1,c=e.length,h=_r(s-l,0),f=r(h+c),d=!i;++o<h;)f[o]=t[o];for(var p=o;++u<c;)f[p+u]=e[u];for(;++a<l;)(d||o<s)&&(f[p+n[a]]=t[o++]);return f}function ki(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ri(t,e,r,n){var i=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var l=e[s],u=n?n(r[l],t[l],l,r,t):o;u===o&&(u=t[l]),i?sn(r,l,u):en(r,l,u)}return r}function Bi(t,e){return function(r,n){var i=Ws(r)?Ae:nn,o=e?e():{};return i(r,t,uo(n,2),o)}}function Pi(t){return Yn((function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:o,a=i>2?r[2]:o;for(s=t.length>3&&"function"==typeof s?(i--,s):o,a&&wo(r[0],r[1],a)&&(s=i<3?o:s,i=1),e=Tt(e);++n<i;){var l=r[n];l&&t(e,l,n,s)}return e}))}function Di(t,e){return function(r,n){if(null==r)return r;if(!Hs(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Tt(r);(e?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function Li(t){return function(e,r,n){for(var i=-1,o=Tt(e),s=n(e),a=s.length;a--;){var l=s[t?a:++i];if(!1===r(o[l],l,o))break}return e}}function Oi(t){return function(e){var r=ar(e=ba(e))?pr(e):o,n=r?r[0]:e.charAt(0),i=r?xi(r,1).join(""):e.slice(1);return n[t]()+i}}function Ni(t){return function(e){return Oe($a(Ka(e).replace($t,"")),t,"")}}function zi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Fr(t.prototype),n=t.apply(r,e);return ra(n)?n:r}}function Ui(t){return function(e,r,n){var i=Tt(e);if(!Hs(e)){var s=uo(r,3);e=Pa(e),r=function(t){return s(i[t],t,i)}}var a=t(e,r,n);return a>-1?i[s?e[a]:a]:o}}function ji(t){return no((function(e){var r=e.length,n=r,i=Gr.prototype.thru;for(t&&e.reverse();n--;){var a=e[n];if("function"!=typeof a)throw new It(s);if(i&&!l&&"wrapper"==ao(a))var l=new Gr([],!0)}for(n=l?n:r;++n<r;){var u=ao(a=e[n]),c="wrapper"==u?so(a):o;l=c&&Eo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[ao(c[0])].apply(l,c[3]):1==a.length&&Eo(a)?l[u]():l.thru(a)}return function(){var t=arguments,n=t[0];if(l&&1==t.length&&Ws(n))return l.plant(n).value();for(var i=0,o=r?e[i].apply(this,t):n;++i<r;)o=e[i].call(this,o);return o}}))}function Fi(t,e,n,i,s,a,l,u,c,h){var d=e&f,p=1&e,m=2&e,g=24&e,y=512&e,_=m?o:zi(t);return function o(){for(var f=arguments.length,v=r(f),b=f;b--;)v[b]=arguments[b];if(g)var w=lo(o),x=nr(v,w);if(i&&(v=Ci(v,i,s,g)),a&&(v=Ii(v,a,l,g)),f-=x,g&&f<h){var E=cr(v,w);return Hi(t,e,Fi,o.placeholder,n,v,E,u,c,h-f)}var S=p?n:this,M=m?S[t]:t;return f=v.length,u?v=ko(v,u):y&&f>1&&v.reverse(),d&&c<f&&(v.length=c),this&&this!==pe&&this instanceof o&&(M=_||zi(M)),M.apply(S,v)}}function Vi(t,e){return function(r,n){return function(t,e,r,n){return wn(t,(function(t,i,o){e(n,r(t),i,o)})),n}(r,t,e(n),{})}}function Gi(t,e){return function(r,n){var i;if(r===o&&n===o)return e;if(r!==o&&(i=r),n!==o){if(i===o)return n;"string"==typeof r||"string"==typeof n?(r=ci(r),n=ci(n)):(r=ui(r),n=ui(n)),i=t(r,n)}return i}}function qi(t){return no((function(e){return e=De(e,Je(uo())),Yn((function(r){var n=this;return t(e,(function(t){return Te(t,n,r)}))}))}))}function Ki(t,e){var r=(e=e===o?" ":ci(e)).length;if(r<2)return r?Xn(e,t):e;var n=Xn(e,de(t/dr(e)));return ar(e)?xi(pr(n),0,t).join(""):n.slice(0,t)}function Wi(t){return function(e,n,i){return i&&"number"!=typeof i&&wo(e,n,i)&&(n=i=o),e=ma(e),n===o?(n=e,e=0):n=ma(n),function(t,e,n,i){for(var o=-1,s=_r(de((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,i=i===o?e<n?1:-1:ma(i),t)}}function Zi(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=_a(e),r=_a(r)),t(e,r)}}function Hi(t,e,r,n,i,s,a,l,u,f){var d=8&e;e|=d?c:h,4&(e&=~(d?h:c))||(e&=-4);var p=[t,e,i,d?s:o,d?a:o,d?o:s,d?o:a,l,u,f],m=r.apply(o,p);return Eo(t)&&Bo(m,p),m.placeholder=n,Lo(m,t,e)}function Qi(t){var e=Mt[t];return function(t,r){if(t=_a(t),(r=null==r?0:vr(ga(r),292))&&ve(t)){var n=(ba(t)+"e").split("e");return+((n=(ba(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}var Xi=Ar&&1/hr(new Ar([,-0]))[1]==p?function(t){return new Ar(t)}:cl;function Yi(t){return function(e){var r=go(e);return r==T?lr(e):r==R?fr(e):function(t,e){return De(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ji(t,e,n,i,a,p,m,g){var y=2&e;if(!y&&"function"!=typeof t)throw new It(s);var _=i?i.length:0;if(_||(e&=-97,i=a=o),m=m===o?m:_r(ga(m),0),g=g===o?g:ga(g),_-=a?a.length:0,e&h){var v=i,b=a;i=a=o}var w=y?o:so(t),x=[t,e,n,i,a,v,b,p,m,g];if(w&&function(t,e){var r=t[1],n=e[1],i=r|n,o=i<131,s=n==f&&8==r||n==f&&r==d&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==r;if(!o&&!s)return t;1&n&&(t[2]=e[2],i|=1&r?0:4);var a=e[3];if(a){var u=t[3];t[3]=u?Ci(u,a,e[4]):a,t[4]=u?cr(t[3],l):e[4]}(a=e[5])&&(u=t[5],t[5]=u?Ii(u,a,e[6]):a,t[6]=u?cr(t[5],l):e[6]);(a=e[7])&&(t[7]=a);n&f&&(t[8]=null==t[8]?e[8]:vr(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(x,w),t=x[0],e=x[1],n=x[2],i=x[3],a=x[4],!(g=x[9]=x[9]===o?y?0:t.length:_r(x[9]-_,0))&&24&e&&(e&=-25),e&&1!=e)E=8==e||e==u?function(t,e,n){var i=zi(t);return function s(){for(var a=arguments.length,l=r(a),u=a,c=lo(s);u--;)l[u]=arguments[u];var h=a<3&&l[0]!==c&&l[a-1]!==c?[]:cr(l,c);return(a-=h.length)<n?Hi(t,e,Fi,s.placeholder,o,l,h,o,o,n-a):Te(this&&this!==pe&&this instanceof s?i:t,this,l)}}(t,e,g):e!=c&&33!=e||a.length?Fi.apply(o,x):function(t,e,n,i){var o=1&e,s=zi(t);return function e(){for(var a=-1,l=arguments.length,u=-1,c=i.length,h=r(c+l),f=this&&this!==pe&&this instanceof e?s:t;++u<c;)h[u]=i[u];for(;l--;)h[u++]=arguments[++a];return Te(f,o?n:this,h)}}(t,e,n,i);else var E=function(t,e,r){var n=1&e,i=zi(t);return function e(){return(this&&this!==pe&&this instanceof e?i:t).apply(n?r:this,arguments)}}(t,e,n);return Lo((w?ei:Bo)(E,x),t,e)}function $i(t,e,r,n){return t===o||Vs(t,Bt[r])&&!Lt.call(n,r)?e:t}function to(t,e,r,n,i,s){return ra(t)&&ra(e)&&(s.set(e,t),Gn(t,e,o,to,s),s.delete(e)),t}function eo(t){return sa(t)?o:t}function ro(t,e,r,n,i,s){var a=1&r,l=t.length,u=e.length;if(l!=u&&!(a&&u>l))return!1;var c=s.get(t),h=s.get(e);if(c&&h)return c==e&&h==t;var f=-1,d=!0,p=2&r?new Hr:o;for(s.set(t,e),s.set(e,t);++f<l;){var m=t[f],g=e[f];if(n)var y=a?n(g,m,f,e,t,s):n(m,g,f,t,e,s);if(y!==o){if(y)continue;d=!1;break}if(p){if(!ze(e,(function(t,e){if(!tr(p,e)&&(m===t||i(m,t,r,n,s)))return p.push(e)}))){d=!1;break}}else if(m!==g&&!i(m,g,r,n,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function no(t){return Do(Co(t,o,Zo),t+"")}function io(t){return Mn(t,Pa,po)}function oo(t){return Mn(t,Da,mo)}var so=kr?function(t){return kr.get(t)}:cl;function ao(t){for(var e=t.name+"",r=Rr[e],n=Lt.call(Rr,e)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==t)return i.name}return e}function lo(t){return(Lt.call(jr,"placeholder")?jr:t).placeholder}function uo(){var t=jr.iteratee||sl;return t=t===sl?On:t,arguments.length?t(arguments[0],arguments[1]):t}function co(t,e){var r=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map}function ho(t){for(var e=Pa(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,To(i)]}return e}function fo(t,e){var r=function(t,e){return null==t?o:t[e]}(t,e);return Ln(r)?r:o}var po=ge?function(t){return null==t?[]:(t=Tt(t),Re(ge(t),(function(e){return Ht.call(t,e)})))}:yl,mo=ge?function(t){for(var e=[];t;)Le(e,po(t)),t=Wt(t);return e}:yl,go=Tn;function yo(t,e,r){for(var n=-1,i=(e=bi(e,t)).length,o=!1;++n<i;){var s=Uo(e[n]);if(!(o=null!=t&&r(t,s)))break;t=t[s]}return o||++n!=i?o:!!(i=null==t?0:t.length)&&ea(i)&&bo(s,i)&&(Ws(t)||Ks(t))}function _o(t){return"function"!=typeof t.constructor||Mo(t)?{}:Fr(Wt(t))}function vo(t){return Ws(t)||Ks(t)||!!(Xt&&t&&t[Xt])}function bo(t,e){var r=typeof t;return!!(e=null==e?m:e)&&("number"==r||"symbol"!=r&&wt.test(t))&&t>-1&&t%1==0&&t<e}function wo(t,e,r){if(!ra(r))return!1;var n=typeof e;return!!("number"==n?Hs(r)&&bo(e,r.length):"string"==n&&e in r)&&Vs(r[e],t)}function xo(t,e){if(Ws(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ca(t))||(nt.test(t)||!rt.test(t)||null!=e&&t in Tt(e))}function Eo(t){var e=ao(t),r=jr[e];if("function"!=typeof r||!(e in qr.prototype))return!1;if(t===r)return!0;var n=so(r);return!!n&&t===n[0]}(Sr&&go(new Sr(new ArrayBuffer(1)))!=O||Mr&&go(new Mr)!=T||Tr&&go(Tr.resolve())!=I||Ar&&go(new Ar)!=R||Cr&&go(new Cr)!=D)&&(go=function(t){var e=Tn(t),r=e==C?t.constructor:o,n=r?jo(r):"";if(n)switch(n){case Br:return O;case Pr:return T;case Dr:return I;case Lr:return R;case Or:return D}return e});var So=Pt?$s:_l;function Mo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Bt)}function To(t){return t===t&&!ra(t)}function Ao(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==o||t in Tt(r)))}}function Co(t,e,n){return e=_r(e===o?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=_r(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var l=r(e+1);++o<e;)l[o]=i[o];return l[e]=n(a),Te(t,this,l)}}function Io(t,e){return e.length<2?t:Sn(t,ii(e,0,-1))}function ko(t,e){for(var r=t.length,n=vr(e.length,r),i=ki(t);n--;){var s=e[n];t[n]=bo(s,r)?i[s]:o}return t}function Ro(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Bo=Oo(ei),Po=fe||function(t,e){return pe.setTimeout(t,e)},Do=Oo(ri);function Lo(t,e,r){var n=e+"";return Do(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(ut,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return Ce(_,(function(r){var n="_."+r[0];e&r[1]&&!Be(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(ct);return e?e[1].split(ht):[]}(n),r)))}function Oo(t){var e=0,r=0;return function(){var n=br(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(o,arguments)}}function No(t,e){var r=-1,n=t.length,i=n-1;for(e=e===o?n:e;++r<e;){var s=Qn(r,i),a=t[s];t[s]=t[r],t[r]=a}return t.length=e,t}var zo=function(t){var e=Os(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(it,(function(t,r,n,i){e.push(n?i.replace(pt,"$1"):r||t)})),e}));function Uo(t){if("string"==typeof t||ca(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function jo(t){if(null!=t){try{return Dt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Fo(t){if(t instanceof qr)return t.clone();var e=new Gr(t.__wrapped__,t.__chain__);return e.__actions__=ki(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Vo=Yn((function(t,e){return Qs(t)?fn(t,_n(e,1,Qs,!0)):[]})),Go=Yn((function(t,e){var r=Jo(e);return Qs(r)&&(r=o),Qs(t)?fn(t,_n(e,1,Qs,!0),uo(r,2)):[]})),qo=Yn((function(t,e){var r=Jo(e);return Qs(r)&&(r=o),Qs(t)?fn(t,_n(e,1,Qs,!0),o,r):[]}));function Ko(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:ga(r);return i<0&&(i=_r(n+i,0)),Fe(t,uo(e,3),i)}function Wo(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n-1;return r!==o&&(i=ga(r),i=r<0?_r(n+i,0):vr(i,n-1)),Fe(t,uo(e,3),i,!0)}function Zo(t){return(null==t?0:t.length)?_n(t,1):[]}function Ho(t){return t&&t.length?t[0]:o}var Qo=Yn((function(t){var e=De(t,_i);return e.length&&e[0]===t[0]?kn(e):[]})),Xo=Yn((function(t){var e=Jo(t),r=De(t,_i);return e===Jo(r)?e=o:r.pop(),r.length&&r[0]===t[0]?kn(r,uo(e,2)):[]})),Yo=Yn((function(t){var e=Jo(t),r=De(t,_i);return(e="function"==typeof e?e:o)&&r.pop(),r.length&&r[0]===t[0]?kn(r,o,e):[]}));function Jo(t){var e=null==t?0:t.length;return e?t[e-1]:o}var $o=Yn(ts);function ts(t,e){return t&&t.length&&e&&e.length?Zn(t,e):t}var es=no((function(t,e){var r=null==t?0:t.length,n=an(t,e);return Hn(t,De(e,(function(t){return bo(t,r)?+t:t})).sort(Ai)),n}));function rs(t){return null==t?t:Er.call(t)}var ns=Yn((function(t){return hi(_n(t,1,Qs,!0))})),is=Yn((function(t){var e=Jo(t);return Qs(e)&&(e=o),hi(_n(t,1,Qs,!0),uo(e,2))})),os=Yn((function(t){var e=Jo(t);return e="function"==typeof e?e:o,hi(_n(t,1,Qs,!0),o,e)}));function ss(t){if(!t||!t.length)return[];var e=0;return t=Re(t,(function(t){if(Qs(t))return e=_r(t.length,e),!0})),Xe(e,(function(e){return De(t,We(e))}))}function as(t,e){if(!t||!t.length)return[];var r=ss(t);return null==e?r:De(r,(function(t){return Te(e,o,t)}))}var ls=Yn((function(t,e){return Qs(t)?fn(t,e):[]})),us=Yn((function(t){return gi(Re(t,Qs))})),cs=Yn((function(t){var e=Jo(t);return Qs(e)&&(e=o),gi(Re(t,Qs),uo(e,2))})),hs=Yn((function(t){var e=Jo(t);return e="function"==typeof e?e:o,gi(Re(t,Qs),o,e)})),fs=Yn(ss);var ds=Yn((function(t){var e=t.length,r=e>1?t[e-1]:o;return r="function"==typeof r?(t.pop(),r):o,as(t,r)}));function ps(t){var e=jr(t);return e.__chain__=!0,e}function ms(t,e){return e(t)}var gs=no((function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,i=function(e){return an(e,t)};return!(e>1||this.__actions__.length)&&n instanceof qr&&bo(r)?((n=n.slice(r,+r+(e?1:0))).__actions__.push({func:ms,args:[i],thisArg:o}),new Gr(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(o),t}))):this.thru(i)}));var ys=Bi((function(t,e,r){Lt.call(t,r)?++t[r]:sn(t,r,1)}));var _s=Ui(Ko),vs=Ui(Wo);function bs(t,e){return(Ws(t)?Ce:dn)(t,uo(e,3))}function ws(t,e){return(Ws(t)?Ie:pn)(t,uo(e,3))}var xs=Bi((function(t,e,r){Lt.call(t,r)?t[r].push(e):sn(t,r,[e])}));var Es=Yn((function(t,e,n){var i=-1,o="function"==typeof e,s=Hs(t)?r(t.length):[];return dn(t,(function(t){s[++i]=o?Te(e,t,n):Rn(t,e,n)})),s})),Ss=Bi((function(t,e,r){sn(t,r,e)}));function Ms(t,e){return(Ws(t)?De:jn)(t,uo(e,3))}var Ts=Bi((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]}));var As=Yn((function(t,e){if(null==t)return[];var r=e.length;return r>1&&wo(t,e[0],e[1])?e=[]:r>2&&wo(e[0],e[1],e[2])&&(e=[e[0]]),Kn(t,_n(e,1),[])})),Cs=ue||function(){return pe.Date.now()};function Is(t,e,r){return e=r?o:e,e=t&&null==e?t.length:e,Ji(t,f,o,o,o,o,e)}function ks(t,e){var r;if("function"!=typeof e)throw new It(s);return t=ga(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=o),r}}var Rs=Yn((function(t,e,r){var n=1;if(r.length){var i=cr(r,lo(Rs));n|=c}return Ji(t,n,e,r,i)})),Bs=Yn((function(t,e,r){var n=3;if(r.length){var i=cr(r,lo(Bs));n|=c}return Ji(e,n,t,r,i)}));function Ps(t,e,r){var n,i,a,l,u,c,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new It(s);function m(e){var r=n,s=i;return n=i=o,h=e,l=t.apply(s,r)}function g(t){return h=t,u=Po(_,e),f?m(t):l}function y(t){var r=t-c;return c===o||r>=e||r<0||d&&t-h>=a}function _(){var t=Cs();if(y(t))return v(t);u=Po(_,function(t){var r=e-(t-c);return d?vr(r,a-(t-h)):r}(t))}function v(t){return u=o,p&&n?m(t):(n=i=o,l)}function b(){var t=Cs(),r=y(t);if(n=arguments,i=this,c=t,r){if(u===o)return g(c);if(d)return Ei(u),u=Po(_,e),m(c)}return u===o&&(u=Po(_,e)),l}return e=_a(e)||0,ra(r)&&(f=!!r.leading,a=(d="maxWait"in r)?_r(_a(r.maxWait)||0,e):a,p="trailing"in r?!!r.trailing:p),b.cancel=function(){u!==o&&Ei(u),h=0,n=c=i=u=o},b.flush=function(){return u===o?l:v(Cs())},b}var Ds=Yn((function(t,e){return hn(t,1,e)})),Ls=Yn((function(t,e,r){return hn(t,_a(e)||0,r)}));function Os(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new It(s);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Os.Cache||Zr),r}function Ns(t){if("function"!=typeof t)throw new It(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Os.Cache=Zr;var zs=wi((function(t,e){var r=(e=1==e.length&&Ws(e[0])?De(e[0],Je(uo())):De(_n(e,1),Je(uo()))).length;return Yn((function(n){for(var i=-1,o=vr(n.length,r);++i<o;)n[i]=e[i].call(this,n[i]);return Te(t,this,n)}))})),Us=Yn((function(t,e){var r=cr(e,lo(Us));return Ji(t,c,o,e,r)})),js=Yn((function(t,e){var r=cr(e,lo(js));return Ji(t,h,o,e,r)})),Fs=no((function(t,e){return Ji(t,d,o,o,o,e)}));function Vs(t,e){return t===e||t!==t&&e!==e}var Gs=Zi(An),qs=Zi((function(t,e){return t>=e})),Ks=Bn(function(){return arguments}())?Bn:function(t){return na(t)&&Lt.call(t,"callee")&&!Ht.call(t,"callee")},Ws=r.isArray,Zs=be?Je(be):function(t){return na(t)&&Tn(t)==L};function Hs(t){return null!=t&&ea(t.length)&&!$s(t)}function Qs(t){return na(t)&&Hs(t)}var Xs=_e||_l,Ys=we?Je(we):function(t){return na(t)&&Tn(t)==x};function Js(t){if(!na(t))return!1;var e=Tn(t);return e==E||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!sa(t)}function $s(t){if(!ra(t))return!1;var e=Tn(t);return e==S||e==M||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ta(t){return"number"==typeof t&&t==ga(t)}function ea(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=m}function ra(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ia=xe?Je(xe):function(t){return na(t)&&go(t)==T};function oa(t){return"number"==typeof t||na(t)&&Tn(t)==A}function sa(t){if(!na(t)||Tn(t)!=C)return!1;var e=Wt(t);if(null===e)return!0;var r=Lt.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Dt.call(r)==Ut}var aa=Ee?Je(Ee):function(t){return na(t)&&Tn(t)==k};var la=Se?Je(Se):function(t){return na(t)&&go(t)==R};function ua(t){return"string"==typeof t||!Ws(t)&&na(t)&&Tn(t)==B}function ca(t){return"symbol"==typeof t||na(t)&&Tn(t)==P}var ha=Me?Je(Me):function(t){return na(t)&&ea(t.length)&&!!ae[Tn(t)]};var fa=Zi(Un),da=Zi((function(t,e){return t<=e}));function pa(t){if(!t)return[];if(Hs(t))return ua(t)?pr(t):ki(t);if(Yt&&t[Yt])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Yt]());var e=go(t);return(e==T?lr:e==R?hr:Va)(t)}function ma(t){return t?(t=_a(t))===p||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}function ga(t){var e=ma(t),r=e%1;return e===e?r?e-r:e:0}function ya(t){return t?ln(ga(t),0,y):0}function _a(t){if("number"==typeof t)return t;if(ca(t))return g;if(ra(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ra(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ye(t);var r=_t.test(t);return r||bt.test(t)?he(t.slice(2),r?2:8):yt.test(t)?g:+t}function va(t){return Ri(t,Da(t))}function ba(t){return null==t?"":ci(t)}var wa=Pi((function(t,e){if(Mo(e)||Hs(e))Ri(e,Pa(e),t);else for(var r in e)Lt.call(e,r)&&en(t,r,e[r])})),xa=Pi((function(t,e){Ri(e,Da(e),t)})),Ea=Pi((function(t,e,r,n){Ri(e,Da(e),t,n)})),Sa=Pi((function(t,e,r,n){Ri(e,Pa(e),t,n)})),Ma=no(an);var Ta=Yn((function(t,e){t=Tt(t);var r=-1,n=e.length,i=n>2?e[2]:o;for(i&&wo(e[0],e[1],i)&&(n=1);++r<n;)for(var s=e[r],a=Da(s),l=-1,u=a.length;++l<u;){var c=a[l],h=t[c];(h===o||Vs(h,Bt[c])&&!Lt.call(t,c))&&(t[c]=s[c])}return t})),Aa=Yn((function(t){return t.push(o,to),Te(Oa,o,t)}));function Ca(t,e,r){var n=null==t?o:Sn(t,e);return n===o?r:n}function Ia(t,e){return null!=t&&yo(t,e,In)}var ka=Vi((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),t[e]=r}),rl(ol)),Ra=Vi((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),Lt.call(t,e)?t[e].push(r):t[e]=[r]}),uo),Ba=Yn(Rn);function Pa(t){return Hs(t)?Xr(t):Nn(t)}function Da(t){return Hs(t)?Xr(t,!0):zn(t)}var La=Pi((function(t,e,r){Gn(t,e,r)})),Oa=Pi((function(t,e,r,n){Gn(t,e,r,n)})),Na=no((function(t,e){var r={};if(null==t)return r;var n=!1;e=De(e,(function(e){return e=bi(e,t),n||(n=e.length>1),e})),Ri(t,oo(t),r),n&&(r=un(r,7,eo));for(var i=e.length;i--;)fi(r,e[i]);return r}));var za=no((function(t,e){return null==t?{}:function(t,e){return Wn(t,e,(function(e,r){return Ia(t,r)}))}(t,e)}));function Ua(t,e){if(null==t)return{};var r=De(oo(t),(function(t){return[t]}));return e=uo(e),Wn(t,r,(function(t,r){return e(t,r[0])}))}var ja=Yi(Pa),Fa=Yi(Da);function Va(t){return null==t?[]:$e(t,Pa(t))}var Ga=Ni((function(t,e,r){return e=e.toLowerCase(),t+(r?qa(e):e)}));function qa(t){return Ja(ba(t).toLowerCase())}function Ka(t){return(t=ba(t))&&t.replace(xt,ir).replace(te,"")}var Wa=Ni((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),Za=Ni((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),Ha=Oi("toLowerCase");var Qa=Ni((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));var Xa=Ni((function(t,e,r){return t+(r?" ":"")+Ja(e)}));var Ya=Ni((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),Ja=Oi("toUpperCase");function $a(t,e,r){return t=ba(t),(e=r?o:e)===o?function(t){return ie.test(t)}(t)?function(t){return t.match(re)||[]}(t):function(t){return t.match(ft)||[]}(t):t.match(e)||[]}var tl=Yn((function(t,e){try{return Te(t,o,e)}catch(r){return Js(r)?r:new i(r)}})),el=no((function(t,e){return Ce(e,(function(e){e=Uo(e),sn(t,e,Rs(t[e],t))})),t}));function rl(t){return function(){return t}}var nl=ji(),il=ji(!0);function ol(t){return t}function sl(t){return On("function"==typeof t?t:un(t,1))}var al=Yn((function(t,e){return function(r){return Rn(r,t,e)}})),ll=Yn((function(t,e){return function(r){return Rn(t,r,e)}}));function ul(t,e,r){var n=Pa(e),i=En(e,n);null!=r||ra(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=En(e,Pa(e)));var o=!(ra(r)&&"chain"in r)||!!r.chain,s=$s(t);return Ce(i,(function(r){var n=e[r];t[r]=n,s&&(t.prototype[r]=function(){var e=this.__chain__;if(o||e){var r=t(this.__wrapped__),i=r.__actions__=ki(this.__actions__);return i.push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,Le([this.value()],arguments))})})),t}function cl(){}var hl=qi(De),fl=qi(ke),dl=qi(ze);function pl(t){return xo(t)?We(Uo(t)):function(t){return function(e){return Sn(e,t)}}(t)}var ml=Wi(),gl=Wi(!0);function yl(){return[]}function _l(){return!1}var vl=Gi((function(t,e){return t+e}),0),bl=Qi("ceil"),wl=Gi((function(t,e){return t/e}),1),xl=Qi("floor");var El=Gi((function(t,e){return t*e}),1),Sl=Qi("round"),Ml=Gi((function(t,e){return t-e}),0);return jr.after=function(t,e){if("function"!=typeof e)throw new It(s);return t=ga(t),function(){if(--t<1)return e.apply(this,arguments)}},jr.ary=Is,jr.assign=wa,jr.assignIn=xa,jr.assignInWith=Ea,jr.assignWith=Sa,jr.at=Ma,jr.before=ks,jr.bind=Rs,jr.bindAll=el,jr.bindKey=Bs,jr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ws(t)?t:[t]},jr.chain=ps,jr.chunk=function(t,e,n){e=(n?wo(t,e,n):e===o)?1:_r(ga(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var s=0,a=0,l=r(de(i/e));s<i;)l[a++]=ii(t,s,s+=e);return l},jr.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var o=t[e];o&&(i[n++]=o)}return i},jr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Le(Ws(n)?ki(n):[n],_n(e,1))},jr.cond=function(t){var e=null==t?0:t.length,r=uo();return t=e?De(t,(function(t){if("function"!=typeof t[1])throw new It(s);return[r(t[0]),t[1]]})):[],Yn((function(r){for(var n=-1;++n<e;){var i=t[n];if(Te(i[0],this,r))return Te(i[1],this,r)}}))},jr.conforms=function(t){return function(t){var e=Pa(t);return function(r){return cn(r,t,e)}}(un(t,1))},jr.constant=rl,jr.countBy=ys,jr.create=function(t,e){var r=Fr(t);return null==e?r:on(r,e)},jr.curry=function t(e,r,n){var i=Ji(e,8,o,o,o,o,o,r=n?o:r);return i.placeholder=t.placeholder,i},jr.curryRight=function t(e,r,n){var i=Ji(e,u,o,o,o,o,o,r=n?o:r);return i.placeholder=t.placeholder,i},jr.debounce=Ps,jr.defaults=Ta,jr.defaultsDeep=Aa,jr.defer=Ds,jr.delay=Ls,jr.difference=Vo,jr.differenceBy=Go,jr.differenceWith=qo,jr.drop=function(t,e,r){var n=null==t?0:t.length;return n?ii(t,(e=r||e===o?1:ga(e))<0?0:e,n):[]},jr.dropRight=function(t,e,r){var n=null==t?0:t.length;return n?ii(t,0,(e=n-(e=r||e===o?1:ga(e)))<0?0:e):[]},jr.dropRightWhile=function(t,e){return t&&t.length?pi(t,uo(e,3),!0,!0):[]},jr.dropWhile=function(t,e){return t&&t.length?pi(t,uo(e,3),!0):[]},jr.fill=function(t,e,r,n){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&wo(t,e,r)&&(r=0,n=i),function(t,e,r,n){var i=t.length;for((r=ga(r))<0&&(r=-r>i?0:i+r),(n=n===o||n>i?i:ga(n))<0&&(n+=i),n=r>n?0:ya(n);r<n;)t[r++]=e;return t}(t,e,r,n)):[]},jr.filter=function(t,e){return(Ws(t)?Re:yn)(t,uo(e,3))},jr.flatMap=function(t,e){return _n(Ms(t,e),1)},jr.flatMapDeep=function(t,e){return _n(Ms(t,e),p)},jr.flatMapDepth=function(t,e,r){return r=r===o?1:ga(r),_n(Ms(t,e),r)},jr.flatten=Zo,jr.flattenDeep=function(t){return(null==t?0:t.length)?_n(t,p):[]},jr.flattenDepth=function(t,e){return(null==t?0:t.length)?_n(t,e=e===o?1:ga(e)):[]},jr.flip=function(t){return Ji(t,512)},jr.flow=nl,jr.flowRight=il,jr.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n},jr.functions=function(t){return null==t?[]:En(t,Pa(t))},jr.functionsIn=function(t){return null==t?[]:En(t,Da(t))},jr.groupBy=xs,jr.initial=function(t){return(null==t?0:t.length)?ii(t,0,-1):[]},jr.intersection=Qo,jr.intersectionBy=Xo,jr.intersectionWith=Yo,jr.invert=ka,jr.invertBy=Ra,jr.invokeMap=Es,jr.iteratee=sl,jr.keyBy=Ss,jr.keys=Pa,jr.keysIn=Da,jr.map=Ms,jr.mapKeys=function(t,e){var r={};return e=uo(e,3),wn(t,(function(t,n,i){sn(r,e(t,n,i),t)})),r},jr.mapValues=function(t,e){var r={};return e=uo(e,3),wn(t,(function(t,n,i){sn(r,n,e(t,n,i))})),r},jr.matches=function(t){return Fn(un(t,1))},jr.matchesProperty=function(t,e){return Vn(t,un(e,1))},jr.memoize=Os,jr.merge=La,jr.mergeWith=Oa,jr.method=al,jr.methodOf=ll,jr.mixin=ul,jr.negate=Ns,jr.nthArg=function(t){return t=ga(t),Yn((function(e){return qn(e,t)}))},jr.omit=Na,jr.omitBy=function(t,e){return Ua(t,Ns(uo(e)))},jr.once=function(t){return ks(2,t)},jr.orderBy=function(t,e,r,n){return null==t?[]:(Ws(e)||(e=null==e?[]:[e]),Ws(r=n?o:r)||(r=null==r?[]:[r]),Kn(t,e,r))},jr.over=hl,jr.overArgs=zs,jr.overEvery=fl,jr.overSome=dl,jr.partial=Us,jr.partialRight=js,jr.partition=Ts,jr.pick=za,jr.pickBy=Ua,jr.property=pl,jr.propertyOf=function(t){return function(e){return null==t?o:Sn(t,e)}},jr.pull=$o,jr.pullAll=ts,jr.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?Zn(t,e,uo(r,2)):t},jr.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Zn(t,e,o,r):t},jr.pullAt=es,jr.range=ml,jr.rangeRight=gl,jr.rearg=Fs,jr.reject=function(t,e){return(Ws(t)?Re:yn)(t,Ns(uo(e,3)))},jr.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],o=t.length;for(e=uo(e,3);++n<o;){var s=t[n];e(s,n,t)&&(r.push(s),i.push(n))}return Hn(t,i),r},jr.rest=function(t,e){if("function"!=typeof t)throw new It(s);return Yn(t,e=e===o?e:ga(e))},jr.reverse=rs,jr.sampleSize=function(t,e,r){return e=(r?wo(t,e,r):e===o)?1:ga(e),(Ws(t)?Jr:$n)(t,e)},jr.set=function(t,e,r){return null==t?t:ti(t,e,r)},jr.setWith=function(t,e,r,n){return n="function"==typeof n?n:o,null==t?t:ti(t,e,r,n)},jr.shuffle=function(t){return(Ws(t)?$r:ni)(t)},jr.slice=function(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&wo(t,e,r)?(e=0,r=n):(e=null==e?0:ga(e),r=r===o?n:ga(r)),ii(t,e,r)):[]},jr.sortBy=As,jr.sortedUniq=function(t){return t&&t.length?li(t):[]},jr.sortedUniqBy=function(t,e){return t&&t.length?li(t,uo(e,2)):[]},jr.split=function(t,e,r){return r&&"number"!=typeof r&&wo(t,e,r)&&(e=r=o),(r=r===o?y:r>>>0)?(t=ba(t))&&("string"==typeof e||null!=e&&!aa(e))&&!(e=ci(e))&&ar(t)?xi(pr(t),0,r):t.split(e,r):[]},jr.spread=function(t,e){if("function"!=typeof t)throw new It(s);return e=null==e?0:_r(ga(e),0),Yn((function(r){var n=r[e],i=xi(r,0,e);return n&&Le(i,n),Te(t,this,i)}))},jr.tail=function(t){var e=null==t?0:t.length;return e?ii(t,1,e):[]},jr.take=function(t,e,r){return t&&t.length?ii(t,0,(e=r||e===o?1:ga(e))<0?0:e):[]},jr.takeRight=function(t,e,r){var n=null==t?0:t.length;return n?ii(t,(e=n-(e=r||e===o?1:ga(e)))<0?0:e,n):[]},jr.takeRightWhile=function(t,e){return t&&t.length?pi(t,uo(e,3),!1,!0):[]},jr.takeWhile=function(t,e){return t&&t.length?pi(t,uo(e,3)):[]},jr.tap=function(t,e){return e(t),t},jr.throttle=function(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new It(s);return ra(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ps(t,e,{leading:n,maxWait:e,trailing:i})},jr.thru=ms,jr.toArray=pa,jr.toPairs=ja,jr.toPairsIn=Fa,jr.toPath=function(t){return Ws(t)?De(t,Uo):ca(t)?[t]:ki(zo(ba(t)))},jr.toPlainObject=va,jr.transform=function(t,e,r){var n=Ws(t),i=n||Xs(t)||ha(t);if(e=uo(e,4),null==r){var o=t&&t.constructor;r=i?n?new o:[]:ra(t)&&$s(o)?Fr(Wt(t)):{}}return(i?Ce:wn)(t,(function(t,n,i){return e(r,t,n,i)})),r},jr.unary=function(t){return Is(t,1)},jr.union=ns,jr.unionBy=is,jr.unionWith=os,jr.uniq=function(t){return t&&t.length?hi(t):[]},jr.uniqBy=function(t,e){return t&&t.length?hi(t,uo(e,2)):[]},jr.uniqWith=function(t,e){return e="function"==typeof e?e:o,t&&t.length?hi(t,o,e):[]},jr.unset=function(t,e){return null==t||fi(t,e)},jr.unzip=ss,jr.unzipWith=as,jr.update=function(t,e,r){return null==t?t:di(t,e,vi(r))},jr.updateWith=function(t,e,r,n){return n="function"==typeof n?n:o,null==t?t:di(t,e,vi(r),n)},jr.values=Va,jr.valuesIn=function(t){return null==t?[]:$e(t,Da(t))},jr.without=ls,jr.words=$a,jr.wrap=function(t,e){return Us(vi(e),t)},jr.xor=us,jr.xorBy=cs,jr.xorWith=hs,jr.zip=fs,jr.zipObject=function(t,e){return yi(t||[],e||[],en)},jr.zipObjectDeep=function(t,e){return yi(t||[],e||[],ti)},jr.zipWith=ds,jr.entries=ja,jr.entriesIn=Fa,jr.extend=xa,jr.extendWith=Ea,ul(jr,jr),jr.add=vl,jr.attempt=tl,jr.camelCase=Ga,jr.capitalize=qa,jr.ceil=bl,jr.clamp=function(t,e,r){return r===o&&(r=e,e=o),r!==o&&(r=(r=_a(r))===r?r:0),e!==o&&(e=(e=_a(e))===e?e:0),ln(_a(t),e,r)},jr.clone=function(t){return un(t,4)},jr.cloneDeep=function(t){return un(t,5)},jr.cloneDeepWith=function(t,e){return un(t,5,e="function"==typeof e?e:o)},jr.cloneWith=function(t,e){return un(t,4,e="function"==typeof e?e:o)},jr.conformsTo=function(t,e){return null==e||cn(t,e,Pa(e))},jr.deburr=Ka,jr.defaultTo=function(t,e){return null==t||t!==t?e:t},jr.divide=wl,jr.endsWith=function(t,e,r){t=ba(t),e=ci(e);var n=t.length,i=r=r===o?n:ln(ga(r),0,n);return(r-=e.length)>=0&&t.slice(r,i)==e},jr.eq=Vs,jr.escape=function(t){return(t=ba(t))&&J.test(t)?t.replace(X,or):t},jr.escapeRegExp=function(t){return(t=ba(t))&&st.test(t)?t.replace(ot,"\\$&"):t},jr.every=function(t,e,r){var n=Ws(t)?ke:mn;return r&&wo(t,e,r)&&(e=o),n(t,uo(e,3))},jr.find=_s,jr.findIndex=Ko,jr.findKey=function(t,e){return je(t,uo(e,3),wn)},jr.findLast=vs,jr.findLastIndex=Wo,jr.findLastKey=function(t,e){return je(t,uo(e,3),xn)},jr.floor=xl,jr.forEach=bs,jr.forEachRight=ws,jr.forIn=function(t,e){return null==t?t:vn(t,uo(e,3),Da)},jr.forInRight=function(t,e){return null==t?t:bn(t,uo(e,3),Da)},jr.forOwn=function(t,e){return t&&wn(t,uo(e,3))},jr.forOwnRight=function(t,e){return t&&xn(t,uo(e,3))},jr.get=Ca,jr.gt=Gs,jr.gte=qs,jr.has=function(t,e){return null!=t&&yo(t,e,Cn)},jr.hasIn=Ia,jr.head=Ho,jr.identity=ol,jr.includes=function(t,e,r,n){t=Hs(t)?t:Va(t),r=r&&!n?ga(r):0;var i=t.length;return r<0&&(r=_r(i+r,0)),ua(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&Ve(t,e,r)>-1},jr.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:ga(r);return i<0&&(i=_r(n+i,0)),Ve(t,e,i)},jr.inRange=function(t,e,r){return e=ma(e),r===o?(r=e,e=0):r=ma(r),function(t,e,r){return t>=vr(e,r)&&t<_r(e,r)}(t=_a(t),e,r)},jr.invoke=Ba,jr.isArguments=Ks,jr.isArray=Ws,jr.isArrayBuffer=Zs,jr.isArrayLike=Hs,jr.isArrayLikeObject=Qs,jr.isBoolean=function(t){return!0===t||!1===t||na(t)&&Tn(t)==w},jr.isBuffer=Xs,jr.isDate=Ys,jr.isElement=function(t){return na(t)&&1===t.nodeType&&!sa(t)},jr.isEmpty=function(t){if(null==t)return!0;if(Hs(t)&&(Ws(t)||"string"==typeof t||"function"==typeof t.splice||Xs(t)||ha(t)||Ks(t)))return!t.length;var e=go(t);if(e==T||e==R)return!t.size;if(Mo(t))return!Nn(t).length;for(var r in t)if(Lt.call(t,r))return!1;return!0},jr.isEqual=function(t,e){return Pn(t,e)},jr.isEqualWith=function(t,e,r){var n=(r="function"==typeof r?r:o)?r(t,e):o;return n===o?Pn(t,e,o,r):!!n},jr.isError=Js,jr.isFinite=function(t){return"number"==typeof t&&ve(t)},jr.isFunction=$s,jr.isInteger=ta,jr.isLength=ea,jr.isMap=ia,jr.isMatch=function(t,e){return t===e||Dn(t,e,ho(e))},jr.isMatchWith=function(t,e,r){return r="function"==typeof r?r:o,Dn(t,e,ho(e),r)},jr.isNaN=function(t){return oa(t)&&t!=+t},jr.isNative=function(t){if(So(t))throw new i("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ln(t)},jr.isNil=function(t){return null==t},jr.isNull=function(t){return null===t},jr.isNumber=oa,jr.isObject=ra,jr.isObjectLike=na,jr.isPlainObject=sa,jr.isRegExp=aa,jr.isSafeInteger=function(t){return ta(t)&&t>=-9007199254740991&&t<=m},jr.isSet=la,jr.isString=ua,jr.isSymbol=ca,jr.isTypedArray=ha,jr.isUndefined=function(t){return t===o},jr.isWeakMap=function(t){return na(t)&&go(t)==D},jr.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==Tn(t)},jr.join=function(t,e){return null==t?"":Ue.call(t,e)},jr.kebabCase=Wa,jr.last=Jo,jr.lastIndexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n;return r!==o&&(i=(i=ga(r))<0?_r(n+i,0):vr(i,n-1)),e===e?function(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}(t,e,i):Fe(t,qe,i,!0)},jr.lowerCase=Za,jr.lowerFirst=Ha,jr.lt=fa,jr.lte=da,jr.max=function(t){return t&&t.length?gn(t,ol,An):o},jr.maxBy=function(t,e){return t&&t.length?gn(t,uo(e,2),An):o},jr.mean=function(t){return Ke(t,ol)},jr.meanBy=function(t,e){return Ke(t,uo(e,2))},jr.min=function(t){return t&&t.length?gn(t,ol,Un):o},jr.minBy=function(t,e){return t&&t.length?gn(t,uo(e,2),Un):o},jr.stubArray=yl,jr.stubFalse=_l,jr.stubObject=function(){return{}},jr.stubString=function(){return""},jr.stubTrue=function(){return!0},jr.multiply=El,jr.nth=function(t,e){return t&&t.length?qn(t,ga(e)):o},jr.noConflict=function(){return pe._===this&&(pe._=jt),this},jr.noop=cl,jr.now=Cs,jr.pad=function(t,e,r){t=ba(t);var n=(e=ga(e))?dr(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return Ki(me(i),r)+t+Ki(de(i),r)},jr.padEnd=function(t,e,r){t=ba(t);var n=(e=ga(e))?dr(t):0;return e&&n<e?t+Ki(e-n,r):t},jr.padStart=function(t,e,r){t=ba(t);var n=(e=ga(e))?dr(t):0;return e&&n<e?Ki(e-n,r)+t:t},jr.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),wr(ba(t).replace(at,""),e||0)},jr.random=function(t,e,r){if(r&&"boolean"!=typeof r&&wo(t,e,r)&&(e=r=o),r===o&&("boolean"==typeof e?(r=e,e=o):"boolean"==typeof t&&(r=t,t=o)),t===o&&e===o?(t=0,e=1):(t=ma(t),e===o?(e=t,t=0):e=ma(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var i=xr();return vr(t+i*(e-t+ce("1e-"+((i+"").length-1))),e)}return Qn(t,e)},jr.reduce=function(t,e,r){var n=Ws(t)?Oe:He,i=arguments.length<3;return n(t,uo(e,4),r,i,dn)},jr.reduceRight=function(t,e,r){var n=Ws(t)?Ne:He,i=arguments.length<3;return n(t,uo(e,4),r,i,pn)},jr.repeat=function(t,e,r){return e=(r?wo(t,e,r):e===o)?1:ga(e),Xn(ba(t),e)},jr.replace=function(){var t=arguments,e=ba(t[0]);return t.length<3?e:e.replace(t[1],t[2])},jr.result=function(t,e,r){var n=-1,i=(e=bi(e,t)).length;for(i||(i=1,t=o);++n<i;){var s=null==t?o:t[Uo(e[n])];s===o&&(n=i,s=r),t=$s(s)?s.call(t):s}return t},jr.round=Sl,jr.runInContext=t,jr.sample=function(t){return(Ws(t)?Yr:Jn)(t)},jr.size=function(t){if(null==t)return 0;if(Hs(t))return ua(t)?dr(t):t.length;var e=go(t);return e==T||e==R?t.size:Nn(t).length},jr.snakeCase=Qa,jr.some=function(t,e,r){var n=Ws(t)?ze:oi;return r&&wo(t,e,r)&&(e=o),n(t,uo(e,3))},jr.sortedIndex=function(t,e){return si(t,e)},jr.sortedIndexBy=function(t,e,r){return ai(t,e,uo(r,2))},jr.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=si(t,e);if(n<r&&Vs(t[n],e))return n}return-1},jr.sortedLastIndex=function(t,e){return si(t,e,!0)},jr.sortedLastIndexBy=function(t,e,r){return ai(t,e,uo(r,2),!0)},jr.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var r=si(t,e,!0)-1;if(Vs(t[r],e))return r}return-1},jr.startCase=Xa,jr.startsWith=function(t,e,r){return t=ba(t),r=null==r?0:ln(ga(r),0,t.length),e=ci(e),t.slice(r,r+e.length)==e},jr.subtract=Ml,jr.sum=function(t){return t&&t.length?Qe(t,ol):0},jr.sumBy=function(t,e){return t&&t.length?Qe(t,uo(e,2)):0},jr.template=function(t,e,r){var n=jr.templateSettings;r&&wo(t,e,r)&&(e=o),t=ba(t),e=Ea({},e,n,$i);var s,a,l=Ea({},e.imports,n.imports,$i),u=Pa(l),c=$e(l,u),h=0,f=e.interpolate||Et,d="__p += '",p=At((e.escape||Et).source+"|"+f.source+"|"+(f===et?mt:Et).source+"|"+(e.evaluate||Et).source+"|$","g"),m="//# sourceURL="+(Lt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++se+"]")+"\n";t.replace(p,(function(e,r,n,i,o,l){return n||(n=i),d+=t.slice(h,l).replace(St,sr),r&&(s=!0,d+="' +\n__e("+r+") +\n'"),o&&(a=!0,d+="';\n"+o+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),h=l+e.length,e})),d+="';\n";var g=Lt.call(e,"variable")&&e.variable;if(g){if(dt.test(g))throw new i("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(W,""):d).replace(Z,"$1").replace(H,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=tl((function(){return lt(u,m+"return "+d).apply(o,c)}));if(y.source=d,Js(y))throw y;return y},jr.times=function(t,e){if((t=ga(t))<1||t>m)return[];var r=y,n=vr(t,y);e=uo(e),t-=y;for(var i=Xe(n,e);++r<t;)e(r);return i},jr.toFinite=ma,jr.toInteger=ga,jr.toLength=ya,jr.toLower=function(t){return ba(t).toLowerCase()},jr.toNumber=_a,jr.toSafeInteger=function(t){return t?ln(ga(t),-9007199254740991,m):0===t?t:0},jr.toString=ba,jr.toUpper=function(t){return ba(t).toUpperCase()},jr.trim=function(t,e,r){if((t=ba(t))&&(r||e===o))return Ye(t);if(!t||!(e=ci(e)))return t;var n=pr(t),i=pr(e);return xi(n,er(n,i),rr(n,i)+1).join("")},jr.trimEnd=function(t,e,r){if((t=ba(t))&&(r||e===o))return t.slice(0,mr(t)+1);if(!t||!(e=ci(e)))return t;var n=pr(t);return xi(n,0,rr(n,pr(e))+1).join("")},jr.trimStart=function(t,e,r){if((t=ba(t))&&(r||e===o))return t.replace(at,"");if(!t||!(e=ci(e)))return t;var n=pr(t);return xi(n,er(n,pr(e))).join("")},jr.truncate=function(t,e){var r=30,n="...";if(ra(e)){var i="separator"in e?e.separator:i;r="length"in e?ga(e.length):r,n="omission"in e?ci(e.omission):n}var s=(t=ba(t)).length;if(ar(t)){var a=pr(t);s=a.length}if(r>=s)return t;var l=r-dr(n);if(l<1)return n;var u=a?xi(a,0,l).join(""):t.slice(0,l);if(i===o)return u+n;if(a&&(l+=u.length-l),aa(i)){if(t.slice(l).search(i)){var c,h=u;for(i.global||(i=At(i.source,ba(gt.exec(i))+"g")),i.lastIndex=0;c=i.exec(h);)var f=c.index;u=u.slice(0,f===o?l:f)}}else if(t.indexOf(ci(i),l)!=l){var d=u.lastIndexOf(i);d>-1&&(u=u.slice(0,d))}return u+n},jr.unescape=function(t){return(t=ba(t))&&Y.test(t)?t.replace(Q,gr):t},jr.uniqueId=function(t){var e=++Ot;return ba(t)+e},jr.upperCase=Ya,jr.upperFirst=Ja,jr.each=bs,jr.eachRight=ws,jr.first=Ho,ul(jr,function(){var t={};return wn(jr,(function(e,r){Lt.call(jr.prototype,r)||(t[r]=e)})),t}(),{chain:!1}),jr.VERSION="4.17.21",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){jr[t].placeholder=jr})),Ce(["drop","take"],(function(t,e){qr.prototype[t]=function(r){r=r===o?1:_r(ga(r),0);var n=this.__filtered__&&!e?new qr(this):this.clone();return n.__filtered__?n.__takeCount__=vr(r,n.__takeCount__):n.__views__.push({size:vr(r,y),type:t+(n.__dir__<0?"Right":"")}),n},qr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var r=e+1,n=1==r||3==r;qr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:uo(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}})),Ce(["head","last"],(function(t,e){var r="take"+(e?"Right":"");qr.prototype[t]=function(){return this[r](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");qr.prototype[t]=function(){return this.__filtered__?new qr(this):this[r](1)}})),qr.prototype.compact=function(){return this.filter(ol)},qr.prototype.find=function(t){return this.filter(t).head()},qr.prototype.findLast=function(t){return this.reverse().find(t)},qr.prototype.invokeMap=Yn((function(t,e){return"function"==typeof t?new qr(this):this.map((function(r){return Rn(r,t,e)}))})),qr.prototype.reject=function(t){return this.filter(Ns(uo(t)))},qr.prototype.slice=function(t,e){t=ga(t);var r=this;return r.__filtered__&&(t>0||e<0)?new qr(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==o&&(r=(e=ga(e))<0?r.dropRight(-e):r.take(e-t)),r)},qr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},qr.prototype.toArray=function(){return this.take(y)},wn(qr.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),i=jr[n?"take"+("last"==e?"Right":""):e],s=n||/^find/.test(e);i&&(jr.prototype[e]=function(){var e=this.__wrapped__,a=n?[1]:arguments,l=e instanceof qr,u=a[0],c=l||Ws(e),h=function(t){var e=i.apply(jr,Le([t],a));return n&&f?e[0]:e};c&&r&&"function"==typeof u&&1!=u.length&&(l=c=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,m=l&&!d;if(!s&&c){e=m?e:new qr(this);var g=t.apply(e,a);return g.__actions__.push({func:ms,args:[h],thisArg:o}),new Gr(g,f)}return p&&m?t.apply(this,a):(g=this.thru(h),p?n?g.value()[0]:g.value():g)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=kt[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);jr.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(Ws(i)?i:[],t)}return this[r]((function(r){return e.apply(Ws(r)?r:[],t)}))}})),wn(qr.prototype,(function(t,e){var r=jr[e];if(r){var n=r.name+"";Lt.call(Rr,n)||(Rr[n]=[]),Rr[n].push({name:e,func:r})}})),Rr[Fi(o,2).name]=[{name:"wrapper",func:o}],qr.prototype.clone=function(){var t=new qr(this.__wrapped__);return t.__actions__=ki(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ki(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ki(this.__views__),t},qr.prototype.reverse=function(){if(this.__filtered__){var t=new qr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},qr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=Ws(t),n=e<0,i=r?t.length:0,o=function(t,e,r){var n=-1,i=r.length;for(;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=vr(e,t+s);break;case"takeRight":t=_r(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,l=a-s,u=n?a:s-1,c=this.__iteratees__,h=c.length,f=0,d=vr(l,this.__takeCount__);if(!r||!n&&i==l&&d==l)return mi(t,this.__actions__);var p=[];t:for(;l--&&f<d;){for(var m=-1,g=t[u+=e];++m<h;){var y=c[m],_=y.iteratee,v=y.type,b=_(g);if(2==v)g=b;else if(!b){if(1==v)continue t;break t}}p[f++]=g}return p},jr.prototype.at=gs,jr.prototype.chain=function(){return ps(this)},jr.prototype.commit=function(){return new Gr(this.value(),this.__chain__)},jr.prototype.next=function(){this.__values__===o&&(this.__values__=pa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?o:this.__values__[this.__index__++]}},jr.prototype.plant=function(t){for(var e,r=this;r instanceof Vr;){var n=Fo(r);n.__index__=0,n.__values__=o,e?i.__wrapped__=n:e=n;var i=n;r=r.__wrapped__}return i.__wrapped__=t,e},jr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof qr){var e=t;return this.__actions__.length&&(e=new qr(this)),(e=e.reverse()).__actions__.push({func:ms,args:[rs],thisArg:o}),new Gr(e,this.__chain__)}return this.thru(rs)},jr.prototype.toJSON=jr.prototype.valueOf=jr.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},jr.prototype.first=jr.prototype.head,Yt&&(jr.prototype[Yt]=function(){return this}),jr}();pe._=yr,(i=function(){return yr}.call(e,r,e,n))===o||(n.exports=i)}).call(this)}).call(this,r(6),r(12)(t))},function(t,e,r){"use strict";(function(e){"undefined"===typeof e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,n,i){if("function"!==typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,r(5))},function(t,e,r){"use strict";var n=r(218),i=r(219);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=v,e.resolve=function(t,e){return v(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?v(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=v(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),h=["%","/","?",";","#"].concat(c),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=r(63);function v(t,e,r){if(t&&i.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,r),n}o.prototype.parse=function(t,e,r){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",u=t.split(a);u[0]=u[0].replace(/\\/g,"/");var v=t=u.join(a);if(v=v.trim(),!r&&1===t.split("#").length){var b=l.exec(v);if(b)return this.path=v,this.href=v,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(v);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,v=v.substr(w.length)}if(r||w||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===v.substr(0,2);!E||w&&g[w]||(v=v.substr(2),this.slashes=!0)}if(!g[w]&&(E||w&&!y[w])){for(var S,M,T=-1,A=0;A<f.length;A++){-1!==(C=v.indexOf(f[A]))&&(-1===T||C<T)&&(T=C)}-1!==(M=-1===T?v.lastIndexOf("@"):v.lastIndexOf("@",T))&&(S=v.slice(0,M),v=v.slice(M+1),this.auth=decodeURIComponent(S)),T=-1;for(A=0;A<h.length;A++){var C;-1!==(C=v.indexOf(h[A]))&&(-1===T||C<T)&&(T=C)}-1===T&&(T=v.length),this.host=v.slice(0,T),v=v.slice(T),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var k=this.hostname.split(/\./),R=(A=0,k.length);A<R;A++){var B=k[A];if(B&&!B.match(d)){for(var P="",D=0,L=B.length;D<L;D++)B.charCodeAt(D)>127?P+="x":P+=B[D];if(!P.match(d)){var O=k.slice(0,A),N=k.slice(A+1),z=B.match(p);z&&(O.push(z[1]),N.unshift(z[2])),N.length&&(v="/"+N.join(".")+v),this.hostname=O.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+U,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!m[x])for(A=0,R=c.length;A<R;A++){var F=c[A];if(-1!==v.indexOf(F)){var V=encodeURIComponent(F);V===F&&(V=escape(F)),v=v.split(F).join(V)}}var G=v.indexOf("#");-1!==G&&(this.hash=v.substr(G),v=v.slice(0,G));var q=v.indexOf("?");if(-1!==q?(this.search=v.substr(q),this.query=v.substr(q+1),e&&(this.query=_.parse(this.query)),v=v.slice(0,q)):e&&(this.search="",this.query={}),v&&(this.pathname=v),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var K=this.search||"";this.path=U+K}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=_.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var r=new o,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(r[c]=t[c])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!y[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var d=h[f];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||g[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",_=r.search||"";r.path=m+_}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||v||r.host&&t.pathname,x=w,E=r.pathname&&r.pathname.split("/")||[],S=(p=t.pathname&&t.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(S&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),w=w&&(""===p[0]||""===E[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),r.search=t.search,r.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(S)r.hostname=r.host=E.shift(),(I=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=I.shift(),r.host=r.hostname=I.shift());return r.search=t.search,r.query=t.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var M=E.slice(-1)[0],T=(r.host||t.host||E.length>1)&&("."===M||".."===M)||""===M,A=0,C=E.length;C>=0;C--)"."===(M=E[C])?E.splice(C,1):".."===M?(E.splice(C,1),A++):A&&(E.splice(C,1),A--);if(!w&&!x)for(;A--;A)E.unshift("..");!w||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),T&&"/"!==E.join("/").substr(-1)&&E.push("");var I,k=""===E[0]||E[0]&&"/"===E[0].charAt(0);S&&(r.hostname=r.host=k?"":E.length?E.shift():"",(I=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=I.shift(),r.host=r.hostname=I.shift()));return(w=w||r.host&&E.length)&&!k&&E.unshift(""),E.length?r.pathname=E.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){var n=r(1).Buffer;function i(t){n.isBuffer(t)||(t=n.from(t));for(var e=t.length/4|0,r=new Array(e),i=0;i<e;i++)r[i]=t.readUInt32BE(4*i);return r}function o(t){for(;0<t.length;t++)t[0]=0}function s(t,e,r,n,i){for(var o,s,a,l,u=r[0],c=r[1],h=r[2],f=r[3],d=t[0]^e[0],p=t[1]^e[1],m=t[2]^e[2],g=t[3]^e[3],y=4,_=1;_<i;_++)o=u[d>>>24]^c[p>>>16&255]^h[m>>>8&255]^f[255&g]^e[y++],s=u[p>>>24]^c[m>>>16&255]^h[g>>>8&255]^f[255&d]^e[y++],a=u[m>>>24]^c[g>>>16&255]^h[d>>>8&255]^f[255&p]^e[y++],l=u[g>>>24]^c[d>>>16&255]^h[p>>>8&255]^f[255&m]^e[y++],d=o,p=s,m=a,g=l;return o=(n[d>>>24]<<24|n[p>>>16&255]<<16|n[m>>>8&255]<<8|n[255&g])^e[y++],s=(n[p>>>24]<<24|n[m>>>16&255]<<16|n[g>>>8&255]<<8|n[255&d])^e[y++],a=(n[m>>>24]<<24|n[g>>>16&255]<<16|n[d>>>8&255]<<8|n[255&p])^e[y++],l=(n[g>>>24]<<24|n[d>>>16&255]<<16|n[p>>>8&255]<<8|n[255&m])^e[y++],[o>>>=0,s>>>=0,a>>>=0,l>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],l=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],s=0,a=0,l=0;l<256;++l){var u=a^a<<1^a<<2^a<<3^a<<4;u=u>>>8^255&u^99,r[s]=u,n[u]=s;var c=t[s],h=t[c],f=t[h],d=257*t[u]^16843008*u;i[0][s]=d<<24|d>>>8,i[1][s]=d<<16|d>>>16,i[2][s]=d<<8|d>>>24,i[3][s]=d,d=16843009*f^65537*h^257*c^16843008*s,o[0][u]=d<<24|d>>>8,o[1][u]=d<<16|d>>>16,o[2][u]=d<<8|d>>>24,o[3][u]=d,0===s?s=a=1:(s=c^t[t[t[f^c]]],a^=t[t[a]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function u(t){this._key=i(t),this._reset()}u.blockSize=16,u.keySize=32,u.prototype.blockSize=u.blockSize,u.prototype.keySize=u.keySize,u.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=4*(r+1),i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<n;o++){var s=i[o-1];o%e===0?(s=s<<8|s>>>24,s=l.SBOX[s>>>24]<<24|l.SBOX[s>>>16&255]<<16|l.SBOX[s>>>8&255]<<8|l.SBOX[255&s],s^=a[o/e|0]<<24):e>6&&o%e===4&&(s=l.SBOX[s>>>24]<<24|l.SBOX[s>>>16&255]<<16|l.SBOX[s>>>8&255]<<8|l.SBOX[255&s]),i[o]=i[o-e]^s}for(var u=[],c=0;c<n;c++){var h=n-c,f=i[h-(c%4?0:4)];u[c]=c<4||h<=4?f:l.INV_SUB_MIX[0][l.SBOX[f>>>24]]^l.INV_SUB_MIX[1][l.SBOX[f>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[f>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&f]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=u},u.prototype.encryptBlockRaw=function(t){return s(t=i(t),this._keySchedule,l.SUB_MIX,l.SBOX,this._nRounds)},u.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=n.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r},u.prototype.decryptBlock=function(t){var e=(t=i(t))[1];t[1]=t[3],t[3]=e;var r=s(t,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX,this._nRounds),o=n.allocUnsafe(16);return o.writeUInt32BE(r[0],0),o.writeUInt32BE(r[3],4),o.writeUInt32BE(r[2],8),o.writeUInt32BE(r[1],12),o},u.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=u},function(t,e,r){var n=r(1).Buffer,i=r(65);t.exports=function(t,e,r,o){if(n.isBuffer(t)||(t=n.from(t,"binary")),e&&(n.isBuffer(e)||(e=n.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=r/8,a=n.alloc(s),l=n.alloc(o||0),u=n.alloc(0);s>0||o>0;){var c=new i;c.update(u),c.update(t),e&&c.update(e),u=c.digest();var h=0;if(s>0){var f=a.length-s;h=Math.min(s,u.length),u.copy(a,f,0,h),s-=h}if(h<u.length&&o>0){var d=l.length-o,p=Math.min(o,u.length-h);u.copy(l,d,h,h+p),o-=p}}return u.fill(0),{key:a,iv:l}}},function(t,e,r){"use strict";var n=r(16),i=r(9),o=i.getNAF,s=i.getJSF,a=i.assert;function l(t,e){this.type=t,this.p=new n(e.p,16),this.red=e.prime?n.red(e.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=e.n&&new n(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=l,l.prototype.point=function(){throw new Error("Not implemented")},l.prototype.validate=function(){throw new Error("Not implemented")},l.prototype._fixedNafMul=function(t,e){a(t.precomputed);var r=t._getDoubles(),n=o(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var s,l,u=[];for(s=0;s<n.length;s+=r.step){l=0;for(var c=s+r.step-1;c>=s;c--)l=(l<<1)+n[c];u.push(l)}for(var h=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=i;d>0;d--){for(s=0;s<u.length;s++)(l=u[s])===d?f=f.mixedAdd(r.points[s]):l===-d&&(f=f.mixedAdd(r.points[s].neg()));h=h.add(f)}return h.toP()},l.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=o(e,r,this._bitLength),l=this.jpoint(null,null,null),u=s.length-1;u>=0;u--){for(var c=0;u>=0&&0===s[u];u--)c++;if(u>=0&&c++,l=l.dblp(c),u<0)break;var h=s[u];a(0!==h),l="affine"===t.type?h>0?l.mixedAdd(i[h-1>>1]):l.mixedAdd(i[-h-1>>1].neg()):h>0?l.add(i[h-1>>1]):l.add(i[-h-1>>1].neg())}return"affine"===t.type?l.toP():l},l.prototype._wnafMulAdd=function(t,e,r,n,i){var a,l,u,c=this._wnafT1,h=this._wnafT2,f=this._wnafT3,d=0;for(a=0;a<n;a++){var p=(u=e[a])._getNAFPoints(t);c[a]=p.wnd,h[a]=p.points}for(a=n-1;a>=1;a-=2){var m=a-1,g=a;if(1===c[m]&&1===c[g]){var y=[e[m],null,null,e[g]];0===e[m].y.cmp(e[g].y)?(y[1]=e[m].add(e[g]),y[2]=e[m].toJ().mixedAdd(e[g].neg())):0===e[m].y.cmp(e[g].y.redNeg())?(y[1]=e[m].toJ().mixedAdd(e[g]),y[2]=e[m].add(e[g].neg())):(y[1]=e[m].toJ().mixedAdd(e[g]),y[2]=e[m].toJ().mixedAdd(e[g].neg()));var _=[-3,-1,-5,-7,0,7,5,1,3],v=s(r[m],r[g]);for(d=Math.max(v[0].length,d),f[m]=new Array(d),f[g]=new Array(d),l=0;l<d;l++){var b=0|v[0][l],w=0|v[1][l];f[m][l]=_[3*(b+1)+(w+1)],f[g][l]=0,h[m]=y}}else f[m]=o(r[m],c[m],this._bitLength),f[g]=o(r[g],c[g],this._bitLength),d=Math.max(f[m].length,d),d=Math.max(f[g].length,d)}var x=this.jpoint(null,null,null),E=this._wnafT4;for(a=d;a>=0;a--){for(var S=0;a>=0;){var M=!0;for(l=0;l<n;l++)E[l]=0|f[l][a],0!==E[l]&&(M=!1);if(!M)break;S++,a--}if(a>=0&&S++,x=x.dblp(S),a<0)break;for(l=0;l<n;l++){var T=E[l];0!==T&&(T>0?u=h[l][T-1>>1]:T<0&&(u=h[l][-T-1>>1].neg()),x="affine"===u.type?x.mixedAdd(u):x.add(u))}}for(a=0;a<n;a++)h[a]=null;return i?x:x.toP()},l.BasePoint=u,u.prototype.eq=function(){throw new Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},l.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1===2*r)return 6===t[0]?a(t[t.length-1]%2===0):7===t[0]&&a(t[t.length-1]%2===1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},u.prototype.encodeCompressed=function(t){return this.encode(t,!0)},u.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},u.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},u.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},u.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},u.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},u.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e}},function(t,e,r){var n=r(313),i=r(321),o=r(322),s=r(70),a=r(118),l=r(1).Buffer;function u(t){var e;"object"!==typeof t||l.isBuffer(t)||(e=t.passphrase,t=t.key),"string"===typeof t&&(t=l.from(t));var r,u,c=o(t,e),h=c.tag,f=c.data;switch(h){case"CERTIFICATE":u=n.certificate.decode(f,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(u||(u=n.PublicKey.decode(f,"der")),r=u.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(u.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return u.subjectPrivateKey=u.subjectPublicKey,{type:"ec",data:u};case"1.2.840.10040.4.1":return u.algorithm.params.pub_key=n.DSAparam.decode(u.subjectPublicKey.data,"der"),{type:"dsa",data:u.algorithm.params};default:throw new Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":f=function(t,e){var r=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=i[t.algorithm.decrypt.cipher.algo.join(".")],u=t.algorithm.decrypt.cipher.iv,c=t.subjectPrivateKey,h=parseInt(o.split("-")[1],10)/8,f=a.pbkdf2Sync(e,r,n,h,"sha1"),d=s.createDecipheriv(o,f,u),p=[];return p.push(d.update(c)),p.push(d.final()),l.concat(p)}(f=n.EncryptedPrivateKey.decode(f,"der"),e);case"PRIVATE KEY":switch(r=(u=n.PrivateKey.decode(f,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(u.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:u.algorithm.curve,privateKey:n.ECPrivateKey.decode(u.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return u.algorithm.params.priv_key=n.DSAparam.decode(u.subjectPrivateKey,"der"),{type:"dsa",params:u.algorithm.params};default:throw new Error("unknown key id "+r)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return{curve:(f=n.ECPrivateKey.decode(f,"der")).parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+h)}}t.exports=u,u.signature=n.signature},function(t,e,r){var n=r(2);function i(t,e){n.cipher.registerAlgorithm(t,(function(){return new n.des.Algorithm(t,e)}))}r(85),r(164),r(4),t.exports=n.des=n.des||{},n.des.startEncrypting=function(t,e,r,n){var i=p({key:t,output:r,decrypt:!1,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createEncryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!1,mode:e})},n.des.startDecrypting=function(t,e,r,n){var i=p({key:t,output:r,decrypt:!0,mode:n||(null===e?"ECB":"CBC")});return i.start(e),i},n.des.createDecryptionCipher=function(t,e){return p({key:t,output:null,decrypt:!0,mode:e})},n.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return d(r._keys,t,e,!1)},decrypt:function(t,e){return d(r._keys,t,e,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=n.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(t){for(var e,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],h=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=t.length()>8?3:1,y=[],_=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,b=0;b<g;b++){var w=t.getInt32(),x=t.getInt32();w^=(e=252645135&(w>>>4^x))<<4,w^=e=65535&((x^=e)>>>-16^w),w^=(e=858993459&(w>>>2^(x^=e<<-16)))<<2,w^=e=65535&((x^=e)>>>-16^w),w^=(e=1431655765&(w>>>1^(x^=e<<-16)))<<1,w^=e=16711935&((x^=e)>>>8^w),e=(w^=(e=1431655765&(w>>>1^(x^=e<<8)))<<1)<<8|(x^=e)>>>20&240,w=x<<24|x<<8&16711680|x>>>8&65280|x>>>24&240,x=e;for(var E=0;E<_.length;++E){_[E]?(w=w<<2|w>>>26,x=x<<2|x>>>26):(w=w<<1|w>>>27,x=x<<1|x>>>27),x&=-15;var S=r[(w&=-15)>>>28]|n[w>>>24&15]|i[w>>>20&15]|o[w>>>16&15]|s[w>>>12&15]|a[w>>>8&15]|l[w>>>4&15],M=u[x>>>28]|c[x>>>24&15]|h[x>>>20&15]|f[x>>>16&15]|d[x>>>12&15]|p[x>>>8&15]|m[x>>>4&15];e=65535&(M>>>16^S),y[v++]=S^e,y[v++]=M^e<<16}}return y}(e),this._init=!0}},i("DES-ECB",n.cipher.modes.ecb),i("DES-CBC",n.cipher.modes.cbc),i("DES-CFB",n.cipher.modes.cfb),i("DES-OFB",n.cipher.modes.ofb),i("DES-CTR",n.cipher.modes.ctr),i("3DES-ECB",n.cipher.modes.ecb),i("3DES-CBC",n.cipher.modes.cbc),i("3DES-CFB",n.cipher.modes.cfb),i("3DES-OFB",n.cipher.modes.ofb),i("3DES-CTR",n.cipher.modes.ctr);var o=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],s=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],l=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],c=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],h=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],f=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function d(t,e,r,n){var i,d,p=32===t.length?3:9;i=3===p?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var m=e[0],g=e[1];m^=(d=252645135&(m>>>4^g))<<4,m^=(d=65535&(m>>>16^(g^=d)))<<16,m^=d=858993459&((g^=d)>>>2^m),m^=d=16711935&((g^=d<<2)>>>8^m),m=(m^=(d=1431655765&(m>>>1^(g^=d<<8)))<<1)<<1|m>>>31,g=(g^=d)<<1|g>>>31;for(var y=0;y<p;y+=3){for(var _=i[y+1],v=i[y+2],b=i[y];b!=_;b+=v){var w=g^t[b],x=(g>>>4|g<<28)^t[b+1];d=m,m=g,g=d^(s[w>>>24&63]|l[w>>>16&63]|c[w>>>8&63]|f[63&w]|o[x>>>24&63]|a[x>>>16&63]|u[x>>>8&63]|h[63&x])}d=m,m=g,g=d}g=g>>>1|g<<31,g^=d=1431655765&((m=m>>>1|m<<31)>>>1^g),g^=(d=16711935&(g>>>8^(m^=d<<1)))<<8,g^=(d=858993459&(g>>>2^(m^=d)))<<2,g^=d=65535&((m^=d)>>>16^g),g^=d=252645135&((m^=d<<16)>>>4^g),m^=d<<4,r[0]=m,r[1]=g}function p(t){var e,r="DES-"+((t=t||{}).mode||"CBC").toUpperCase(),i=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var o=null;r instanceof n.util.ByteBuffer&&(o=r,r={}),(r=r||{}).output=o,r.iv=t,i.call(e,r)},e}},function(t,e,r){var n=r(2);if(r(15),r(55),r(24),r(171),r(172),r(11),r(4),"undefined"===typeof i)var i=n.jsbn.BigInteger;var o=n.util.isNodejs?r(88):null,s=n.asn1,a=n.util;n.pki=n.pki||{},t.exports=n.pki.rsa=n.rsa=n.rsa||{};var l=n.pki,u=[6,4,2,4,2,4,6,2],c={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},h={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},f={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},d=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},p={name:"DigestInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},m=function(t){var e;if(!(t.algorithm in l.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=l.oids[t.algorithm];var n=s.oidToDer(e).getBytes(),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),o=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);o.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,n)),o.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var a=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),s.toDer(i).getBytes()},g=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var o;e.dP||(e.dP=e.d.mod(e.p.subtract(i.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(i.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{o=new i(n.util.bytesToHex(n.random.getBytes(e.n.bitLength()/8)),16)}while(o.compareTo(e.n)>=0||!o.gcd(e.n).equals(i.ONE));for(var s=(t=t.multiply(o.modPow(e.e,e.n)).mod(e.n)).mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);s.compareTo(a)<0;)s=s.add(e.p);var l=s.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return l=l.multiply(o.modInverse(e.n)).mod(e.n)};function y(t,e,r){var i=n.util.createBuffer(),o=Math.ceil(e.n.bitLength()/8);if(t.length>o-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=o-11,s}i.putByte(0),i.putByte(r);var a,l=o-3-t.length;if(0===r||1===r){a=0===r?0:255;for(var u=0;u<l;++u)i.putByte(a)}else for(;l>0;){var c=0,h=n.random.getBytes(l);for(u=0;u<l;++u)0===(a=h.charCodeAt(u))?++c:i.putByte(a);l=c}return i.putByte(0),i.putBytes(t),i}function _(t,e,r,i){var o=Math.ceil(e.n.bitLength()/8),s=n.util.createBuffer(t),a=s.getByte(),l=s.getByte();if(0!==a||r&&0!==l&&1!==l||!r&&2!=l||r&&0===l&&"undefined"===typeof i)throw new Error("Encryption block is invalid.");var u=0;if(0===l){u=o-3-i;for(var c=0;c<u;++c)if(0!==s.getByte())throw new Error("Encryption block is invalid.")}else if(1===l)for(u=0;s.length()>1;){if(255!==s.getByte()){--s.read;break}++u}else if(2===l)for(u=0;s.length()>1;){if(0===s.getByte()){--s.read;break}++u}if(0!==s.getByte()||u!==o-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function v(t,e,r){"function"===typeof e&&(r=e,e={});var o={algorithm:{name:(e=e||{}).algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};function s(){a(t.pBits,(function(e,n){return e?r(e):(t.p=n,null!==t.q?u(e,t.q):void a(t.qBits,u))}))}function a(t,e){n.prime.generateProbablePrime(t,o,e)}function u(e,n){if(e)return r(e);if(t.q=n,t.p.compareTo(t.q)<0){var o=t.p;t.p=t.q,t.q=o}if(0!==t.p.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.p=null,void s();if(0!==t.q.subtract(i.ONE).gcd(t.e).compareTo(i.ONE))return t.q=null,void a(t.qBits,u);if(t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(i.ONE))return t.p=t.q=null,void s();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void a(t.qBits,u);var c=t.e.modInverse(t.phi);t.keys={privateKey:l.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:l.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}"prng"in e&&(o.prng=e.prng),s()}function b(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=n.util.hexToBytes(e);return r.length>1&&(0===r.charCodeAt(0)&&0===(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128===(128&r.charCodeAt(1)))?r.substr(1):r}function w(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function x(t){return n.util.isNodejs&&"function"===typeof o[t]}function E(t){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.crypto&&"object"===typeof a.globalScope.crypto.subtle&&"function"===typeof a.globalScope.crypto.subtle[t]}function S(t){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.msCrypto&&"object"===typeof a.globalScope.msCrypto.subtle&&"function"===typeof a.globalScope.msCrypto.subtle[t]}function M(t){for(var e=n.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}l.rsa.encrypt=function(t,e,r){var o,s=r,a=Math.ceil(e.n.bitLength()/8);!1!==r&&!0!==r?(s=2===r,o=y(t,e,r)):(o=n.util.createBuffer()).putBytes(t);for(var l=new i(o.toHex(),16),u=g(l,e,s).toString(16),c=n.util.createBuffer(),h=a-Math.ceil(u.length/2);h>0;)c.putByte(0),--h;return c.putBytes(n.util.hexToBytes(u)),c.getBytes()},l.rsa.decrypt=function(t,e,r,o){var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=s,a}var l=new i(n.util.createBuffer(t).toHex(),16);if(l.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var u=g(l,e,r).toString(16),c=n.util.createBuffer(),h=s-Math.ceil(u.length/2);h>0;)c.putByte(0),--h;return c.putBytes(n.util.hexToBytes(u)),!1!==o?_(c.getBytes(),e,r):c.getBytes()},l.rsa.createKeyPairGenerationState=function(t,e,r){"string"===typeof t&&(t=parseInt(t,10)),t=t||2048;var o,s=(r=r||{}).prng||n.random,a={nextBytes:function(t){for(var e=s.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},l=r.algorithm||"PRIMEINC";if("PRIMEINC"!==l)throw new Error("Invalid key generation algorithm: "+l);return(o={algorithm:l,state:0,bits:t,rng:a,eInt:e||65537,e:new i(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null}).e.fromInt(o.eInt),o},l.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new i(null);r.fromInt(30);for(var n,o=0,s=function(t,e){return t|e},a=+new Date,c=0;null===t.keys&&(e<=0||c<e);){if(0===t.state){var h=null===t.p?t.pBits:t.qBits,f=h-1;0===t.pqState?(t.num=new i(h,t.rng),t.num.testBit(f)||t.num.bitwiseTo(i.ONE.shiftLeft(f),s,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),o=0,++t.pqState):1===t.pqState?t.num.bitLength()>h?t.pqState=0:t.num.isProbablePrime(w(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(u[o++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(i.ONE).gcd(t.e).compareTo(i.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(i.ONE),t.q1=t.q.subtract(i.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(i.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var d=t.e.modInverse(t.phi);t.keys={privateKey:l.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:l.rsa.setPublicKey(t.n,t.e)}}c+=(n=+new Date)-a,a=n}return null!==t.keys},l.rsa.generateKeyPair=function(t,e,r,i){if(1===arguments.length?"object"===typeof t?(r=t,t=void 0):"function"===typeof t&&(i=t,t=void 0):2===arguments.length?"number"===typeof t?"function"===typeof e?(i=e,e=void 0):"number"!==typeof e&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):3===arguments.length&&("number"===typeof e?"function"===typeof r&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(i){if(x("generateKeyPair"))return o.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(t,e,r){if(t)return i(t);i(null,{privateKey:l.privateKeyFromPem(r),publicKey:l.publicKeyFromPem(e)})}));if(E("generateKey")&&E("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:M(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(t){return a.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)})).then(void 0,(function(t){i(t)})).then((function(t){if(t){var e=l.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(t)));i(null,{privateKey:e,publicKey:l.setRsaPublicKey(e.n,e.e)})}}));if(S("generateKey")&&S("exportKey")){var u=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:M(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return u.oncomplete=function(t){var e=t.target.result,r=a.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);r.oncomplete=function(t){var e=t.target.result,r=l.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(e)));i(null,{privateKey:r,publicKey:l.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){i(t)}},void(u.onerror=function(t){i(t)})}}else if(x("generateKeyPairSync")){var c=o.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:l.privateKeyFromPem(c.privateKey),publicKey:l.publicKeyFromPem(c.publicKey)}}var h=l.rsa.createKeyPairGenerationState(t,e,r);if(!i)return l.rsa.stepKeyPairGenerationState(h,0),h.keys;v(h,r,i)},l.setRsaPublicKey=l.rsa.setPublicKey=function(t,e){var r={n:t,e:e,encrypt:function(t,e,i){if("string"===typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,r){return y(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return n.pkcs1.encode_rsa_oaep(e,t,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"===typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var o=e.encode(t,r,!0);return l.rsa.encrypt(o,r,!0)},verify:function(t,e,i,o){"string"===typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),void 0===o&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===i?i={verify:function(t,e){e=_(e,r,!0);var i=s.fromDer(e,{parseAllBytes:o._parseAllDigestBytes}),a={},l=[];if(!s.validate(i,p,a,l))throw(u=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=l,u;var u,c=s.derToOid(a.algorithmIdentifier);if(c!==n.oids.md2&&c!==n.oids.md5&&c!==n.oids.sha1&&c!==n.oids.sha224&&c!==n.oids.sha256&&c!==n.oids.sha384&&c!==n.oids.sha512&&c!==n.oids["sha512-224"]&&c!==n.oids["sha512-256"])throw(u=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=c,u;if((c===n.oids.md2||c===n.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return t===a.digest}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(t,e){return t===(e=_(e,r,!0))}});var a=l.rsa.decrypt(e,r,!0,!1);return i.verify(t,a,r.n.bitLength())}};return r},l.setRsaPrivateKey=l.rsa.setPrivateKey=function(t,e,r,i,o,s,a,u){var c={n:t,e:e,d:r,p:i,q:o,dP:s,dQ:a,qInv:u,decrypt:function(t,e,r){"string"===typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var i=l.rsa.decrypt(t,c,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:_};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return n.pkcs1.decode_rsa_oaep(e,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(i,c,!1)},sign:function(t,e){var r=!1;"string"===typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:m},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var n=e.encode(t,c.n.bitLength());return l.rsa.encrypt(n,c,r)}};return c},l.wrapRsaPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(l.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(t).getBytes())])},l.privateKeyFromAsn1=function(t){var e,r,o,a,u,f,d,p,m={},g=[];if(s.validate(t,c,m,g)&&(t=s.fromDer(n.util.createBuffer(m.privateKey))),m={},g=[],!s.validate(t,h,m,g)){var y=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw y.errors=g,y}return e=n.util.createBuffer(m.privateKeyModulus).toHex(),r=n.util.createBuffer(m.privateKeyPublicExponent).toHex(),o=n.util.createBuffer(m.privateKeyPrivateExponent).toHex(),a=n.util.createBuffer(m.privateKeyPrime1).toHex(),u=n.util.createBuffer(m.privateKeyPrime2).toHex(),f=n.util.createBuffer(m.privateKeyExponent1).toHex(),d=n.util.createBuffer(m.privateKeyExponent2).toHex(),p=n.util.createBuffer(m.privateKeyCoefficient).toHex(),l.setRsaPrivateKey(new i(e,16),new i(r,16),new i(o,16),new i(a,16),new i(u,16),new i(f,16),new i(d,16),new i(p,16))},l.privateKeyToAsn1=l.privateKeyToRSAPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(t.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(t.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(t.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(t.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(t.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(t.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(t.qInv))])},l.publicKeyFromAsn1=function(t){var e={},r=[];if(s.validate(t,d,e,r)){var o,a=s.derToOid(e.publicKeyOid);if(a!==l.oids.rsaEncryption)throw(o=new Error("Cannot read public key. Unknown OID.")).oid=a,o;t=e.rsaPublicKey}if(r=[],!s.validate(t,f,e,r))throw(o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,o;var u=n.util.createBuffer(e.publicKeyModulus).toHex(),c=n.util.createBuffer(e.publicKeyExponent).toHex();return l.setRsaPublicKey(new i(u,16),new i(c,16))},l.publicKeyToAsn1=l.publicKeyToSubjectPublicKeyInfo=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(l.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[l.publicKeyToRSAPublicKey(t)])])},l.publicKeyToRSAPublicKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(t.e))])}},function(t,e,r){var n,i=r(2);t.exports=i.jsbn=i.jsbn||{};function o(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function s(){return new o(null)}function a(t,e,r,n,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var l=16383&this.data[t],u=this.data[t++]>>14,c=a*l+u*s;i=((l=s*l+((16383&c)<<14)+r.data[n]+i)>>28)+(c>>14)+a*u,r.data[n++]=268435455&l}return i}i.jsbn.BigInteger=o,"undefined"===typeof navigator?(o.prototype.am=a,n=28):"Microsoft Internet Explorer"==navigator.appName?(o.prototype.am=function(t,e,r,n,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var l=32767&this.data[t],u=this.data[t++]>>15,c=a*l+u*s;i=((l=s*l+((32767&c)<<15)+r.data[n]+(1073741823&i))>>>30)+(c>>>15)+a*u+(i>>>30),r.data[n++]=1073741823&l}return i},n=30):"Netscape"!=navigator.appName?(o.prototype.am=function(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=67108863&s}return i},n=26):(o.prototype.am=a,n=28),o.prototype.DB=n,o.prototype.DM=(1<<n)-1,o.prototype.DV=1<<n;o.prototype.FV=Math.pow(2,52),o.prototype.F1=52-n,o.prototype.F2=2*n-52;var l,u,c=new Array;for(l="0".charCodeAt(0),u=0;u<=9;++u)c[l++]=u;for(l="a".charCodeAt(0),u=10;u<36;++u)c[l++]=u;for(l="A".charCodeAt(0),u=10;u<36;++u)c[l++]=u;function h(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function f(t,e){var r=c[t.charCodeAt(e)];return null==r?-1:r}function d(t){var e=s();return e.fromInt(t),e}function p(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function m(t){this.m=t}function g(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function y(t,e){return t&e}function _(t,e){return t|e}function v(t,e){return t^e}function b(t,e){return t&~e}function w(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function x(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function E(){}function S(t){return t}function M(t){this.r2=s(),this.q3=s(),o.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}m.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},m.prototype.revert=function(t){return t},m.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},m.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},m.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},g.prototype.convert=function(t){var e=s();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(o.ZERO)>0&&this.m.subTo(e,e),e},g.prototype.revert=function(t){var e=s();return t.copyTo(e),this.reduce(e),e},g.prototype.reduce=function(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},g.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},g.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},o.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s},o.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0},o.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;--n>=0;){var a=8==r?255&t[n]:f(t,n);a<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==s?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&o.ZERO.subTo(this,this)},o.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t},o.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s},o.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s},o.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+s+1]=this.data[r]>>i|a,a=(this.data[r]&o)<<n;for(r=s-1;r>=0;--r)e.data[r]=0;e.data[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},o.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}},o.prototype.subTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()},o.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&o.ZERO.subTo(e,e)},o.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()},o.prototype.divRemTo=function(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=s());var a=s(),l=this.s,u=t.s,c=this.DB-p(n.data[n.t-1]);c>0?(n.lShiftTo(c,a),i.lShiftTo(c,r)):(n.copyTo(a),i.copyTo(r));var h=a.t,f=a.data[h-1];if(0!=f){var d=f*(1<<this.F1)+(h>1?a.data[h-2]>>this.F2:0),m=this.FV/d,g=(1<<this.F1)/d,y=1<<this.F2,_=r.t,v=_-h,b=null==e?s():e;for(a.dlShiftTo(v,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),o.ONE.dlShiftTo(h,b),b.subTo(a,a);a.t<h;)a.data[a.t++]=0;for(;--v>=0;){var w=r.data[--_]==f?this.DM:Math.floor(r.data[_]*m+(r.data[_-1]+y)*g);if((r.data[_]+=a.am(0,w,r,v,0,h))<w)for(a.dlShiftTo(v,b),r.subTo(b,r);r.data[_]<--w;)r.subTo(b,r)}null!=e&&(r.drShiftTo(h,e),l!=u&&o.ZERO.subTo(e,e)),r.t=h,r.clamp(),c>0&&r.rShiftTo(c,r),l<0&&o.ZERO.subTo(r,r)}}},o.prototype.invDigit=function(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},o.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},o.prototype.exp=function(t,e){if(t>4294967295||t<1)return o.ONE;var r=s(),n=s(),i=e.convert(this),a=p(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var l=r;r=n,n=l}return e.revert(r)},o.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(r=this.data[s]>>a)>0&&(i=!0,o=h(r));s>=0;)a<e?(r=(this.data[s]&(1<<a)-1)<<e-a,r|=this.data[--s]>>(a+=this.DB-e)):(r=this.data[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=h(r));return i?o:"0"},o.prototype.negate=function(){var t=s();return o.ZERO.subTo(this,t),t},o.prototype.abs=function(){return this.s<0?this.negate():this},o.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this.data[r]-t.data[r]))return e;return 0},o.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+p(this.data[this.t-1]^this.s&this.DM)},o.prototype.mod=function(t){var e=s();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(o.ZERO)>0&&t.subTo(e,e),e},o.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new m(e):new g(e),this.exp(t,r)},o.ZERO=d(0),o.ONE=d(1),E.prototype.convert=S,E.prototype.revert=S,E.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},E.prototype.sqrTo=function(t,e){t.squareTo(e)},M.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=s();return t.copyTo(e),this.reduce(e),e},M.prototype.revert=function(t){return t},M.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},M.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},M.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var T=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],A=(1<<26)/T[T.length-1];o.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},o.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=d(r),i=s(),o=s(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a},o.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,a=0,l=0;l<t.length;++l){var u=f(t,l);u<0?"-"==t.charAt(l)&&0==this.signum()&&(i=!0):(a=e*a+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),i&&o.ZERO.subTo(this,this)},o.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(o.ONE.shiftLeft(t-1),_,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(o.ONE.shiftLeft(t-1),this);else{var n=new Array,i=7&t;n.length=1+(t>>3),e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},o.prototype.bitwiseTo=function(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},o.prototype.changeBit=function(t,e){var r=o.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},o.prototype.addTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()},o.prototype.dMultiply=function(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},o.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}},o.prototype.multiplyLowerTo=function(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()},o.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},o.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r},o.prototype.millerRabin=function(t){var e=this.subtract(o.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n,i=e.shiftRight(r),s={nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}},a=0;a<t;++a){do{n=new o(this.bitLength(),s)}while(n.compareTo(o.ONE)<=0||n.compareTo(e)>=0);var l=n.modPow(i,this);if(0!=l.compareTo(o.ONE)&&0!=l.compareTo(e)){for(var u=1;u++<r&&0!=l.compareTo(e);)if(0==(l=l.modPowInt(2,this)).compareTo(o.ONE))return!1;if(0!=l.compareTo(e))return!1}}return!0},o.prototype.clone=function(){var t=s();return this.copyTo(t),t},o.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},o.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},o.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},o.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},o.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},o.prototype.equals=function(t){return 0==this.compareTo(t)},o.prototype.min=function(t){return this.compareTo(t)<0?this:t},o.prototype.max=function(t){return this.compareTo(t)>0?this:t},o.prototype.and=function(t){var e=s();return this.bitwiseTo(t,y,e),e},o.prototype.or=function(t){var e=s();return this.bitwiseTo(t,_,e),e},o.prototype.xor=function(t){var e=s();return this.bitwiseTo(t,v,e),e},o.prototype.andNot=function(t){var e=s();return this.bitwiseTo(t,b,e),e},o.prototype.not=function(){for(var t=s(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t},o.prototype.shiftLeft=function(t){var e=s();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},o.prototype.shiftRight=function(t){var e=s();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},o.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+w(this.data[t]);return this.s<0?this.t*this.DB:-1},o.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=x(this.data[r]^e);return t},o.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)},o.prototype.setBit=function(t){return this.changeBit(t,_)},o.prototype.clearBit=function(t){return this.changeBit(t,b)},o.prototype.flipBit=function(t){return this.changeBit(t,v)},o.prototype.add=function(t){var e=s();return this.addTo(t,e),e},o.prototype.subtract=function(t){var e=s();return this.subTo(t,e),e},o.prototype.multiply=function(t){var e=s();return this.multiplyTo(t,e),e},o.prototype.divide=function(t){var e=s();return this.divRemTo(t,e,null),e},o.prototype.remainder=function(t){var e=s();return this.divRemTo(t,null,e),e},o.prototype.divideAndRemainder=function(t){var e=s(),r=s();return this.divRemTo(t,e,r),new Array(e,r)},o.prototype.modPow=function(t,e){var r,n,i=t.bitLength(),o=d(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new m(e):e.isEven()?new M(e):new g(e);var a=new Array,l=3,u=r-1,c=(1<<r)-1;if(a[1]=n.convert(this),r>1){var h=s();for(n.sqrTo(a[1],h);l<=c;)a[l]=s(),n.mulTo(h,a[l-2],a[l]),l+=2}var f,y,_=t.t-1,v=!0,b=s();for(i=p(t.data[_])-1;_>=0;){for(i>=u?f=t.data[_]>>i-u&c:(f=(t.data[_]&(1<<i+1)-1)<<u-i,_>0&&(f|=t.data[_-1]>>this.DB+i-u)),l=r;0==(1&f);)f>>=1,--l;if((i-=l)<0&&(i+=this.DB,--_),v)a[f].copyTo(o),v=!1;else{for(;l>1;)n.sqrTo(o,b),n.sqrTo(b,o),l-=2;l>0?n.sqrTo(o,b):(y=o,o=b,b=y),n.mulTo(b,a[f],o)}for(;_>=0&&0==(t.data[_]&1<<i);)n.sqrTo(o,b),y=o,o=b,b=y,--i<0&&(i=this.DB-1,--_)}return n.revert(o)},o.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return o.ZERO;for(var r=t.clone(),n=this.clone(),i=d(1),s=d(0),a=d(0),l=d(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?(a.isEven()&&l.isEven()||(a.addTo(this,a),l.subTo(t,l)),a.rShiftTo(1,a)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),s.subTo(l,s)):(n.subTo(r,n),e&&a.subTo(i,a),l.subTo(s,l))}return 0!=n.compareTo(o.ONE)?o.ZERO:l.compareTo(t)>=0?l.subtract(t):l.signum()<0?(l.addTo(t,l),l.signum()<0?l.add(t):l):l},o.prototype.pow=function(t){return this.exp(t,new E)},o.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},o.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=T[T.length-1]){for(e=0;e<T.length;++e)if(r.data[0]==T[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<T.length;){for(var n=T[e],i=e+1;i<T.length&&n<A;)n*=T[i++];for(n=r.modInt(n);e<i;)if(n%T[e++]==0)return!1}return r.millerRabin(t)}},function(t,e,r){const n=r(46);t.exports={getFieldMask:function(t){return n.keys(t).join(",")},columnToLetter:function(t){let e,r="",n=t;for(;n>0;)e=(n-1)%26,r=String.fromCharCode(e+65)+r,n=(n-e-1)/26;return r},letterToColumn:function(t){let e=0;const{length:r}=t;for(let n=0;n<r;n++)e+=(t.charCodeAt(n)-64)*26**(r-n-1);return e}}},function(t,e,r){"use strict";t.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.requestTimeout=e.resetIsAvailableCache=e.isAvailable=e.project=e.instance=e.HEADERS=e.HEADER_VALUE=e.HEADER_NAME=e.SECONDARY_HOST_ADDRESS=e.HOST_ADDRESS=e.BASE_PATH=void 0;const n=r(59),i=r(235);function o(t){return t||(t=Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).GCE_METADATA_IP||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).GCE_METADATA_HOST||e.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(e.BASE_PATH,t).href}function s(t){Object.keys(t).forEach((t=>{switch(t){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${t}' is not a valid configuration option.`)}}))}async function a(t,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof(r=r||{})&&(r={property:r});let h="";"object"===typeof r&&r.property&&(h="/"+r.property),s(r);try{const s=u?l:n.request,d=await s({url:`${o()}/${t}${h}`,headers:Object.assign({},e.HEADERS,r.headers),retryConfig:{noResponseRetries:a},params:r.params,responseType:"text",timeout:c()});if(d.headers[e.HEADER_NAME.toLowerCase()]!==e.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${e.HEADER_NAME} header.`);if(!d.data)throw new Error("Invalid response from the metadata service");if("string"===typeof d.data)try{return i.parse(d.data)}catch(f){}return d.data}catch(d){throw d.response&&200!==d.response.status&&(d.message=`Unsuccessful response status code. ${d.message}`),d}}async function l(t){const r={...t,url:t.url.replace(o(),o(e.SECONDARY_HOST_ADDRESS))};let i=!1;const s=n.request(t).then((t=>(i=!0,t))).catch((t=>{if(i)return a;throw i=!0,t})),a=n.request(r).then((t=>(i=!0,t))).catch((t=>{if(i)return s;throw i=!0,t}));return Promise.race([s,a])}let u;function c(){return Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).K_SERVICE||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).FUNCTION_NAME?0:3e3}e.BASE_PATH="/computeMetadata/v1",e.HOST_ADDRESS="http://169.254.169.254",e.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",e.HEADER_NAME="Metadata-Flavor",e.HEADER_VALUE="Google",e.HEADERS=Object.freeze({[e.HEADER_NAME]:e.HEADER_VALUE}),e.instance=function(t){return a("instance",t)},e.project=function(t){return a("project",t)},e.isAvailable=async function(){try{return void 0===u&&(u=a("instance",void 0,Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).DETECT_GCP_RETRIES?Number(Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).DETECT_GCP_RETRIES):0,!(Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).GCE_METADATA_IP||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).GCE_METADATA_HOST))),await u,!0}catch(e){if(Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).DEBUG_AUTH&&console.info(e),"request-timeout"===e.type)return!1;if(e.response&&404===e.response.status)return!1;if((!e.response||404!==e.response.status)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code))){let r="UNKNOWN";e.code&&(r=e.code),t.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}},e.resetIsAvailableCache=function(){u=void 0},e.requestTimeout=c}).call(this,r(5))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.request=e.instance=e.Gaxios=void 0;const n=r(205);Object.defineProperty(e,"Gaxios",{enumerable:!0,get:function(){return n.Gaxios}});var i=r(101);Object.defineProperty(e,"GaxiosError",{enumerable:!0,get:function(){return i.GaxiosError}}),e.instance=new n.Gaxios,e.request=async function(t){return e.instance.request(t)}},function(t,e,r){var n=r(3),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),o(i,s),s.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";(function(e,n,i){var o=r(47);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=_;var a,l=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:o.nextTick;_.WritableState=y;var u=Object.create(r(36));u.inherits=r(0);var c={deprecate:r(62)},h=r(97),f=r(60).Buffer,d=i.Uint8Array||function(){};var p,m=r(98);function g(){}function y(t,e){a=a||r(19),t=t||{};var n=e instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,u=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(u||0===u)?u:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(o.nextTick(i,n),o.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),S(t,e))}(t,r,n,e,i);else{var s=x(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||w(t,r),n?l(b,t,r,s,i):b(t,r,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function _(t){if(a=a||r(19),!p.call(_,this)&&!(this instanceof a))return new _(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),h.call(this)}function v(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),S(t,e)}function w(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,l=!0;r;)i[a]=r,r.isBuf||(l=!1),r=r.next,a+=1;i.allBuffers=l,v(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,h=r.callback;if(v(t,e,!1,e.objectMode?1:u.length,u,c,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final((function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),S(t,e)}))}function S(t,e){var r=x(e);return r&&(!function(t,e){e.prefinished||e.finalCalled||("function"===typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(E,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}u.inherits(_,h),y.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(y.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===_&&(t&&t._writableState instanceof y)}})):p=function(t){return t instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(t,e,r){var n,i=this._writableState,s=!1,a=!i.objectMode&&(n=t,f.isBuffer(n)||n instanceof d);return a&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"===typeof e&&(r=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!==typeof r&&(r=g),i.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),o.nextTick(e,r)}(this,r):(a||function(t,e,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"===typeof r||void 0===r||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(n,s),i=!1),i}(this,i,t,r))&&(i.pendingcb++,s=function(t,e,r,n,i,o){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=f.from(e,r));return e}(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else v(t,e,!1,a,n,i,o);return l}(this,i,a,t,e,r)),s},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},_.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(t,e,r){var n=this._writableState;"function"===typeof t?(r=t,t=null,e=null):"function"===typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,S(t,e),r&&(e.finished?o.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,r(5),r(99).setImmediate,r(6))},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,r(6))},function(t,e,r){"use strict";e.decode=e.parse=r(220),e.encode=e.stringify=r(221)},function(t,e,r){(function(n){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(n++,"%c"===t&&(i=n))})),e.splice(i,0,r)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(r){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(r){}!t&&"undefined"!==typeof n&&"env"in n&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).DEBUG);return t},e.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=r(230)(e);const{formatters:i}=t.exports;i.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(5))},function(t,e,r){"use strict";var n=r(0),i=r(106),o=r(1).Buffer,s=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function l(t,e){return t<<e|t>>>32-e}function u(t,e,r,n,i,o,s){return l(t+(e&r|~e&n)+i+o|0,s)+e|0}function c(t,e,r,n,i,o,s){return l(t+(e&n|r&~n)+i+o|0,s)+e|0}function h(t,e,r,n,i,o,s){return l(t+(e^r^n)+i+o|0,s)+e|0}function f(t,e,r,n,i,o,s){return l(t+(r^(e|~n))+i+o|0,s)+e|0}n(a,i),a.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var r=this._a,n=this._b,i=this._c,o=this._d;r=u(r,n,i,o,t[0],3614090360,7),o=u(o,r,n,i,t[1],3905402710,12),i=u(i,o,r,n,t[2],606105819,17),n=u(n,i,o,r,t[3],3250441966,22),r=u(r,n,i,o,t[4],4118548399,7),o=u(o,r,n,i,t[5],1200080426,12),i=u(i,o,r,n,t[6],2821735955,17),n=u(n,i,o,r,t[7],4249261313,22),r=u(r,n,i,o,t[8],1770035416,7),o=u(o,r,n,i,t[9],2336552879,12),i=u(i,o,r,n,t[10],4294925233,17),n=u(n,i,o,r,t[11],2304563134,22),r=u(r,n,i,o,t[12],1804603682,7),o=u(o,r,n,i,t[13],4254626195,12),i=u(i,o,r,n,t[14],2792965006,17),r=c(r,n=u(n,i,o,r,t[15],1236535329,22),i,o,t[1],4129170786,5),o=c(o,r,n,i,t[6],3225465664,9),i=c(i,o,r,n,t[11],643717713,14),n=c(n,i,o,r,t[0],3921069994,20),r=c(r,n,i,o,t[5],3593408605,5),o=c(o,r,n,i,t[10],38016083,9),i=c(i,o,r,n,t[15],3634488961,14),n=c(n,i,o,r,t[4],3889429448,20),r=c(r,n,i,o,t[9],568446438,5),o=c(o,r,n,i,t[14],3275163606,9),i=c(i,o,r,n,t[3],4107603335,14),n=c(n,i,o,r,t[8],1163531501,20),r=c(r,n,i,o,t[13],2850285829,5),o=c(o,r,n,i,t[2],4243563512,9),i=c(i,o,r,n,t[7],1735328473,14),r=h(r,n=c(n,i,o,r,t[12],2368359562,20),i,o,t[5],4294588738,4),o=h(o,r,n,i,t[8],2272392833,11),i=h(i,o,r,n,t[11],1839030562,16),n=h(n,i,o,r,t[14],4259657740,23),r=h(r,n,i,o,t[1],2763975236,4),o=h(o,r,n,i,t[4],1272893353,11),i=h(i,o,r,n,t[7],4139469664,16),n=h(n,i,o,r,t[10],3200236656,23),r=h(r,n,i,o,t[13],681279174,4),o=h(o,r,n,i,t[0],3936430074,11),i=h(i,o,r,n,t[3],3572445317,16),n=h(n,i,o,r,t[6],76029189,23),r=h(r,n,i,o,t[9],3654602809,4),o=h(o,r,n,i,t[12],3873151461,11),i=h(i,o,r,n,t[15],530742520,16),r=f(r,n=h(n,i,o,r,t[2],3299628645,23),i,o,t[0],4096336452,6),o=f(o,r,n,i,t[7],1126891415,10),i=f(i,o,r,n,t[14],2878612391,15),n=f(n,i,o,r,t[5],4237533241,21),r=f(r,n,i,o,t[12],1700485571,6),o=f(o,r,n,i,t[3],2399980690,10),i=f(i,o,r,n,t[10],4293915773,15),n=f(n,i,o,r,t[1],2240044497,21),r=f(r,n,i,o,t[8],1873313359,6),o=f(o,r,n,i,t[15],4264355552,10),i=f(i,o,r,n,t[6],2734768916,15),n=f(n,i,o,r,t[13],1309151649,21),r=f(r,n,i,o,t[4],4149444226,6),o=f(o,r,n,i,t[11],3174756917,10),i=f(i,o,r,n,t[2],718787259,15),n=f(n,i,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=a},function(t,e,r){"use strict";var n=r(28).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,r,o){if("function"===typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(o||i);var s=r.readable||!1!==r.readable&&e.readable,a=r.writable||!1!==r.writable&&e.writable,l=function(){e.writable||c()},u=e._writableState&&e._writableState.finished,c=function(){a=!1,u=!0,s||o.call(e)},h=e._readableState&&e._readableState.endEmitted,f=function(){s=!1,h=!0,a||o.call(e)},d=function(t){o.call(e,t)},p=function(){var t;return s&&!h?(e._readableState&&e._readableState.ended||(t=new n),o.call(e,t)):a&&!u?(e._writableState&&e._writableState.ended||(t=new n),o.call(e,t)):void 0},m=function(){e.req.on("finish",c)};return!function(t){return t.setHeader&&"function"===typeof t.abort}(e)?a&&!e._writableState&&(e.on("end",l),e.on("close",l)):(e.on("complete",c),e.on("abort",p),e.req?m():e.on("request",m)),e.on("end",f),e.on("finish",c),!1!==r.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",c),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",c),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}},function(t,e,r){"use strict";var n=r(3).Buffer,i=r(0),o=r(106),s=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function d(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function m(t,e,r,n,i,o,s,a){return p(t+(e^r^n)+o+s|0,a)+i|0}function g(t,e,r,n,i,o,s,a){return p(t+(e&r|~e&n)+o+s|0,a)+i|0}function y(t,e,r,n,i,o,s,a){return p(t+((e|~r)^n)+o+s|0,a)+i|0}function _(t,e,r,n,i,o,s,a){return p(t+(e&n|r&~n)+o+s|0,a)+i|0}function v(t,e,r,n,i,o,s,a){return p(t+(e^(r|~n))+o+s|0,a)+i|0}i(d,o),d.prototype._update=function(){for(var t=s,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,d=0|this._e,b=0|this._a,w=0|this._b,x=0|this._c,E=0|this._d,S=0|this._e,M=0;M<80;M+=1){var T,A;M<16?(T=m(r,n,i,o,d,t[a[M]],h[0],u[M]),A=v(b,w,x,E,S,t[l[M]],f[0],c[M])):M<32?(T=g(r,n,i,o,d,t[a[M]],h[1],u[M]),A=_(b,w,x,E,S,t[l[M]],f[1],c[M])):M<48?(T=y(r,n,i,o,d,t[a[M]],h[2],u[M]),A=y(b,w,x,E,S,t[l[M]],f[2],c[M])):M<64?(T=_(r,n,i,o,d,t[a[M]],h[3],u[M]),A=g(b,w,x,E,S,t[l[M]],f[3],c[M])):(T=v(r,n,i,o,d,t[a[M]],h[4],u[M]),A=m(b,w,x,E,S,t[l[M]],f[4],c[M])),r=d,d=o,o=p(i,10),i=n,n=T,b=S,S=E,E=p(x,10),x=w,w=A}var C=this._b+i+E|0;this._b=this._c+o+S|0,this._c=this._d+d+b|0,this._d=this._e+r+w|0,this._e=this._a+n+x|0,this._a=C},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=n.alloc?n.alloc(20):new n(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=d},function(t,e,r){(e=t.exports=function(t){t=t.toLowerCase();var r=e[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r}).sha=r(250),e.sha1=r(251),e.sha224=r(252),e.sha256=r(113),e.sha384=r(253),e.sha512=r(114)},function(t,e,r){"use strict";var n=r(8);function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var r=Math.min(this.buffer.length-this.bufferOff,t.length-e),n=0;n<r;n++)this.buffer[this.bufferOff+n]=t[e+n];return this.bufferOff+=r,r},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,r=0,n=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,i,r),r+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},i.prototype._updateDecrypt=function(t){for(var e=0,r=0,n=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)e+=this._buffer(t,e),r+=this._flushBuffer(i,r);return e+=this._buffer(t,e),i},i.prototype.final=function(t){var e,r;return t&&(e=this.update(t)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(r):r},i.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,e,r){var n=r(266),i=r(274),o=r(127);e.createCipher=e.Cipher=n.createCipher,e.createCipheriv=e.Cipheriv=n.createCipheriv,e.createDecipher=e.Decipher=i.createDecipher,e.createDecipheriv=e.Decipheriv=i.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},function(t,e,r){var n={ECB:r(267),CBC:r(268),CFB:r(269),CFB8:r(270),CFB1:r(271),OFB:r(272),CTR:r(125),GCM:r(125)},i=r(127);for(var o in i)i[o].module=n[i[o].mode];t.exports=i},function(t,e,r){var n;function i(t){this.rand=t}if(t.exports=function(t){return n||(n=new i(null)),n.generate(t)},t.exports.Rand=i,i.prototype.generate=function(t){return this._rand(t)},i.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"===typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"===typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=r(280);if("function"!==typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(t){return o.randomBytes(t)}}catch(s){}},function(t,e,r){"use strict";var n=r(31).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,r,o){if("function"===typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(o||i);var s=r.readable||!1!==r.readable&&e.readable,a=r.writable||!1!==r.writable&&e.writable,l=function(){e.writable||c()},u=e._writableState&&e._writableState.finished,c=function(){a=!1,u=!0,s||o.call(e)},h=e._readableState&&e._readableState.endEmitted,f=function(){s=!1,h=!0,a||o.call(e)},d=function(t){o.call(e,t)},p=function(){var t;return s&&!h?(e._readableState&&e._readableState.ended||(t=new n),o.call(e,t)):a&&!u?(e._writableState&&e._writableState.ended||(t=new n),o.call(e,t)):void 0},m=function(){e.req.on("finish",c)};return!function(t){return t.setHeader&&"function"===typeof t.abort}(e)?a&&!e._writableState&&(e.on("end",l),e.on("close",l)):(e.on("complete",c),e.on("abort",p),e.req?m():e.on("request",m)),e.on("end",f),e.on("finish",c),!1!==r.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",c),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",c),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}},function(t,e,r){(function(e){var n=r(75),i=r(27);function o(t){var e,r=t.modulus.byteLength();do{e=new n(i(r))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function s(t,r){var i=function(t){var e=o(t);return{blinder:e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(r),s=r.modulus.byteLength(),a=new n(t).mul(i.blinder).umod(r.modulus),l=a.toRed(n.mont(r.prime1)),u=a.toRed(n.mont(r.prime2)),c=r.coefficient,h=r.prime1,f=r.prime2,d=l.redPow(r.exponent1).fromRed(),p=u.redPow(r.exponent2).fromRed(),m=d.isub(p).imul(c).umod(h).imul(f);return p.iadd(m).imul(i.unblinder).umod(r.modulus).toArrayLike(e,"be",s)}s.getr=o,t.exports=s}).call(this,r(3).Buffer)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(293).Buffer}catch(C){}function a(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function l(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,i){for(var o=0,s=0,a=Math.min(t.length,r),l=e;l<a;l++){var u=t.charCodeAt(l)-48;o*=i,s=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&s<i,"Invalid character"),o+=s}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,l=0,c=r;c<a;c+=n)l=u(t,c,c+n,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var h=1;for(l=u(t,c,t.length,e),c=0;c<s;c++)h*=e;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){c(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(C){o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),r=0!==o||s!==this.length-1?f[6-l.length]+l+r:l+r}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=d[t],c=p[t];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(c).toString(t);r=(h=h.idivn(c)).isZero()?m+r:f[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(s,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function m(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,l=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var c=l>>>26,h=67108863&l,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;c+=(s=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&s}r.words[u]=0|h,l=0|c}return 0!==l?r.words[u]=0|l:r.length--,r._strip()}o.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,r){var n,i,o,s=t.words,a=e.words,l=r.words,u=0,c=0|s[0],h=8191&c,f=c>>>13,d=0|s[1],p=8191&d,m=d>>>13,g=0|s[2],y=8191&g,_=g>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],E=8191&x,S=x>>>13,M=0|s[5],T=8191&M,A=M>>>13,C=0|s[6],I=8191&C,k=C>>>13,R=0|s[7],B=8191&R,P=R>>>13,D=0|s[8],L=8191&D,O=D>>>13,N=0|s[9],z=8191&N,U=N>>>13,j=0|a[0],F=8191&j,V=j>>>13,G=0|a[1],q=8191&G,K=G>>>13,W=0|a[2],Z=8191&W,H=W>>>13,Q=0|a[3],X=8191&Q,Y=Q>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],lt=8191&at,ut=at>>>13,ct=0|a[8],ht=8191&ct,ft=ct>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(u+(n=Math.imul(h,F))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,V))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,V))+Math.imul(m,F)|0,o=Math.imul(m,V);var yt=(u+(n=n+Math.imul(h,q)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,q)|0))<<13)|0;u=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,F),i=(i=Math.imul(y,V))+Math.imul(_,F)|0,o=Math.imul(_,V),n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,K)|0;var _t=(u+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(b,F),i=(i=Math.imul(b,V))+Math.imul(w,F)|0,o=Math.imul(w,V),n=n+Math.imul(y,q)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,K)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var vt=(u+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,X)|0))<<13)|0;u=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,V))+Math.imul(S,F)|0,o=Math.imul(S,V),n=n+Math.imul(b,q)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Y)|0;var bt=(u+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(T,F),i=(i=Math.imul(T,V))+Math.imul(A,F)|0,o=Math.imul(A,V),n=n+Math.imul(E,q)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,K)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(u+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,V))+Math.imul(k,F)|0,o=Math.imul(k,V),n=n+Math.imul(T,q)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,K)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,X)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(u+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,V))+Math.imul(P,F)|0,o=Math.imul(P,V),n=n+Math.imul(I,q)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,K)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,Y)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(h,lt)|0)|0)+((8191&(i=(i=i+Math.imul(h,ut)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(L,F),i=(i=Math.imul(L,V))+Math.imul(O,F)|0,o=Math.imul(O,V),n=n+Math.imul(B,q)|0,i=(i=i+Math.imul(B,K)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ut)|0;var St=(u+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(z,F),i=(i=Math.imul(z,V))+Math.imul(U,F)|0,o=Math.imul(U,V),n=n+Math.imul(L,q)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(O,q)|0,o=o+Math.imul(O,K)|0,n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(k,X)|0,o=o+Math.imul(k,Y)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,ut)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,q),i=(i=Math.imul(z,K))+Math.imul(U,q)|0,o=Math.imul(U,K),n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(B,X)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,st)|0,n=n+Math.imul(b,lt)|0,i=(i=i+Math.imul(b,ut)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ut)|0,n=n+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ft)|0;var Tt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(z,Z),i=(i=Math.imul(z,H))+Math.imul(U,Z)|0,o=Math.imul(U,H),n=n+Math.imul(L,X)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Y)|0,n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(S,lt)|0,o=o+Math.imul(S,ut)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var At=(u+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,X),i=(i=Math.imul(z,Y))+Math.imul(U,X)|0,o=Math.imul(U,Y),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,n=n+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,ut)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(E,ht)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Ct=(u+(n=n+Math.imul(b,pt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,pt)|0))<<13)|0;u=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,$),i=(i=Math.imul(z,tt))+Math.imul(U,$)|0,o=Math.imul(U,tt),n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(k,lt)|0,o=o+Math.imul(k,ut)|0,n=n+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var It=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(S,pt)|0))<<13)|0;u=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,rt),i=(i=Math.imul(z,nt))+Math.imul(U,rt)|0,o=Math.imul(U,nt),n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,ut)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(u+(n=n+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(U,ot)|0,o=Math.imul(U,st),n=n+Math.imul(L,lt)|0,i=(i=i+Math.imul(L,ut)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(B,ht)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Rt=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,pt)|0))<<13)|0;u=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,lt),i=(i=Math.imul(z,ut))+Math.imul(U,lt)|0,o=Math.imul(U,ut),n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(O,ht)|0,o=o+Math.imul(O,ft)|0;var Bt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(P,pt)|0))<<13)|0;u=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,ht),i=(i=Math.imul(z,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Pt=(u+(n=n+Math.imul(L,pt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Dt=(u+(n=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((o=Math.imul(U,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,l[0]=gt,l[1]=yt,l[2]=_t,l[3]=vt,l[4]=bt,l[5]=wt,l[6]=xt,l[7]=Et,l[8]=St,l[9]=Mt,l[10]=Tt,l[11]=At,l[12]=Ct,l[13]=It,l[14]=kt,l[15]=Rt,l[16]=Bt,l[17]=Pt,l[18]=Dt,0!==u&&(l[19]=u,r.length++),r};function y(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,l=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=l;u++){var c=o-u,h=(0|t.words[c])*(0|e.words[u]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function _(t,e,r){return y(t,e,r)}function v(t,e){this.x=t,this.y=e}Math.imul||(g=m),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):r<63?m(this,t,e):r<1024?y(this,t,e):_(this,t,e)},v.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},v.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},v.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},v.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var h=l,f=u,d=0;d<s;d++){var p=r[c+d],m=n[c+d],g=r[c+d+s],y=n[c+d+s],_=h*g-f*y;y=h*y+f*g,g=_,r[c+d]=p+g,n[c+d]=m+y,r[c+d+s]=p-g,n[c+d+s]=m-y,d!==a&&(_=l*h-u*f,f=l*f+u*h,h=_)}},v.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},v.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},v.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},v.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},v.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},v.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),l=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,l,n,i),this.transform(u,o,c,h,n,i);for(var d=0;d<n;d++){var p=a[d]*c[d]-l[d]*h[d];l[d]=a[d]*h[d]+l[d]*c[d],a[d]=p}return this.conjugate(a,l,n),this.transform(a,l,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),_(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"===typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=s>>>26,this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,l=(0|this.words[e])-a<<r;this.words[e]=l|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,l=r;if(i-=s,i=Math.max(0,i),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var h=0|this.words[u];this.words[u]=c<<26-o|h>>>o,c=h&a}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var l=(0|t.words[i])*e;a=((o-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,l=n.length-i.length;if("mod"!==e){(a=new o(null)).length=l+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,l);0===c.negative&&(n=c,a&&(a.words[l]=1));for(var h=l-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=f)}return a&&a._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),l=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(c),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(c),l.isub(h)),a.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(l)):(r.isub(e),a.isub(i),l.isub(s))}return{a:a,b:l,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),l=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,c=1;0===(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var h=0,f=1;0===(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new T(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){T.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},i(x,w),x.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(E,w),i(S,w),i(M,w),M.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(b[t])return b[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new E;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new M}return b[t]=e,e},T.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},T.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},T.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},T.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},T.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},T.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},T.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},T.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},T.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},T.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},T.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},T.prototype.isqr=function(t){return this.imul(t,t.clone())},T.prototype.sqr=function(t){return this.mul(t,t)},T.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),l=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=g}return f},T.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},T.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,l=e.bitLength()%26;for(0===l&&(l=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=l-1;c>=0;c--){var h=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===n&&0===c)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}l=26}return i},T.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},T.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new A(t)},i(A,T),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(12)(t))},function(t,e,r){"use strict";var n=e;n.version=r(294).version,n.utils=r(9),n.rand=r(72),n.curve=r(140),n.curves=r(77),n.ec=r(306),n.eddsa=r(310)},function(t,e,r){"use strict";var n,i=e,o=r(78),s=r(140),a=r(9).assert;function l(t){"short"===t.type?this.curve=new s.short(t):"edwards"===t.type?this.curve=new s.edwards(t):this.curve=new s.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function u(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var r=new l(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=l,u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(305)}catch(c){n=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},function(t,e,r){var n=e;n.utils=r(14),n.common=r(40),n.sha=r(299),n.ripemd=r(303),n.hmac=r(304),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(t,e,r){"use strict";(function(e){var n,i=r(3),o=i.Buffer,s={};for(n in i)i.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(s[n]=i[n]);var a=s.Buffer={};for(n in o)o.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(a[n]=o[n]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(t,e,r){if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&"undefined"===typeof t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,r)}),a.alloc||(a.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=o(t);return e&&0!==e.length?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n}),!s.kStringMaxLength)try{s.kStringMaxLength=e.binding("buffer").kStringMaxLength}catch(l){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),t.exports=s}).call(this,r(5))},function(t,e,r){"use strict";const n=r(81).Reporter,i=r(41).EncoderBuffer,o=r(41).DecoderBuffer,s=r(8),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function u(t,e,r){const n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=u;const c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];u.prototype.clone=function(){const t=this._baseState,e={};c.forEach((function(r){e[r]=t[r]}));const r=new this.constructor(e.parent);return r._baseState=e,r},u.prototype._wrap=function(){const t=this._baseState;l.forEach((function(e){this[e]=function(){const r=new this.constructor(this);return t.children.push(r),r[e].apply(r,arguments)}}),this)},u.prototype._init=function(t){const e=this._baseState;s(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),s.equal(e.children.length,1,"Root node can have only one child")},u.prototype._useArgs=function(t){const e=this._baseState,r=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==r.length&&(s(null===e.children),e.children=r,r.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(s(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!==typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(r){r==(0|r)&&(r|=0);const n=t[r];e[n]=r})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){u.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),a.forEach((function(t){u.prototype[t]=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return s(null===e.tag),e.tag=t,this._useArgs(r),this}})),u.prototype.use=function(t){s(t);const e=this._baseState;return s(null===e.use),e.use=t,this},u.prototype.optional=function(){return this._baseState.optional=!0,this},u.prototype.def=function(t){const e=this._baseState;return s(null===e.default),e.default=t,e.optional=!0,this},u.prototype.explicit=function(t){const e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.explicit=t,this},u.prototype.implicit=function(t){const e=this._baseState;return s(null===e.explicit&&null===e.implicit),e.implicit=t,this},u.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},u.prototype.key=function(t){const e=this._baseState;return s(null===e.key),e.key=t,this},u.prototype.any=function(){return this._baseState.any=!0,this},u.prototype.choice=function(t){const e=this._baseState;return s(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},u.prototype.contains=function(t){const e=this._baseState;return s(null===e.use),e.contains=t,this},u.prototype._decode=function(t,e){const r=this._baseState;if(null===r.parent)return t.wrapResult(r.children[0]._decode(t,e));let n,i=r.default,s=!0,a=null;if(null!==r.key&&(a=t.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(s=this._peekTag(t,n,r.any),t.isError(s))return s}else{const n=t.save();try{null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),s=!0}catch(l){s=!1}t.restore(n)}}if(r.obj&&s&&(n=t.enterObject()),s){if(null!==r.explicit){const e=this._decodeTag(t,r.explicit);if(t.isError(e))return e;t=e}const n=t.offset;if(null===r.use&&null===r.choice){let e;r.any&&(e=t.save());const n=this._decodeTag(t,null!==r.implicit?r.implicit:r.tag,r.any);if(t.isError(n))return n;r.any?i=t.raw(e):t=n}if(e&&e.track&&null!==r.tag&&e.track(t.path(),n,t.length,"tagged"),e&&e.track&&null!==r.tag&&e.track(t.path(),t.offset,t.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e)),t.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(t,e)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new o(i);i=this._getUse(r.contains,t._reporterState.obj)._decode(n,e)}}return r.obj&&s&&(i=t.leaveObject(n)),null===r.key||null===i&&!0!==s?null!==a&&t.exitKey(a):t.leaveKey(a,r.key,i),i},u.prototype._decodeGeneric=function(t,e,r){const n=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,n.args[0],r):/str$/.test(t)?this._decodeStr(e,t,r):"objid"===t&&n.args?this._decodeObjid(e,n.args[0],n.args[1],r):"objid"===t?this._decodeObjid(e,null,null,r):"gentime"===t||"utctime"===t?this._decodeTime(e,t,r):"null_"===t?this._decodeNull(e,r):"bool"===t?this._decodeBool(e,r):"objDesc"===t?this._decodeStr(e,t,r):"int"===t||"enum"===t?this._decodeInt(e,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,e._reporterState.obj)._decode(e,r):e.error("unknown tag: "+t)},u.prototype._getUse=function(t,e){const r=this._baseState;return r.useDecoder=this._use(t,e),s(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},u.prototype._decodeChoice=function(t,e){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some((function(o){const s=t.save(),a=r.choice[o];try{const r=a._decode(t,e);if(t.isError(r))return!1;n={type:o,value:r},i=!0}catch(l){return t.restore(s),!1}return!0}),this),i?n:t.error("Choice not matched")},u.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},u.prototype._encode=function(t,e,r){const n=this._baseState;if(null!==n.default&&n.default===t)return;const i=this._encodeValue(t,e,r);return void 0===i||this._skipDefault(i,e,r)?void 0:i},u.prototype._encodeValue=function(t,e,r){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new n);let o=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i.default)return;t=i.default}let s=null,a=!1;if(i.any)o=this._createEncoderBuffer(t);else if(i.choice)o=this._encodeChoice(t,e);else if(i.contains)s=this._getUse(i.contains,r)._encode(t,e),a=!0;else if(i.children)s=i.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,e,t);if(null===r._baseState.key)return e.error("Child should have a key");const n=e.enterKey(r._baseState.key);if("object"!==typeof t)return e.error("Child expected, but input is not object");const i=r._encode(t[r._baseState.key],e,t);return e.leaveKey(n),i}),this).filter((function(t){return t})),s=this._createEncoderBuffer(s);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,s=this._createEncoderBuffer(t.map((function(r){const n=this._baseState;return this._getUse(n.args[0],t)._encode(r,e)}),r))}else null!==i.use?o=this._getUse(i.use,r)._encode(t,e):(s=this._encodePrimitive(i.tag,t),a=!0);if(!i.any&&null===i.choice){const t=null!==i.implicit?i.implicit:i.tag,r=null===i.implicit?"universal":"context";null===t?null===i.use&&e.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(t,a,r,s))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},u.prototype._encodeChoice=function(t,e){const r=this._baseState,n=r.choice[t.type];return n||s(!1,t.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(t.value,e)},u.prototype._encodePrimitive=function(t,e){const r=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&r.args)return this._encodeObjid(e,r.reverseArgs[0],r.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,r.args&&r.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},u.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},u.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},function(t,e,r){"use strict";const n=r(0);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.Reporter=i,i.prototype.isError=function(t){return t instanceof o},i.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,r){const n=this._reporterState;this.exitKey(t),null!==n.obj&&(n.obj[e]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){const e=this._reporterState,r=e.obj;return e.obj=t,r},i.prototype.error=function(t){let e;const r=this._reporterState,n=t instanceof o;if(e=n?t:new o(r.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!r.options.partial)throw e;return n||r.errors.push(e),e},i.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},n(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(t,e,r){"use strict";function n(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=n(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=n(e.tag)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(329).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function l(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,l=0,c=r;c<a;c+=n)l=u(t,c,c+n,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var h=1;for(l=u(t,c,t.length,e),c=0;c<s;c++)h*=e;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,l=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var c=l>>>26,h=67108863&l,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;c+=(s=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&s}r.words[u]=0|h,l=0|c}return 0!==l?r.words[u]=0|l:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?c[6-l.length]+l+r:l+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=h[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:c[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,l="le"===e,u=new t(o),c=this.clone();if(l){for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,l=r.words,u=0,c=0|s[0],h=8191&c,f=c>>>13,d=0|s[1],p=8191&d,m=d>>>13,g=0|s[2],y=8191&g,_=g>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],E=8191&x,S=x>>>13,M=0|s[5],T=8191&M,A=M>>>13,C=0|s[6],I=8191&C,k=C>>>13,R=0|s[7],B=8191&R,P=R>>>13,D=0|s[8],L=8191&D,O=D>>>13,N=0|s[9],z=8191&N,U=N>>>13,j=0|a[0],F=8191&j,V=j>>>13,G=0|a[1],q=8191&G,K=G>>>13,W=0|a[2],Z=8191&W,H=W>>>13,Q=0|a[3],X=8191&Q,Y=Q>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],lt=8191&at,ut=at>>>13,ct=0|a[8],ht=8191&ct,ft=ct>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(u+(n=Math.imul(h,F))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,V))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,V))+Math.imul(m,F)|0,o=Math.imul(m,V);var yt=(u+(n=n+Math.imul(h,q)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,q)|0))<<13)|0;u=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,F),i=(i=Math.imul(y,V))+Math.imul(_,F)|0,o=Math.imul(_,V),n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,K)|0;var _t=(u+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(b,F),i=(i=Math.imul(b,V))+Math.imul(w,F)|0,o=Math.imul(w,V),n=n+Math.imul(y,q)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,K)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var vt=(u+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,X)|0))<<13)|0;u=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,V))+Math.imul(S,F)|0,o=Math.imul(S,V),n=n+Math.imul(b,q)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Y)|0;var bt=(u+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(T,F),i=(i=Math.imul(T,V))+Math.imul(A,F)|0,o=Math.imul(A,V),n=n+Math.imul(E,q)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,K)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(u+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,V))+Math.imul(k,F)|0,o=Math.imul(k,V),n=n+Math.imul(T,q)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,K)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,X)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(u+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,V))+Math.imul(P,F)|0,o=Math.imul(P,V),n=n+Math.imul(I,q)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,K)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,Y)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(h,lt)|0)|0)+((8191&(i=(i=i+Math.imul(h,ut)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(L,F),i=(i=Math.imul(L,V))+Math.imul(O,F)|0,o=Math.imul(O,V),n=n+Math.imul(B,q)|0,i=(i=i+Math.imul(B,K)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ut)|0;var St=(u+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(z,F),i=(i=Math.imul(z,V))+Math.imul(U,F)|0,o=Math.imul(U,V),n=n+Math.imul(L,q)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(O,q)|0,o=o+Math.imul(O,K)|0,n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(k,X)|0,o=o+Math.imul(k,Y)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,ut)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,q),i=(i=Math.imul(z,K))+Math.imul(U,q)|0,o=Math.imul(U,K),n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(B,X)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,st)|0,n=n+Math.imul(b,lt)|0,i=(i=i+Math.imul(b,ut)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ut)|0,n=n+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ft)|0;var Tt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(z,Z),i=(i=Math.imul(z,H))+Math.imul(U,Z)|0,o=Math.imul(U,H),n=n+Math.imul(L,X)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Y)|0,n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(S,lt)|0,o=o+Math.imul(S,ut)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var At=(u+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,X),i=(i=Math.imul(z,Y))+Math.imul(U,X)|0,o=Math.imul(U,Y),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,n=n+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,ut)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(E,ht)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Ct=(u+(n=n+Math.imul(b,pt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,pt)|0))<<13)|0;u=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,$),i=(i=Math.imul(z,tt))+Math.imul(U,$)|0,o=Math.imul(U,tt),n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(k,lt)|0,o=o+Math.imul(k,ut)|0,n=n+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var It=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(S,pt)|0))<<13)|0;u=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,rt),i=(i=Math.imul(z,nt))+Math.imul(U,rt)|0,o=Math.imul(U,nt),n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,ut)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(u+(n=n+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(U,ot)|0,o=Math.imul(U,st),n=n+Math.imul(L,lt)|0,i=(i=i+Math.imul(L,ut)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(B,ht)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Rt=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,pt)|0))<<13)|0;u=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,lt),i=(i=Math.imul(z,ut))+Math.imul(U,lt)|0,o=Math.imul(U,ut),n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(O,ht)|0,o=o+Math.imul(O,ft)|0;var Bt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(P,pt)|0))<<13)|0;u=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,ht),i=(i=Math.imul(z,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Pt=(u+(n=n+Math.imul(L,pt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Dt=(u+(n=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((o=Math.imul(U,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,l[0]=gt,l[1]=yt,l[2]=_t,l[3]=vt,l[4]=bt,l[5]=wt,l[6]=xt,l[7]=Et,l[8]=St,l[9]=Mt,l[10]=Tt,l[11]=At,l[12]=Ct,l[13]=It,l[14]=kt,l[15]=Rt,l[16]=Bt,l[17]=Pt,l[18]=Dt,0!==u&&(l[19]=u,r.length++),r};function m(t,e,r){return(new g).mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,l=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=l;u++){var c=o-u,h=(0|t.words[c])*(0|e.words[u]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},g.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},g.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},g.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var h=l,f=u,d=0;d<s;d++){var p=r[c+d],m=n[c+d],g=r[c+d+s],y=n[c+d+s],_=h*g-f*y;y=h*y+f*g,g=_,r[c+d]=p+g,n[c+d]=m+y,r[c+d+s]=p-g,n[c+d+s]=m-y,d!==a&&(_=l*h-u*f,f=l*f+u*h,h=_)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},g.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),l=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,l,n,i),this.transform(u,o,c,h,n,i);for(var d=0;d<n;d++){var p=a[d]*c[d]-l[d]*h[d];l[d]=a[d]*h[d]+l[d]*c[d],a[d]=p}return this.conjugate(a,l,n),this.transform(a,l,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,l=(0|this.words[e])-a<<r;this.words[e]=l|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,l=r;if(i-=s,i=Math.max(0,i),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var h=0|this.words[u];this.words[u]=c<<26-o|h>>>o,c=h&a}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var l=(0|t.words[i])*e;a=((o-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,l=n.length-i.length;if("mod"!==e){(a=new o(null)).length=l+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,l);0===c.negative&&(n=c,a&&(a.words[l]=1));for(var h=l-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),l=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(c),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(c),l.isub(h)),a.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(l)):(r.isub(e),a.isub(i),l.isub(s))}return{a:a,b:l,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),l=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,c=1;0===(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var h=0,f=1;0===(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},i(v,_),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,_),i(w,_),i(x,_),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),l=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=g}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,l=e.bitLength()%26;for(0===l&&(l=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=l-1;c>=0;c--){var h=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===n&&0===c)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}l=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,E),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(12)(t))},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultTransporter=void 0;const n=r(59),i=r(332),o=r(333),s="google-api-nodejs-client";class a{configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.headers=e.headers||{},"undefined"===typeof window){const r=e.headers["User-Agent"];r?r.includes(`${s}/`)||(e.headers["User-Agent"]=`${r} ${a.USER_AGENT}`):e.headers["User-Agent"]=a.USER_AGENT;const n=`auth/${o.version}`;if(e.headers["x-goog-api-client"]&&!e.headers["x-goog-api-client"].includes(n))e.headers["x-goog-api-client"]=`${e.headers["x-goog-api-client"]} ${n}`;else if(!e.headers["x-goog-api-client"]){const r=t.version.replace(/^v/,"");e.headers["x-goog-api-client"]=`gl-node/${r} ${n}`}}return e}request(t,e){t=this.configure(t);try{i.validate(t)}catch(r){if(e)return e(r);throw r}if(!e)return n.request(t).catch((t=>{throw this.processError(t)}));n.request(t).then((t=>{e(null,t)}),(t=>{e(this.processError(t))}))}processError(t){const e=t.response,r=t,n=e?e.data:null;return e&&n&&n.error&&200!==e.status?"string"===typeof n.error?(r.message=n.error,r.code=e.status.toString()):Array.isArray(n.error.errors)?(r.message=n.error.errors.map((t=>t.message)).join("\n"),r.code=n.error.code,r.errors=n.error.errors):(r.message=n.error.message,r.code=n.error.code||e.status):e&&e.status>=400&&(r.message=n,r.code=e.status.toString()),r}}e.DefaultTransporter=a,a.USER_AGENT=`${s}/${o.version}`}).call(this,r(5))},function(t,e,r){var n=r(2);r(4),t.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(t,e){var r=t;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})},n.cipher.createDecipher=function(t,e){var r=t;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})},n.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),n.cipher.algorithms[t]=e},n.cipher.getAlgorithm=function(t){return(t=t.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[t]:null};var i=n.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};i.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=t.output||n.util.createBuffer(),this.mode.start(e)},i.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},i.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},function(t,e,r){var n=r(2);r(17),r(4);var i=t.exports=n.md5=n.md5||{};n.md.md5=n.md.algorithms.md5=i,i.create=function(){u||function(){o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),64),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],a=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],l=new Array(64);for(var t=0;t<64;++t)l[t]=Math.floor(4294967296*Math.abs(Math.sin(t+1)));u=!0}();var t=null,e=n.util.createBuffer(),r=new Array(16),i={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,o=0;o<r;++o)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=n.util.encodeUtf8(o));var a=o.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=i.fullMessageLength.length-1;l>=0;--l)i.fullMessageLength[l]+=a[1],a[1]=a[0]+(i.fullMessageLength[l]/4294967296>>>0),i.fullMessageLength[l]=i.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(o),c(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var s=n.util.createBuffer();s.putBytes(e.bytes());var a=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-a));for(var l,u=0,h=i.fullMessageLength.length-1;h>=0;--h)u=(l=8*i.fullMessageLength[h]+u)/4294967296>>>0,s.putInt32Le(l>>>0);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};c(f,r,s);var d=n.util.createBuffer();return d.putInt32Le(f.h0),d.putInt32Le(f.h1),d.putInt32Le(f.h2),d.putInt32Le(f.h3),d},i};var o=null,s=null,a=null,l=null,u=!1;function c(t,e,r){for(var n,i,o,u,c,h,f,d=r.length();d>=64;){for(i=t.h0,o=t.h1,u=t.h2,c=t.h3,f=0;f<16;++f)e[f]=r.getInt32Le(),n=i+(c^o&(u^c))+l[f]+e[f],i=c,c=u,u=o,o+=n<<(h=a[f])|n>>>32-h;for(;f<32;++f)n=i+(u^c&(o^u))+l[f]+e[s[f]],i=c,c=u,u=o,o+=n<<(h=a[f])|n>>>32-h;for(;f<48;++f)n=i+(o^u^c)+l[f]+e[s[f]],i=c,c=u,u=o,o+=n<<(h=a[f])|n>>>32-h;for(;f<64;++f)n=i+(u^(o|~c))+l[f]+e[s[f]],i=c,c=u,u=o,o+=n<<(h=a[f])|n>>>32-h;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+u|0,t.h3=t.h3+c|0,d-=64}}},function(t,e,r){(function(e){var n=r(2);r(43),r(17),r(4);var i,o=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(i=r(88)),t.exports=n.pbkdf2=o.pbkdf2=function(t,r,o,s,a,l){if("function"===typeof a&&(l=a,a=null),n.util.isNodejs&&!n.options.usePureJavaScript&&i.pbkdf2&&(null===a||"object"!==typeof a)&&(i.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!==typeof a&&(a="sha1"),t=e.from(t,"binary"),r=e.from(r,"binary"),l?4===i.pbkdf2Sync.length?i.pbkdf2(t,r,o,s,(function(t,e){if(t)return l(t);l(null,e.toString("binary"))})):i.pbkdf2(t,r,o,s,a,(function(t,e){if(t)return l(t);l(null,e.toString("binary"))})):4===i.pbkdf2Sync.length?i.pbkdf2Sync(t,r,o,s).toString("binary"):i.pbkdf2Sync(t,r,o,s,a).toString("binary");if("undefined"!==typeof a&&null!==a||(a="sha1"),"string"===typeof a){if(!(a in n.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=n.md[a].create()}var u=a.digestLength;if(s>4294967295*u){var c=new Error("Derived key is too long.");if(l)return l(c);throw c}var h=Math.ceil(s/u),f=s-(h-1)*u,d=n.hmac.create();d.start(a,t);var p,m,g,y="";if(!l){for(var _=1;_<=h;++_){d.start(null,null),d.update(r),d.update(n.util.int32ToBytes(_)),p=g=d.digest().getBytes();for(var v=2;v<=o;++v)d.start(null,null),d.update(g),m=d.digest().getBytes(),p=n.util.xorBytes(p,m,u),g=m;y+=_<h?p:p.substr(0,f)}return y}_=1;function b(){if(_>h)return l(null,y);d.start(null,null),d.update(r),d.update(n.util.int32ToBytes(_)),p=g=d.digest().getBytes(),v=2,w()}function w(){if(v<=o)return d.start(null,null),d.update(g),m=d.digest().getBytes(),p=n.util.xorBytes(p,m,u),g=m,++v,n.util.setImmediate(w);y+=_<h?p:p.substr(0,f),++_,b()}b()}}).call(this,r(3).Buffer)},,function(t,e,r){var n=r(2);r(23),r(15),r(53),r(17),r(345),r(24),r(33),r(90),r(54),r(4);var i=n.asn1,o=t.exports=n.pki=n.pki||{},s=o.oids,a={};a.CN=s.commonName,a.commonName="CN",a.C=s.countryName,a.countryName="C",a.L=s.localityName,a.localityName="L",a.ST=s.stateOrProvinceName,a.stateOrProvinceName="ST",a.O=s.organizationName,a.organizationName="O",a.OU=s.organizationalUnitName,a.organizationalUnitName="OU",a.E=s.emailAddress,a.emailAddress="E";var l=n.pki.rsa.publicKeyValidator,u={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},l,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},c={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},l,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},f={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[h,{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function d(t,e){"string"===typeof e&&(e={shortName:e});for(var r,n=null,i=0;null===n&&i<t.attributes.length;++i)r=t.attributes[i],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}o.RDNAttributesAsArray=function(t,e){for(var r,n,o,l=[],u=0;u<t.value.length;++u){r=t.value[u];for(var c=0;c<r.value.length;++c)o={},n=r.value[c],o.type=i.derToOid(n.value[0].value),o.value=n.value[1].value,o.valueTagClass=n.value[1].type,o.type in s&&(o.name=s[o.type],o.name in a&&(o.shortName=a[o.name])),e&&(e.update(o.type),e.update(o.value)),l.push(o)}return l},o.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],l=i.derToOid(n.value[0].value),u=n.value[1].value,c=0;c<u.length;++c){var h={};if(h.type=l,h.value=u[c].value,h.valueTagClass=u[c].type,h.type in s&&(h.name=s[h.type],h.name in a&&(h.shortName=a[h.name])),h.type===s.extensionRequest){h.extensions=[];for(var f=0;f<h.value.length;++f)h.extensions.push(o.certificateExtensionFromAsn1(h.value[f]))}e.push(h)}return e};var p=function(t,e,r){var n={};if(t!==s["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:s.sha1},mgf:{algorithmOid:s.mgf1,hash:{algorithmOid:s.sha1}},saltLength:20});var o={},a=[];if(!i.validate(e,c,o,a)){var l=new Error("Cannot read RSASSA-PSS parameter block.");throw l.errors=a,l}return void 0!==o.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=i.derToOid(o.hashOid)),void 0!==o.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=i.derToOid(o.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=i.derToOid(o.maskGenHashOid)),void 0!==o.saltLength&&(n.saltLength=o.saltLength.charCodeAt(0)),n},m=function(t){switch(s[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},g=function(t){var e,r=t.certificate;switch(r.signatureOid){case s.sha1WithRSAEncryption:case s.sha1WithRSASignature:break;case s["RSASSA-PSS"]:var i,o,a;if(void 0===(i=s[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[i])throw(a=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,a.name=i,a;if(void 0===(o=s[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[o])throw(a=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,a.name=o,a;if(o=n.mgf[o].create(n.md[i].create()),void 0===(i=s[r.signatureParameters.hash.algorithmOid])||void 0===n.md[i])throw(a=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,a.name=i,a;e=n.pss.create(n.md[i].create(),o,r.signatureParameters.saltLength)}return r.publicKey.verify(t.md.digest().getBytes(),t.signature,e)};function y(t){for(var e,r,o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),s=t.attributes,a=0;a<s.length;++a){var l=(e=s[a]).value,u=i.Type.PRINTABLESTRING;"valueTagClass"in e&&(u=e.valueTagClass)===i.Type.UTF8&&(l=n.util.encodeUtf8(l)),r=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.UNIVERSAL,u,!1,l)])]),o.value.push(r)}return o}function _(t){for(var e,r=0;r<t.length;++r){if("undefined"===typeof(e=t[r]).name&&(e.type&&e.type in o.oids?e.name=o.oids[e.type]:e.shortName&&e.shortName in a&&(e.name=o.oids[a[e.shortName]])),"undefined"===typeof e.type){if(!e.name||!(e.name in o.oids))throw(l=new Error("Attribute type not specified.")).attribute=e,l;e.type=o.oids[e.name]}if("undefined"===typeof e.shortName&&e.name&&e.name in a&&(e.shortName=a[e.name]),e.type===s.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=i.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var n=0;n<e.extensions.length;++n)e.value.push(o.certificateExtensionToAsn1(v(e.extensions[n])))}var l;if("undefined"===typeof e.value)throw(l=new Error("Attribute value not specified.")).attribute=e,l}}function v(t,e){if(e=e||{},"undefined"===typeof t.name&&t.id&&t.id in o.oids&&(t.name=o.oids[t.id]),"undefined"===typeof t.id){if(!t.name||!(t.name in o.oids))throw(w=new Error("Extension ID not specified.")).extension=t,w;t.id=o.oids[t.name]}if("undefined"!==typeof t.value)return t;if("keyUsage"===t.name){var r=0,a=0,l=0;t.digitalSignature&&(a|=128,r=7),t.nonRepudiation&&(a|=64,r=6),t.keyEncipherment&&(a|=32,r=5),t.dataEncipherment&&(a|=16,r=4),t.keyAgreement&&(a|=8,r=3),t.keyCertSign&&(a|=4,r=2),t.cRLSign&&(a|=2,r=1),t.encipherOnly&&(a|=1,r=0),t.decipherOnly&&(l|=128,r=7);var u=String.fromCharCode(r);0!==l?u+=String.fromCharCode(a)+String.fromCharCode(l):0!==a&&(u+=String.fromCharCode(a)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("basicConstraints"===t.name)t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var h in t)!0===t[h]&&(h in s?c.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s[h]).getBytes())):-1!==h.indexOf(".")&&c.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(h).getBytes())))}else if("nsCertType"===t.name){r=0,a=0;t.client&&(a|=128,r=7),t.server&&(a|=64,r=6),t.email&&(a|=32,r=5),t.objsign&&(a|=16,r=4),t.reserved&&(a|=8,r=3),t.sslCA&&(a|=4,r=2),t.emailCA&&(a|=2,r=1),t.objCA&&(a|=1,r=0);u=String.fromCharCode(r);0!==a&&(u+=String.fromCharCode(a)),t.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,u)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);for(var f=0;f<t.altNames.length;++f){u=(_=t.altNames[f]).value;if(7===_.type&&_.ip){if(null===(u=n.util.bytesFromIP(_.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,w}else 8===_.type&&(u=_.oid?i.oidToDer(i.oidToDer(_.oid)):i.oidToDer(u));t.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,_.type,!1,u))}}else if("nsComment"===t.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=i.create(i.Class.UNIVERSAL,i.Type.IA5STRING,!1,t.comment)}else if("subjectKeyIdentifier"===t.name&&e.cert){var d=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=d.toHex(),t.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,d.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);c=t.value.value;if(t.keyIdentifier){var p=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,p))}if(t.authorityCertIssuer){var m=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[y(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];c.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,m))}if(t.serialNumber){var g=n.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);c.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if("cRLDistributionPoints"===t.name){t.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);c=t.value.value;var _,v=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),b=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(f=0;f<t.altNames.length;++f){u=(_=t.altNames[f]).value;if(7===_.type&&_.ip){if(null===(u=n.util.bytesFromIP(_.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,w}else 8===_.type&&(u=_.oid?i.oidToDer(i.oidToDer(_.oid)):i.oidToDer(u));b.value.push(i.create(i.Class.CONTEXT_SPECIFIC,_.type,!1,u))}v.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[b])),c.push(v)}var w;if("undefined"===typeof t.value)throw(w=new Error("Extension value not specified.")).extension=t,w;return t}function b(t,e){if(t===s["RSASSA-PSS"]){var r=[];return void 0!==e.hash.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,r)}return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}function w(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var r=t.attributes,o=0;o<r.length;++o){var s=r[o],a=s.value,l=i.Type.UTF8;"valueTagClass"in s&&(l=s.valueTagClass),l===i.Type.UTF8&&(a=n.util.encodeUtf8(a));var u=!1;"valueConstructed"in s&&(u=s.valueConstructed);var c=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,l,u,a)])]);e.value.push(c)}return e}o.certificateFromPem=function(t,e,r){var s=n.pem.decode(t)[0];if("CERTIFICATE"!==s.type&&"X509 CERTIFICATE"!==s.type&&"TRUSTED CERTIFICATE"!==s.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=s.type,a}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var l=i.fromDer(s.body,r);return o.certificateFromAsn1(l,e)},o.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:i.toDer(o.certificateToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.publicKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var s=i.fromDer(e.body);return o.publicKeyFromAsn1(s)},o.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:i.toDer(o.publicKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:i.toDer(o.publicKeyToRSAPublicKey(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.getPublicKeyFingerprint=function(t,e){var r,s=(e=e||{}).md||n.md.sha1.create();switch(e.type||"RSAPublicKey"){case"RSAPublicKey":r=i.toDer(o.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=i.toDer(o.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}s.start(),s.update(r);var a=s.digest();if("hex"===e.encoding){var l=a.toHex();return e.delimiter?l.match(/.{2}/g).join(e.delimiter):l}if("binary"===e.encoding)return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return a},o.certificationRequestFromPem=function(t,e,r){var s=n.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==s.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=s.type,a}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var l=i.fromDer(s.body,r);return o.certificationRequestFromAsn1(l,e)},o.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:i.toDer(o.certificationRequestToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.createCertificate=function(){var t={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return d(t.issuer,e)},t.issuer.addField=function(e){_([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return d(t.subject,e)},t.subject.addField=function(e){_([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){_(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){_(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)v(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){"string"===typeof e&&(e={name:e});for(var r,n=null,i=0;null===n&&i<t.extensions.length;++i)r=t.extensions[i],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,r){t.md=r||n.md.sha1.create();var a=s[t.md.algorithm+"WithRSAEncryption"];if(!a){var l=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw l.algorithm=t.md.algorithm,l}t.signatureOid=t.siginfo.algorithmOid=a,t.tbsCertificate=o.getTBSCertificate(t);var u=i.toDer(t.tbsCertificate);t.md.update(u.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,s=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=s.attributes,a.actualIssuer=n.attributes,a}var l=e.md;if(null===l){l=m({signatureOid:e.signatureOid,type:"certificate"});var u=e.tbsCertificate||o.getTBSCertificate(e),c=i.toDer(u);l.update(c.getBytes())}return null!==l&&(r=g({certificate:t,md:l,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var o,s;r=!0;for(var a=0;r&&a<n.attributes.length;++a)o=n.attributes[a],s=i.attributes[a],o.type===s.type&&o.value===s.value||(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return o.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=s.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var i=t.extensions[r];if(i.id===e){var o=t.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(i.subjectKeyIdentifier)===o}}return!1},t},o.certificateFromAsn1=function(t,e){var r={},s=[];if(!i.validate(t,u,r,s)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=s,a}if(i.derToOid(r.publicKeyOid)!==o.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var l=o.createCertificate();l.version=r.certVersion?r.certVersion.charCodeAt(0):0;var c=n.util.createBuffer(r.certSerialNumber);l.serialNumber=c.toHex(),l.signatureOid=n.asn1.derToOid(r.certSignatureOid),l.signatureParameters=p(l.signatureOid,r.certSignatureParams,!0),l.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),l.siginfo.parameters=p(l.siginfo.algorithmOid,r.certinfoSignatureParams,!1),l.signature=r.certSignature;var h=[];if(void 0!==r.certValidity1UTCTime&&h.push(i.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&h.push(i.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&h.push(i.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&h.push(i.generalizedTimeToDate(r.certValidity4GeneralizedTime)),h.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(h.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(l.validity.notBefore=h[0],l.validity.notAfter=h[1],l.tbsCertificate=r.tbsCertificate,e){l.md=m({signatureOid:l.signatureOid,type:"certificate"});var f=i.toDer(l.tbsCertificate);l.md.update(f.getBytes())}var g=n.md.sha1.create(),y=i.toDer(r.certIssuer);g.update(y.getBytes()),l.issuer.getField=function(t){return d(l.issuer,t)},l.issuer.addField=function(t){_([t]),l.issuer.attributes.push(t)},l.issuer.attributes=o.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(l.issuer.uniqueId=r.certIssuerUniqueId),l.issuer.hash=g.digest().toHex();var v=n.md.sha1.create(),b=i.toDer(r.certSubject);return v.update(b.getBytes()),l.subject.getField=function(t){return d(l.subject,t)},l.subject.addField=function(t){_([t]),l.subject.attributes.push(t)},l.subject.attributes=o.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(l.subject.uniqueId=r.certSubjectUniqueId),l.subject.hash=v.digest().toHex(),r.certExtensions?l.extensions=o.certificateExtensionsFromAsn1(r.certExtensions):l.extensions=[],l.publicKey=o.publicKeyFromAsn1(r.subjectPublicKeyInfo),l},o.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(o.certificateExtensionFromAsn1(n.value[i]));return e},o.certificateExtensionFromAsn1=function(t){var e={};if(e.id=i.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===i.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in s)if(e.name=s[e.id],"keyUsage"===e.name){var r=0,o=0;(l=i.fromDer(e.value)).value.length>1&&(r=l.value.charCodeAt(1),o=l.value.length>2?l.value.charCodeAt(2):0),e.digitalSignature=128===(128&r),e.nonRepudiation=64===(64&r),e.keyEncipherment=32===(32&r),e.dataEncipherment=16===(16&r),e.keyAgreement=8===(8&r),e.keyCertSign=4===(4&r),e.cRLSign=2===(2&r),e.encipherOnly=1===(1&r),e.decipherOnly=128===(128&o)}else if("basicConstraints"===e.name){(l=i.fromDer(e.value)).value.length>0&&l.value[0].type===i.Type.BOOLEAN?e.cA=0!==l.value[0].value.charCodeAt(0):e.cA=!1;var a=null;l.value.length>0&&l.value[0].type===i.Type.INTEGER?a=l.value[0].value:l.value.length>1&&(a=l.value[1].value),null!==a&&(e.pathLenConstraint=i.derToInteger(a))}else if("extKeyUsage"===e.name)for(var l=i.fromDer(e.value),u=0;u<l.value.length;++u){var c=i.derToOid(l.value[u].value);c in s?e[s[c]]=!0:e[c]=!0}else if("nsCertType"===e.name){r=0;(l=i.fromDer(e.value)).value.length>1&&(r=l.value.charCodeAt(1)),e.client=128===(128&r),e.server=64===(64&r),e.email=32===(32&r),e.objsign=16===(16&r),e.reserved=8===(8&r),e.sslCA=4===(4&r),e.emailCA=2===(2&r),e.objCA=1===(1&r)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){var h;e.altNames=[];l=i.fromDer(e.value);for(var f=0;f<l.value.length;++f){var d={type:(h=l.value[f]).type,value:h.value};switch(e.altNames.push(d),h.type){case 1:case 2:case 6:break;case 7:d.ip=n.util.bytesToIP(h.value);break;case 8:d.oid=i.derToOid(h.value)}}}else if("subjectKeyIdentifier"===e.name){l=i.fromDer(e.value);e.subjectKeyIdentifier=n.util.bytesToHex(l.value)}return e},o.certificationRequestFromAsn1=function(t,e){var r={},s=[];if(!i.validate(t,f,r,s)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=s,a}if(i.derToOid(r.publicKeyOid)!==o.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var l=o.createCertificationRequest();if(l.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,l.signatureOid=n.asn1.derToOid(r.csrSignatureOid),l.signatureParameters=p(l.signatureOid,r.csrSignatureParams,!0),l.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),l.siginfo.parameters=p(l.siginfo.algorithmOid,r.csrSignatureParams,!1),l.signature=r.csrSignature,l.certificationRequestInfo=r.certificationRequestInfo,e){l.md=m({signatureOid:l.signatureOid,type:"certification request"});var u=i.toDer(l.certificationRequestInfo);l.md.update(u.getBytes())}var c=n.md.sha1.create();return l.subject.getField=function(t){return d(l.subject,t)},l.subject.addField=function(t){_([t]),l.subject.attributes.push(t)},l.subject.attributes=o.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),l.subject.hash=c.digest().toHex(),l.publicKey=o.publicKeyFromAsn1(r.subjectPublicKeyInfo),l.getAttribute=function(t){return d(l,t)},l.addAttribute=function(t){_([t]),l.attributes.push(t)},l.attributes=o.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),l},o.createCertificationRequest=function(){var t={version:0,signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return d(t.subject,e)},t.subject.addField=function(e){_([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return d(t,e)},t.addAttribute=function(e){_([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){_(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){_(e),t.attributes=e},t.sign=function(e,r){t.md=r||n.md.sha1.create();var a=s[t.md.algorithm+"WithRSAEncryption"];if(!a){var l=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw l.algorithm=t.md.algorithm,l}t.signatureOid=t.siginfo.algorithmOid=a,t.certificationRequestInfo=o.getCertificationRequestInfo(t);var u=i.toDer(t.certificationRequestInfo);t.md.update(u.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(null===r){r=m({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||o.getCertificationRequestInfo(t),s=i.toDer(n);r.update(s.getBytes())}return null!==r&&(e=g({certificate:t,md:r,signature:t.signature})),e},t};var x=new Date("1950-01-01T00:00:00Z"),E=new Date("2050-01-01T00:00:00Z");function S(t){return t>=x&&t<E?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(t)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(t))}o.getTBSCertificate=function(t){var e=S(t.validity.notBefore),r=S(t.validity.notAfter),s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.siginfo.algorithmOid).getBytes()),b(t.siginfo.algorithmOid,t.siginfo.parameters)]),y(t.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,r]),y(t.subject),o.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&s.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&s.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&s.value.push(o.certificateExtensionsToAsn1(t.extensions)),s},o.getCertificationRequestInfo=function(t){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),y(t.subject),o.publicKeyToAsn1(t.publicKey),w(t)])},o.distinguishedNameToAsn1=function(t){return y(t)},o.certificateToAsn1=function(t){var e=t.tbsCertificate||o.getTBSCertificate(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),b(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},o.certificateExtensionsToAsn1=function(t){var e=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),r=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(o.certificateExtensionToAsn1(t[n]));return e},o.certificateExtensionToAsn1=function(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.id).getBytes())),t.critical&&e.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return"string"!==typeof t.value&&(r=i.toDer(r).getBytes()),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)),e},o.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||o.getCertificationRequestInfo(t);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[e,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureOid).getBytes()),b(t.signatureOid,t.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},o.createCaStore=function(t){var e={certs:{}};function r(t){return s(t),e.certs[t.hash]||null}function s(t){if(!t.hash){var e=n.md.sha1.create();t.attributes=o.RDNAttributesAsArray(y(t),e),t.hash=e.digest().toHex()}}if(e.getIssuer=function(t){return r(t.issuer)},e.addCertificate=function(t){if("string"===typeof t&&(t=n.pki.certificateFromPem(t)),s(t.subject),!e.hasCertificate(t))if(t.subject.hash in e.certs){var r=e.certs[t.subject.hash];n.util.isArray(r)||(r=[r]),r.push(t),e.certs[t.subject.hash]=r}else e.certs[t.subject.hash]=t},e.hasCertificate=function(t){"string"===typeof t&&(t=n.pki.certificateFromPem(t));var e=r(t.subject);if(!e)return!1;n.util.isArray(e)||(e=[e]);for(var s=i.toDer(o.certificateToAsn1(t)).getBytes(),a=0;a<e.length;++a){if(s===i.toDer(o.certificateToAsn1(e[a])).getBytes())return!0}return!1},e.listAllCertificates=function(){var t=[];for(var r in e.certs)if(e.certs.hasOwnProperty(r)){var i=e.certs[r];if(n.util.isArray(i))for(var o=0;o<i.length;++o)t.push(i[o]);else t.push(i)}return t},e.removeCertificate=function(t){var a;if("string"===typeof t&&(t=n.pki.certificateFromPem(t)),s(t.subject),!e.hasCertificate(t))return null;var l=r(t.subject);if(!n.util.isArray(l))return a=e.certs[t.subject.hash],delete e.certs[t.subject.hash],a;for(var u=i.toDer(o.certificateToAsn1(t)).getBytes(),c=0;c<l.length;++c){u===i.toDer(o.certificateToAsn1(l[c])).getBytes()&&(a=l[c],l.splice(c,1))}return 0===l.length&&delete e.certs[t.subject.hash],a},t)for(var a=0;a<t.length;++a){var l=t[a];e.addCertificate(l)}return e},o.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},o.verifyCertificateChain=function(t,e,r){"function"===typeof r&&(r={verify:r}),r=r||{};var i=(e=e.slice(0)).slice(0),s=r.validityCheckDate;"undefined"===typeof s&&(s=new Date);var a=!0,l=null,u=0;do{var c=e.shift(),h=null,f=!1;if(s&&(s<c.validity.notBefore||s>c.validity.notAfter)&&(l={message:"Certificate is not valid yet or has expired.",error:o.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:s}),null===l){if(null===(h=e[0]||t.getIssuer(c))&&c.isIssuer(c)&&(f=!0,h=c),h){var d=h;n.util.isArray(d)||(d=[d]);for(var p=!1;!p&&d.length>0;){h=d.shift();try{p=h.verify(c)}catch(x){}}p||(l={message:"Certificate signature is invalid.",error:o.certificateError.bad_certificate})}null!==l||h&&!f||t.hasCertificate(c)||(l={message:"Certificate is not trusted.",error:o.certificateError.unknown_ca})}if(null===l&&h&&!c.isIssuer(h)&&(l={message:"Certificate issuer is invalid.",error:o.certificateError.bad_certificate}),null===l)for(var m={keyUsage:!0,basicConstraints:!0},g=0;null===l&&g<c.extensions.length;++g){var y=c.extensions[g];y.critical&&!(y.name in m)&&(l={message:"Certificate has an unsupported critical extension.",error:o.certificateError.unsupported_certificate})}if(null===l&&(!a||0===e.length&&(!h||f))){var _=c.getExtension("basicConstraints"),v=c.getExtension("keyUsage");if(null!==v&&(v.keyCertSign&&null!==_||(l={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:o.certificateError.bad_certificate})),null!==l||null===_||_.cA||(l={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:o.certificateError.bad_certificate}),null===l&&null!==v&&"pathLenConstraint"in _)u-1>_.pathLenConstraint&&(l={message:"Certificate basicConstraints pathLenConstraint violated.",error:o.certificateError.bad_certificate})}var b=null===l||l.error,w=r.verify?r.verify(b,u,i):b;if(!0!==w)throw!0===b&&(l={message:"The application rejected the certificate.",error:o.certificateError.bad_certificate}),(w||0===w)&&("object"!==typeof w||n.util.isArray(w)?"string"===typeof w&&(l.error=w):(w.message&&(l.message=w.message),w.error&&(l.error=w.error))),l;l=null,a=!1,++u}while(e.length>0);return!0}},function(t,e,r){var n=r(2);r(11),r(4),(t.exports=n.pss=n.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e,r=t.md,i=t.mgf,o=r.digestLength,s=t.salt||null;if("string"===typeof s&&(s=n.util.createBuffer(s)),"saltLength"in t)e=t.saltLength;else{if(null===s)throw new Error("Salt length not specified or specific salt not given.");e=s.length()}if(null!==s&&s.length()!==e)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||n.random,l={encode:function(t,l){var u,c,h=l-1,f=Math.ceil(h/8),d=t.digest().getBytes();if(f<o+e+2)throw new Error("Message is too long to encrypt.");c=null===s?a.getBytesSync(e):s.bytes();var p=new n.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(d),p.putBytes(c),r.start(),r.update(p.getBytes());var m=r.digest().getBytes(),g=new n.util.ByteBuffer;g.fillWithByte(0,f-e-o-2),g.putByte(1),g.putBytes(c);var y=g.getBytes(),_=f-o-1,v=i.generate(m,_),b="";for(u=0;u<_;u++)b+=String.fromCharCode(y.charCodeAt(u)^v.charCodeAt(u));var w=65280>>8*f-h&255;return(b=String.fromCharCode(b.charCodeAt(0)&~w)+b.substr(1))+m+String.fromCharCode(188)},verify:function(t,s,a){var l,u=a-1,c=Math.ceil(u/8);if(s=s.substr(-c),c<o+e+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==s.charCodeAt(c-1))throw new Error("Encoded message does not end in 0xBC.");var h=c-o-1,f=s.substr(0,h),d=s.substr(h,o),p=65280>>8*c-u&255;if(0!==(f.charCodeAt(0)&p))throw new Error("Bits beyond keysize not zero as expected.");var m=i.generate(d,h),g="";for(l=0;l<h;l++)g+=String.fromCharCode(f.charCodeAt(l)^m.charCodeAt(l));g=String.fromCharCode(g.charCodeAt(0)&~p)+g.substr(1);var y=c-o-e-2;for(l=0;l<y;l++)if(0!==g.charCodeAt(l))throw new Error("Leftmost octets not zero as expected");if(1!==g.charCodeAt(y))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var _=g.substr(-e),v=new n.util.ByteBuffer;return v.fillWithByte(0,8),v.putBytes(t),v.putBytes(_),r.start(),r.update(v.getBytes()),d===r.digest().getBytes()}};return l}},function(t,e,r){"use strict";(function(e){var n=r(7),i=r(363),o=r(181),s={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e))&&(t=r(182)),t}(),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)||e&&"application/json"===e["Content-Type"]?(a(e,"application/json"),function(t,e,r){if(n.isString(t))try{return(e||JSON.parse)(t),n.trim(t)}catch(i){if("SyntaxError"!==i.name)throw i}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional,r=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,s=!r&&"json"===this.responseType;if(s||i&&n.isString(t)&&t.length)try{return JSON.parse(t)}catch(a){if(s){if("SyntaxError"===a.name)throw o(a,this,"E_JSON_PARSE");throw a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(t){l.headers[t]={}})),n.forEach(["post","put","patch"],(function(t){l.headers[t]=n.merge(s)})),t.exports=l}).call(this,r(5))},function(t,e,r){"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=u(t),s=n[0],a=n[1],l=new o(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),c=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,l[c++]=255&e);1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,l=r-i;a<l;a+=s)o.push(c(t,a,a+s>l?l:a+s));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(t){e.fetch=a(t.fetch)&&a(t.ReadableStream),e.writableStream=a(t.WritableStream),e.abortController=a(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(l){}var r;function n(){if(void 0!==r)return r;if(t.XMLHttpRequest){r=new t.XMLHttpRequest;try{r.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(l){r=null}}else r=null;return r}function i(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(l){}return!1}var o="undefined"!==typeof t.ArrayBuffer,s=o&&a(t.ArrayBuffer.prototype.slice);function a(t){return"function"===typeof t}e.arraybuffer=e.fetch||o&&i("arraybuffer"),e.msstream=!e.fetch&&s&&i("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&o&&i("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!n()&&a(n().overrideMimeType),e.vbArray=a(t.VBArray),r=null}).call(this,r(6))},function(t,e,r){(function(t,n,i){var o=r(94),s=r(0),a=r(35),l=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=e.IncomingMessage=function(e,r,s,l){var u=this;if(a.Readable.call(u),u._mode=s,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",(function(){t.nextTick((function(){u.emit("close")}))})),"fetch"===s){if(u._fetchResponse=r,u.url=r.url,u.statusCode=r.status,u.statusMessage=r.statusText,r.headers.forEach((function(t,e){u.headers[e.toLowerCase()]=t,u.rawHeaders.push(e,t)})),o.writableStream){var c=new WritableStream({write:function(t){return new Promise((function(e,r){u._destroyed?r():u.push(new n(t))?e():u._resumeFetch=e}))},close:function(){i.clearTimeout(l),u._destroyed||u.push(null)},abort:function(t){u._destroyed||u.emit("error",t)}});try{return void r.body.pipeTo(c).catch((function(t){i.clearTimeout(l),u._destroyed||u.emit("error",t)}))}catch(p){}}var h=r.body.getReader();!function t(){h.read().then((function(e){if(!u._destroyed){if(e.done)return i.clearTimeout(l),void u.push(null);u.push(new n(e.value)),t()}})).catch((function(t){i.clearTimeout(l),u._destroyed||u.emit("error",t)}))}()}else{if(u._xhr=e,u._pos=0,u.url=e.responseURL,u.statusCode=e.status,u.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var r=e[1].toLowerCase();"set-cookie"===r?(void 0===u.headers[r]&&(u.headers[r]=[]),u.headers[r].push(e[2])):void 0!==u.headers[r]?u.headers[r]+=", "+e[2]:u.headers[r]=e[2],u.rawHeaders.push(e[1],e[2])}})),u._charset="x-user-defined",!o.overrideMimeType){var f=u.rawHeaders["mime-type"];if(f){var d=f.match(/;\s*charset=([^;])(;|$)/);d&&(u._charset=d[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};s(u,a.Readable),u.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},u.prototype._onXHRProgress=function(){var t=this,e=t._xhr,r=null;switch(t._mode){case"text:vbarray":if(e.readyState!==l.DONE)break;try{r=new i.VBArray(e.responseBody).toArray()}catch(c){}if(null!==r){t.push(new n(r));break}case"text":try{r=e.responseText}catch(c){t._mode="text:vbarray";break}if(r.length>t._pos){var o=r.substr(t._pos);if("x-user-defined"===t._charset){for(var s=new n(o.length),a=0;a<o.length;a++)s[a]=255&o.charCodeAt(a);t.push(s)}else t.push(o,t._charset);t._pos=r.length}break;case"arraybuffer":if(e.readyState!==l.DONE||!e.response)break;r=e.response,t.push(new n(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=e.response,e.readyState!==l.LOADING||!r)break;t.push(new n(new Uint8Array(r)));break;case"ms-stream":if(r=e.response,e.readyState!==l.LOADING)break;var u=new i.MSStreamReader;u.onprogress=function(){u.result.byteLength>t._pos&&(t.push(new n(new Uint8Array(u.result.slice(t._pos)))),t._pos=u.result.byteLength)},u.onload=function(){t.push(null)},u.readAsArrayBuffer(r)}t._xhr.readyState===l.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,r(5),r(3).Buffer,r(6))},function(t,e,r){"use strict";(function(e,n){var i=r(47);t.exports=v;var o,s=r(93);v.ReadableState=_;r(13).EventEmitter;var a=function(t,e){return t.listeners(e).length},l=r(97),u=r(60).Buffer,c=e.Uint8Array||function(){};var h=Object.create(r(36));h.inherits=r(0);var f=r(211),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var p,m=r(212),g=r(98);h.inherits(v,l);var y=["error","close","destroy","pause","resume"];function _(t,e){t=t||{};var n=e instanceof(o=o||r(19));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=r(20).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function v(t){if(o=o||r(19),!(this instanceof v))return new v(t);this._readableState=new _(t,this),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function b(t,e,r,n,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,S(t)}(t,s)):(i||(o=function(t,e){var r;n=e,u.isBuffer(n)||n instanceof c||"string"===typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"===typeof e||s.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=function(t){return u.from(t)}(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):T(t,s)):w(t,s,e,!1))):n||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&S(t)),T(t,e)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(t,e){this.push(null),e(t)},v.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=u.from(t,e),e=""),r=!0),b(this,t,e,!1,r)},v.prototype.unshift=function(t){return b(this,t,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(t){return p||(p=r(20).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var x=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=x?t=x:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(M,t):M(t))}function M(t){d("emit readable"),t.emit("readable"),k(t)}function T(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(A,t,e))}function A(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function C(t){d("readable nexttick read 0"),t.read(0)}function I(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),k(t),e.flowing&&!e.reading&&t.read(0)}function k(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=u.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),0===(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function B(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(P,e,t))}function P(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function D(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}v.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?B(this):S(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&B(this),null;var n,i=e.needReadable;return d("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",i=!0),e.ended||e.reading?d("reading or ended",i=!1):i&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(r,e))),null===(n=t>0?R(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&B(this)),null!==n&&this.emit("data",n),n},v.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(t,e){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);var l=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?c:v;function u(e,n){d("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,d("cleanup"),t.removeListener("close",y),t.removeListener("finish",_),t.removeListener("drain",h),t.removeListener("error",g),t.removeListener("unpipe",u),r.removeListener("end",c),r.removeListener("end",v),r.removeListener("data",m),f=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){d("onend"),t.end()}o.endEmitted?i.nextTick(l):r.once("end",l),t.on("unpipe",u);var h=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,k(t))}}(r);t.on("drain",h);var f=!1;var p=!1;function m(e){d("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==D(o.pipes,t))&&!f&&(d("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function g(e){d("onerror",e),v(),t.removeListener("error",g),0===a(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",_),v()}function _(){d("onfinish"),t.removeListener("close",y),v()}function v(){d("unpipe"),r.unpipe(t)}return r.on("data",m),function(t,e,r){if("function"===typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",g),t.once("close",y),t.once("finish",_),t.emit("pipe",r),o.flowing||(d("pipe resume"),r.resume()),t},v.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=D(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},v.prototype.on=function(t,e){var r=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):i.nextTick(C,this))}return r},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(I,t,e))}(this,t)),this},v.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(d("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(d("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause())))})),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<y.length;o++)t.on(y[o],this.emit.bind(this,y[o]));return this._read=function(e){d("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=R}).call(this,r(6),r(5))},function(t,e,r){t.exports=r(13).EventEmitter},function(t,e,r){"use strict";var n=r(47);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(n.nextTick(i,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){(function(t){var n="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(214),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(6))},function(t,e,r){"use strict";t.exports=s;var n=r(19),i=Object.create(r(36));function o(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);n.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"===typeof this._flush?this._flush((function(e,r){l(t,e,r)})):l(this,null,null)}function l(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=r(0),i.inherits(s,n),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,(function(t){e(t),r.emit("close")}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GaxiosError=void 0;class n extends Error{constructor(t,e,r){super(t),this.response=r,this.config=e,this.code=r.status.toString()}}e.GaxiosError=n},function(t,e,r){var n;!function(i){"use strict";var o,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,l=Math.floor,u="[BigNumber Error] ",c=u+"Number primitive has more than 15 significant digits: ",h=1e14,f=14,d=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,g=1e9;function y(t){var e=0|t;return t>0||t===e?e:e-1}function _(t){for(var e,r,n=1,i=t.length,o=t[0]+"";n<i;){for(e=t[n++]+"",r=f-e.length;r--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function v(t,e){var r,n,i=t.c,o=e.c,s=t.s,a=e.s,l=t.e,u=e.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=l==u,!i||!o)return n?0:!i^r?1:-1;if(!n)return l>u^r?1:-1;for(a=(l=i.length)<(u=o.length)?l:u,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return l==u?0:l>u^r?1:-1}function b(t,e,r,n){if(t<e||t>r||t!==l(t))throw Error(u+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function w(t){var e=t.c.length-1;return y(t.e/f)==e&&t.c[e]%2!=0}function x(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function E(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(++e>(n=t.length)){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}o=function t(e){var r,n,i,o=N.prototype={constructor:N,toString:null,valueOf:null},S=new N(1),M=20,T=4,A=-7,C=21,I=-1e7,k=1e7,R=!1,B=1,P=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},L="0123456789abcdefghijklmnopqrstuvwxyz",O=!0;function N(t,e){var r,o,a,u,h,p,m,g,y=this;if(!(y instanceof N))return new N(t,e);if(null==e){if(t&&!0===t._isBigNumber)return y.s=t.s,void(!t.c||t.e>k?y.c=y.e=null:t.e<I?y.c=[y.e=0]:(y.e=t.e,y.c=t.c.slice()));if((p="number"==typeof t)&&0*t==0){if(y.s=1/t<0?(t=-t,-1):1,t===~~t){for(u=0,h=t;h>=10;h/=10,u++);return void(u>k?y.c=y.e=null:(y.e=u,y.c=[t]))}g=String(t)}else{if(!s.test(g=String(t)))return i(y,g,p);y.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(u=g.indexOf("."))>-1&&(g=g.replace(".","")),(h=g.search(/e/i))>0?(u<0&&(u=h),u+=+g.slice(h+1),g=g.substring(0,h)):u<0&&(u=g.length)}else{if(b(e,2,L.length,"Base"),10==e&&O)return F(y=new N(t),M+y.e+1,T);if(g=String(t),p="number"==typeof t){if(0*t!=0)return i(y,g,p,e);if(y.s=1/t<0?(g=g.slice(1),-1):1,N.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(c+t)}else y.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(r=L.slice(0,e),u=h=0,m=g.length;h<m;h++)if(r.indexOf(o=g.charAt(h))<0){if("."==o){if(h>u){u=m;continue}}else if(!a&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){a=!0,h=-1,u=0;continue}return i(y,String(t),p,e)}p=!1,(u=(g=n(g,e,10,y.s)).indexOf("."))>-1?g=g.replace(".",""):u=g.length}for(h=0;48===g.charCodeAt(h);h++);for(m=g.length;48===g.charCodeAt(--m););if(g=g.slice(h,++m)){if(m-=h,p&&N.DEBUG&&m>15&&(t>d||t!==l(t)))throw Error(c+y.s*t);if((u=u-h-1)>k)y.c=y.e=null;else if(u<I)y.c=[y.e=0];else{if(y.e=u,y.c=[],h=(u+1)%f,u<0&&(h+=f),h<m){for(h&&y.c.push(+g.slice(0,h)),m-=f;h<m;)y.c.push(+g.slice(h,h+=f));h=f-(g=g.slice(h)).length}else h-=m;for(;h--;g+="0");y.c.push(+g)}}else y.c=[y.e=0]}function z(t,e,r,n){var i,o,s,a,l;if(null==r?r=T:b(r,0,8),!t.c)return t.toString();if(i=t.c[0],s=t.e,null==e)l=_(t.c),l=1==n||2==n&&(s<=A||s>=C)?x(l,s):E(l,s,"0");else if(o=(t=F(new N(t),e,r)).e,a=(l=_(t.c)).length,1==n||2==n&&(e<=o||o<=A)){for(;a<e;l+="0",a++);l=x(l,o)}else if(e-=s,l=E(l,o,"0"),o+1>a){if(--e>0)for(l+=".";e--;l+="0");}else if((e+=o-a)>0)for(o+1==a&&(l+=".");e--;l+="0");return t.s<0&&i?"-"+l:l}function U(t,e){for(var r,n=1,i=new N(t[0]);n<t.length;n++){if(!(r=new N(t[n])).s){i=r;break}e.call(i,r)&&(i=r)}return i}function j(t,e,r){for(var n=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,n++);return(r=n+r*f-1)>k?t.c=t.e=null:r<I?t.c=[t.e=0]:(t.e=r,t.c=e),t}function F(t,e,r,n){var i,o,s,u,c,d,m,g=t.c,y=p;if(g){t:{for(i=1,u=g[0];u>=10;u/=10,i++);if((o=e-i)<0)o+=f,s=e,m=(c=g[d=0])/y[i-s-1]%10|0;else if((d=a((o+1)/f))>=g.length){if(!n)break t;for(;g.length<=d;g.push(0));c=m=0,i=1,s=(o%=f)-f+1}else{for(c=u=g[d],i=1;u>=10;u/=10,i++);m=(s=(o%=f)-f+i)<0?0:c/y[i-s-1]%10|0}if(n=n||e<0||null!=g[d+1]||(s<0?c:c%y[i-s-1]),n=r<4?(m||n)&&(0==r||r==(t.s<0?3:2)):m>5||5==m&&(4==r||n||6==r&&(o>0?s>0?c/y[i-s]:0:g[d-1])%10&1||r==(t.s<0?8:7)),e<1||!g[0])return g.length=0,n?(e-=t.e+1,g[0]=y[(f-e%f)%f],t.e=-e||0):g[0]=t.e=0,t;if(0==o?(g.length=d,u=1,d--):(g.length=d+1,u=y[f-o],g[d]=s>0?l(c/y[i-s]%y[s])*u:0),n)for(;;){if(0==d){for(o=1,s=g[0];s>=10;s/=10,o++);for(s=g[0]+=u,u=1;s>=10;s/=10,u++);o!=u&&(t.e++,g[0]==h&&(g[0]=1));break}if(g[d]+=u,g[d]!=h)break;g[d--]=0,u=1}for(o=g.length;0===g[--o];g.pop());}t.e>k?t.c=t.e=null:t.e<I&&(t.c=[t.e=0])}return t}function V(t){var e,r=t.e;return null===r?t.toString():(e=_(t.c),e=r<=A||r>=C?x(e,r):E(e,r,"0"),t.s<0?"-"+e:e)}return N.clone=t,N.ROUND_UP=0,N.ROUND_DOWN=1,N.ROUND_CEIL=2,N.ROUND_FLOOR=3,N.ROUND_HALF_UP=4,N.ROUND_HALF_DOWN=5,N.ROUND_HALF_EVEN=6,N.ROUND_HALF_CEIL=7,N.ROUND_HALF_FLOOR=8,N.EUCLID=9,N.config=N.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(u+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(b(r=t[e],0,g,e),M=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(b(r=t[e],0,8,e),T=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(b(r[0],-g,0,e),b(r[1],0,g,e),A=r[0],C=r[1]):(b(r,-g,g,e),A=-(C=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if((r=t[e])&&r.pop)b(r[0],-g,-1,e),b(r[1],1,g,e),I=r[0],k=r[1];else{if(b(r,-g,g,e),!r)throw Error(u+e+" cannot be zero: "+r);I=-(k=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(u+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw R=!r,Error(u+"crypto unavailable");R=r}else R=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(b(r=t[e],0,9,e),B=r),t.hasOwnProperty(e="POW_PRECISION")&&(b(r=t[e],0,g,e),P=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(u+e+" not an object: "+r);D=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(u+e+" invalid: "+r);O="0123456789"==r.slice(0,10),L=r}}return{DECIMAL_PLACES:M,ROUNDING_MODE:T,EXPONENTIAL_AT:[A,C],RANGE:[I,k],CRYPTO:R,MODULO_MODE:B,POW_PRECISION:P,FORMAT:D,ALPHABET:L}},N.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!N.DEBUG)return!0;var e,r,n=t.c,i=t.e,o=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-g&&i<=g&&i===l(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break t}if((e=(i+1)%f)<1&&(e+=f),String(n[0]).length==e){for(e=0;e<n.length;e++)if((r=n[e])<0||r>=h||r!==l(r))break t;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(u+"Invalid BigNumber: "+t)},N.maximum=N.max=function(){return U(arguments,o.lt)},N.minimum=N.min=function(){return U(arguments,o.gt)},N.random=function(){var t=9007199254740992,e=Math.random()*t&2097151?function(){return l(Math.random()*t)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(t){var r,n,i,o,s,c=0,h=[],d=new N(S);if(null==t?t=M:b(t,0,g),o=a(t/f),R)if(crypto.getRandomValues){for(r=crypto.getRandomValues(new Uint32Array(o*=2));c<o;)(s=131072*r[c]+(r[c+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),r[c]=n[0],r[c+1]=n[1]):(h.push(s%1e14),c+=2);c=o/2}else{if(!crypto.randomBytes)throw R=!1,Error(u+"crypto unavailable");for(r=crypto.randomBytes(o*=7);c<o;)(s=281474976710656*(31&r[c])+1099511627776*r[c+1]+4294967296*r[c+2]+16777216*r[c+3]+(r[c+4]<<16)+(r[c+5]<<8)+r[c+6])>=9e15?crypto.randomBytes(7).copy(r,c):(h.push(s%1e14),c+=7);c=o/7}if(!R)for(;c<o;)(s=e())<9e15&&(h[c++]=s%1e14);for(o=h[--c],t%=f,o&&t&&(s=p[f-t],h[c]=l(o/s)*s);0===h[c];h.pop(),c--);if(c<0)h=[i=0];else{for(i=-1;0===h[0];h.splice(0,1),i-=f);for(c=1,s=h[0];s>=10;s/=10,c++);c<f&&(i-=f-c)}return d.e=i,d.c=h,d}}(),N.sum=function(){for(var t=1,e=arguments,r=new N(e[0]);t<e.length;)r=r.plus(e[t++]);return r},n=function(){var t="0123456789";function e(t,e,r,n){for(var i,o,s=[0],a=0,l=t.length;a<l;){for(o=s.length;o--;s[o]*=e);for(s[0]+=n.indexOf(t.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(n,i,o,s,a){var l,u,c,h,f,d,p,m,g=n.indexOf("."),y=M,v=T;for(g>=0&&(h=P,P=0,n=n.replace(".",""),d=(m=new N(i)).pow(n.length-g),P=h,m.c=e(E(_(d.c),d.e,"0"),10,o,t),m.e=m.c.length),c=h=(p=e(n,i,o,a?(l=L,t):(l=t,L))).length;0==p[--h];p.pop());if(!p[0])return l.charAt(0);if(g<0?--c:(d.c=p,d.e=c,d.s=s,p=(d=r(d,m,y,v,o)).c,f=d.r,c=d.e),g=p[u=c+y+1],h=o/2,f=f||u<0||null!=p[u+1],f=v<4?(null!=g||f)&&(0==v||v==(d.s<0?3:2)):g>h||g==h&&(4==v||f||6==v&&1&p[u-1]||v==(d.s<0?8:7)),u<1||!p[0])n=f?E(l.charAt(1),-y,l.charAt(0)):l.charAt(0);else{if(p.length=u,f)for(--o;++p[--u]>o;)p[u]=0,u||(++c,p=[1].concat(p));for(h=p.length;!p[--h];);for(g=0,n="";g<=h;n+=l.charAt(p[g++]));n=E(n,c,l.charAt(0))}return n}}(),r=function(){function t(t,e,r){var n,i,o,s,a=0,l=t.length,u=e%m,c=e/m|0;for(t=t.slice();l--;)a=((i=u*(o=t[l]%m)+(n=c*o+(s=t[l]/m|0)*u)%m*m+a)/r|0)+(n/m|0)+c*s,t[l]=i%r;return a&&(t=[a].concat(t)),t}function e(t,e,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,i,o,s,a){var u,c,d,p,m,g,_,v,b,w,x,E,S,M,T,A,C,I=n.s==i.s?1:-1,k=n.c,R=i.c;if(!k||!k[0]||!R||!R[0])return new N(n.s&&i.s&&(k?!R||k[0]!=R[0]:R)?k&&0==k[0]||!R?0*I:I/0:NaN);for(b=(v=new N(I)).c=[],I=o+(c=n.e-i.e)+1,a||(a=h,c=y(n.e/f)-y(i.e/f),I=I/f|0),d=0;R[d]==(k[d]||0);d++);if(R[d]>(k[d]||0)&&c--,I<0)b.push(1),p=!0;else{for(M=k.length,A=R.length,d=0,I+=2,(m=l(a/(R[0]+1)))>1&&(R=t(R,m,a),k=t(k,m,a),A=R.length,M=k.length),S=A,x=(w=k.slice(0,A)).length;x<A;w[x++]=0);C=R.slice(),C=[0].concat(C),T=R[0],R[1]>=a/2&&T++;do{if(m=0,(u=e(R,w,A,x))<0){if(E=w[0],A!=x&&(E=E*a+(w[1]||0)),(m=l(E/T))>1)for(m>=a&&(m=a-1),_=(g=t(R,m,a)).length,x=w.length;1==e(g,w,_,x);)m--,r(g,A<_?C:R,_,a),_=g.length,u=1;else 0==m&&(u=m=1),_=(g=R.slice()).length;if(_<x&&(g=[0].concat(g)),r(w,g,x,a),x=w.length,-1==u)for(;e(R,w,A,x)<1;)m++,r(w,A<x?C:R,x,a),x=w.length}else 0===u&&(m++,w=[0]);b[d++]=m,w[0]?w[x++]=k[S]||0:(w=[k[S]],x=1)}while((S++<M||null!=w[0])&&I--);p=null!=w[0],b[0]||b.splice(0,1)}if(a==h){for(d=1,I=b[0];I>=10;I/=10,d++);F(v,o+(v.e=d+c*f-1)+1,s,p)}else v.e=c,v.r=+p;return v}}(),i=function(){var t=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,r=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,s,a,l){var c,h=a?s:s.replace(i,"");if(n.test(h))o.s=isNaN(h)?null:h<0?-1:1;else{if(!a&&(h=h.replace(t,(function(t,e,r){return c="x"==(r=r.toLowerCase())?16:"b"==r?2:8,l&&l!=c?t:e})),l&&(c=l,h=h.replace(e,"$1").replace(r,"0.$1")),s!=h))return new N(h,c);if(N.DEBUG)throw Error(u+"Not a"+(l?" base "+l:"")+" number: "+s);o.s=null}o.c=o.e=null}}(),o.absoluteValue=o.abs=function(){var t=new N(this);return t.s<0&&(t.s=1),t},o.comparedTo=function(t,e){return v(this,new N(t,e))},o.decimalPlaces=o.dp=function(t,e){var r,n,i,o=this;if(null!=t)return b(t,0,g),null==e?e=T:b(e,0,8),F(new N(o),t+o.e+1,e);if(!(r=o.c))return null;if(n=((i=r.length-1)-y(this.e/f))*f,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},o.dividedBy=o.div=function(t,e){return r(this,new N(t,e),M,T)},o.dividedToIntegerBy=o.idiv=function(t,e){return r(this,new N(t,e),0,1)},o.exponentiatedBy=o.pow=function(t,e){var r,n,i,o,s,c,h,d,p=this;if((t=new N(t)).c&&!t.isInteger())throw Error(u+"Exponent not an integer: "+V(t));if(null!=e&&(e=new N(e)),s=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return d=new N(Math.pow(+V(p),s?2-w(t):+V(t))),e?d.mod(e):d;if(c=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new N(NaN);(n=!c&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||s&&p.c[1]>=24e7:p.c[0]<8e13||s&&p.c[0]<=9999975e7)))return o=p.s<0&&w(t)?-0:0,p.e>-1&&(o=1/o),new N(c?1/o:o);P&&(o=a(P/f+2))}for(s?(r=new N(.5),c&&(t.s=1),h=w(t)):h=(i=Math.abs(+V(t)))%2,d=new N(S);;){if(h){if(!(d=d.times(p)).c)break;o?d.c.length>o&&(d.c.length=o):n&&(d=d.mod(e))}if(i){if(0===(i=l(i/2)))break;h=i%2}else if(F(t=t.times(r),t.e+1,1),t.e>14)h=w(t);else{if(0===(i=+V(t)))break;h=i%2}p=p.times(p),o?p.c&&p.c.length>o&&(p.c.length=o):n&&(p=p.mod(e))}return n?d:(c&&(d=S.div(d)),e?d.mod(e):o?F(d,P,T,undefined):d)},o.integerValue=function(t){var e=new N(this);return null==t?t=T:b(t,0,8),F(e,e.e+1,t)},o.isEqualTo=o.eq=function(t,e){return 0===v(this,new N(t,e))},o.isFinite=function(){return!!this.c},o.isGreaterThan=o.gt=function(t,e){return v(this,new N(t,e))>0},o.isGreaterThanOrEqualTo=o.gte=function(t,e){return 1===(e=v(this,new N(t,e)))||0===e},o.isInteger=function(){return!!this.c&&y(this.e/f)>this.c.length-2},o.isLessThan=o.lt=function(t,e){return v(this,new N(t,e))<0},o.isLessThanOrEqualTo=o.lte=function(t,e){return-1===(e=v(this,new N(t,e)))||0===e},o.isNaN=function(){return!this.s},o.isNegative=function(){return this.s<0},o.isPositive=function(){return this.s>0},o.isZero=function(){return!!this.c&&0==this.c[0]},o.minus=function(t,e){var r,n,i,o,s=this,a=s.s;if(e=(t=new N(t,e)).s,!a||!e)return new N(NaN);if(a!=e)return t.s=-e,s.plus(t);var l=s.e/f,u=t.e/f,c=s.c,d=t.c;if(!l||!u){if(!c||!d)return c?(t.s=-e,t):new N(d?s:NaN);if(!c[0]||!d[0])return d[0]?(t.s=-e,t):new N(c[0]?s:3==T?-0:0)}if(l=y(l),u=y(u),c=c.slice(),a=l-u){for((o=a<0)?(a=-a,i=c):(u=l,i=d),i.reverse(),e=a;e--;i.push(0));i.reverse()}else for(n=(o=(a=c.length)<(e=d.length))?a:e,a=e=0;e<n;e++)if(c[e]!=d[e]){o=c[e]<d[e];break}if(o&&(i=c,c=d,d=i,t.s=-t.s),(e=(n=d.length)-(r=c.length))>0)for(;e--;c[r++]=0);for(e=h-1;n>a;){if(c[--n]<d[n]){for(r=n;r&&!c[--r];c[r]=e);--c[r],c[n]+=h}c[n]-=d[n]}for(;0==c[0];c.splice(0,1),--u);return c[0]?j(t,c,u):(t.s=3==T?-1:1,t.c=[t.e=0],t)},o.modulo=o.mod=function(t,e){var n,i,o=this;return t=new N(t,e),!o.c||!t.s||t.c&&!t.c[0]?new N(NaN):!t.c||o.c&&!o.c[0]?new N(o):(9==B?(i=t.s,t.s=1,n=r(o,t,0,3),t.s=i,n.s*=i):n=r(o,t,0,B),(t=o.minus(n.times(t))).c[0]||1!=B||(t.s=o.s),t)},o.multipliedBy=o.times=function(t,e){var r,n,i,o,s,a,l,u,c,d,p,g,_,v,b,w=this,x=w.c,E=(t=new N(t,e)).c;if(!x||!E||!x[0]||!E[0])return!w.s||!t.s||x&&!x[0]&&!E||E&&!E[0]&&!x?t.c=t.e=t.s=null:(t.s*=w.s,x&&E?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=y(w.e/f)+y(t.e/f),t.s*=w.s,(l=x.length)<(d=E.length)&&(_=x,x=E,E=_,i=l,l=d,d=i),i=l+d,_=[];i--;_.push(0));for(v=h,b=m,i=d;--i>=0;){for(r=0,p=E[i]%b,g=E[i]/b|0,o=i+(s=l);o>i;)r=((u=p*(u=x[--s]%b)+(a=g*u+(c=x[s]/b|0)*p)%b*b+_[o]+r)/v|0)+(a/b|0)+g*c,_[o--]=u%v;_[o]=r}return r?++n:_.splice(0,1),j(t,_,n)},o.negated=function(){var t=new N(this);return t.s=-t.s||null,t},o.plus=function(t,e){var r,n=this,i=n.s;if(e=(t=new N(t,e)).s,!i||!e)return new N(NaN);if(i!=e)return t.s=-e,n.minus(t);var o=n.e/f,s=t.e/f,a=n.c,l=t.c;if(!o||!s){if(!a||!l)return new N(i/0);if(!a[0]||!l[0])return l[0]?t:new N(a[0]?n:0*i)}if(o=y(o),s=y(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=l):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(e=l.length)<0&&(r=l,l=a,a=r,e=i),i=0;e;)i=(a[--e]=a[e]+l[e]+i)/h|0,a[e]=h===a[e]?0:a[e]%h;return i&&(a=[i].concat(a),++s),j(t,a,s)},o.precision=o.sd=function(t,e){var r,n,i,o=this;if(null!=t&&t!==!!t)return b(t,1,g),null==e?e=T:b(e,0,8),F(new N(o),t,e);if(!(r=o.c))return null;if(n=(i=r.length-1)*f+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return t&&o.e+1>n&&(n=o.e+1),n},o.shiftedBy=function(t){return b(t,-9007199254740991,d),this.times("1e"+t)},o.squareRoot=o.sqrt=function(){var t,e,n,i,o,s=this,a=s.c,l=s.s,u=s.e,c=M+4,h=new N("0.5");if(1!==l||!a||!a[0])return new N(!l||l<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(l=Math.sqrt(+V(s)))||l==1/0?(((e=_(a)).length+u)%2==0&&(e+="0"),l=Math.sqrt(+e),u=y((u+1)/2)-(u<0||u%2),n=new N(e=l==1/0?"5e"+u:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+u)):n=new N(l+""),n.c[0])for((l=(u=n.e)+c)<3&&(l=0);;)if(o=n,n=h.times(o.plus(r(s,o,c,1))),_(o.c).slice(0,l)===(e=_(n.c)).slice(0,l)){if(n.e<u&&--l,"9999"!=(e=e.slice(l-3,l+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(F(n,n.e+M+2,1),t=!n.times(n).eq(s));break}if(!i&&(F(o,o.e+M+2,0),o.times(o).eq(s))){n=o;break}c+=4,l+=4,i=1}return F(n,n.e+M+1,T,t)},o.toExponential=function(t,e){return null!=t&&(b(t,0,g),t++),z(this,t,e,1)},o.toFixed=function(t,e){return null!=t&&(b(t,0,g),t=t+this.e+1),z(this,t,e)},o.toFormat=function(t,e,r){var n,i=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=D;else if("object"!=typeof r)throw Error(u+"Argument not an object: "+r);if(n=i.toFixed(t,e),i.c){var o,s=n.split("."),a=+r.groupSize,l=+r.secondaryGroupSize,c=r.groupSeparator||"",h=s[0],f=s[1],d=i.s<0,p=d?h.slice(1):h,m=p.length;if(l&&(o=a,a=l,l=o,m-=o),a>0&&m>0){for(o=m%a||a,h=p.substr(0,o);o<m;o+=a)h+=c+p.substr(o,a);l>0&&(h+=c+p.slice(o)),d&&(h="-"+h)}n=f?h+(r.decimalSeparator||"")+((l=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):h}return(r.prefix||"")+n+(r.suffix||"")},o.toFraction=function(t){var e,n,i,o,s,a,l,c,h,d,m,g,y=this,v=y.c;if(null!=t&&(!(l=new N(t)).isInteger()&&(l.c||1!==l.s)||l.lt(S)))throw Error(u+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+V(l));if(!v)return new N(y);for(e=new N(S),h=n=new N(S),i=c=new N(S),g=_(v),s=e.e=g.length-y.e-1,e.c[0]=p[(a=s%f)<0?f+a:a],t=!t||l.comparedTo(e)>0?s>0?e:h:l,a=k,k=1/0,l=new N(g),c.c[0]=0;d=r(l,e,0,1),1!=(o=n.plus(d.times(i))).comparedTo(t);)n=i,i=o,h=c.plus(d.times(o=h)),c=o,e=l.minus(d.times(o=e)),l=o;return o=r(t.minus(n),i,0,1),c=c.plus(o.times(h)),n=n.plus(o.times(i)),c.s=h.s=y.s,m=r(h,i,s*=2,T).minus(y).abs().comparedTo(r(c,n,s,T).minus(y).abs())<1?[h,i]:[c,n],k=a,m},o.toNumber=function(){return+V(this)},o.toPrecision=function(t,e){return null!=t&&b(t,1,g),z(this,t,e,2)},o.toString=function(t){var e,r=this,i=r.s,o=r.e;return null===o?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(null==t?e=o<=A||o>=C?x(_(r.c),o):E(_(r.c),o,"0"):10===t&&O?e=E(_((r=F(new N(r),M+o+1,T)).c),r.e,"0"):(b(t,2,L.length,"Base"),e=n(E(_(r.c),o,"0"),10,t,i,!0)),i<0&&r.c[0]&&(e="-"+e)),e},o.valueOf=o.toJSON=function(){return V(this)},o._isBigNumber=!0,null!=e&&N.set(e),N}(),o.default=o.BigNumber=o,void 0===(n=function(){return o}.call(e,r,e,t))||(t.exports=n)}()},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,i="/"===s.charAt(0))}return(i?"/":"")+(e=r(n(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),s="/"===i(t,-1);return(t=r(n(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&s&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),o=n(r.split("/")),s=Math.min(i.length,o.length),a=s,l=0;l<s;l++)if(i[l]!==o[l]){a=l;break}var u=[];for(l=a;l<i.length;l++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,n=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":t.slice(0,n)},e.basename=function(t,e){var r=function(t){"string"!==typeof t&&(t+="");var e,r=0,n=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){r=e+1;break}}else-1===n&&(i=!1,n=e+1);return-1===n?"":t.slice(r,n)}(t);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,r=0,n=-1,i=!0,o=0,s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===n&&(i=!1,n=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){r=s+1;break}}return-1===e||-1===n||0===o||1===o&&e===n-1&&e===r+1?"":t.slice(e,n)};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(5))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasBrowserCrypto=e.createCrypto=void 0;const n=r(239),i=r(241);function o(){return"undefined"!==typeof window&&"undefined"!==typeof window.crypto&&"undefined"!==typeof window.crypto.subtle}e.createCrypto=function(){return o()?new n.BrowserCrypto:new i.NodeCrypto},e.hasBrowserCrypto=o},function(t,e,r){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=r(27),e.createHash=e.Hash=r(37),e.createHmac=e.Hmac=r(115);var n=r(259),i=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);e.getHashes=function(){return o};var s=r(118);e.pbkdf2=s.pbkdf2,e.pbkdf2Sync=s.pbkdf2Sync;var a=r(261);e.Cipher=a.Cipher,e.createCipher=a.createCipher,e.Cipheriv=a.Cipheriv,e.createCipheriv=a.createCipheriv,e.Decipher=a.Decipher,e.createDecipher=a.createDecipher,e.Decipheriv=a.Decipheriv,e.createDecipheriv=a.createDecipheriv,e.getCiphers=a.getCiphers,e.listCiphers=a.listCiphers;var l=r(276);e.DiffieHellmanGroup=l.DiffieHellmanGroup,e.createDiffieHellmanGroup=l.createDiffieHellmanGroup,e.getDiffieHellman=l.getDiffieHellman,e.createDiffieHellman=l.createDiffieHellman,e.DiffieHellman=l.DiffieHellman;var u=r(283);e.createSign=u.createSign,e.Sign=u.Sign,e.createVerify=u.createVerify,e.Verify=u.Verify,e.createECDH=r(324);var c=r(327);e.publicEncrypt=c.publicEncrypt,e.privateEncrypt=c.privateEncrypt,e.publicDecrypt=c.publicDecrypt,e.privateDecrypt=c.privateDecrypt;var h=r(331);e.randomFill=h.randomFill,e.randomFillSync=h.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(242).Transform;function o(t){i.call(this),this._block=n.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(0)(o,i),o.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!n.isBuffer(t)&&"string"!==typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(t)||(t=n.from(t,e));for(var r=this._block,i=0;this._blockOffset+t.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)r[this._blockOffset++]=t[i++];for(var s=0,a=8*t.length;a>0;++s)this._length[s]+=a,(a=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*a);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},function(t,e,r){"use strict";(function(e,n){var i;t.exports=M,M.ReadableState=S;r(13).EventEmitter;var o=function(t,e){return t.listeners(e).length},s=r(108),a=r(3).Buffer,l=e.Uint8Array||function(){};var u,c=r(243);u=c&&c.debuglog?c.debuglog("stream"):function(){};var h,f,d,p=r(244),m=r(109),g=r(110).getHighWaterMark,y=r(28).codes,_=y.ERR_INVALID_ARG_TYPE,v=y.ERR_STREAM_PUSH_AFTER_EOF,b=y.ERR_METHOD_NOT_IMPLEMENTED,w=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(0)(M,s);var x=m.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(t,e,n){i=i||r(29),t=t||{},"boolean"!==typeof n&&(n=e instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",n),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=r(20).StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function M(t){if(i=i||r(29),!(this instanceof M))return new M(t);var e=this instanceof i;this._readableState=new S(t,this,e),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function T(t,e,r,n,i){u("readableAddChunk",e);var o,s=t._readableState;if(null===e)s.reading=!1,function(t,e){if(u("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?k(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,R(t)))}(t,s);else if(i||(o=function(t,e){var r;n=e,a.isBuffer(n)||n instanceof l||"string"===typeof e||void 0===e||t.objectMode||(r=new _("chunk",["string","Buffer","Uint8Array"],e));var n;return r}(s,e)),o)x(t,o);else if(s.objectMode||e&&e.length>0)if("string"===typeof e||s.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=function(t){return a.from(t)}(e)),n)s.endEmitted?x(t,new w):A(t,s,e,!0);else if(s.ended)x(t,new v);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?A(t,s,e,!1):B(t,s)):A(t,s,e,!1)}else n||(s.reading=!1,B(t,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function A(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&k(t)),B(t,e)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),M.prototype.destroy=m.destroy,M.prototype._undestroy=m.undestroy,M.prototype._destroy=function(t,e){e(t)},M.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=a.from(t,e),e=""),r=!0),T(this,t,e,!1,r)},M.prototype.unshift=function(t){return T(this,t,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(t){h||(h=r(20).StringDecoder);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var C=1073741824;function I(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=C?t=C:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t){var e=t._readableState;u("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(u("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(R,t))}function R(t){var e=t._readableState;u("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function B(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(P,t,e))}function P(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(u("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function D(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function L(t){u("readable nexttick read 0"),t.read(0)}function O(t,e){u("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(u("flow",e.flowing);e.flowing&&null!==t.read(););}function z(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function U(t){var e=t._readableState;u("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(j,e,t))}function j(t,e){if(u("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function F(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}M.prototype.read=function(t){u("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return u("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?U(this):k(this),null;if(0===(t=I(t,e))&&e.ended)return 0===e.length&&U(this),null;var n,i=e.needReadable;return u("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&u("length less than watermark",i=!0),e.ended||e.reading?u("reading or ended",i=!1):i&&(u("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=I(r,e))),null===(n=t>0?z(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&U(this)),null!==n&&this.emit("data",n),n},M.prototype._read=function(t){x(this,new b("_read()"))},M.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,u("pipe count=%d opts=%j",i.pipesCount,e);var s=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?l:g;function a(e,n){u("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),t.removeListener("close",p),t.removeListener("finish",m),t.removeListener("drain",c),t.removeListener("error",d),t.removeListener("unpipe",a),r.removeListener("end",l),r.removeListener("end",g),r.removeListener("data",f),h=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function l(){u("onend"),t.end()}i.endEmitted?n.nextTick(s):r.once("end",s),t.on("unpipe",a);var c=function(t){return function(){var e=t._readableState;u("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,N(t))}}(r);t.on("drain",c);var h=!1;function f(e){u("ondata");var n=t.write(e);u("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==F(i.pipes,t))&&!h&&(u("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function d(e){u("onerror",e),g(),t.removeListener("error",d),0===o(t,"error")&&x(t,e)}function p(){t.removeListener("finish",m),g()}function m(){u("onfinish"),t.removeListener("close",p),g()}function g(){u("unpipe"),r.unpipe(t)}return r.on("data",f),function(t,e,r){if("function"===typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",d),t.once("close",p),t.once("finish",m),t.emit("pipe",r),i.flowing||(u("pipe resume"),r.resume()),t},M.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=F(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},M.prototype.on=function(t,e){var r=s.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?k(this):i.reading||n.nextTick(L,this))),r},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(t,e){var r=s.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick(D,this),r},M.prototype.removeAllListeners=function(t){var e=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||n.nextTick(D,this),e},M.prototype.resume=function(){var t=this._readableState;return t.flowing||(u("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(O,t,e))}(this,t)),t.paused=!1,this},M.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause())))})),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<E.length;o++)t.on(E[o],this.emit.bind(this,E[o]));return this._read=function(e){u("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"===typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(246)),f(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),M._fromList=z,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(M.from=function(t,e){return void 0===d&&(d=r(247)),d(M,t,e)})}).call(this,r(6),r(5))},function(t,e,r){t.exports=r(13).EventEmitter},function(t,e,r){"use strict";(function(e){function r(t,e){i(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(n,s):(s._writableState.errorEmitted=!0,e.nextTick(r,s,t)):e.nextTick(r,s,t):o?(e.nextTick(n,s),o(t)):e.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,r(5))},function(t,e,r){"use strict";var n=r(28).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,i){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},function(t,e,r){"use strict";(function(e,n){function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=M,M.WritableState=S;var s={deprecate:r(62)},a=r(108),l=r(3).Buffer,u=e.Uint8Array||function(){};var c,h=r(109),f=r(110).getHighWaterMark,d=r(28).codes,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,_=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,b=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,x=h.errorOrDestroy;function E(){}function S(t,e,s){o=o||r(29),t=t||{},"boolean"!==typeof s&&(s=e instanceof o),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if("function"!==typeof o)throw new g;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,i,o){--e.pendingcb,r?(n.nextTick(o,i),n.nextTick(R,t,e),t._writableState.errorEmitted=!0,x(t,i)):(o(i),t._writableState.errorEmitted=!0,x(t,i),R(t,e))}(t,r,i,e,o);else{var s=I(r)||t.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||C(t,r),i?n.nextTick(A,t,r,s,o):A(t,r,s,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function M(t){var e=this instanceof(o=o||r(29));if(!e&&!c.call(M,this))return new M(t);this._writableState=new S(t,this,e),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),a.call(this)}function T(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function A(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),R(t,e)}function C(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,o=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var a=0,l=!0;r;)o[a]=r,r.isBuf||(l=!1),r=r.next,a+=1;o.allBuffers=l,T(t,e,!0,e.length,o,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,h=r.callback;if(T(t,e,!1,e.objectMode?1:u.length,u,c,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function I(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function k(t,e){t._final((function(r){e.pendingcb--,r&&x(t,r),e.prefinished=!0,t.emit("prefinish"),R(t,e)}))}function R(t,e){var r=I(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!==typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(k,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}r(0)(M,a),S.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===M&&(t&&t._writableState instanceof S)}})):c=function(t){return t instanceof this},M.prototype.pipe=function(){x(this,new y)},M.prototype.write=function(t,e,r){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=t,l.isBuffer(i)||i instanceof u);return a&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"===typeof e&&(r=e,e=null),a?e="buffer":e||(e=o.defaultEncoding),"function"!==typeof r&&(r=E),o.ending?function(t,e){var r=new b;x(t,r),n.nextTick(e,r)}(this,r):(a||function(t,e,r,i){var o;return null===r?o=new v:"string"===typeof r||e.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(x(t,o),n.nextTick(i,o),!1)}(this,o,t,r))&&(o.pendingcb++,s=function(t,e,r,n,i,o){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=l.from(e,r));return e}(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else T(t,e,!1,a,n,i,o);return u}(this,o,a,t,e,r)),s},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||C(this,t))},M.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(t,e,r){r(new m("_write()"))},M.prototype._writev=null,M.prototype.end=function(t,e,r){var i=this._writableState;return"function"===typeof t?(r=t,t=null,e=null):"function"===typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,r){e.ending=!0,R(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,i,r),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),M.prototype.destroy=h.destroy,M.prototype._undestroy=h.undestroy,M.prototype._destroy=function(t,e){e(t)}}).call(this,r(6),r(5))},function(t,e,r){"use strict";t.exports=c;var n=r(28).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,l=r(29);function u(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);l.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,r){f(t,e,r)}))}function f(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new a;if(t._transformState.transforming)throw new s;return t.push(null)}r(0)(c,l),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,r){r(new i("_transform()"))},c.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){l.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,r){var n=r(0),i=r(30),o=r(1).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function l(){this.init(),this._w=a,i.call(this,64,56)}function u(t,e,r){return r^t&(e^r)}function c(t,e,r){return t&e|r&(t|e)}function h(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function d(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}n(l,i),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,l=0|this._e,p=0|this._f,m=0|this._g,g=0|this._h,y=0;y<16;++y)r[y]=t.readInt32BE(4*y);for(;y<64;++y)r[y]=0|(((e=r[y-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+r[y-7]+d(r[y-15])+r[y-16];for(var _=0;_<64;++_){var v=g+f(l)+u(l,p,m)+s[_]+r[_]|0,b=h(n)+c(n,i,o)|0;g=m,m=p,p=l,l=a+v|0,a=o,o=i,i=n,n=v+b|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=l+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},l.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=l},function(t,e,r){var n=r(0),i=r(30),o=r(1).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function l(){this.init(),this._w=a,i.call(this,128,112)}function u(t,e,r){return r^t&(e^r)}function c(t,e,r){return t&e|r&(t|e)}function h(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function y(t,e){return t>>>0<e>>>0?1:0}n(l,i),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(t){for(var e=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,a=0|this._eh,l=0|this._fh,_=0|this._gh,v=0|this._hh,b=0|this._al,w=0|this._bl,x=0|this._cl,E=0|this._dl,S=0|this._el,M=0|this._fl,T=0|this._gl,A=0|this._hl,C=0;C<32;C+=2)e[C]=t.readInt32BE(4*C),e[C+1]=t.readInt32BE(4*C+4);for(;C<160;C+=2){var I=e[C-30],k=e[C-30+1],R=d(I,k),B=p(k,I),P=m(I=e[C-4],k=e[C-4+1]),D=g(k,I),L=e[C-14],O=e[C-14+1],N=e[C-32],z=e[C-32+1],U=B+O|0,j=R+L+y(U,B)|0;j=(j=j+P+y(U=U+D|0,D)|0)+N+y(U=U+z|0,z)|0,e[C]=j,e[C+1]=U}for(var F=0;F<160;F+=2){j=e[F],U=e[F+1];var V=c(r,n,i),G=c(b,w,x),q=h(r,b),K=h(b,r),W=f(a,S),Z=f(S,a),H=s[F],Q=s[F+1],X=u(a,l,_),Y=u(S,M,T),J=A+Z|0,$=v+W+y(J,A)|0;$=($=($=$+X+y(J=J+Y|0,Y)|0)+H+y(J=J+Q|0,Q)|0)+j+y(J=J+U|0,U)|0;var tt=K+G|0,et=q+V+y(tt,K)|0;v=_,A=T,_=l,T=M,l=a,M=S,a=o+$+y(S=E+J|0,E)|0,o=i,E=x,i=n,x=w,n=r,w=b,r=$+et+y(b=J+tt|0,J)|0}this._al=this._al+b|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+E|0,this._el=this._el+S|0,this._fl=this._fl+M|0,this._gl=this._gl+T|0,this._hl=this._hl+A|0,this._ah=this._ah+r+y(this._al,b)|0,this._bh=this._bh+n+y(this._bl,w)|0,this._ch=this._ch+i+y(this._cl,x)|0,this._dh=this._dh+o+y(this._dl,E)|0,this._eh=this._eh+a+y(this._el,S)|0,this._fh=this._fh+l+y(this._fl,M)|0,this._gh=this._gh+_+y(this._gl,T)|0,this._hh=this._hh+v+y(this._hl,A)|0},l.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=l},function(t,e,r){"use strict";var n=r(0),i=r(258),o=r(18),s=r(1).Buffer,a=r(116),l=r(67),u=r(68),c=s.alloc(128);function h(t,e){o.call(this,"digest"),"string"===typeof e&&(e=s.from(e));var r="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>r)?e=("rmd160"===t?new l:u(t)).update(e).digest():e.length<r&&(e=s.concat([e,c],r));for(var n=this._ipad=s.allocUnsafe(r),i=this._opad=s.allocUnsafe(r),a=0;a<r;a++)n[a]=54^e[a],i[a]=92^e[a];this._hash="rmd160"===t?new l:u(t),this._hash.update(n)}n(h,o),h.prototype._update=function(t){this._hash.update(t)},h.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new l:u(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new h("rmd160",e):"md5"===t?new i(a,e):new h(t,e)}},function(t,e,r){var n=r(65);t.exports=function(t){return(new n).update(t).digest()}},function(t){t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(t,e,r){e.pbkdf2=r(260),e.pbkdf2Sync=r(121)},function(t,e){var r=Math.pow(2,30)-1;t.exports=function(t,e){if("number"!==typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!==typeof e)throw new TypeError("Key length not a number");if(e<0||e>r||e!==e)throw new TypeError("Bad key length")}},function(t,e,r){(function(e,r){var n;if(e.process&&e.process.browser)n="utf-8";else if(e.process&&e.process.version){n=parseInt(r.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else n="utf-8";t.exports=n}).call(this,r(6),r(5))},function(t,e,r){var n=r(116),i=r(67),o=r(68),s=r(1).Buffer,a=r(119),l=r(120),u=r(122),c=s.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(t,e,r){var a=function(t){function e(e){return o(t).update(e).digest()}function r(t){return(new i).update(t).digest()}return"rmd160"===t||"ripemd160"===t?r:"md5"===t?n:e}(t),l="sha512"===t||"sha384"===t?128:64;e.length>l?e=a(e):e.length<l&&(e=s.concat([e,c],l));for(var u=s.allocUnsafe(l+h[t]),f=s.allocUnsafe(l+h[t]),d=0;d<l;d++)u[d]=54^e[d],f[d]=92^e[d];var p=s.allocUnsafe(l+r+4);u.copy(p,0,0,l),this.ipad1=p,this.ipad2=u,this.opad=f,this.alg=t,this.blocksize=l,this.hash=a,this.size=h[t]}f.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,r,n,i){a(r,n);var o=new f(i=i||"sha1",t=u(t,l,"Password"),(e=u(e,l,"Salt")).length),c=s.allocUnsafe(n),d=s.allocUnsafe(e.length+4);e.copy(d,0,0,e.length);for(var p=0,m=h[i],g=Math.ceil(n/m),y=1;y<=g;y++){d.writeUInt32BE(y,e.length);for(var _=o.run(d,o.ipad1),v=_,b=1;b<r;b++){v=o.run(v,o.ipad2);for(var w=0;w<m;w++)_[w]^=v[w]}_.copy(c,p),p+=m}return c}},function(t,e,r){var n=r(1).Buffer;t.exports=function(t,e,r){if(n.isBuffer(t))return t;if("string"===typeof t)return n.from(t,e);if(ArrayBuffer.isView(t))return n.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},function(t,e,r){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,r){t[0+r]=e>>>24,t[1+r]=e>>>16&255,t[2+r]=e>>>8&255,t[3+r]=255&e},e.ip=function(t,e,r,n){for(var i=0,o=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)i<<=1,i|=e>>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=t>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)o<<=1,o|=e>>>a+s&1;for(a=1;a<=25;a+=8)o<<=1,o|=t>>>a+s&1}r[n+0]=i>>>0,r[n+1]=o>>>0},e.rip=function(t,e,r,n){for(var i=0,o=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)i<<=1,i|=e>>>a+s&1,i<<=1,i|=t>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)o<<=1,o|=e>>>a+s&1,o<<=1,o|=t>>>a+s&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.pc1=function(t,e,r,n){for(var i=0,o=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1}for(a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;r[n+0]=i>>>0,r[n+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,r,i){for(var o=0,s=0,a=n.length>>>1,l=0;l<a;l++)o<<=1,o|=t>>>n[l]&1;for(l=a;l<n.length;l++)s<<=1,s|=e>>>n[l]&1;r[i+0]=o>>>0,r[i+1]=s>>>0},e.expand=function(t,e,r){var n=0,i=0;n=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=t>>>o&63;for(o=11;o>=3;o-=4)i|=t>>>o&63,i<<=6;i|=(31&t)<<1|t>>>31,e[r+0]=n>>>0,e[r+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var r=0,n=0;n<4;n++){r<<=4,r|=i[64*n+(t>>>18-6*n&63)]}for(n=0;n<4;n++){r<<=4,r|=i[256+64*n+(e>>>18-6*n&63)]}return r>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,r=0;r<o.length;r++)e<<=1,e|=t>>>o[r]&1;return e>>>0},e.padSplit=function(t,e,r){for(var n=t.toString(2);n.length<e;)n="0"+n;for(var i=[],o=0;o<e;o+=r)i.push(n.slice(o,o+r));return i.join(" ")}},function(t,e,r){"use strict";var n=r(8),i=r(0),o=r(123),s=r(69);function a(){this.tmp=new Array(2),this.keys=null}function l(t){s.call(this,t);var e=new a;this._desState=e,this.deriveKeys(e,t.key)}i(l,s),t.exports=l,l.create=function(t){return new l(t)};var u=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];l.prototype.deriveKeys=function(t,e){t.keys=new Array(32),n.equal(e.length,this.blockSize,"Invalid key length");var r=o.readUInt32BE(e,0),i=o.readUInt32BE(e,4);o.pc1(r,i,t.tmp,0),r=t.tmp[0],i=t.tmp[1];for(var s=0;s<t.keys.length;s+=2){var a=u[s>>>1];r=o.r28shl(r,a),i=o.r28shl(i,a),o.pc2(r,i,t.keys,s)}},l.prototype._update=function(t,e,r,n){var i=this._desState,s=o.readUInt32BE(t,e),a=o.readUInt32BE(t,e+4);o.ip(s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,s,a,i.tmp,0):this._decrypt(i,s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],o.writeUInt32BE(r,s,n),o.writeUInt32BE(r,a,n+4)},l.prototype._pad=function(t,e){for(var r=t.length-e,n=e;n<t.length;n++)t[n]=r;return!0},l.prototype._unpad=function(t){for(var e=t[t.length-1],r=t.length-e;r<t.length;r++)n.equal(t[r],e);return t.slice(0,t.length-e)},l.prototype._encrypt=function(t,e,r,n,i){for(var s=e,a=r,l=0;l<t.keys.length;l+=2){var u=t.keys[l],c=t.keys[l+1];o.expand(a,t.tmp,0),u^=t.tmp[0],c^=t.tmp[1];var h=o.substitute(u,c),f=a;a=(s^o.permute(h))>>>0,s=f}o.rip(a,s,n,i)},l.prototype._decrypt=function(t,e,r,n,i){for(var s=r,a=e,l=t.keys.length-2;l>=0;l-=2){var u=t.keys[l],c=t.keys[l+1];o.expand(s,t.tmp,0),u^=t.tmp[0],c^=t.tmp[1];var h=o.substitute(u,c),f=s;s=(a^o.permute(h))>>>0,a=f}o.rip(s,a,n,i)}},function(t,e,r){var n=r(39),i=r(1).Buffer,o=r(126);function s(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var r=Math.ceil(e.length/16),o=t._cache.length;t._cache=i.concat([t._cache,i.allocUnsafe(16*r)]);for(var a=0;a<r;a++){var l=s(t),u=o+16*a;t._cache.writeUInt32BE(l[0],u+0),t._cache.writeUInt32BE(l[1],u+4),t._cache.writeUInt32BE(l[2],u+8),t._cache.writeUInt32BE(l[3],u+12)}var c=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),n(e,c)}},function(t,e){t.exports=function(t){for(var e,r=t.length;r--;){if(255!==(e=t.readUInt8(r))){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}}},function(t){t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(t,e,r){var n=r(49),i=r(1).Buffer,o=r(18),s=r(0),a=r(273),l=r(39),u=r(126);function c(t,e,r,s){o.call(this);var l=i.alloc(4,0);this._cipher=new n.AES(e);var c=this._cipher.encryptBlock(l);this._ghash=new a(c),r=function(t,e,r){if(12===e.length)return t._finID=i.concat([e,i.from([0,0,0,1])]),i.concat([e,i.from([0,0,0,2])]);var n=new a(r),o=e.length,s=o%16;n.update(e),s&&(s=16-s,n.update(i.alloc(s,0))),n.update(i.alloc(8,0));var l=8*o,c=i.alloc(8);c.writeUIntBE(l,0,8),n.update(c),t._finID=n.state;var h=i.from(t._finID);return u(h),h}(this,r,c),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}s(c,o),c.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=i.alloc(e,0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=l(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),i=0;i<n;++i)r+=t[i]^e[i];return r}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},c.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=c},function(t,e,r){var n=r(49),i=r(1).Buffer,o=r(18);function s(t,e,r,s){o.call(this),this._cipher=new n.AES(e),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._mode=t}r(0)(s,o),s.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},t.exports=s},function(t,e,r){var n=r(27);t.exports=_,_.simpleSieve=g,_.fermatTest=y;var i=r(131),o=new i(24),s=new(r(132)),a=new i(1),l=new i(2),u=new i(5),c=(new i(16),new i(8),new i(10)),h=new i(3),f=(new i(7),new i(11)),d=new i(4),p=(new i(12),null);function m(){if(null!==p)return p;var t=[];t[0]=2;for(var e=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),i=0;i<e&&t[i]<=n&&r%t[i]!==0;i++);e!==i&&t[i]<=n||(t[e++]=r)}return p=t,t}function g(t){for(var e=m(),r=0;r<e.length;r++)if(0===t.modn(e[r]))return 0===t.cmpn(e[r]);return!0}function y(t){var e=i.mont(t);return 0===l.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function _(t,e){if(t<16)return new i(2===e||5===e?[140,123]:[140,39]);var r,p;for(e=new i(e);;){for(r=new i(n(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(a),r.testn(1)||r.iadd(l),e.cmp(l)){if(!e.cmp(u))for(;r.mod(c).cmp(h);)r.iadd(d)}else for(;r.mod(o).cmp(f);)r.iadd(d);if(g(p=r.shrn(1))&&g(r)&&y(p)&&y(r)&&s.test(p)&&s.test(r))return r}}},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(277).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function l(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,l=0,c=r;c<a;c+=n)l=u(t,c,c+n,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var h=1;for(l=u(t,c,t.length,e),c=0;c<s;c++)h*=e;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,l=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var c=l>>>26,h=67108863&l,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;c+=(s=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&s}r.words[u]=0|h,l=0|c}return 0!==l?r.words[u]=0|l:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?c[6-l.length]+l+r:l+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=h[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:c[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,l="le"===e,u=new t(o),c=this.clone();if(l){for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,l=r.words,u=0,c=0|s[0],h=8191&c,f=c>>>13,d=0|s[1],p=8191&d,m=d>>>13,g=0|s[2],y=8191&g,_=g>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],E=8191&x,S=x>>>13,M=0|s[5],T=8191&M,A=M>>>13,C=0|s[6],I=8191&C,k=C>>>13,R=0|s[7],B=8191&R,P=R>>>13,D=0|s[8],L=8191&D,O=D>>>13,N=0|s[9],z=8191&N,U=N>>>13,j=0|a[0],F=8191&j,V=j>>>13,G=0|a[1],q=8191&G,K=G>>>13,W=0|a[2],Z=8191&W,H=W>>>13,Q=0|a[3],X=8191&Q,Y=Q>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],lt=8191&at,ut=at>>>13,ct=0|a[8],ht=8191&ct,ft=ct>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(u+(n=Math.imul(h,F))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,V))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,V))+Math.imul(m,F)|0,o=Math.imul(m,V);var yt=(u+(n=n+Math.imul(h,q)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,q)|0))<<13)|0;u=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,F),i=(i=Math.imul(y,V))+Math.imul(_,F)|0,o=Math.imul(_,V),n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,K)|0;var _t=(u+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(b,F),i=(i=Math.imul(b,V))+Math.imul(w,F)|0,o=Math.imul(w,V),n=n+Math.imul(y,q)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,K)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var vt=(u+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,X)|0))<<13)|0;u=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,V))+Math.imul(S,F)|0,o=Math.imul(S,V),n=n+Math.imul(b,q)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Y)|0;var bt=(u+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(T,F),i=(i=Math.imul(T,V))+Math.imul(A,F)|0,o=Math.imul(A,V),n=n+Math.imul(E,q)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,K)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(u+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,V))+Math.imul(k,F)|0,o=Math.imul(k,V),n=n+Math.imul(T,q)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,K)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,X)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(u+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,V))+Math.imul(P,F)|0,o=Math.imul(P,V),n=n+Math.imul(I,q)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,K)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,Y)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(h,lt)|0)|0)+((8191&(i=(i=i+Math.imul(h,ut)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(L,F),i=(i=Math.imul(L,V))+Math.imul(O,F)|0,o=Math.imul(O,V),n=n+Math.imul(B,q)|0,i=(i=i+Math.imul(B,K)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ut)|0;var St=(u+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(z,F),i=(i=Math.imul(z,V))+Math.imul(U,F)|0,o=Math.imul(U,V),n=n+Math.imul(L,q)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(O,q)|0,o=o+Math.imul(O,K)|0,n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(k,X)|0,o=o+Math.imul(k,Y)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,ut)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,q),i=(i=Math.imul(z,K))+Math.imul(U,q)|0,o=Math.imul(U,K),n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(B,X)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,st)|0,n=n+Math.imul(b,lt)|0,i=(i=i+Math.imul(b,ut)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ut)|0,n=n+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ft)|0;var Tt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(z,Z),i=(i=Math.imul(z,H))+Math.imul(U,Z)|0,o=Math.imul(U,H),n=n+Math.imul(L,X)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Y)|0,n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(S,lt)|0,o=o+Math.imul(S,ut)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var At=(u+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,X),i=(i=Math.imul(z,Y))+Math.imul(U,X)|0,o=Math.imul(U,Y),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,n=n+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,ut)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(E,ht)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Ct=(u+(n=n+Math.imul(b,pt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,pt)|0))<<13)|0;u=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,$),i=(i=Math.imul(z,tt))+Math.imul(U,$)|0,o=Math.imul(U,tt),n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(k,lt)|0,o=o+Math.imul(k,ut)|0,n=n+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var It=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(S,pt)|0))<<13)|0;u=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,rt),i=(i=Math.imul(z,nt))+Math.imul(U,rt)|0,o=Math.imul(U,nt),n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,ut)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(u+(n=n+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(U,ot)|0,o=Math.imul(U,st),n=n+Math.imul(L,lt)|0,i=(i=i+Math.imul(L,ut)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(B,ht)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Rt=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,pt)|0))<<13)|0;u=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,lt),i=(i=Math.imul(z,ut))+Math.imul(U,lt)|0,o=Math.imul(U,ut),n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(O,ht)|0,o=o+Math.imul(O,ft)|0;var Bt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(P,pt)|0))<<13)|0;u=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,ht),i=(i=Math.imul(z,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Pt=(u+(n=n+Math.imul(L,pt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Dt=(u+(n=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((o=Math.imul(U,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,l[0]=gt,l[1]=yt,l[2]=_t,l[3]=vt,l[4]=bt,l[5]=wt,l[6]=xt,l[7]=Et,l[8]=St,l[9]=Mt,l[10]=Tt,l[11]=At,l[12]=Ct,l[13]=It,l[14]=kt,l[15]=Rt,l[16]=Bt,l[17]=Pt,l[18]=Dt,0!==u&&(l[19]=u,r.length++),r};function m(t,e,r){return(new g).mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,l=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=l;u++){var c=o-u,h=(0|t.words[c])*(0|e.words[u]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},g.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},g.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},g.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var h=l,f=u,d=0;d<s;d++){var p=r[c+d],m=n[c+d],g=r[c+d+s],y=n[c+d+s],_=h*g-f*y;y=h*y+f*g,g=_,r[c+d]=p+g,n[c+d]=m+y,r[c+d+s]=p-g,n[c+d+s]=m-y,d!==a&&(_=l*h-u*f,f=l*f+u*h,h=_)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},g.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),l=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,l,n,i),this.transform(u,o,c,h,n,i);for(var d=0;d<n;d++){var p=a[d]*c[d]-l[d]*h[d];l[d]=a[d]*h[d]+l[d]*c[d],a[d]=p}return this.conjugate(a,l,n),this.transform(a,l,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,l=(0|this.words[e])-a<<r;this.words[e]=l|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,l=r;if(i-=s,i=Math.max(0,i),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var h=0|this.words[u];this.words[u]=c<<26-o|h>>>o,c=h&a}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var l=(0|t.words[i])*e;a=((o-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,l=n.length-i.length;if("mod"!==e){(a=new o(null)).length=l+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,l);0===c.negative&&(n=c,a&&(a.words[l]=1));for(var h=l-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),l=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(c),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(c),l.isub(h)),a.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(l)):(r.isub(e),a.isub(i),l.isub(s))}return{a:a,b:l,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),l=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,c=1;0===(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var h=0,f=1;0===(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},i(v,_),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,_),i(w,_),i(x,_),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),l=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=g}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,l=e.bitLength()%26;for(0===l&&(l=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=l-1;c>=0;c--){var h=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===n&&0===c)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}l=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,E),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(12)(t))},function(t,e,r){var n=r(278),i=r(72);function o(t){this.rand=t||new i.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),r=Math.ceil(e/8);do{var i=new n(this.rand.generate(r))}while(i.cmp(t)>=0);return i},o.prototype._randrange=function(t,e){var r=e.sub(t);return t.add(this._randbelow(r))},o.prototype.test=function(t,e,r){var i=t.bitLength(),o=n.mont(t),s=new n(1).toRed(o);e||(e=Math.max(1,i/48|0));for(var a=t.subn(1),l=0;!a.testn(l);l++);for(var u=t.shrn(l),c=a.toRed(o);e>0;e--){var h=this._randrange(new n(2),a);r&&r(h);var f=h.toRed(o).redPow(u);if(0!==f.cmp(s)&&0!==f.cmp(c)){for(var d=1;d<l;d++){if(0===(f=f.redSqr()).cmp(s))return!1;if(0===f.cmp(c))break}if(d===l)return!1}}return!0},o.prototype.getDivisor=function(t,e){var r=t.bitLength(),i=n.mont(t),o=new n(1).toRed(i);e||(e=Math.max(1,r/48|0));for(var s=t.subn(1),a=0;!s.testn(a);a++);for(var l=t.shrn(a),u=s.toRed(i);e>0;e--){var c=this._randrange(new n(2),s),h=t.gcd(c);if(0!==h.cmpn(1))return h;var f=c.toRed(i).redPow(l);if(0!==f.cmp(o)&&0!==f.cmp(u)){for(var d=1;d<a;d++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(u))break}if(d===a)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},function(t,e,r){"use strict";(function(e,n){var i;t.exports=M,M.ReadableState=S;r(13).EventEmitter;var o=function(t,e){return t.listeners(e).length},s=r(134),a=r(3).Buffer,l=e.Uint8Array||function(){};var u,c=r(285);u=c&&c.debuglog?c.debuglog("stream"):function(){};var h,f,d,p=r(286),m=r(135),g=r(136).getHighWaterMark,y=r(31).codes,_=y.ERR_INVALID_ARG_TYPE,v=y.ERR_STREAM_PUSH_AFTER_EOF,b=y.ERR_METHOD_NOT_IMPLEMENTED,w=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(0)(M,s);var x=m.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(t,e,n){i=i||r(32),t=t||{},"boolean"!==typeof n&&(n=e instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",n),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=r(20).StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function M(t){if(i=i||r(32),!(this instanceof M))return new M(t);var e=this instanceof i;this._readableState=new S(t,this,e),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function T(t,e,r,n,i){u("readableAddChunk",e);var o,s=t._readableState;if(null===e)s.reading=!1,function(t,e){if(u("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?k(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,R(t)))}(t,s);else if(i||(o=function(t,e){var r;n=e,a.isBuffer(n)||n instanceof l||"string"===typeof e||void 0===e||t.objectMode||(r=new _("chunk",["string","Buffer","Uint8Array"],e));var n;return r}(s,e)),o)x(t,o);else if(s.objectMode||e&&e.length>0)if("string"===typeof e||s.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=function(t){return a.from(t)}(e)),n)s.endEmitted?x(t,new w):A(t,s,e,!0);else if(s.ended)x(t,new v);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?A(t,s,e,!1):B(t,s)):A(t,s,e,!1)}else n||(s.reading=!1,B(t,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function A(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&k(t)),B(t,e)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),M.prototype.destroy=m.destroy,M.prototype._undestroy=m.undestroy,M.prototype._destroy=function(t,e){e(t)},M.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=a.from(t,e),e=""),r=!0),T(this,t,e,!1,r)},M.prototype.unshift=function(t){return T(this,t,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(t){h||(h=r(20).StringDecoder);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var C=1073741824;function I(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=C?t=C:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t){var e=t._readableState;u("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(u("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(R,t))}function R(t){var e=t._readableState;u("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function B(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(P,t,e))}function P(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(u("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function D(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function L(t){u("readable nexttick read 0"),t.read(0)}function O(t,e){u("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(u("flow",e.flowing);e.flowing&&null!==t.read(););}function z(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function U(t){var e=t._readableState;u("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(j,e,t))}function j(t,e){if(u("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function F(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}M.prototype.read=function(t){u("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return u("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?U(this):k(this),null;if(0===(t=I(t,e))&&e.ended)return 0===e.length&&U(this),null;var n,i=e.needReadable;return u("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&u("length less than watermark",i=!0),e.ended||e.reading?u("reading or ended",i=!1):i&&(u("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=I(r,e))),null===(n=t>0?z(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&U(this)),null!==n&&this.emit("data",n),n},M.prototype._read=function(t){x(this,new b("_read()"))},M.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,u("pipe count=%d opts=%j",i.pipesCount,e);var s=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?l:g;function a(e,n){u("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),t.removeListener("close",p),t.removeListener("finish",m),t.removeListener("drain",c),t.removeListener("error",d),t.removeListener("unpipe",a),r.removeListener("end",l),r.removeListener("end",g),r.removeListener("data",f),h=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function l(){u("onend"),t.end()}i.endEmitted?n.nextTick(s):r.once("end",s),t.on("unpipe",a);var c=function(t){return function(){var e=t._readableState;u("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,N(t))}}(r);t.on("drain",c);var h=!1;function f(e){u("ondata");var n=t.write(e);u("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==F(i.pipes,t))&&!h&&(u("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function d(e){u("onerror",e),g(),t.removeListener("error",d),0===o(t,"error")&&x(t,e)}function p(){t.removeListener("finish",m),g()}function m(){u("onfinish"),t.removeListener("close",p),g()}function g(){u("unpipe"),r.unpipe(t)}return r.on("data",f),function(t,e,r){if("function"===typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",d),t.once("close",p),t.once("finish",m),t.emit("pipe",r),i.flowing||(u("pipe resume"),r.resume()),t},M.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=F(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},M.prototype.on=function(t,e){var r=s.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?k(this):i.reading||n.nextTick(L,this))),r},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(t,e){var r=s.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick(D,this),r},M.prototype.removeAllListeners=function(t){var e=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||n.nextTick(D,this),e},M.prototype.resume=function(){var t=this._readableState;return t.flowing||(u("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(O,t,e))}(this,t)),t.paused=!1,this},M.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause())))})),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<E.length;o++)t.on(E[o],this.emit.bind(this,E[o]));return this._read=function(e){u("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"===typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(288)),f(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),M._fromList=z,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(M.from=function(t,e){return void 0===d&&(d=r(289)),d(M,t,e)})}).call(this,r(6),r(5))},function(t,e,r){t.exports=r(13).EventEmitter},function(t,e,r){"use strict";(function(e){function r(t,e){i(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(n,s):(s._writableState.errorEmitted=!0,e.nextTick(r,s,t)):e.nextTick(r,s,t):o?(e.nextTick(n,s),o(t)):e.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,r(5))},function(t,e,r){"use strict";var n=r(31).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,i){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},function(t,e,r){"use strict";(function(e,n){function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=M,M.WritableState=S;var s={deprecate:r(62)},a=r(134),l=r(3).Buffer,u=e.Uint8Array||function(){};var c,h=r(135),f=r(136).getHighWaterMark,d=r(31).codes,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,_=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,b=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,x=h.errorOrDestroy;function E(){}function S(t,e,s){o=o||r(32),t=t||{},"boolean"!==typeof s&&(s=e instanceof o),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if("function"!==typeof o)throw new g;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,i,o){--e.pendingcb,r?(n.nextTick(o,i),n.nextTick(R,t,e),t._writableState.errorEmitted=!0,x(t,i)):(o(i),t._writableState.errorEmitted=!0,x(t,i),R(t,e))}(t,r,i,e,o);else{var s=I(r)||t.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||C(t,r),i?n.nextTick(A,t,r,s,o):A(t,r,s,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function M(t){var e=this instanceof(o=o||r(32));if(!e&&!c.call(M,this))return new M(t);this._writableState=new S(t,this,e),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),a.call(this)}function T(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function A(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),R(t,e)}function C(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,o=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var a=0,l=!0;r;)o[a]=r,r.isBuf||(l=!1),r=r.next,a+=1;o.allBuffers=l,T(t,e,!0,e.length,o,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,h=r.callback;if(T(t,e,!1,e.objectMode?1:u.length,u,c,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function I(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function k(t,e){t._final((function(r){e.pendingcb--,r&&x(t,r),e.prefinished=!0,t.emit("prefinish"),R(t,e)}))}function R(t,e){var r=I(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!==typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(k,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}r(0)(M,a),S.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===M&&(t&&t._writableState instanceof S)}})):c=function(t){return t instanceof this},M.prototype.pipe=function(){x(this,new y)},M.prototype.write=function(t,e,r){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=t,l.isBuffer(i)||i instanceof u);return a&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"===typeof e&&(r=e,e=null),a?e="buffer":e||(e=o.defaultEncoding),"function"!==typeof r&&(r=E),o.ending?function(t,e){var r=new b;x(t,r),n.nextTick(e,r)}(this,r):(a||function(t,e,r,i){var o;return null===r?o=new v:"string"===typeof r||e.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(x(t,o),n.nextTick(i,o),!1)}(this,o,t,r))&&(o.pendingcb++,s=function(t,e,r,n,i,o){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=l.from(e,r));return e}(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else T(t,e,!1,a,n,i,o);return u}(this,o,a,t,e,r)),s},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||C(this,t))},M.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(t,e,r){r(new m("_write()"))},M.prototype._writev=null,M.prototype.end=function(t,e,r){var i=this._writableState;return"function"===typeof t?(r=t,t=null,e=null):"function"===typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,r){e.ending=!0,R(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,i,r),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),M.prototype.destroy=h.destroy,M.prototype._undestroy=h.undestroy,M.prototype._destroy=function(t,e){e(t)}}).call(this,r(6),r(5))},function(t,e,r){"use strict";t.exports=c;var n=r(31).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,l=r(32);function u(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);l.call(this,t),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,r){f(t,e,r)}))}function f(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new a;if(t._transformState.transforming)throw new s;return t.push(null)}r(0)(c,l),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,r){r(new i("_transform()"))},c.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){l.prototype._destroy.call(this,t,(function(t){e(t)}))}},function(t,e,r){"use strict";var n=e;function i(t){return 1===t.length?"0"+t:t}function o(t){for(var e="",r=0;r<t.length;r++)e+=i(t[r].toString(16));return e}n.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!==typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},n.zero2=i,n.toHex=o,n.encode=function(t,e){return"hex"===e?o(t):t}},function(t,e,r){"use strict";var n=e;n.base=r(51),n.short=r(296),n.mont=r(297),n.edwards=r(298)},function(t,e,r){"use strict";var n=r(14).rotr32;function i(t,e,r){return t&e^~t&r}function o(t,e,r){return t&e^t&r^e&r}function s(t,e,r){return t^e^r}e.ft_1=function(t,e,r,n){return 0===t?i(e,r,n):1===t||3===t?s(e,r,n):2===t?o(e,r,n):void 0},e.ch32=i,e.maj32=o,e.p32=s,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},function(t,e,r){"use strict";var n=r(14),i=r(40),o=r(141),s=r(8),a=n.sum32,l=n.sum32_4,u=n.sum32_5,c=o.ch32,h=o.maj32,f=o.s0_256,d=o.s1_256,p=o.g0_256,m=o.g1_256,g=i.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _(){if(!(this instanceof _))return new _;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}n.inherits(_,g),t.exports=_,_.blockSize=512,_.outSize=256,_.hmacStrength=192,_.padLength=64,_.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=l(m(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],g=this.h[2],y=this.h[3],_=this.h[4],v=this.h[5],b=this.h[6],w=this.h[7];for(s(this.k.length===r.length),n=0;n<r.length;n++){var x=u(w,d(_),c(_,v,b),this.k[n],r[n]),E=a(f(i),h(i,o,g));w=b,b=v,v=_,_=a(y,x),y=g,g=o,o=i,i=a(x,E)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],_),this.h[5]=a(this.h[5],v),this.h[6]=a(this.h[6],b),this.h[7]=a(this.h[7],w)},_.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(14),i=r(40),o=r(8),s=n.rotr64_hi,a=n.rotr64_lo,l=n.shr64_hi,u=n.shr64_lo,c=n.sum64,h=n.sum64_hi,f=n.sum64_lo,d=n.sum64_4_hi,p=n.sum64_4_lo,m=n.sum64_5_hi,g=n.sum64_5_lo,y=i.BlockHash,_=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=_,this.W=new Array(160)}function b(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function w(t,e,r,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function x(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function E(t,e,r,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function S(t,e){var r=s(t,e,28)^s(e,t,2)^s(e,t,7);return r<0&&(r+=4294967296),r}function M(t,e){var r=a(t,e,28)^a(e,t,2)^a(e,t,7);return r<0&&(r+=4294967296),r}function T(t,e){var r=s(t,e,14)^s(t,e,18)^s(e,t,9);return r<0&&(r+=4294967296),r}function A(t,e){var r=a(t,e,14)^a(t,e,18)^a(e,t,9);return r<0&&(r+=4294967296),r}function C(t,e){var r=s(t,e,1)^s(t,e,8)^l(t,e,7);return r<0&&(r+=4294967296),r}function I(t,e){var r=a(t,e,1)^a(t,e,8)^u(t,e,7);return r<0&&(r+=4294967296),r}function k(t,e){var r=s(t,e,19)^s(e,t,29)^l(t,e,6);return r<0&&(r+=4294967296),r}function R(t,e){var r=a(t,e,19)^a(e,t,29)^u(t,e,6);return r<0&&(r+=4294967296),r}n.inherits(v,y),t.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=k(r[n-4],r[n-3]),o=R(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],l=C(r[n-30],r[n-29]),u=I(r[n-30],r[n-29]),c=r[n-32],h=r[n-31];r[n]=d(i,o,s,a,l,u,c,h),r[n+1]=p(i,o,s,a,l,u,c,h)}},v.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],l=this.h[4],u=this.h[5],d=this.h[6],p=this.h[7],y=this.h[8],_=this.h[9],v=this.h[10],C=this.h[11],I=this.h[12],k=this.h[13],R=this.h[14],B=this.h[15];o(this.k.length===r.length);for(var P=0;P<r.length;P+=2){var D=R,L=B,O=T(y,_),N=A(y,_),z=b(y,_,v,C,I),U=w(y,_,v,C,I,k),j=this.k[P],F=this.k[P+1],V=r[P],G=r[P+1],q=m(D,L,O,N,z,U,j,F,V,G),K=g(D,L,O,N,z,U,j,F,V,G);D=S(n,i),L=M(n,i),O=x(n,i,s,a,l),N=E(n,i,s,a,l,u);var W=h(D,L,O,N),Z=f(D,L,O,N);R=I,B=k,I=v,k=C,v=y,C=_,y=h(d,p,q,K),_=f(p,p,q,K),d=l,p=u,l=s,u=a,s=n,a=i,n=h(q,K,W,Z),i=f(q,K,W,Z)}c(this.h,0,n,i),c(this.h,2,s,a),c(this.h,4,l,u),c(this.h,6,d,p),c(this.h,8,y,_),c(this.h,10,v,C),c(this.h,12,I,k),c(this.h,14,R,B)},v.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";const n=e;n.bignum=r(145),n.define=r(315).define,n.base=r(318),n.constants=r(319),n.decoders=r(148),n.encoders=r(146)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(314).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function l(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,l=0,c=r;c<a;c+=n)l=u(t,c,c+n,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var h=1;for(l=u(t,c,t.length,e),c=0;c<s;c++)h*=e;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,l=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var c=l>>>26,h=67108863&l,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;c+=(s=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&s}r.words[u]=0|h,l=0|c}return 0!==l?r.words[u]=0|l:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?c[6-l.length]+l+r:l+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=h[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:c[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,l="le"===e,u=new t(o),c=this.clone();if(l){for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,l=r.words,u=0,c=0|s[0],h=8191&c,f=c>>>13,d=0|s[1],p=8191&d,m=d>>>13,g=0|s[2],y=8191&g,_=g>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],E=8191&x,S=x>>>13,M=0|s[5],T=8191&M,A=M>>>13,C=0|s[6],I=8191&C,k=C>>>13,R=0|s[7],B=8191&R,P=R>>>13,D=0|s[8],L=8191&D,O=D>>>13,N=0|s[9],z=8191&N,U=N>>>13,j=0|a[0],F=8191&j,V=j>>>13,G=0|a[1],q=8191&G,K=G>>>13,W=0|a[2],Z=8191&W,H=W>>>13,Q=0|a[3],X=8191&Q,Y=Q>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],lt=8191&at,ut=at>>>13,ct=0|a[8],ht=8191&ct,ft=ct>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(u+(n=Math.imul(h,F))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,V))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,V))+Math.imul(m,F)|0,o=Math.imul(m,V);var yt=(u+(n=n+Math.imul(h,q)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,q)|0))<<13)|0;u=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,F),i=(i=Math.imul(y,V))+Math.imul(_,F)|0,o=Math.imul(_,V),n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,K)|0;var _t=(u+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(b,F),i=(i=Math.imul(b,V))+Math.imul(w,F)|0,o=Math.imul(w,V),n=n+Math.imul(y,q)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,K)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var vt=(u+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,X)|0))<<13)|0;u=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,V))+Math.imul(S,F)|0,o=Math.imul(S,V),n=n+Math.imul(b,q)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Y)|0;var bt=(u+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(T,F),i=(i=Math.imul(T,V))+Math.imul(A,F)|0,o=Math.imul(A,V),n=n+Math.imul(E,q)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,K)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(u+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,V))+Math.imul(k,F)|0,o=Math.imul(k,V),n=n+Math.imul(T,q)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,K)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,X)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(u+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,V))+Math.imul(P,F)|0,o=Math.imul(P,V),n=n+Math.imul(I,q)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,K)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,Y)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(h,lt)|0)|0)+((8191&(i=(i=i+Math.imul(h,ut)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(L,F),i=(i=Math.imul(L,V))+Math.imul(O,F)|0,o=Math.imul(O,V),n=n+Math.imul(B,q)|0,i=(i=i+Math.imul(B,K)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ut)|0;var St=(u+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(z,F),i=(i=Math.imul(z,V))+Math.imul(U,F)|0,o=Math.imul(U,V),n=n+Math.imul(L,q)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(O,q)|0,o=o+Math.imul(O,K)|0,n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(k,X)|0,o=o+Math.imul(k,Y)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,ut)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,q),i=(i=Math.imul(z,K))+Math.imul(U,q)|0,o=Math.imul(U,K),n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(B,X)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,st)|0,n=n+Math.imul(b,lt)|0,i=(i=i+Math.imul(b,ut)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ut)|0,n=n+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ft)|0;var Tt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(z,Z),i=(i=Math.imul(z,H))+Math.imul(U,Z)|0,o=Math.imul(U,H),n=n+Math.imul(L,X)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Y)|0,n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(S,lt)|0,o=o+Math.imul(S,ut)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var At=(u+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,X),i=(i=Math.imul(z,Y))+Math.imul(U,X)|0,o=Math.imul(U,Y),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,n=n+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,ut)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(E,ht)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Ct=(u+(n=n+Math.imul(b,pt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,pt)|0))<<13)|0;u=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,$),i=(i=Math.imul(z,tt))+Math.imul(U,$)|0,o=Math.imul(U,tt),n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(k,lt)|0,o=o+Math.imul(k,ut)|0,n=n+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var It=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(S,pt)|0))<<13)|0;u=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,rt),i=(i=Math.imul(z,nt))+Math.imul(U,rt)|0,o=Math.imul(U,nt),n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,ut)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(u+(n=n+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(U,ot)|0,o=Math.imul(U,st),n=n+Math.imul(L,lt)|0,i=(i=i+Math.imul(L,ut)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(B,ht)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Rt=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,pt)|0))<<13)|0;u=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,lt),i=(i=Math.imul(z,ut))+Math.imul(U,lt)|0,o=Math.imul(U,ut),n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(O,ht)|0,o=o+Math.imul(O,ft)|0;var Bt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(P,pt)|0))<<13)|0;u=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,ht),i=(i=Math.imul(z,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Pt=(u+(n=n+Math.imul(L,pt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Dt=(u+(n=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((o=Math.imul(U,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,l[0]=gt,l[1]=yt,l[2]=_t,l[3]=vt,l[4]=bt,l[5]=wt,l[6]=xt,l[7]=Et,l[8]=St,l[9]=Mt,l[10]=Tt,l[11]=At,l[12]=Ct,l[13]=It,l[14]=kt,l[15]=Rt,l[16]=Bt,l[17]=Pt,l[18]=Dt,0!==u&&(l[19]=u,r.length++),r};function m(t,e,r){return(new g).mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,l=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=l;u++){var c=o-u,h=(0|t.words[c])*(0|e.words[u]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},g.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},g.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},g.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var h=l,f=u,d=0;d<s;d++){var p=r[c+d],m=n[c+d],g=r[c+d+s],y=n[c+d+s],_=h*g-f*y;y=h*y+f*g,g=_,r[c+d]=p+g,n[c+d]=m+y,r[c+d+s]=p-g,n[c+d+s]=m-y,d!==a&&(_=l*h-u*f,f=l*f+u*h,h=_)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},g.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),l=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,l,n,i),this.transform(u,o,c,h,n,i);for(var d=0;d<n;d++){var p=a[d]*c[d]-l[d]*h[d];l[d]=a[d]*h[d]+l[d]*c[d],a[d]=p}return this.conjugate(a,l,n),this.transform(a,l,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,l=(0|this.words[e])-a<<r;this.words[e]=l|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,l=r;if(i-=s,i=Math.max(0,i),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var h=0|this.words[u];this.words[u]=c<<26-o|h>>>o,c=h&a}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var l=(0|t.words[i])*e;a=((o-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,l=n.length-i.length;if("mod"!==e){(a=new o(null)).length=l+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,l);0===c.negative&&(n=c,a&&(a.words[l]=1));for(var h=l-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),l=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(c),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(c),l.isub(h)),a.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(l)):(r.isub(e),a.isub(i),l.isub(s))}return{a:a,b:l,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),l=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,c=1;0===(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var h=0,f=1;0===(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},i(v,_),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,_),i(w,_),i(x,_),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),l=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=g}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,l=e.bitLength()%26;for(0===l&&(l=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=l-1;c>=0;c--){var h=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===n&&0===c)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}l=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,E),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(12)(t))},function(t,e,r){"use strict";const n=e;n.der=r(147),n.pem=r(316)},function(t,e,r){"use strict";const n=r(0),i=r(79).Buffer,o=r(80),s=r(82);function a(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){o.call(this,"der",t)}function u(t){return t<10?"0"+t:t}t.exports=a,a.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},n(l,o),l.prototype._encodeComposite=function(t,e,r,n){const o=function(t,e,r,n){let i;"seqof"===t?t="seq":"setof"===t&&(t="set");if(s.tagByName.hasOwnProperty(t))i=s.tagByName[t];else{if("number"!==typeof t||(0|t)!==t)return n.error("Unknown tag: "+t);i=t}if(i>=31)return n.error("Multi-octet tag encoding unsupported");e||(i|=32);return i|=s.tagClassByName[r||"universal"]<<6,i}(t,e,r,this.reporter);if(n.length<128){const t=i.alloc(2);return t[0]=o,t[1]=n.length,this._createEncoderBuffer([t,n])}let a=1;for(let i=n.length;i>=256;i>>=8)a++;const l=i.alloc(2+a);l[0]=o,l[1]=128|a;for(let i=1+a,s=n.length;s>0;i--,s>>=8)l[i]=255&s;return this._createEncoderBuffer([l,n])},l.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=i.alloc(2*t.length);for(let r=0;r<t.length;r++)e.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(e)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},l.prototype._encodeObjid=function(t,e,r){if("string"===typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let n=0;for(let i=0;i<t.length;i++){let e=t[i];for(n++;e>=128;e>>=7)n++}const o=i.alloc(n);let s=o.length-1;for(let i=t.length-1;i>=0;i--){let e=t[i];for(o[s--]=127&e;(e>>=7)>0;)o[s--]=128|127&e}return this._createEncoderBuffer(o)},l.prototype._encodeTime=function(t,e){let r;const n=new Date(t);return"gentime"===e?r=[u(n.getUTCFullYear()),u(n.getUTCMonth()+1),u(n.getUTCDate()),u(n.getUTCHours()),u(n.getUTCMinutes()),u(n.getUTCSeconds()),"Z"].join(""):"utctime"===e?r=[u(n.getUTCFullYear()%100),u(n.getUTCMonth()+1),u(n.getUTCDate()),u(n.getUTCHours()),u(n.getUTCMinutes()),u(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(r,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(t,e){if("string"===typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!==typeof t&&!i.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=i.from(e)}if(i.isBuffer(t)){let e=t.length;0===t.length&&e++;const r=i.alloc(e);return t.copy(r),0===t.length&&(r[0]=0),this._createEncoderBuffer(r)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let r=1;for(let i=t;i>=256;i>>=8)r++;const n=new Array(r);for(let i=n.length-1;i>=0;i--)n[i]=255&t,t>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(i.from(n))},l.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},l.prototype._use=function(t,e){return"function"===typeof t&&(t=t(e)),t._getEncoder("der").tree},l.prototype._skipDefault=function(t,e,r){const n=this._baseState;let i;if(null===n.default)return!1;const o=t.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,e,r).join()),o.length!==n.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return!1;return!0}},function(t,e,r){"use strict";const n=e;n.der=r(149),n.pem=r(317)},function(t,e,r){"use strict";const n=r(0),i=r(145),o=r(41).DecoderBuffer,s=r(80),a=r(82);function l(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new u,this.tree._init(t.body)}function u(t){s.call(this,"der",t)}function c(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const n=a.tagClass[r>>6],i=0===(32&r);if(31===(31&r)){let n=r;for(r=0;128===(128&n);){if(n=t.readUInt8(e),t.isError(n))return n;r<<=7,r|=127&n}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:a.tag[r]}}function h(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&128===n)return null;if(0===(128&n))return n;const i=127&n;if(i>4)return t.error("length octect is too long");n=0;for(let o=0;o<i;o++){n<<=8;const e=t.readUInt8(r);if(t.isError(e))return e;n|=e}return n}t.exports=l,l.prototype.decode=function(t,e){return o.isDecoderBuffer(t)||(t=new o(t,e)),this.tree._decode(t,e)},n(u,s),u.prototype._peekTag=function(t,e,r){if(t.isEmpty())return!1;const n=t.save(),i=c(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(n),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||r)},u.prototype._decodeTag=function(t,e,r){const n=c(t,'Failed to decode tag of "'+e+'"');if(t.isError(n))return n;let i=h(t,n.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!r&&n.tag!==e&&n.tagStr!==e&&n.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(n.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');const o=t.save(),s=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(s)?s:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},u.prototype._skipUntilEnd=function(t,e){for(;;){const r=c(t,e);if(t.isError(r))return r;const n=h(t,r.primitive,e);if(t.isError(n))return n;let i;if(i=r.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===r.tagStr)break}},u.prototype._decodeList=function(t,e,r,n){const i=[];for(;!t.isEmpty();){const e=this._peekTag(t,"end");if(t.isError(e))return e;const o=r.decode(t,"der",n);if(t.isError(o)&&e)break;i.push(o)}return i},u.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2===1)return t.error("Decoding of string type: bmpstr length mismatch");let r="";for(let t=0;t<e.length/2;t++)r+=String.fromCharCode(e.readUInt16BE(2*t));return r}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},u.prototype._decodeObjid=function(t,e,r){let n;const i=[];let o=0,s=0;for(;!t.isEmpty();)s=t.readUInt8(),o<<=7,o|=127&s,0===(128&s)&&(i.push(o),o=0);128&s&&i.push(o);const a=i[0]/40|0,l=i[0]%40;if(n=r?i:[a,l].concat(i.slice(1)),e){let t=e[n.join(" ")];void 0===t&&(t=e[n.join(".")]),void 0!==t&&(n=t)}return n},u.prototype._decodeTime=function(t,e){const r=t.raw().toString();let n,i,o,s,a,l;if("gentime"===e)n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),s=0|r.slice(8,10),a=0|r.slice(10,12),l=0|r.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),s=0|r.slice(6,8),a=0|r.slice(8,10),l=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,o,s,a,l,0)},u.prototype._decodeNull=function(){return null},u.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},u.prototype._decodeInt=function(t,e){const r=t.raw();let n=new i(r);return e&&(n=e[n.toString(10)]||n),n},u.prototype._use=function(t,e){return"function"===typeof t&&(t=t(e)),t._getDecoder("der").tree}},function(t){t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(t,e,r){var n=r(37),i=r(1).Buffer;function o(t){var e=i.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var r,s=i.alloc(0),a=0;s.length<e;)r=o(a++),s=i.concat([s,n("sha1").update(t).update(r).digest()]);return s.slice(0,e)}},function(t,e){t.exports=function(t,e){for(var r=t.length,n=-1;++n<r;)t[n]^=e[n];return t}},function(t,e,r){var n=r(83),i=r(1).Buffer;t.exports=function(t,e){return i.from(t.toRed(n.mont(e.modulus)).redPow(new n(e.publicExponent)).fromRed().toArray())}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Compute=void 0;const n=r(334),i=r(58),o=r(42);class s extends o.OAuth2Client{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=t.serviceAccountEmail||"default",this.scopes=n(t.scopes)}async refreshTokenNoCache(t){const e=`service-accounts/${this.serviceAccountEmail}/token`;let r;try{const t={property:e};this.scopes.length>0&&(t.params={scopes:this.scopes.join(",")}),r=await i.instance(t)}catch(o){throw o.message=`Could not refresh access token: ${o.message}`,this.wrapError(o),o}const n=r;return r&&r.expires_in&&(n.expiry_date=(new Date).getTime()+1e3*r.expires_in,delete n.expires_in),this.emit("tokens",n),{tokens:n,res:null}}async fetchIdToken(t){const e=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${t}`;let r;try{const t={property:e};r=await i.instance(t)}catch(n){throw n.message=`Could not fetch ID token: ${n.message}`,n}return r}wrapError(t){const e=t.response;e&&e.status&&(t.code=e.status.toString(),403===e.status?t.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+t.message:404===e.status&&(t.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+t.message))}}e.Compute=s},function(t,e,r){"use strict";var n=r(1).Buffer,i=r(335),o=128;function s(t){if(n.isBuffer(t))return t;if("string"===typeof t)return n.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function a(t,e,r){for(var n=0;e+n<r&&0===t[e+n];)++n;return t[e+n]>=o&&--n,n}t.exports={derToJose:function(t,e){t=s(t);var r=i(e),o=r+1,a=t.length,l=0;if(48!==t[l++])throw new Error('Could not find expected "seq"');var u=t[l++];if(129===u&&(u=t[l++]),a-l<u)throw new Error('"seq" specified length of "'+u+'", only "'+(a-l)+'" remaining');if(2!==t[l++])throw new Error('Could not find expected "int" for "r"');var c=t[l++];if(a-l-2<c)throw new Error('"r" specified length of "'+c+'", only "'+(a-l-2)+'" available');if(o<c)throw new Error('"r" specified length of "'+c+'", max of "'+o+'" is acceptable');var h=l;if(l+=c,2!==t[l++])throw new Error('Could not find expected "int" for "s"');var f=t[l++];if(a-l!==f)throw new Error('"s" specified length of "'+f+'", expected "'+(a-l)+'"');if(o<f)throw new Error('"s" specified length of "'+f+'", max of "'+o+'" is acceptable');var d=l;if((l+=f)!==a)throw new Error('Expected to consume entire buffer, but "'+(a-l)+'" bytes remain');var p=r-c,m=r-f,g=n.allocUnsafe(p+c+m+f);for(l=0;l<p;++l)g[l]=0;t.copy(g,l,h+Math.max(-p,0),h+c);for(var y=l=r;l<y+m;++l)g[l]=0;return t.copy(g,l,d+Math.max(-m,0),d+f),g=(g=g.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(t,e){t=s(t);var r=i(e),l=t.length;if(l!==2*r)throw new TypeError('"'+e+'" signatures must be "'+2*r+'" bytes, saw "'+l+'"');var u=a(t,0,r),c=a(t,r,t.length),h=r-u,f=r-c,d=2+h+1+1+f,p=d<o,m=n.allocUnsafe((p?2:3)+d),g=0;return m[g++]=48,p?m[g++]=d:(m[g++]=129,m[g++]=255&d),m[g++]=2,m[g++]=h,u<0?(m[g++]=0,g+=t.copy(m,g,0,r)):g+=t.copy(m,g,u,r),m[g++]=2,m[g++]=f,c<0?(m[g++]=0,t.copy(m,g,r)):t.copy(m,g,r+c),m}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LoginTicket=void 0;e.LoginTicket=class{constructor(t,e){this.envelope=t,this.payload=e}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){const t=this.getPayload();return t&&t.sub?t.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.IdTokenClient=void 0;const n=r(42);class i extends n.OAuth2Client{constructor(t){super(),this.targetAudience=t.targetAudience,this.idTokenProvider=t.idTokenProvider}async getRequestMetadataAsync(t){if(!this.credentials.id_token||(this.credentials.expiry_date||0)<Date.now()){const t=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:t,expiry_date:this.getIdTokenExpiryDate(t)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}}getIdTokenExpiryDate(e){const r=e.split(".")[1];if(r){return 1e3*JSON.parse(t.from(r,"base64").toString("ascii")).exp}}}e.IdTokenClient=i}).call(this,r(3).Buffer)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=e.clear=e.GCPEnv=void 0;const n=r(58);var i;let o;!function(t){t.APP_ENGINE="APP_ENGINE",t.KUBERNETES_ENGINE="KUBERNETES_ENGINE",t.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",t.COMPUTE_ENGINE="COMPUTE_ENGINE",t.NONE="NONE"}(i=e.GCPEnv||(e.GCPEnv={})),e.clear=function(){o=void 0},e.getEnv=async function(){return o||(o=async function(){let t=i.NONE;t=Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).GAE_SERVICE||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).GAE_MODULE_NAME?i.APP_ENGINE:Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).FUNCTION_NAME||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).FUNCTION_TARGET?i.CLOUD_FUNCTIONS:await async function(){return n.isAvailable()}()?await async function(){try{return await n.instance("attributes/cluster-name"),!0}catch(t){return!1}}()?i.KUBERNETES_ENGINE:i.COMPUTE_ENGINE:i.NONE;return t}(),o)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JWT=void 0;const n=r(337),i=r(177),o=r(42);class s extends o.OAuth2Client{constructor(t,e,r,n,i,o){const s=t&&"object"===typeof t?t:{email:t,keyFile:e,key:r,keyId:o,scopes:n,subject:i};super({eagerRefreshThresholdMillis:s.eagerRefreshThresholdMillis,forceRefreshOnFailure:s.forceRefreshOnFailure}),this.email=s.email,this.keyFile=s.keyFile,this.key=s.key,this.keyId=s.keyId,this.scopes=s.scopes,this.subject=s.subject,this.additionalClaims=s.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(t){return new s({email:this.email,keyFile:this.keyFile,key:this.key,keyId:this.keyId,scopes:t,subject:this.subject,additionalClaims:this.additionalClaims})}async getRequestMetadataAsync(t){if(this.apiKey||this.hasUserScopes()||!t)return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(t):{headers:{}};if(this.additionalClaims&&this.additionalClaims.target_audience){const{tokens:t}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${t.id_token}`})}}{this.access||(this.access=new i.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));const e=await this.access.getRequestHeaders(t,this.additionalClaims);return{headers:this.addSharedMetadataHeaders(e)}}}async fetchIdToken(t){const e=new n.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:t}});if(await e.getToken({forceRefresh:!0}),!e.idToken)throw new Error("Unknown error: Failed to fetch ID token");return e.idToken}hasUserScopes(){return!!this.scopes&&this.scopes.length>0}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0)||!!(this.defaultScopes&&this.defaultScopes.length>0)}authorize(t){if(!t)return this.authorizeAsync();this.authorizeAsync().then((e=>t(null,e)),t)}async authorizeAsync(){const t=await this.refreshToken();if(!t)throw new Error("No result returned");return this.credentials=t.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,t.tokens}async refreshTokenNoCache(t){const e=this.createGToken(),r={access_token:(await e.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:e.expiresAt,id_token:e.idToken};return this.emit("tokens",r),{res:null,tokens:r}}createGToken(){return this.gtoken||(this.gtoken=new n.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims})),this.gtoken}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!t.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!t.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=t.client_email,this.key=t.private_key,this.keyId=t.private_key_id,this.projectId=t.project_id,this.quotaProjectId=t.quota_project_id}fromStream(t,e){if(!e)return this.fromStreamAsync(t);this.fromStreamAsync(t).then((()=>e()),e)}fromStreamAsync(t){return new Promise(((e,r)=>{if(!t)throw new Error("Must pass in a stream containing the service account auth settings.");let n="";t.setEncoding("utf8").on("error",r).on("data",(t=>n+=t)).on("end",(()=>{try{const t=JSON.parse(n);this.fromJSON(t),e()}catch(t){r(t)}}))}))}fromAPIKey(t){if("string"!==typeof t)throw new Error("Must provide an API Key string.");this.apiKey=t}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){const t=this.createGToken(),e=await t.getCredentials(this.keyFile);return{private_key:e.privateKey,client_email:e.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")}}e.JWT=s},function(t,e,r){var n=r(338),i=r(340);e.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],e.sign=n.sign,e.verify=i.verify,e.decode=i.decode,e.isValid=i.isValid,e.createSign=function(t){return new n(t)},e.createVerify=function(t){return new i(t)}},function(t,e,r){(function(e){var n=r(1).Buffer,i=r(38);function o(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=n.alloc(0),this;if("function"===typeof t.pipe)return this.buffer=n.alloc(0),t.pipe(this),this;if(t.length||"object"===typeof t)return this.buffer=t,this.writable=!1,e.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}r(22).inherits(o,i),o.prototype.write=function(t){this.buffer=n.concat([this.buffer,n.from(t)]),this.emit("data",t)},o.prototype.end=function(t){t&&this.write(t),this.emit("end",t),this.emit("close"),this.writable=!1,this.readable=!1},t.exports=o}).call(this,r(5))},function(t,e,r){var n=r(339),i=r(1).Buffer,o=r(105),s=r(155),a=r(22),l="secret must be a string or buffer",u="key must be a string or a buffer",c="function"===typeof o.createPublicKey;function h(t){if(!i.isBuffer(t)&&"string"!==typeof t){if(!c)throw m(u);if("object"!==typeof t)throw m(u);if("string"!==typeof t.type)throw m(u);if("string"!==typeof t.asymmetricKeyType)throw m(u);if("function"!==typeof t.export)throw m(u)}}function f(t){if(!i.isBuffer(t)&&"string"!==typeof t&&"object"!==typeof t)throw m("key must be a string, a buffer or an object")}function d(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(t){var e=4-(t=t.toString()).length%4;if(4!==e)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function m(t){var e=[].slice.call(arguments,1),r=a.format.bind(a,t).apply(null,e);return new TypeError(r)}function g(t){var e;return e=t,i.isBuffer(e)||"string"===typeof e||(t=JSON.stringify(t)),t}function y(t){return function(e,r){!function(t){if(!i.isBuffer(t)){if("string"===typeof t)return t;if(!c)throw m(l);if("object"!==typeof t)throw m(l);if("secret"!==t.type)throw m(l);if("function"!==typeof t.export)throw m(l)}}(r),e=g(e);var n=o.createHmac("sha"+t,r);return d((n.update(e),n.digest("base64")))}}function _(t){return function(e,r,o){var s=y(t)(e,o);return n(i.from(r),i.from(s))}}function v(t){return function(e,r){f(r),e=g(e);var n=o.createSign("RSA-SHA"+t);return d((n.update(e),n.sign(r,"base64")))}}function b(t){return function(e,r,n){h(n),e=g(e),r=p(r);var i=o.createVerify("RSA-SHA"+t);return i.update(e),i.verify(n,r,"base64")}}function w(t){return function(e,r){f(r),e=g(e);var n=o.createSign("RSA-SHA"+t);return d((n.update(e),n.sign({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function x(t){return function(e,r,n){h(n),e=g(e),r=p(r);var i=o.createVerify("RSA-SHA"+t);return i.update(e),i.verify({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function E(t){var e=v(t);return function(){var r=e.apply(null,arguments);return r=s.derToJose(r,"ES"+t)}}function S(t){var e=b(t);return function(r,n,i){return n=s.joseToDer(n,"ES"+t).toString("base64"),e(r,n,i)}}function M(){return function(){return""}}function T(){return function(t,e){return""===e}}c&&(u+=" or a KeyObject",l+="or a KeyObject"),t.exports=function(t){var e={hs:y,rs:v,ps:w,es:E,none:M},r={hs:_,rs:b,ps:x,es:S,none:T},n=t.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!n)throw m('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',t);var i=(n[1]||n[3]).toLowerCase(),o=n[2];return{sign:e[i](o),verify:r[i](o)}}},function(t,e,r){var n=r(3).Buffer;t.exports=function(t){return"string"===typeof t?t:"number"===typeof t||n.isBuffer(t)?t.toString():JSON.stringify(t)}},function(t,e,r){var n=r(2);r(4),n.cipher=n.cipher||{};var i=t.exports=n.cipher.modes=n.cipher.modes||{};function o(t,e){if("string"===typeof t&&(t=n.util.createBuffer(t)),n.util.isArray(t)&&t.length>4){var r=t;t=n.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!n.util.isArray(t)){var o=[],s=e/4;for(i=0;i<s;++i)o.push(t.getInt32());t=o}return t}function s(t){t[t.length-1]=t[t.length-1]+1&4294967295}function a(t){return[t/4294967296|0,4294967295&t]}i.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(t){},i.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}s(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,r=n.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?n.util.createBuffer(t.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=n.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),s(this._inBlock),this._partialBytes=0,e=n.util.createBuffer(e),this._aDataLength=a(8*e.length());var o=e.length()%this.blockSize;for(o&&e.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];e.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},i.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),s(this._inBlock)},i.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),s(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var o=[];this.cipher.encrypt(this._j0,o);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^o[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){t[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(t,e){for(var r=1&t[3],n=3;n>0;--n)e[n]=t[n]>>>1|(1&t[n-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},i.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=t[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];e[0]^=i[0],e[1]^=i[1],e[2]^=i[2],e[3]^=i[3]}return e},i.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},i.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],l=(n-1-s%n)*e;a[s/n|0]=1<<e-1<<l,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o},i.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],l=i[s];i[o+s]=[a[0]^l[0],a[1]^l[1],a[2]^l[2],a[3]^l[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i}},function(t,e,r){var n=r(2);r(15),r(43),r(86),r(33),r(166),r(11),r(44),r(4);var i=function(t,e,r,i){var o=n.util.createBuffer(),s=t.length>>1,a=s+(1&t.length),l=t.substr(0,a),u=t.substr(s,a),c=n.util.createBuffer(),h=n.hmac.create();r=e+r;var f=Math.ceil(i/16),d=Math.ceil(i/20);h.start("MD5",l);var p=n.util.createBuffer();c.putBytes(r);for(var m=0;m<f;++m)h.start(null,null),h.update(c.getBytes()),c.putBuffer(h.digest()),h.start(null,null),h.update(c.bytes()+r),p.putBuffer(h.digest());h.start("SHA1",u);var g=n.util.createBuffer();c.clear(),c.putBytes(r);for(m=0;m<d;++m)h.start(null,null),h.update(c.getBytes()),c.putBuffer(h.digest()),h.start(null,null),h.update(c.bytes()+r),g.putBuffer(h.digest());return o.putBytes(n.util.xorBytes(p.getBytes(),g.getBytes(),i)),o},o=function(t,e,r){var i=!1;try{var o=t.deflate(e.fragment.getBytes());e.fragment=n.util.createBuffer(o),e.length=o.length,i=!0}catch(s){}return i},s=function(t,e,r){var i=!1;try{var o=t.inflate(e.fragment.getBytes());e.fragment=n.util.createBuffer(o),e.length=o.length,i=!0}catch(s){}return i},a=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32()}return n.util.createBuffer(t.getBytes(r))},l=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},u={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};u.SupportedVersions=[u.Versions.TLS_1_1,u.Versions.TLS_1_0],u.Version=u.SupportedVersions[0],u.MaxFragment=15360,u.ConnectionEnd={server:0,client:1},u.PRFAlgorithm={tls_prf_sha256:0},u.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},u.CipherType={stream:0,block:1,aead:2},u.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},u.CompressionMethod={none:0,deflate:1},u.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},u.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},u.Alert={},u.Alert.Level={warning:1,fatal:2},u.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},u.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},u.CipherSuites={},u.getCipherSuite=function(t){var e=null;for(var r in u.CipherSuites){var n=u.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e},u.handleUnexpected=function(t,e){!t.open&&t.entity===u.ConnectionEnd.client||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.unexpected_message}})},u.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(u.queue(t,u.createAlert(t,{level:u.Alert.Level.warning,description:u.Alert.Description.no_renegotiation})),u.flush(t)),t.process()},u.parseHelloMessage=function(t,e,r){var i=null,o=t.entity===u.ConnectionEnd.client;if(r<38)t.error(t,{message:o?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.illegal_parameter}});else{var s=e.fragment,l=s.length();if(i={version:{major:s.getByte(),minor:s.getByte()},random:n.util.createBuffer(s.getBytes(32)),session_id:a(s,1),extensions:[]},o?(i.cipher_suite=s.getBytes(2),i.compression_method=s.getByte()):(i.cipher_suites=a(s,2),i.compression_methods=a(s,1)),(l=r-(l-s.length()))>0){for(var c=a(s,2);c.length()>0;)i.extensions.push({type:[c.getByte(),c.getByte()],data:a(c,2)});if(!o)for(var h=0;h<i.extensions.length;++h){var f=i.extensions[h];if(0===f.type[0]&&0===f.type[1])for(var d=a(f.data,2);d.length()>0;){if(0!==d.getByte())break;t.session.extensions.server_name.serverNameList.push(a(d,2).getBytes())}}}if(t.session.version&&(i.version.major!==t.session.version.major||i.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.protocol_version}});if(o)t.session.cipherSuite=u.getCipherSuite(i.cipher_suite);else for(var p=n.util.createBuffer(i.cipher_suites.bytes());p.length()>0&&(t.session.cipherSuite=u.getCipherSuite(p.getBytes(2)),null===t.session.cipherSuite););if(null===t.session.cipherSuite)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.handshake_failure},cipherSuite:n.util.bytesToHex(i.cipher_suite)});t.session.compressionMethod=o?i.compression_method:u.CompressionMethod.none}return i},u.createSecurityParameters=function(t,e){var r=t.entity===u.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:u.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:u.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}},u.handleServerHello=function(t,e,r){var n=u.parseHelloMessage(t,e,r);if(!t.fail){if(!(n.version.minor<=t.version.minor))return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.protocol_version}});t.version.minor=n.version.minor,t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=p,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=c,t.session.resuming=!1,u.createSecurityParameters(t,n)),t.session.id=i,t.process()}},u.handleClientHello=function(t,e,r){var i=u.parseHelloMessage(t,e,r);if(!t.fail){var o=i.session_id.bytes(),s=null;if(t.sessionCache&&(null===(s=t.sessionCache.getSession(o))?o="":(s.version.major!==i.version.major||s.version.minor>i.version.minor)&&(s=null,o="")),0===o.length&&(o=n.random.getBytes(32)),t.session.id=o,t.session.clientHelloVersion=i.version,t.session.sp={},s)t.version=t.session.version=s.version,t.session.sp=s.sp;else{for(var a,l=1;l<u.SupportedVersions.length&&!((a=u.SupportedVersions[l]).minor<=i.version.minor);++l);t.version={major:a.major,minor:a.minor},t.session.version=t.version}null!==s?(t.expect=w,t.session.resuming=!0,t.session.sp.client_random=i.random.bytes()):(t.expect=!1!==t.verifyClient?_:v,t.session.resuming=!1,u.createSecurityParameters(t,i)),t.open=!0,u.queue(t,u.createRecord(t,{type:u.ContentType.handshake,data:u.createServerHello(t)})),t.session.resuming?(u.queue(t,u.createRecord(t,{type:u.ContentType.change_cipher_spec,data:u.createChangeCipherSpec()})),t.state.pending=u.createConnectionState(t),t.state.current.write=t.state.pending.write,u.queue(t,u.createRecord(t,{type:u.ContentType.handshake,data:u.createFinished(t)}))):(u.queue(t,u.createRecord(t,{type:u.ContentType.handshake,data:u.createCertificate(t)})),t.fail||(u.queue(t,u.createRecord(t,{type:u.ContentType.handshake,data:u.createServerKeyExchange(t)})),!1!==t.verifyClient&&u.queue(t,u.createRecord(t,{type:u.ContentType.handshake,data:u.createCertificateRequest(t)})),u.queue(t,u.createRecord(t,{type:u.ContentType.handshake,data:u.createServerHelloDone(t)})))),u.flush(t),t.process()}},u.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.illegal_parameter}});var i,o,s=e.fragment,l={certificate_list:a(s,3)},c=[];try{for(;l.certificate_list.length()>0;)i=a(l.certificate_list,3),o=n.asn1.fromDer(i),i=n.pki.certificateFromAsn1(o,!0),c.push(i)}catch(d){return t.error(t,{message:"Could not parse certificate list.",cause:d,send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.bad_certificate}})}var f=t.entity===u.ConnectionEnd.client;!f&&!0!==t.verifyClient||0!==c.length?0===c.length?t.expect=f?h:v:(f?t.session.serverCertificate=c[0]:t.session.clientCertificate=c[0],u.verifyCertificateChain(t,c)&&(t.expect=f?h:v)):t.error(t,{message:f?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.illegal_parameter}}),t.process()},u.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.unsupported_certificate}});t.expect=f,t.process()},u.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.unsupported_certificate}});var i=e.fragment,o={enc_pre_master_secret:a(i,2).getBytes()},s=null;if(t.getPrivateKey)try{s=t.getPrivateKey(t,t.session.serverCertificate),s=n.pki.privateKeyFromPem(s)}catch(h){t.error(t,{message:"Could not get private key.",cause:h,send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.internal_error}})}if(null===s)return t.error(t,{message:"No private key set.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.internal_error}});try{var l=t.session.sp;l.pre_master_secret=s.decrypt(o.enc_pre_master_secret);var c=t.session.clientHelloVersion;if(c.major!==l.pre_master_secret.charCodeAt(0)||c.minor!==l.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(h){l.pre_master_secret=n.random.getBytes(48)}t.expect=w,null!==t.session.clientCertificate&&(t.expect=b),t.process()},u.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:a(n,1),certificate_authorities:a(n,2)};t.session.certificateRequest=i,t.expect=d,t.process()},u.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.illegal_parameter}});var i=e.fragment;i.read-=4;var o=i.bytes();i.read+=4;var s={signature:a(i,2).getBytes()},l=n.util.createBuffer();l.putBuffer(t.session.md5.digest()),l.putBuffer(t.session.sha1.digest()),l=l.getBytes();try{if(!t.session.clientCertificate.publicKey.verify(l,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(o),t.session.sha1.update(o)}catch(c){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.handshake_failure}})}t.expect=w,t.process()},u.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.record_overflow}});if(null===t.serverCertificate){var i={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.insufficient_security}},o=t.verify(t,i.alert.description,0,[]);if(!0!==o)return(o||0===o)&&("object"!==typeof o||n.util.isArray(o)?"number"===typeof o&&(i.alert.description=o):(o.message&&(i.message=o.message),o.alert&&(i.alert.description=o.alert))),t.error(t,i)}null!==t.session.certificateRequest&&(e=u.createRecord(t,{type:u.ContentType.handshake,data:u.createCertificate(t)}),u.queue(t,e)),e=u.createRecord(t,{type:u.ContentType.handshake,data:u.createClientKeyExchange(t)}),u.queue(t,e),t.expect=y;var s=function(t,e){null!==t.session.certificateRequest&&null!==t.session.clientCertificate&&u.queue(t,u.createRecord(t,{type:u.ContentType.handshake,data:u.createCertificateVerify(t,e)})),u.queue(t,u.createRecord(t,{type:u.ContentType.change_cipher_spec,data:u.createChangeCipherSpec()})),t.state.pending=u.createConnectionState(t),t.state.current.write=t.state.pending.write,u.queue(t,u.createRecord(t,{type:u.ContentType.handshake,data:u.createFinished(t)})),t.expect=p,u.flush(t),t.process()};if(null===t.session.certificateRequest||null===t.session.clientCertificate)return s(t,null);u.getClientSignature(t,s)},u.handleChangeCipherSpec=function(t,e){if(1!==e.fragment.getByte())return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.illegal_parameter}});var r=t.entity===u.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=u.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?m:x,t.process()},u.handleFinished=function(t,e,r){var o=e.fragment;o.read-=4;var s=o.bytes();o.read+=4;var a=e.fragment.getBytes();(o=n.util.createBuffer()).putBuffer(t.session.md5.digest()),o.putBuffer(t.session.sha1.digest());var l=t.entity===u.ConnectionEnd.client,c=l?"server finished":"client finished",h=t.session.sp;if((o=i(h.master_secret,c,o.getBytes(),12)).getBytes()!==a)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.decrypt_error}});t.session.md5.update(s),t.session.sha1.update(s),(t.session.resuming&&l||!t.session.resuming&&!l)&&(u.queue(t,u.createRecord(t,{type:u.ContentType.change_cipher_spec,data:u.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,u.queue(t,u.createRecord(t,{type:u.ContentType.handshake,data:u.createFinished(t)}))),t.expect=l?g:E,t.handshaking=!1,++t.handshakes,t.peerCertificate=l?t.session.serverCertificate:t.session.clientCertificate,u.flush(t),t.isConnected=!0,t.connected(t),t.process()},u.handleAlert=function(t,e){var r,n=e.fragment,i={level:n.getByte(),description:n.getByte()};switch(i.description){case u.Alert.Description.close_notify:r="Connection closed.";break;case u.Alert.Description.unexpected_message:r="Unexpected message.";break;case u.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case u.Alert.Description.decryption_failed:r="Decryption failed.";break;case u.Alert.Description.record_overflow:r="Record overflow.";break;case u.Alert.Description.decompression_failure:r="Decompression failed.";break;case u.Alert.Description.handshake_failure:r="Handshake failure.";break;case u.Alert.Description.bad_certificate:r="Bad certificate.";break;case u.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case u.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case u.Alert.Description.certificate_expired:r="Certificate expired.";break;case u.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case u.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case u.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case u.Alert.Description.access_denied:r="Access denied.";break;case u.Alert.Description.decode_error:r="Decode error.";break;case u.Alert.Description.decrypt_error:r="Decrypt error.";break;case u.Alert.Description.export_restriction:r="Export restriction.";break;case u.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case u.Alert.Description.insufficient_security:r="Insufficient security.";break;case u.Alert.Description.internal_error:r="Internal error.";break;case u.Alert.Description.user_canceled:r="User canceled.";break;case u.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}if(i.description===u.Alert.Description.close_notify)return t.close();t.error(t,{message:r,send:!1,origin:t.entity===u.ConnectionEnd.client?"server":"client",alert:i}),t.process()},u.handleHandshake=function(t,e){var r=e.fragment,i=r.getByte(),o=r.getInt24();if(o>r.length())return t.fragmented=e,e.fragment=n.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var s=r.bytes(o+4);r.read+=4,i in z[t.entity][t.expect]?(t.entity!==u.ConnectionEnd.server||t.open||t.fail||(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:n.md.md5.create(),sha1:n.md.sha1.create()}),i!==u.HandshakeType.hello_request&&i!==u.HandshakeType.certificate_verify&&i!==u.HandshakeType.finished&&(t.session.md5.update(s),t.session.sha1.update(s)),z[t.entity][t.expect][i](t,e,o)):u.handleUnexpected(t,e)},u.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()},u.handleHeartbeat=function(t,e){var r=e.fragment,i=r.getByte(),o=r.getInt16(),s=r.getBytes(o);if(i===u.HeartbeatMessageType.heartbeat_request){if(t.handshaking||o>s.length)return t.process();u.queue(t,u.createRecord(t,{type:u.ContentType.heartbeat,data:u.createHeartbeat(u.HeartbeatMessageType.heartbeat_response,s)})),u.flush(t)}else if(i===u.HeartbeatMessageType.heartbeat_response){if(s!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,n.util.createBuffer(s))}t.process()};var c=1,h=2,f=3,d=4,p=5,m=6,g=7,y=8,_=1,v=2,b=3,w=4,x=5,E=6,S=u.handleUnexpected,M=u.handleChangeCipherSpec,T=u.handleAlert,A=u.handleHandshake,C=u.handleApplicationData,I=u.handleHeartbeat,k=[];k[u.ConnectionEnd.client]=[[S,T,A,S,I],[S,T,A,S,I],[S,T,A,S,I],[S,T,A,S,I],[S,T,A,S,I],[M,T,S,S,I],[S,T,A,S,I],[S,T,A,C,I],[S,T,A,S,I]],k[u.ConnectionEnd.server]=[[S,T,A,S,I],[S,T,A,S,I],[S,T,A,S,I],[S,T,A,S,I],[M,T,S,S,I],[S,T,A,S,I],[S,T,A,C,I],[S,T,A,S,I]];var R=u.handleHelloRequest,B=u.handleServerHello,P=u.handleCertificate,D=u.handleServerKeyExchange,L=u.handleCertificateRequest,O=u.handleServerHelloDone,N=u.handleFinished,z=[];z[u.ConnectionEnd.client]=[[S,S,B,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[R,S,S,S,S,S,S,S,S,S,S,P,D,L,O,S,S,S,S,S,S],[R,S,S,S,S,S,S,S,S,S,S,S,D,L,O,S,S,S,S,S,S],[R,S,S,S,S,S,S,S,S,S,S,S,S,L,O,S,S,S,S,S,S],[R,S,S,S,S,S,S,S,S,S,S,S,S,S,O,S,S,S,S,S,S],[R,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[R,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,N],[R,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[R,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]];var U=u.handleClientHello,j=u.handleClientKeyExchange,F=u.handleCertificateVerify;z[u.ConnectionEnd.server]=[[S,U,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,P,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,j,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,F,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,N],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]],u.generateKeys=function(t,e){var r=i,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var o=2*e.mac_key_length+2*e.enc_key_length,s=t.version.major===u.Versions.TLS_1_0.major&&t.version.minor===u.Versions.TLS_1_0.minor;s&&(o+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,o),l={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return s&&(l.client_write_IV=a.getBytes(e.fixed_iv_length),l.server_write_IV=a.getBytes(e.fixed_iv_length)),l},u.createConnectionState=function(t){var e=t.entity===u.ConnectionEnd.client,r=function(){var t={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(t){return!0},compressionState:null,compressFunction:function(t){return!0},updateSequenceNumber:function(){4294967295===t.sequenceNumber[1]?(t.sequenceNumber[1]=0,++t.sequenceNumber[0]):++t.sequenceNumber[1]}};return t},n={read:r(),write:r()};if(n.read.update=function(t,e){return n.read.cipherFunction(e,n.read)?n.read.compressFunction(t,e,n.read)||t.error(t,{message:"Could not decompress record.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.decompression_failure}}):t.error(t,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.bad_record_mac}}),!t.fail},n.write.update=function(t,e){return n.write.compressFunction(t,e,n.write)?n.write.cipherFunction(e,n.write)||t.error(t,{message:"Could not encrypt record.",send:!1,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.internal_error}}):t.error(t,{message:"Could not compress record.",send:!1,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.internal_error}}),!t.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=u.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case u.CompressionMethod.none:break;case u.CompressionMethod.deflate:n.read.compressFunction=s,n.write.compressFunction=o;break;default:throw new Error("Unsupported compression algorithm.")}}return n},u.createRandom=function(){var t=new Date,e=+t+6e4*t.getTimezoneOffset(),r=n.util.createBuffer();return r.putInt32(e),r.putBytes(n.random.getBytes(28)),r},u.createRecord=function(t,e){return e.data?{type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data}:null},u.createAlert=function(t,e){var r=n.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),u.createRecord(t,{type:u.ContentType.alert,data:r})},u.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=n.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var i=t.cipherSuites[r];e.putByte(i.id[0]),e.putByte(i.id[1])}var o=e.length(),s=n.util.createBuffer();s.putByte(u.CompressionMethod.none);var a=s.length(),c=n.util.createBuffer();if(t.virtualHost){var h=n.util.createBuffer();h.putByte(0),h.putByte(0);var f=n.util.createBuffer();f.putByte(0),l(f,2,n.util.createBuffer(t.virtualHost));var d=n.util.createBuffer();l(d,2,f),l(h,2,d),c.putBuffer(h)}var p=c.length();p>0&&(p+=2);var m=t.session.id,g=m.length+1+2+4+28+2+o+1+a+p,y=n.util.createBuffer();return y.putByte(u.HandshakeType.client_hello),y.putInt24(g),y.putByte(t.version.major),y.putByte(t.version.minor),y.putBytes(t.session.sp.client_random),l(y,1,n.util.createBuffer(m)),l(y,2,e),l(y,1,s),p>0&&l(y,2,c),y},u.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,i=n.util.createBuffer();return i.putByte(u.HandshakeType.server_hello),i.putInt24(r),i.putByte(t.version.major),i.putByte(t.version.minor),i.putBytes(t.session.sp.server_random),l(i,1,n.util.createBuffer(e)),i.putByte(t.session.cipherSuite.id[0]),i.putByte(t.session.cipherSuite.id[1]),i.putByte(t.session.compressionMethod),i},u.createCertificate=function(t){var e,r=t.entity===u.ConnectionEnd.client,i=null;t.getCertificate&&(e=r?t.session.certificateRequest:t.session.extensions.server_name.serverNameList,i=t.getCertificate(t,e));var o=n.util.createBuffer();if(null!==i)try{n.util.isArray(i)||(i=[i]);for(var s=null,a=0;a<i.length;++a){var c=n.pem.decode(i[a])[0];if("CERTIFICATE"!==c.type&&"X509 CERTIFICATE"!==c.type&&"TRUSTED CERTIFICATE"!==c.type){var h=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw h.headerType=c.type,h}if(c.procType&&"ENCRYPTED"===c.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var f=n.util.createBuffer(c.body);null===s&&(s=n.asn1.fromDer(f.bytes(),!1));var d=n.util.createBuffer();l(d,3,f),o.putBuffer(d)}i=n.pki.certificateFromAsn1(s),r?t.session.clientCertificate=i:t.session.serverCertificate=i}catch(g){return t.error(t,{message:"Could not send certificate list.",cause:g,send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.bad_certificate}})}var p=3+o.length(),m=n.util.createBuffer();return m.putByte(u.HandshakeType.certificate),m.putInt24(p),l(m,3,o),m},u.createClientKeyExchange=function(t){var e=n.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(n.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var i=(e=t.session.serverCertificate.publicKey.encrypt(r.pre_master_secret)).length+2,o=n.util.createBuffer();return o.putByte(u.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o},u.createServerKeyExchange=function(t){var e=n.util.createBuffer();return e},u.getClientSignature=function(t,e){var r=n.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(t,e,r){var i=null;if(t.getPrivateKey)try{i=t.getPrivateKey(t,t.session.clientCertificate),i=n.pki.privateKeyFromPem(i)}catch(o){t.error(t,{message:"Could not get private key.",cause:o,send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.internal_error}})}null===i?t.error(t,{message:"No private key set.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.internal_error}}):e=i.sign(e,null),r(t,e)},t.getSignature(t,r,e)},u.createCertificateVerify=function(t,e){var r=e.length+2,i=n.util.createBuffer();return i.putByte(u.HandshakeType.certificate_verify),i.putInt24(r),i.putInt16(e.length),i.putBytes(e),i},u.createCertificateRequest=function(t){var e=n.util.createBuffer();e.putByte(1);var r=n.util.createBuffer();for(var i in t.caStore.certs){var o=t.caStore.certs[i],s=n.pki.distinguishedNameToAsn1(o.subject),a=n.asn1.toDer(s);r.putInt16(a.length()),r.putBuffer(a)}var c=1+e.length()+2+r.length(),h=n.util.createBuffer();return h.putByte(u.HandshakeType.certificate_request),h.putInt24(c),l(h,1,e),l(h,2,r),h},u.createServerHelloDone=function(t){var e=n.util.createBuffer();return e.putByte(u.HandshakeType.server_hello_done),e.putInt24(0),e},u.createChangeCipherSpec=function(){var t=n.util.createBuffer();return t.putByte(1),t},u.createFinished=function(t){var e=n.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===u.ConnectionEnd.client,o=t.session.sp,s=r?"client finished":"server finished";e=i(o.master_secret,s,e.getBytes(),12);var a=n.util.createBuffer();return a.putByte(u.HandshakeType.finished),a.putInt24(e.length()),a.putBuffer(e),a},u.createHeartbeat=function(t,e,r){"undefined"===typeof r&&(r=e.length);var i=n.util.createBuffer();i.putByte(t),i.putInt16(r),i.putBytes(e);var o=i.length(),s=Math.max(16,o-r-3);return i.putBytes(n.random.getBytes(s)),i},u.queue=function(t,e){if(e&&(0!==e.fragment.length()||e.type!==u.ContentType.handshake&&e.type!==u.ContentType.alert&&e.type!==u.ContentType.change_cipher_spec)){if(e.type===u.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var i;if(e.fragment.length()<=u.MaxFragment)i=[e];else{i=[];for(var o=e.fragment.bytes();o.length>u.MaxFragment;)i.push(u.createRecord(t,{type:e.type,data:n.util.createBuffer(o.slice(0,u.MaxFragment))})),o=o.slice(u.MaxFragment);o.length>0&&i.push(u.createRecord(t,{type:e.type,data:n.util.createBuffer(o)}))}for(var s=0;s<i.length&&!t.fail;++s){var a=i[s];t.state.current.write.update(t,a)&&t.records.push(a)}}},u.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var V=function(t){switch(t){case!0:return!0;case n.pki.certificateError.bad_certificate:return u.Alert.Description.bad_certificate;case n.pki.certificateError.unsupported_certificate:return u.Alert.Description.unsupported_certificate;case n.pki.certificateError.certificate_revoked:return u.Alert.Description.certificate_revoked;case n.pki.certificateError.certificate_expired:return u.Alert.Description.certificate_expired;case n.pki.certificateError.certificate_unknown:return u.Alert.Description.certificate_unknown;case n.pki.certificateError.unknown_ca:return u.Alert.Description.unknown_ca;default:return u.Alert.Description.bad_certificate}};for(var G in u.verifyCertificateChain=function(t,e){try{var r={};for(var i in t.verifyOptions)r[i]=t.verifyOptions[i];r.verify=function(e,r,i){V(e);var o=t.verify(t,e,r,i);if(!0!==o){if("object"===typeof o&&!n.util.isArray(o)){var s=new Error("The application rejected the certificate.");throw s.send=!0,s.alert={level:u.Alert.Level.fatal,description:u.Alert.Description.bad_certificate},o.message&&(s.message=o.message),o.alert&&(s.alert.description=o.alert),s}o!==e&&(o=function(t){switch(t){case!0:return!0;case u.Alert.Description.bad_certificate:return n.pki.certificateError.bad_certificate;case u.Alert.Description.unsupported_certificate:return n.pki.certificateError.unsupported_certificate;case u.Alert.Description.certificate_revoked:return n.pki.certificateError.certificate_revoked;case u.Alert.Description.certificate_expired:return n.pki.certificateError.certificate_expired;case u.Alert.Description.certificate_unknown:return n.pki.certificateError.certificate_unknown;case u.Alert.Description.unknown_ca:return n.pki.certificateError.unknown_ca;default:return n.pki.certificateError.bad_certificate}}(o))}return o},n.pki.verifyCertificateChain(t.caStore,e,r)}catch(s){var o=s;("object"!==typeof o||n.util.isArray(o))&&(o={send:!0,alert:{level:u.Alert.Level.fatal,description:V(s)}}),"send"in o||(o.send=!0),"alert"in o||(o.alert={level:u.Alert.Level.fatal,description:V(o.error)}),t.error(t,o)}return!t.fail},u.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{for(var i in(r={}).cache=t||{},r.capacity=Math.max(e||100,1),r.order=[],t)r.order.length<=e?r.order.push(i):delete t[i];r.getSession=function(t){var e=null,i=null;if(t?i=n.util.bytesToHex(t):r.order.length>0&&(i=r.order[0]),null!==i&&i in r.cache)for(var o in e=r.cache[i],delete r.cache[i],r.order)if(r.order[o]===i){r.order.splice(o,1);break}return e},r.setSession=function(t,e){if(r.order.length===r.capacity){var i=r.order.shift();delete r.cache[i]}i=n.util.bytesToHex(t);r.order.push(i),r.cache[i]=e}}return r},u.createConnection=function(t){var e=null;e=t.caStore?n.util.isArray(t.caStore)?n.pki.createCaStore(t.caStore):t.caStore:n.pki.createCaStore();var r=t.cipherSuites||null;if(null===r)for(var i in r=[],u.CipherSuites)r.push(u.CipherSuites[i]);var o=t.server?u.ConnectionEnd.server:u.ConnectionEnd.client,s=t.sessionCache?u.createSessionCache(t.sessionCache):null,a={version:{major:u.Version.major,minor:u.Version.minor},entity:o,sessionId:t.sessionId,caStore:e,sessionCache:s,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(t,e,r,n){return e},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:n.util.createBuffer(),tlsData:n.util.createBuffer(),data:n.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(e,r){r.origin=r.origin||(e.entity===u.ConnectionEnd.client?"client":"server"),r.send&&(u.queue(e,u.createAlert(e,r.alert)),u.flush(e));var n=!1!==r.fatal;n&&(e.fail=!0),t.error(e,r),n&&e.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null,reset:function(t){a.version={major:u.Version.major,minor:u.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=(a.entity,u.ConnectionEnd.client,0),a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(t||"undefined"===typeof t),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=u.createConnectionState(a)}};a.reset();return a.handshake=function(t){if(a.entity!==u.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&0===a.handshakes&&(a.fail=!1),a.handshaking=!0;var e=null;(t=t||"").length>0&&(a.sessionCache&&(e=a.sessionCache.getSession(t)),null===e&&(t="")),0===t.length&&a.sessionCache&&null!==(e=a.sessionCache.getSession())&&(t=e.id),a.session={id:t,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:n.md.md5.create(),sha1:n.md.sha1.create()},e&&(a.version=e.version,a.session.sp=e.sp),a.session.sp.client_random=u.createRandom().getBytes(),a.open=!0,u.queue(a,u.createRecord(a,{type:u.ContentType.handshake,data:u.createClientHello(a)})),u.flush(a)}},a.process=function(t){var e=0;return t&&a.input.putBytes(t),a.fail||(null!==a.record&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),null===a.record&&(e=function(t){var e=0,r=t.input,i=r.length();if(i<5)e=5-i;else{t.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:n.util.createBuffer(),ready:!1};var o=t.record.version.major===t.version.major;o&&t.session&&t.session.version&&(o=t.record.version.minor===t.version.minor),o||t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.protocol_version}})}return e}(a)),a.fail||null===a.record||a.record.ready||(e=function(t){var e=0,r=t.input,n=r.length();return n<t.record.length?e=t.record.length-n:(t.record.fragment.putBytes(r.getBytes(t.record.length)),r.compact(),t.state.current.read.update(t,t.record)&&(null!==t.fragmented&&(t.fragmented.type===t.record.type?(t.fragmented.fragment.putBuffer(t.record.fragment),t.record=t.fragmented):t.error(t,{message:"Invalid fragmented record.",send:!0,alert:{level:u.Alert.Level.fatal,description:u.Alert.Description.unexpected_message}})),t.record.ready=!0)),e}(a)),!a.fail&&null!==a.record&&a.record.ready&&function(t,e){var r=e.type-u.ContentType.change_cipher_spec,n=k[t.entity][t.expect];r in n?n[r](t,e):u.handleUnexpected(t,e)}(a,a.record)),e},a.prepare=function(t){return u.queue(a,u.createRecord(a,{type:u.ContentType.application_data,data:n.util.createBuffer(t)})),u.flush(a)},a.prepareHeartbeatRequest=function(t,e){return t instanceof n.util.ByteBuffer&&(t=t.bytes()),"undefined"===typeof e&&(e=t.length),a.expectedHeartbeatPayload=t,u.queue(a,u.createRecord(a,{type:u.ContentType.heartbeat,data:u.createHeartbeat(u.HeartbeatMessageType.heartbeat_request,t,e)})),u.flush(a)},a.close=function(t){if(!a.fail&&a.sessionCache&&a.session){var e={id:a.session.id,version:a.session.version,sp:a.session.sp};e.sp.keys=null,a.sessionCache.setSession(e.id,e)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,u.queue(a,u.createAlert(a,{level:u.Alert.Level.warning,description:u.Alert.Description.close_notify})),u.flush(a)),a.closed(a)),a.reset(t)},a},t.exports=n.tls=n.tls||{},u)"function"!==typeof u[G]&&(n.tls[G]=u[G]);n.tls.prf_tls1=i,n.tls.hmac_sha1=function(t,e,r){var i=n.hmac.create();i.start("SHA1",t);var o=n.util.createBuffer();return o.putInt32(e[0]),o.putInt32(e[1]),o.putByte(r.type),o.putByte(r.version.major),o.putByte(r.version.minor),o.putInt16(r.length),o.putBytes(r.fragment.bytes()),i.update(o.getBytes()),i.digest().getBytes()},n.tls.createSessionCache=u.createSessionCache,n.tls.createConnection=u.createConnection},function(t,e,r){var n=r(2);r(15),r(24),r(167),r(33),r(87),r(173),r(90),r(54),r(4),r(89);var i=n.asn1,o=t.exports=n.pki=n.pki||{};o.pemToDer=function(t){var e=n.pem.decode(t)[0];if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return n.util.createBuffer(e.body)},o.privateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PRIVATE KEY"!==e.type&&"RSA PRIVATE KEY"!==e.type){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var s=i.fromDer(e.body);return o.privateKeyFromAsn1(s)},o.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:i.toDer(o.privateKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},o.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:i.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})}},function(t,e,r){var n=r(2);if(r(23),r(15),r(53),r(17),r(24),r(87),r(33),r(11),r(170),r(54),r(4),"undefined"===typeof i)var i=n.jsbn.BigInteger;var o=n.asn1,s=n.pki=n.pki||{};t.exports=s.pbe=n.pbe=n.pbe||{};var a=s.oids,l={name:"EncryptedPrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},u={name:"PBES2Algorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},c={name:"pkcs-12PbeParams",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"iterations"}]};function h(t,e){return t.start().update(e).digest().getBytes()}function f(t){var e;if(t){if(!(e=s.oids[o.derToOid(t)])){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else e="hmacWithSHA1";return d(e)}function d(t){var e=n.md;switch(t){case"hmacWithSHA224":e=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s.encryptPrivateKeyInfo=function(t,e,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i,l,u,c=n.random.getBytesSync(r.saltSize),h=r.count,f=o.integerToDer(h);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var p,m,g;switch(r.algorithm){case"aes128":i=16,p=16,m=a["aes128-CBC"],g=n.aes.createEncryptionCipher;break;case"aes192":i=24,p=16,m=a["aes192-CBC"],g=n.aes.createEncryptionCipher;break;case"aes256":i=32,p=16,m=a["aes256-CBC"],g=n.aes.createEncryptionCipher;break;case"des":i=8,p=8,m=a.desCBC,g=n.des.createEncryptionCipher;break;default:throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,x}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),_=d(y),v=n.pkcs5.pbkdf2(e,c,h,i,_),b=n.random.getBytesSync(p);(E=g(v)).start(b),E.update(o.toDer(t)),E.finish(),u=E.output.getBytes();var w=function(t,e,r,i){var a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,e.getBytes())]);"hmacWithSHA1"!==i&&a.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids[i]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]));return a}(c,f,i,y);l=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.pkcs5PBES2).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.pkcs5PBKDF2).getBytes()),w]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(m).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,b)])])])}else{var x;if("3des"!==r.algorithm)throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,x;i=24;var E,S=new n.util.ByteBuffer(c);v=s.pbe.generatePkcs12Key(e,S,1,h,i),b=s.pbe.generatePkcs12Key(e,S,2,h,i);(E=n.des.createEncryptionCipher(v)).start(b),E.update(o.toDer(t)),E.finish(),u=E.output.getBytes(),l=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,c),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,f.getBytes())])])}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[l,o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,u)])},s.decryptPrivateKeyInfo=function(t,e){var r=null,i={},a=[];if(!o.validate(t,l,i,a)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=a,u}var c=o.derToOid(i.encryptionOid),h=s.pbe.getCipher(c,i.encryptionParams,e),f=n.util.createBuffer(i.encryptedData);return h.update(f),h.finish()&&(r=o.fromDer(h.output)),r},s.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:o.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})},s.encryptedPrivateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return o.fromDer(e.body)},s.encryptRsaPrivateKey=function(t,e,r){if(!(r=r||{}).legacy){var i=s.wrapRsaPrivateKey(s.privateKeyToAsn1(t));return i=s.encryptPrivateKeyInfo(i,e,r),s.encryptedPrivateKeyToPem(i)}var a,l,u,c;switch(r.algorithm){case"aes128":a="AES-128-CBC",u=16,l=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",u=24,l=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",u=32,l=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",u=24,l=n.random.getBytesSync(8),c=n.des.createEncryptionCipher;break;case"des":a="DES-CBC",u=8,l=n.random.getBytesSync(8),c=n.des.createEncryptionCipher;break;default:var h=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw h.algorithm=r.algorithm,h}var f=c(n.pbe.opensslDeriveBytes(e,l.substr(0,8),u));f.start(l),f.update(o.toDer(s.privateKeyToAsn1(t))),f.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(l).toUpperCase()},body:f.output.getBytes()};return n.pem.encode(d)},s.decryptRsaPrivateKey=function(t,e){var r=null,i=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type)throw(u=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=u,u;if(i.procType&&"ENCRYPTED"===i.procType.type){var a,l;switch(i.dekInfo.algorithm){case"DES-CBC":a=8,l=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,l=n.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,l=n.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,l=n.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,l=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,l=function(t){return n.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":a=8,l=function(t){return n.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":a=16,l=function(t){return n.rc2.createDecryptionCipher(t,128)};break;default:var u;throw(u=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".')).algorithm=i.dekInfo.algorithm,u}var c=n.util.hexToBytes(i.dekInfo.parameters),h=l(n.pbe.opensslDeriveBytes(e,c.substr(0,8),a));if(h.start(c),h.update(n.util.createBuffer(i.body)),!h.finish())return r;r=h.output.getBytes()}else r=i.body;return null!==(r="ENCRYPTED PRIVATE KEY"===i.type?s.decryptPrivateKeyInfo(o.fromDer(r),e):o.fromDer(r))&&(r=s.privateKeyFromAsn1(r)),r},s.pbe.generatePkcs12Key=function(t,e,r,i,o,s){var a,l;if("undefined"===typeof s||null===s){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');s=n.md.sha1.create()}var u=s.digestLength,c=s.blockLength,h=new n.util.ByteBuffer,f=new n.util.ByteBuffer;if(null!==t&&void 0!==t){for(l=0;l<t.length;l++)f.putInt16(t.charCodeAt(l));f.putInt16(0)}var d=f.length(),p=e.length(),m=new n.util.ByteBuffer;m.fillWithByte(r,c);var g=c*Math.ceil(p/c),y=new n.util.ByteBuffer;for(l=0;l<g;l++)y.putByte(e.at(l%p));var _=c*Math.ceil(d/c),v=new n.util.ByteBuffer;for(l=0;l<_;l++)v.putByte(f.at(l%d));var b=y;b.putBuffer(v);for(var w=Math.ceil(o/u),x=1;x<=w;x++){var E=new n.util.ByteBuffer;E.putBytes(m.bytes()),E.putBytes(b.bytes());for(var S=0;S<i;S++)s.start(),s.update(E.getBytes()),E=s.digest();var M=new n.util.ByteBuffer;for(l=0;l<c;l++)M.putByte(E.at(l%u));var T=Math.ceil(p/c)+Math.ceil(d/c),A=new n.util.ByteBuffer;for(a=0;a<T;a++){var C=new n.util.ByteBuffer(b.getBytes(c)),I=511;for(l=M.length()-1;l>=0;l--)I>>=8,I+=M.at(l)+C.at(l),C.setAt(l,255&I);A.putBuffer(C)}b=A,h.putBuffer(E)}return h.truncate(h.length()-o),h},s.pbe.getCipher=function(t,e,r){switch(t){case s.oids.pkcs5PBES2:return s.pbe.getCipherForPBES2(t,e,r);case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case s.oids["pbewithSHAAnd40BitRC2-CBC"]:return s.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},s.pbe.getCipherForPBES2=function(t,e,r){var i,a={},l=[];if(!o.validate(e,u,a,l))throw(i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=l,i;if((t=o.derToOid(a.kdfOid))!==s.oids.pkcs5PBKDF2)throw(i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=t,i.supportedOids=["pkcs5PBKDF2"],i;if((t=o.derToOid(a.encOid))!==s.oids["aes128-CBC"]&&t!==s.oids["aes192-CBC"]&&t!==s.oids["aes256-CBC"]&&t!==s.oids["des-EDE3-CBC"]&&t!==s.oids.desCBC)throw(i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=t,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i;var c,h,d=a.kdfSalt,p=n.util.createBuffer(a.kdfIterationCount);switch(p=p.getInt(p.length()<<3),s.oids[t]){case"aes128-CBC":c=16,h=n.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,h=n.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,h=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,h=n.des.createDecryptionCipher;break;case"desCBC":c=8,h=n.des.createDecryptionCipher}var m=f(a.prfOid),g=n.pkcs5.pbkdf2(r,d,p,c,m),y=a.encIv,_=h(g);return _.start(y),_},s.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},a=[];if(!o.validate(e,c,i,a))throw(m=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,m;var l,u,h,d=n.util.createBuffer(i.salt),p=n.util.createBuffer(i.iterations);switch(p=p.getInt(p.length()<<3),t){case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,u=8,h=n.des.startDecrypting;break;case s.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,u=8,h=function(t,e){var r=n.rc2.createDecryptionCipher(t,40);return r.start(e,null),r};break;default:var m;throw(m=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=t,m}var g=f(i.prfOid),y=s.pbe.generatePkcs12Key(r,d,1,p,l,g);return g.start(),h(y,s.pbe.generatePkcs12Key(r,d,2,p,u,g))},s.pbe.opensslDeriveBytes=function(t,e,r,i){if("undefined"===typeof i||null===i){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');i=n.md.md5.create()}null===e&&(e="");for(var o=[h(i,t+e)],s=16,a=1;s<r;++a,s+=16)o.push(h(i,o[a-1]+t+e));return o.join("").substr(0,r)}},function(t,e,r){var n=r(2);r(17),r(4);var i=t.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){s||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=!0);var t=null,e=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,o=0;o<r;++o)i.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=n.util.encodeUtf8(o));var a=o.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=a[1],a[1]=a[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(o),l(t,r,e),(e.read>2048||0===e.length())&&e.compact(),i},i.digest=function(){var s=n.util.createBuffer();s.putBytes(e.bytes());var a,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-u));for(var c=8*i.fullMessageLength[0],h=0;h<i.fullMessageLength.length-1;++h)c+=(a=8*i.fullMessageLength[h+1])/4294967296>>>0,s.putInt32(c>>>0),c=a>>>0;s.putInt32(c);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};l(f,r,s);var d=n.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d.putInt32(f.h5),d.putInt32(f.h6),d.putInt32(f.h7),d},i};var o=null,s=!1,a=null;function l(t,e,r){for(var n,i,o,s,l,u,c,h,f,d,p,m,g,y=r.length();y>=64;){for(l=0;l<16;++l)e[l]=r.getInt32();for(;l<64;++l)n=((n=e[l-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=e[l-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[l]=n+e[l-7]+i+e[l-16]|0;for(u=t.h0,c=t.h1,h=t.h2,f=t.h3,d=t.h4,p=t.h5,m=t.h6,g=t.h7,l=0;l<64;++l)o=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),s=u&c|h&(u^c),n=g+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(m^d&(p^m))+a[l]+e[l],g=m,m=p,p=d,d=f+n>>>0,f=h,h=c,c=u,u=n+(i=o+s)>>>0;t.h0=t.h0+u|0,t.h1=t.h1+c|0,t.h2=t.h2+h|0,t.h3=t.h3+f|0,t.h4=t.h4+d|0,t.h5=t.h5+p|0,t.h6=t.h6+m|0,t.h7=t.h7+g|0,y-=64}}},function(t,e,r){(function(e){var n=r(2);r(4);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||e.versions["node-webkit"]||(i=r(88)),(t.exports=n.prng=n.prng||{}).create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,o=new Array(32),s=0;s<32;++s)o[s]=r.create();function a(){if(e.pools[0].messageLength>=32)return l();var t=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(t)),l()}function l(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var r=1,n=0;n<32;++n)e.reseeds%r===0&&(t.update(e.pools[n].digest().getBytes()),e.pools[n].start()),r<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var i=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(i),e.generated=0}function u(t){var e=null,r=n.util.globalScope,i=r.crypto||r.msCrypto;i&&i.getRandomValues&&(e=function(t){return i.getRandomValues(t)});var o=n.util.createBuffer();if(e)for(;o.length()<t;){var s=Math.max(1,Math.min(t-o.length(),65536)/4),a=new Uint32Array(Math.floor(s));try{e(a);for(var l=0;l<a.length;++l)o.putInt32(a[l])}catch(d){if(!("undefined"!==typeof QuotaExceededError&&d instanceof QuotaExceededError))throw d}}if(o.length()<t)for(var u,c,h,f=Math.floor(65536*Math.random());o.length()<t;){c=16807*(65535&f),c+=(32767&(u=16807*(f>>16)))<<16,f=4294967295&(c=(2147483647&(c+=u>>15))+(c>>31));for(l=0;l<3;++l)h=f>>>(l<<3),h^=Math.floor(256*Math.random()),o.putByte(255&h)}return o.getBytes(t)}return e.pools=o,e.pool=0,e.generate=function(t,r){if(!r)return e.generateSync(t);var i=e.plugin.cipher,o=e.plugin.increment,s=e.plugin.formatKey,a=e.plugin.formatSeed,u=n.util.createBuffer();e.key=null,function c(h){if(h)return r(h);if(u.length()>=t)return r(null,u.getBytes(t));e.generated>1048575&&(e.key=null);if(null===e.key)return n.util.nextTick((function(){!function(t){if(e.pools[0].messageLength>=32)return l(),t();var r=32-e.pools[0].messageLength<<5;e.seedFile(r,(function(r,n){if(r)return t(r);e.collect(n),l(),t()}))}(c)}));var f=i(e.key,e.seed);e.generated+=f.length,u.putBytes(f),e.key=s(i(e.key,o(e.seed))),e.seed=a(i(e.key,e.seed)),n.util.setImmediate(c)}()},e.generateSync=function(t){var r=e.plugin.cipher,i=e.plugin.increment,o=e.plugin.formatKey,s=e.plugin.formatSeed;e.key=null;for(var l=n.util.createBuffer();l.length()<t;){e.generated>1048575&&(e.key=null),null===e.key&&a();var u=r(e.key,e.seed);e.generated+=u.length,l.putBytes(u),e.key=o(r(e.key,i(e.seed))),e.seed=s(r(e.key,e.seed))}return l.getBytes(t)},i?(e.seedFile=function(t,e){i.randomBytes(t,(function(t,r){if(t)return e(t);e(null,r.toString())}))},e.seedFileSync=function(t){return i.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,u(t))}catch(r){e(r)}},e.seedFileSync=u),e.collect=function(t){for(var r=t.length,n=0;n<r;++n)e.pools[e.pool].update(t.substr(n,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(t>>i&255);e.collect(n)},e.registerWorker=function(t){if(t===self)e.seedFile=function(t,e){self.addEventListener("message",(function t(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",t),e(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:t}}})};else{t.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&e.seedFile(n.forge.prng.needed,(function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})}))}))}},e}}).call(this,r(5))},function(t,e,r){var n=r(2);r(4);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],o=[1,2,3,5],s=function(t,e){return t<<e&65535|(65535&t)>>16-e},a=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(t,e){"string"===typeof t&&(t=n.util.createBuffer(t)),e=e||128;var r,o=t,s=t.length(),a=e,l=Math.ceil(a/8),u=255>>(7&a);for(r=s;r<128;r++)o.putByte(i[o.at(r-1)+o.at(r-s)&255]);for(o.setAt(128-l,i[o.at(128-l)&u]),r=127-l;r>=0;r--)o.setAt(r,i[o.at(r+1)^o.at(r+l)]);return o};var l=function(t,e,r){var i,l,u,c,h=!1,f=null,d=null,p=null,m=[];for(t=n.rc2.expandKey(t,e),u=0;u<64;u++)m.push(t.getInt16Le());r?(i=function(t){for(u=0;u<4;u++)t[u]+=m[c]+(t[(u+3)%4]&t[(u+2)%4])+(~t[(u+3)%4]&t[(u+1)%4]),t[u]=s(t[u],o[u]),c++},l=function(t){for(u=0;u<4;u++)t[u]+=m[63&t[(u+3)%4]]}):(i=function(t){for(u=3;u>=0;u--)t[u]=a(t[u],o[u]),t[u]-=m[c]+(t[(u+3)%4]&t[(u+2)%4])+(~t[(u+3)%4]&t[(u+1)%4]),c--},l=function(t){for(u=3;u>=0;u--)t[u]-=m[63&t[(u+3)%4]]});var g=function(t){var e=[];for(u=0;u<4;u++){var n=f.getInt16Le();null!==p&&(r?n^=p.getInt16Le():p.putInt16Le(n)),e.push(65535&n)}c=r?0:63;for(var i=0;i<t.length;i++)for(var o=0;o<t[i][0];o++)t[i][1](e);for(u=0;u<4;u++)null!==p&&(r?p.putInt16Le(e[u]):e[u]^=p.getInt16Le()),d.putInt16Le(e[u])},y=null;return y={start:function(t,e){t&&"string"===typeof t&&(t=n.util.createBuffer(t)),h=!1,f=n.util.createBuffer(),d=e||new n.util.createBuffer,p=t,y.output=d},update:function(t){for(h||f.putBuffer(t);f.length()>=8;)g([[5,i],[1,l],[6,i],[1,l],[5,i]])},finish:function(t){var e=!0;if(r)if(t)e=t(8,f,!r);else{var n=8===f.length()?8:8-f.length();f.fillWithByte(n,n)}if(e&&(h=!0,y.update()),!r&&(e=0===f.length()))if(t)e=t(8,d,!r);else{var i=d.length(),o=d.at(i-1);o>i?e=!1:d.truncate(o)}return e}}};n.rc2.startEncrypting=function(t,e,r){var i=n.rc2.createEncryptionCipher(t,128);return i.start(e,r),i},n.rc2.createEncryptionCipher=function(t,e){return l(t,e,!0)},n.rc2.startDecrypting=function(t,e,r){var i=n.rc2.createDecryptionCipher(t,128);return i.start(e,r),i},n.rc2.createDecryptionCipher=function(t,e){return l(t,e,!1)}},function(t,e,r){var n=r(2);r(4),r(11),r(44);var i=t.exports=n.pkcs1=n.pkcs1||{};function o(t,e,r){r||(r=n.md.sha1.create());for(var i="",o=Math.ceil(e/r.digestLength),s=0;s<o;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(t+a),i+=r.digest().getBytes()}return i.substring(0,e)}i.encode_rsa_oaep=function(t,e,r){var i,s,a,l;"string"===typeof r?(i=r,s=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,s=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(l=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),l||(l=a);var u=Math.ceil(t.n.bitLength()/8),c=u-2*a.digestLength-2;if(e.length>c)throw(g=new Error("RSAES-OAEP input message length is too long.")).length=e.length,g.maxLength=c,g;i||(i=""),a.update(i,"raw");for(var h=a.digest(),f="",d=c-e.length,p=0;p<d;p++)f+="\0";var m=h.getBytes()+f+"\x01"+e;if(s){if(s.length!==a.digestLength){var g;throw(g=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=s.length,g.digestLength=a.digestLength,g}}else s=n.random.getBytes(a.digestLength);var y=o(s,u-a.digestLength-1,l),_=n.util.xorBytes(m,y,m.length),v=o(_,a.digestLength,l),b=n.util.xorBytes(s,v,s.length);return"\0"+b+_},i.decode_rsa_oaep=function(t,e,r){var i,s,a;"string"===typeof r?(i=r,s=arguments[3]||void 0):r&&(i=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var l=Math.ceil(t.n.bitLength()/8);if(e.length!==l)throw(_=new Error("RSAES-OAEP encoded message length is invalid.")).length=e.length,_.expectedLength=l,_;if(void 0===s?s=n.md.sha1.create():s.start(),a||(a=s),l<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),s.update(i,"raw");for(var u=s.digest().getBytes(),c=e.charAt(0),h=e.substring(1,s.digestLength+1),f=e.substring(1+s.digestLength),d=o(f,s.digestLength,a),p=n.util.xorBytes(h,d,h.length),m=o(p,l-s.digestLength-1,a),g=n.util.xorBytes(f,m,f.length),y=g.substring(0,s.digestLength),_="\0"!==c,v=0;v<s.digestLength;++v)_|=u.charAt(v)!==y.charAt(v);for(var b=1,w=s.digestLength,x=s.digestLength;x<g.length;x++){var E=g.charCodeAt(x),S=1&E^1,M=b?65534:0;_|=E&M,w+=b&=S}if(_||1!==g.charCodeAt(w))throw new Error("Invalid RSAES-OAEP padding.");return g.substring(w+1)}},function(t,e,r){var n=r(2);r(4),r(55),r(11),function(){if(n.prime)t.exports=n.prime;else{var e=t.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],o=new r(null);o.fromInt(30);var s=function(t,e){return t|e};e.generateProbablePrime=function(t,e,i){"function"===typeof e&&(i=e,e={});var o=(e=e||{}).algorithm||"PRIMEINC";"string"===typeof o&&(o={name:o}),o.options=o.options||{};var s=e.prng||n.random,l={nextBytes:function(t){for(var e=s.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}};if("PRIMEINC"===o.name)return function(t,e,i,o){if("workers"in i)return function(t,e,i,o){if("undefined"===typeof Worker)return a(t,e,i,o);var s=u(t,e),l=i.workers,c=i.workLoad||100,h=30*c/8,f=i.workerScript||"forge/prime.worker.js";if(-1===l)return n.util.estimateCores((function(t,e){t&&(e=2),l=e-1,d()}));function d(){l=Math.max(1,l);for(var n=[],i=0;i<l;++i)n[i]=new Worker(f);for(i=0;i<l;++i)n[i].addEventListener("message",d);var a=!1;function d(i){if(!a){0;var l=i.data;if(l.found){for(var f=0;f<n.length;++f)n[f].terminate();return a=!0,o(null,new r(l.prime,16))}s.bitLength()>t&&(s=u(t,e));var d=s.toString(16);i.target.postMessage({hex:d,workLoad:c}),s.dAddOffset(h,0)}}}d()}(t,e,i,o);return a(t,e,i,o)}(t,l,o.options,i);throw new Error("Invalid prime generation algorithm: "+o.name)}}function a(t,e,r,n){var i=u(t,e),o=function(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}(i.bitLength());"millerRabinTests"in r&&(o=r.millerRabinTests);var s=10;"maxBlockTime"in r&&(s=r.maxBlockTime),l(i,t,e,0,o,s,n)}function l(t,e,r,o,s,a,c){var h=+new Date;do{if(t.bitLength()>e&&(t=u(e,r)),t.isProbablePrime(s))return c(null,t);t.dAddOffset(i[o++%8],0)}while(a<0||+new Date-h<a);n.util.setImmediate((function(){l(t,e,r,o,s,a,c)}))}function u(t,e){var n=new r(t,e),i=t-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),s,n),n.dAddOffset(31-n.mod(o).byteValue(),0),n}}()},function(t,e,r){var n=r(2);r(15),r(43),r(24),r(174),r(167),r(11),r(54),r(44),r(4),r(89);var i=n.asn1,o=n.pki,s=t.exports=n.pkcs12=n.pkcs12||{},a={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},l={name:"PFX",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},a,{name:"PFX.macData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},u={name:"SafeBag",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},c={name:"Attribute",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,capture:"values"}]},h={name:"CertBag",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:i.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:i.Class.UNIVERSAL,type:i.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function f(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var s=0;s<t[o].safeBags.length;s++){var a=t[o].safeBags[s];void 0!==n&&a.type!==n||(null!==e?void 0!==a.attributes[e]&&a.attributes[e].indexOf(r)>=0&&i.push(a):i.push(a))}return i}function d(t){if(t.composed||t.constructed){for(var e=n.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function p(t,e){var r={},s=[];if(!i.validate(t,n.pkcs7.asn1.encryptedDataValidator,r,s))throw(a=new Error("Cannot read EncryptedContentInfo.")).errors=s,a;var a,l=i.derToOid(r.contentType);if(l!==o.oids.data)throw(a=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=l,a;l=i.derToOid(r.encAlgorithm);var u=o.pbe.getCipher(l,r.encParameter,e),c=d(r.encryptedContentAsn1),h=n.util.createBuffer(c.value);if(u.update(h),!u.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return u.output.getBytes()}function m(t,e,r){if(!e&&0===t.length)return[];if((t=i.fromDer(t,e)).tagClass!==i.Class.UNIVERSAL||t.type!==i.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],s=0;s<t.value.length;s++){var a=t.value[s],l={},c=[];if(!i.validate(a,u,l,c))throw(y=new Error("Cannot read SafeBag.")).errors=c,y;var f,d,p={type:i.derToOid(l.bagId),attributes:g(l.bagAttributes)};n.push(p);var m=l.bagValue.value[0];switch(p.type){case o.oids.pkcs8ShroudedKeyBag:if(null===(m=o.decryptPrivateKeyInfo(m,r)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case o.oids.keyBag:try{p.key=o.privateKeyFromAsn1(m)}catch(_){p.key=null,p.asn1=m}continue;case o.oids.certBag:f=h,d=function(){if(i.derToOid(l.certId)!==o.oids.x509Certificate){var t=new Error("Unsupported certificate type, only X.509 supported.");throw t.oid=i.derToOid(l.certId),t}var r=i.fromDer(l.cert,e);try{p.cert=o.certificateFromAsn1(r,!0)}catch(_){p.cert=null,p.asn1=r}};break;default:var y;throw(y=new Error("Unsupported PKCS#12 SafeBag type.")).oid=p.type,y}if(void 0!==f&&!i.validate(m,f,l,c))throw(y=new Error("Cannot read PKCS#12 "+f.name)).errors=c,y;d()}return n}function g(t){var e={};if(void 0!==t)for(var r=0;r<t.length;++r){var n={},s=[];if(!i.validate(t[r],c,n,s)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=s,a}var l=i.derToOid(n.oid);if(void 0!==o.oids[l]){e[o.oids[l]]=[];for(var u=0;u<n.values.length;++u)e[o.oids[l]].push(n.values[u].value)}}return e}s.pkcs12FromAsn1=function(t,e,r){"string"===typeof e?(r=e,e=!0):void 0===e&&(e=!0);var u={};if(!i.validate(t,l,u,[]))throw(c=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=c,c;var c,h={version:u.version.charCodeAt(0),safeContents:[],getBags:function(t){var e,r={};return"localKeyId"in t?e=t.localKeyId:"localKeyIdHex"in t&&(e=n.util.hexToBytes(t.localKeyIdHex)),void 0===e&&!("friendlyName"in t)&&"bagType"in t&&(r[t.bagType]=f(h.safeContents,null,null,t.bagType)),void 0!==e&&(r.localKeyId=f(h.safeContents,"localKeyId",e,t.bagType)),"friendlyName"in t&&(r.friendlyName=f(h.safeContents,"friendlyName",t.friendlyName,t.bagType)),r},getBagsByFriendlyName:function(t,e){return f(h.safeContents,"friendlyName",t,e)},getBagsByLocalKeyId:function(t,e){return f(h.safeContents,"localKeyId",t,e)}};if(3!==u.version.charCodeAt(0))throw(c=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=u.version.charCodeAt(0),c;if(i.derToOid(u.contentType)!==o.oids.data)throw(c=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=i.derToOid(u.contentType),c;var g=u.content.value[0];if(g.tagClass!==i.Class.UNIVERSAL||g.type!==i.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(g=d(g),u.mac){var y=null,_=0,v=i.derToOid(u.macAlgorithm);switch(v){case o.oids.sha1:y=n.md.sha1.create(),_=20;break;case o.oids.sha256:y=n.md.sha256.create(),_=32;break;case o.oids.sha384:y=n.md.sha384.create(),_=48;break;case o.oids.sha512:y=n.md.sha512.create(),_=64;break;case o.oids.md5:y=n.md.md5.create(),_=16}if(null===y)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+v);var b=new n.util.ByteBuffer(u.macSalt),w="macIterations"in u?parseInt(n.util.bytesToHex(u.macIterations),16):1,x=s.generateKey(r,b,3,w,_,y),E=n.hmac.create();if(E.start(y,x),E.update(g.value),E.getMac().getBytes()!==u.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(t,e,r,n){if((e=i.fromDer(e,r)).tagClass!==i.Class.UNIVERSAL||e.type!==i.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var s=0;s<e.value.length;s++){var l=e.value[s],u={},c=[];if(!i.validate(l,a,u,c))throw(y=new Error("Cannot read ContentInfo.")).errors=c,y;var h={encrypted:!1},f=null,g=u.content.value[0];switch(i.derToOid(u.contentType)){case o.oids.data:if(g.tagClass!==i.Class.UNIVERSAL||g.type!==i.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");f=d(g).value;break;case o.oids.encryptedData:f=p(g,n),h.encrypted=!0;break;default:var y;throw(y=new Error("Unsupported PKCS#12 contentType.")).contentType=i.derToOid(u.contentType),y}h.safeBags=m(f,r,n),t.safeContents.push(h)}}(h,g.value,e,r),h},s.toPkcs12Asn1=function(t,e,r,a){(a=a||{}).saltSize=a.saltSize||8,a.count=a.count||2048,a.algorithm=a.algorithm||a.encAlgorithm||"aes128","useMac"in a||(a.useMac=!0),"localKeyId"in a||(a.localKeyId=null),"generateLocalKeyId"in a||(a.generateLocalKeyId=!0);var l,u=a.localKeyId;if(null!==u)u=n.util.hexToBytes(u);else if(a.generateLocalKeyId)if(e){var c=n.util.isArray(e)?e[0]:e;"string"===typeof c&&(c=o.certificateFromPem(c)),(A=n.md.sha1.create()).update(i.toDer(o.certificateToAsn1(c)).getBytes()),u=A.digest().getBytes()}else u=n.random.getBytes(20);var h=[];null!==u&&h.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids.localKeyId).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,u)])])),"friendlyName"in a&&h.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids.friendlyName).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.BMPSTRING,!1,a.friendlyName)])])),h.length>0&&(l=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,h));var f=[],d=[];null!==e&&(d=n.util.isArray(e)?e:[e]);for(var p=[],m=0;m<d.length;++m){"string"===typeof(e=d[m])&&(e=o.certificateFromPem(e));var g=0===m?l:void 0,y=o.certificateToAsn1(e),_=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids.certBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids.x509Certificate).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(y).getBytes())])])]),g]);p.push(_)}if(p.length>0){var v=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,p),b=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(v).getBytes())])]);f.push(b)}var w=null;if(null!==t){var x=o.wrapRsaPrivateKey(o.privateKeyToAsn1(t));w=null===r?i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids.keyBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[x]),l]):i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids.pkcs8ShroudedKeyBag).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[o.encryptPrivateKeyInfo(x,r,a)]),l]);var E=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[w]),S=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(E).getBytes())])]);f.push(S)}var M,T=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,f);if(a.useMac){var A=n.md.sha1.create(),C=new n.util.ByteBuffer(n.random.getBytes(a.saltSize)),I=a.count,k=(t=s.generateKey(r,C,3,I,20),n.hmac.create());k.start(A,t),k.update(i.toDer(T).getBytes());var R=k.getMac();M=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids.sha1).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,R.getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,C.getBytes()),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(I).getBytes())])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(3).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.oids.data).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,i.toDer(T).getBytes())])]),M])},s.generateKey=n.pbe.generatePkcs12Key},function(t,e,r){var n=r(2);r(15),r(4);var i=n.asn1,o=t.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=o;var s={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};o.contentInfoValidator=s;var a={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};o.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},o.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var l={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};o.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},s,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[l]}]},o.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},function(t,e,r){var n=r(2);r(4),n.mgf=n.mgf||{},(t.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(t){return{generate:function(e,r){for(var i=new n.util.ByteBuffer,o=Math.ceil(r/t.digestLength),s=0;s<o;s++){var a=new n.util.ByteBuffer;a.putInt32(s),t.start(),t.update(e+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()}}}},function(t,e,r){var n=r(2);r(17),r(4);var i=t.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=i;var o=n.sha384=n.sha512.sha384=n.sha512.sha384||{};o.create=function(){return i.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=o,n.sha512.sha256=n.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,i.create=function(t){if(a||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),128),l=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(u={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),"undefined"===typeof t&&(t="SHA-512"),!(t in u))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=u[t],r=null,i=n.util.createBuffer(),o=new Array(80),h=0;h<80;++h)o[h]=new Array(2);var f=64;switch(t){case"SHA-384":f=48;break;case"SHA-512/256":f=32;break;case"SHA-512/224":f=28}var d={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:f,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){d.messageLength=0,d.fullMessageLength=d.messageLength128=[];for(var t=d.messageLengthSize/4,o=0;o<t;++o)d.fullMessageLength.push(0);i=n.util.createBuffer(),r=new Array(e.length);for(o=0;o<e.length;++o)r[o]=e[o].slice(0);return d}};return d.start(),d.update=function(t,e){"utf8"===e&&(t=n.util.encodeUtf8(t));var s=t.length;d.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=d.fullMessageLength.length-1;a>=0;--a)d.fullMessageLength[a]+=s[1],s[1]=s[0]+(d.fullMessageLength[a]/4294967296>>>0),d.fullMessageLength[a]=d.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return i.putBytes(t),c(r,o,i),(i.read>2048||0===i.length())&&i.compact(),d},d.digest=function(){var e=n.util.createBuffer();e.putBytes(i.bytes());var a,l=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize&d.blockLength-1;e.putBytes(s.substr(0,d.blockLength-l));for(var u=8*d.fullMessageLength[0],h=0;h<d.fullMessageLength.length-1;++h)u+=(a=8*d.fullMessageLength[h+1])/4294967296>>>0,e.putInt32(u>>>0),u=a>>>0;e.putInt32(u);var f=new Array(r.length);for(h=0;h<r.length;++h)f[h]=r[h].slice(0);c(f,o,e);var p,m=n.util.createBuffer();p="SHA-512"===t?f.length:"SHA-384"===t?f.length-2:f.length-4;for(h=0;h<p;++h)m.putInt32(f[h][0]),h===p-1&&"SHA-512/224"===t||m.putInt32(f[h][1]);return m},d};var s=null,a=!1,l=null,u=null;function c(t,e,r){for(var n,i,o,s,a,u,c,h,f,d,p,m,g,y,_,v,b,w,x,E,S,M,T,A,C,I,k,R,B,P,D,L,O,N=r.length();N>=128;){for(k=0;k<16;++k)e[k][0]=r.getInt32()>>>0,e[k][1]=r.getInt32()>>>0;for(;k<80;++k)n=(((R=(P=e[k-2])[0])>>>19|(B=P[1])<<13)^(B>>>29|R<<3)^R>>>6)>>>0,i=((R<<13|B>>>19)^(B<<3|R>>>29)^(R<<26|B>>>6))>>>0,o=(((R=(L=e[k-15])[0])>>>1|(B=L[1])<<31)^(R>>>8|B<<24)^R>>>7)>>>0,s=((R<<31|B>>>1)^(R<<24|B>>>8)^(R<<25|B>>>7))>>>0,D=e[k-7],O=e[k-16],B=i+D[1]+s+O[1],e[k][0]=n+D[0]+o+O[0]+(B/4294967296>>>0)>>>0,e[k][1]=B>>>0;for(p=t[0][0],m=t[0][1],g=t[1][0],y=t[1][1],_=t[2][0],v=t[2][1],b=t[3][0],w=t[3][1],x=t[4][0],E=t[4][1],S=t[5][0],M=t[5][1],T=t[6][0],A=t[6][1],C=t[7][0],I=t[7][1],k=0;k<80;++k)c=((x>>>14|E<<18)^(x>>>18|E<<14)^(E>>>9|x<<23))>>>0,h=(T^x&(S^T))>>>0,a=((p>>>28|m<<4)^(m>>>2|p<<30)^(m>>>7|p<<25))>>>0,u=((p<<4|m>>>28)^(m<<30|p>>>2)^(m<<25|p>>>7))>>>0,f=(p&g|_&(p^g))>>>0,d=(m&y|v&(m^y))>>>0,B=I+(((x<<18|E>>>14)^(x<<14|E>>>18)^(E<<23|x>>>9))>>>0)+((A^E&(M^A))>>>0)+l[k][1]+e[k][1],n=C+c+h+l[k][0]+e[k][0]+(B/4294967296>>>0)>>>0,i=B>>>0,o=a+f+((B=u+d)/4294967296>>>0)>>>0,s=B>>>0,C=T,I=A,T=S,A=M,S=x,M=E,x=b+n+((B=w+i)/4294967296>>>0)>>>0,E=B>>>0,b=_,w=v,_=g,v=y,g=p,y=m,p=n+o+((B=i+s)/4294967296>>>0)>>>0,m=B>>>0;B=t[0][1]+m,t[0][0]=t[0][0]+p+(B/4294967296>>>0)>>>0,t[0][1]=B>>>0,B=t[1][1]+y,t[1][0]=t[1][0]+g+(B/4294967296>>>0)>>>0,t[1][1]=B>>>0,B=t[2][1]+v,t[2][0]=t[2][0]+_+(B/4294967296>>>0)>>>0,t[2][1]=B>>>0,B=t[3][1]+w,t[3][0]=t[3][0]+b+(B/4294967296>>>0)>>>0,t[3][1]=B>>>0,B=t[4][1]+E,t[4][0]=t[4][0]+x+(B/4294967296>>>0)>>>0,t[4][1]=B>>>0,B=t[5][1]+M,t[5][0]=t[5][0]+S+(B/4294967296>>>0)>>>0,t[5][1]=B>>>0,B=t[6][1]+A,t[6][0]=t[6][0]+T+(B/4294967296>>>0)>>>0,t[6][1]=B>>>0,B=t[7][1]+I,t[7][0]=t[7][0]+C+(B/4294967296>>>0)>>>0,t[7][1]=B>>>0,N-=128}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JWTAccess=void 0;const n=r(160),i=r(353),o={alg:"RS256",typ:"JWT"};class s{constructor(t,e,r,n){this.cache=new i({max:500,maxAge:36e5}),this.email=t,this.key=e,this.keyId=r,this.eagerRefreshThresholdMillis=null!==n&&void 0!==n?n:3e5}getRequestHeaders(t,e){const r=this.cache.get(t),i=Date.now();if(r&&r.expiration-i>this.eagerRefreshThresholdMillis)return r.headers;const a=Math.floor(Date.now()/1e3),l=s.getExpirationTime(a),u={iss:this.email,sub:this.email,aud:t,exp:l,iat:a};if(e)for(const n in u)if(e[n])throw new Error(`The '${n}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`);const c=this.keyId?{...o,kid:this.keyId}:o,h=Object.assign(u,e),f={Authorization:`Bearer ${n.sign({header:c,payload:h,secret:this.key})}`};return this.cache.set(t,{expiration:1e3*l,headers:f}),f}static getExpirationTime(t){return t+3600}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!t.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!t.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=t.client_email,this.key=t.private_key,this.keyId=t.private_key_id,this.projectId=t.project_id}fromStream(t,e){if(!e)return this.fromStreamAsync(t);this.fromStreamAsync(t).then((()=>e()),e)}fromStreamAsync(t){return new Promise(((e,r)=>{t||r(new Error("Must pass in a stream containing the service account auth settings."));let n="";t.setEncoding("utf8").on("data",(t=>n+=t)).on("error",r).on("end",(()=>{try{const t=JSON.parse(n);this.fromJSON(t),e()}catch(t){r(t)}}))}))}}e.JWTAccess=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserRefreshClient=void 0;const n=r(42);class i extends n.OAuth2Client{constructor(t,e,r,n,i){const o=t&&"object"===typeof t?t:{clientId:t,clientSecret:e,refreshToken:r,eagerRefreshThresholdMillis:n,forceRefreshOnFailure:i};super({clientId:o.clientId,clientSecret:o.clientSecret,eagerRefreshThresholdMillis:o.eagerRefreshThresholdMillis,forceRefreshOnFailure:o.forceRefreshOnFailure}),this._refreshToken=o.refreshToken,this.credentials.refresh_token=o.refreshToken}async refreshTokenNoCache(t){return super.refreshTokenNoCache(this._refreshToken)}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the user refresh token");if("authorized_user"!==t.type)throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!t.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!t.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!t.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=t.client_id,this._clientSecret=t.client_secret,this._refreshToken=t.refresh_token,this.credentials.refresh_token=t.refresh_token,this.quotaProjectId=t.quota_project_id}fromStream(t,e){if(!e)return this.fromStreamAsync(t);this.fromStreamAsync(t).then((()=>e()),e)}async fromStreamAsync(t){return new Promise(((e,r)=>{if(!t)return r(new Error("Must pass in a stream containing the user refresh token."));let n="";t.setEncoding("utf8").on("error",r).on("data",(t=>n+=t)).on("end",(()=>{try{const t=JSON.parse(n);return this.fromJSON(t),e()}catch(t){return r(t)}}))}))}}e.UserRefreshClient=i},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},function(t,e,r){"use strict";var n=r(7);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var o;if(r)o=r(e);else if(n.isURLSearchParams(e))o=e.toString();else{var s=[];n.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,(function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),o=s.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,r){"use strict";var n=r(7),i=r(364),o=r(365),s=r(180),a=r(366),l=r(369),u=r(370),c=r(183);t.exports=function(t){return new Promise((function(e,r){var h=t.data,f=t.headers,d=t.responseType;n.isFormData(h)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var m=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";f.Authorization="Basic "+btoa(m+":"+g)}var y=a(t.baseURL,t.url);function _(){if(p){var n="getAllResponseHeaders"in p?l(p.getAllResponseHeaders()):null,o={data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:t,request:p};i(e,r,o),p=null}}if(p.open(t.method.toUpperCase(),s(y,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,"onloadend"in p?p.onloadend=_:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(_)},p.onabort=function(){p&&(r(c("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){r(c("Network Error",t,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(c(e,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var v=(t.withCredentials||u(y))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;v&&(f[t.xsrfHeaderName]=v)}"setRequestHeader"in p&&n.forEach(f,(function(t,e){"undefined"===typeof h&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)})),n.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),d&&"json"!==d&&(p.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){p&&(p.abort(),r(t),p=null)})),h||(h=null),p.send(h)}))}},function(t,e,r){"use strict";var n=r(181);t.exports=function(t,e,r,i,o){var s=new Error(t);return n(s,e,r,i,o)}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";var n=r(7);t.exports=function(t,e){e=e||{};var r={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function l(t,e){return n.isPlainObject(t)&&n.isPlainObject(e)?n.merge(t,e):n.isPlainObject(e)?n.merge({},e):n.isArray(e)?e.slice():e}function u(i){n.isUndefined(e[i])?n.isUndefined(t[i])||(r[i]=l(void 0,t[i])):r[i]=l(t[i],e[i])}n.forEach(i,(function(t){n.isUndefined(e[t])||(r[t]=l(void 0,e[t]))})),n.forEach(o,u),n.forEach(s,(function(i){n.isUndefined(e[i])?n.isUndefined(t[i])||(r[i]=l(void 0,t[i])):r[i]=l(void 0,e[i])})),n.forEach(a,(function(n){n in e?r[n]=l(t[n],e[n]):n in t&&(r[n]=l(void 0,t[n]))}));var c=i.concat(o).concat(s).concat(a),h=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===c.indexOf(t)}));return n.forEach(h,u),r}},function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,r){const n=r(46),i=r(188),o=r(376),{getFieldMask:s,columnToLetter:a,letterToColumn:l}=r(56);function u(t){const e=n.groupBy(t);n.each(e,((t,e)=>{if(e&&t.length>1)throw new Error(`Duplicate header detected: "${e}". Please make sure all non-empty headers are unique`)}))}t.exports=class{constructor(t,e){let{properties:r,data:n}=e;return this._spreadsheet=t,this._headerRowIndex=1,this._rawProperties=r,this._cells=[],this._rowMetadata=[],this._columnMetadata=[],n&&this._fillCellData(n),this}async _makeSingleUpdateRequest(t,e){return this._spreadsheet._makeSingleUpdateRequest(t,{...e})}_ensureInfoLoaded(){if(!this._rawProperties)throw new Error("You must call `doc.loadInfo()` again before accessing this property")}resetLocalCache(t){t||(this._rawProperties=null),this.headerValues=null,this._headerRowIndex=1,this._cells=[]}_fillCellData(t){n.each(t,(t=>{const e=t.startRow||0,r=t.startColumn||0,i=t.rowMetadata.length,s=t.columnMetadata.length;for(let a=0;a<i;a++){const i=e+a;for(let e=0;e<s;e++){const s=r+e;this._cells[i]||(this._cells[i]=[]);const l=n.get(t,`rowData[${a}].values[${e}]`);this._cells[i][s]?this._cells[i][s]._updateRawData(l):this._cells[i][s]=new o(this,i,s,l)}}for(let n=0;n<t.rowMetadata.length;n++)this._rowMetadata[e+n]=t.rowMetadata[n];for(let n=0;n<t.columnMetadata.length;n++)this._columnMetadata[r+n]=t.columnMetadata[n]}))}_getProp(t){return this._ensureInfoLoaded(),this._rawProperties[t]}_setProp(t,e){throw new Error("Do not update directly - use `updateProperties()`")}get sheetId(){return this._getProp("sheetId")}get title(){return this._getProp("title")}get index(){return this._getProp("index")}get sheetType(){return this._getProp("sheetType")}get gridProperties(){return this._getProp("gridProperties")}get hidden(){return this._getProp("hidden")}get tabColor(){return this._getProp("tabColor")}get rightToLeft(){return this._getProp("rightToLeft")}set sheetId(t){return this._setProp("sheetId",t)}set title(t){return this._setProp("title",t)}set index(t){return this._setProp("index",t)}set sheetType(t){return this._setProp("sheetType",t)}set gridProperties(t){return this._setProp("gridProperties",t)}set hidden(t){return this._setProp("hidden",t)}set tabColor(t){return this._setProp("tabColor",t)}set rightToLeft(t){return this._setProp("rightToLeft",t)}get rowCount(){return this._ensureInfoLoaded(),this.gridProperties.rowCount}get columnCount(){return this._ensureInfoLoaded(),this.gridProperties.columnCount}get colCount(){throw new Error("`colCount` is deprecated - please use `columnCount` instead.")}set rowCount(t){throw new Error("Do not update directly. Use resize()")}set columnCount(t){throw new Error("Do not update directly. Use resize()")}get a1SheetName(){return`'${this.title.replace(/'/g,"''")}'`}get encodedA1SheetName(){return encodeURIComponent(this.a1SheetName)}get lastColumnLetter(){return a(this.columnCount)}get cellStats(){let t=n.flatten(this._cells);return t=n.compact(t),{nonEmpty:n.filter(t,(t=>t.value)).length,loaded:t.length,total:this.rowCount*this.columnCount}}getCellByA1(t){const e=t.match(/([A-Z]+)([0-9]+)/),r=l(e[1]),n=parseInt(e[2]);return this.getCell(n-1,r-1)}getCell(t,e){if(t<0||e<0)throw new Error("Min coordinate is 0, 0");if(t>=this.rowCount||e>=this.columnCount)throw new Error(`Out of bounds, sheet is ${this.rowCount} by ${this.columnCount}`);if(!n.get(this._cells,`[${t}][${e}]`))throw new Error("This cell has not been loaded yet");return this._cells[t][e]}async loadCells(t){if(!t)return this._spreadsheet.loadCells(this.a1SheetName);let e=n.isArray(t)?t:[t];return e=n.map(e,(t=>{if(n.isString(t))return t.startsWith(this.a1SheetName)?t:`${this.a1SheetName}!${t}`;if(n.isObject(t)){if(!t.sheetId)return{sheetId:this.sheetId,...t};if(t.sheetId!==this.sheetId)throw new Error("Leave sheet ID blank or set to matching ID of this sheet");return t}throw new Error("Each filter must be a A1 range string or gridrange object")})),this._spreadsheet.loadCells(e)}async saveUpdatedCells(){const t=n.filter(n.flatten(this._cells),{_isDirty:!0});t.length&&await this.saveCells(t)}async saveCells(t){const e=n.map(t,(t=>t._getUpdateRequest())),r=n.map(t,(t=>`${this.a1SheetName}!${t.a1Address}`));if(!n.compact(e).length)throw new Error("At least one cell must have something to update");await this._spreadsheet._makeBatchUpdateRequest(e,r)}async loadHeaderRow(t){void 0!==t&&(this._headerRowIndex=t);const e=await this.getCellsInRange(`A${this._headerRowIndex}:${this.lastColumnLetter}${this._headerRowIndex}`);if(!e)throw new Error("No values in the header row - fill the first row with header values before trying to interact with rows");if(this.headerValues=n.map(e[0],(t=>t.trim())),!n.compact(this.headerValues).length)throw new Error("All your header cells are blank - fill the first row with header values before trying to interact with rows");u(this.headerValues)}async setHeaderRow(t,e){if(!t)return;if(t.length>this.columnCount)throw new Error(`Sheet is not large enough to fit ${t.length} columns. Resize the sheet first.`);const r=n.map(t,(t=>t.trim()));if(u(r),!n.compact(r).length)throw new Error("All your header cells are blank -");e&&(this._headerRowIndex=e);const i=await this._spreadsheet.axios.request({method:"put",url:`/values/${this.encodedA1SheetName}!${this._headerRowIndex}:${this._headerRowIndex}`,params:{valueInputOption:"USER_ENTERED",includeValuesInResponse:!0},data:{range:`${this.a1SheetName}!${this._headerRowIndex}:${this._headerRowIndex}`,majorDimension:"ROWS",values:[[...r,...n.times(this.columnCount-r.length,(()=>""))]]}});this.headerValues=i.data.updatedData.values[0]}async addRows(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.title.includes(":"))throw new Error('Please remove the ":" from your sheet title. There is a bug with the google API which breaks appending rows if any colons are in the sheet title.');if(!n.isArray(t))throw new Error("You must pass in an array of row values to append");this.headerValues||await this.loadHeaderRow();const r=[];n.each(t,(t=>{let e;if(n.isArray(t))e=t;else{if(!n.isObject(t))throw new Error("Each row must be an object or an array");e=[];for(let r=0;r<this.headerValues.length;r++){const n=this.headerValues[r];e[r]=t[n]}}r.push(e)}));const o=await this._spreadsheet.axios.request({method:"post",url:`/values/${this.encodedA1SheetName}!A${this._headerRowIndex}:append`,params:{valueInputOption:e.raw?"RAW":"USER_ENTERED",insertDataOption:e.insert?"INSERT_ROWS":"OVERWRITE",includeValuesInResponse:!0},data:{values:r}}),{updatedRange:s}=o.data.updates;let a=s.match(/![A-Z]+([0-9]+):?/)[1];return a=parseInt(a),e.insert?this._rawProperties.gridProperties.rowCount+=t.length:a+t.length>this.rowCount&&(this._rawProperties.gridProperties.rowCount=a+t.length-1),n.map(o.data.updates.updatedData.values,(t=>new i(this,a++,t)))}async addRow(t,e){return(await this.addRows([t],e))[0]}async getRows(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.offset=t.offset||0,t.limit=t.limit||this.rowCount-1,this.headerValues||await this.loadHeaderRow();const e=1+this._headerRowIndex+t.offset,r=e+t.limit-1,n=a(this.headerValues.length),o=await this.getCellsInRange(`A${e}:${n}${r}`);if(!o)return[];const s=[];let l=e;for(let a=0;a<o.length;a++)s.push(new i(this,l++,o[a]));return s}async clearRows(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=t.start||this._headerRowIndex+1,r=t.end||this.rowCount;await this._spreadsheet.axios.post(`/values/${this.encodedA1SheetName}!${e}:${r}:clear`)}async updateProperties(t){return this._makeSingleUpdateRequest("updateSheetProperties",{properties:{sheetId:this.sheetId,...t},fields:s(t)})}async updateGridProperties(t){return this.updateProperties({gridProperties:t})}async resize(t){return this.updateGridProperties(t)}async updateDimensionProperties(t,e,r){return this._makeSingleUpdateRequest("updateDimensionProperties",{range:{sheetId:this.sheetId,dimension:t,...r&&{startIndex:r.startIndex,endIndex:r.endIndex}},properties:e,fields:s(e)})}async getCellsInRange(t,e){return(await this._spreadsheet.axios.get(`/values/${this.encodedA1SheetName}!${t}`,{params:e})).data.values}async updateNamedRange(){}async addNamedRange(){}async deleteNamedRange(){}async repeatCell(){}async autoFill(){}async cutPaste(){}async copyPaste(){}async mergeCells(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MERGE_ALL";if(t.sheetId&&t.sheetId!==this.sheetId)throw new Error("Leave sheet ID blank or set to matching ID of this sheet");await this._makeSingleUpdateRequest("mergeCells",{mergeType:e,range:{...t,sheetId:this.sheetId}})}async unmergeCells(t){if(t.sheetId&&t.sheetId!==this.sheetId)throw new Error("Leave sheet ID blank or set to matching ID of this sheet");await this._makeSingleUpdateRequest("unmergeCells",{range:{...t,sheetId:this.sheetId}})}async updateBorders(){}async addFilterView(){}async appendCells(){}async clearBasicFilter(){}async deleteDimension(){}async deleteEmbeddedObject(){}async deleteFilterView(){}async duplicateFilterView(){}async duplicate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=(await this._makeSingleUpdateRequest("duplicateSheet",{sourceSheetId:this.sheetId,...void 0!==t.index&&{insertSheetIndex:t.index},...t.id&&{newSheetId:t.id},...t.title&&{newSheetName:t.title}})).properties.sheetId;return this._spreadsheet.sheetsById[e]}async findReplace(){}async insertDimension(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)throw new Error("You need to specify a dimension. i.e. COLUMNS|ROWS");if(!n.isObject(e))throw new Error("`range` must be an object containing `startIndex` and `endIndex`");if(!n.isInteger(e.startIndex)||e.startIndex<0)throw new Error("range.startIndex must be an integer >=0");if(!n.isInteger(e.endIndex)||e.endIndex<0)throw new Error("range.endIndex must be an integer >=0");if(e.endIndex<=e.startIndex)throw new Error("range.endIndex must be greater than range.startIndex");if(null===r&&(r=e.startIndex>0),r&&0===e.startIndex)throw new Error("Cannot set inheritFromBefore to true if inserting in first row/column");return this._makeSingleUpdateRequest("insertDimension",{range:{sheetId:this.sheetId,dimension:t,startIndex:e.startIndex,endIndex:e.endIndex},inheritFromBefore:r})}async insertRange(){}async moveDimension(){}async updateEmbeddedObjectPosition(){}async pasteData(){}async textToColumns(){}async updateFilterView(){}async deleteRange(){}async appendDimension(){}async addConditionalFormatRule(){}async updateConditionalFormatRule(){}async deleteConditionalFormatRule(){}async sortRange(){}async setDataValidation(){}async setBasicFilter(){}async addProtectedRange(){}async updateProtectedRange(){}async deleteProtectedRange(){}async autoResizeDimensions(){}async addChart(){}async updateChartSpec(){}async updateBanding(){}async addBanding(){}async deleteBanding(){}async createDeveloperMetadata(){}async updateDeveloperMetadata(){}async deleteDeveloperMetadata(){}async randomizeRange(){}async addDimensionGroup(){}async deleteDimensionGroup(){}async updateDimensionGroup(){}async trimWhitespace(){}async deleteDuplicates(){}async addSlicer(){}async updateSlicerSpec(){}async delete(){return this._spreadsheet.deleteSheet(this.sheetId)}async del(){return this.delete()}async copyToSpreadsheet(t){return this._spreadsheet.axios.post(`/sheets/${this.sheetId}:copyTo`,{destinationSpreadsheetId:t})}async clear(t){const e=t?`!${t}`:"";await this._spreadsheet.axios.post(`/values/${this.encodedA1SheetName}${e}:clear`),this.resetLocalCache(!0)}async downloadAsCSV(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._spreadsheet._downloadAs("csv",this.sheetId,t)}async downloadAsTSV(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._spreadsheet._downloadAs("tsv",this.sheetId,t)}async downloadAsPDF(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._spreadsheet._downloadAs("pdf",this.sheetId,t)}}},function(t,e,r){const{columnToLetter:n}=r(56);t.exports=class{constructor(t,e,r){this._sheet=t,this._rowNumber=e,this._rawData=r;for(let n=0;n<this._sheet.headerValues.length;n++){const t=this._sheet.headerValues[n];t&&Object.defineProperty(this,t,{get:()=>this._rawData[n],set:t=>{this._rawData[n]=t},enumerable:!0})}return this}get rowNumber(){return this._rowNumber}get rowIndex(){return this._rowNumber}get a1Range(){return[this._sheet.a1SheetName,"!",`A${this._rowNumber}`,":",`${n(this._sheet.headerValues.length)}${this._rowNumber}`].join("")}async save(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._deleted)throw new Error("This row has been deleted - call getRows again before making updates.");const e=await this._sheet._spreadsheet.axios.request({method:"put",url:`/values/${encodeURIComponent(this.a1Range)}`,params:{valueInputOption:t.raw?"RAW":"USER_ENTERED",includeValuesInResponse:!0},data:{range:this.a1Range,majorDimension:"ROWS",values:[this._rawData]}});this._rawData=e.data.updatedData.values[0]}async delete(){if(this._deleted)throw new Error("This row has been deleted - call getRows again before making updates.");const t=await this._sheet._makeSingleUpdateRequest("deleteRange",{range:{sheetId:this._sheet.sheetId,startRowIndex:this._rowNumber-1,endRowIndex:this._rowNumber},shiftDimension:"ROWS"});return this._deleted=!0,t}async del(){return this.delete()}}},function(t,e){t.exports={GoogleSpreadsheetFormulaError:class{constructor(t){this.type=t.type,this.message=t.message}}}},function(t,e,r){"use strict";var n=r(384),i=r(191);function o(t){i.call(this,t)}o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.sendRequest=n.browserSend,o.prototype.abortRequest=n.browserAbort,t.exports=function(t){return new o(t)}},function(t,e,r){"use strict";var n=r(192),i=r(390),o=r(57);function s(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");n(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||o.API_ORIGIN}s.prototype.createRequest=function(t){return new i(this,t)},t.exports=s},function(t,e,r){"use strict";var n=r(389),i={};function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t){if(i[t])return i[t];var e=t.split("."),r=e[0],s=e[1];if(!s)throw new Error("Invalid token");var a=function(t){try{return JSON.parse(n.decode(t))}catch(e){throw new Error("Invalid token")}}(s),l={usage:r,user:a.u};return o(a,"a")&&(l.authorization=a.a),o(a,"exp")&&(l.expires=1e3*a.exp),o(a,"iat")&&(l.created=1e3*a.iat),o(a,"scopes")&&(l.scopes=a.scopes),o(a,"client")&&(l.client=a.client),o(a,"ll")&&(l.lastLogin=a.ll),o(a,"iu")&&(l.impersonator=a.iu),i[t]=l,l}},function(t,e,r){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=r(197)},function(t,e,r){const n=r(202),i=r(187),o=r(188),{GoogleSpreadsheetFormulaError:s}=r(189);t.exports={GoogleSpreadsheet:n,GoogleSpreadsheetWorksheet:i,GoogleSpreadsheetRow:o,GoogleSpreadsheetFormulaError:s}},function(t,e,r){"use strict";var n=r(377),i=r(381),o=r(21),s=r(13).EventEmitter,a=r(382),l=r(383),u=r(393),c=r(401),h=r(402),f=r(403),d=r(404),p=r(405);const m=0,g=1,y=2;function _(t){this._eventEmitter=new s,this.options=o({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new d}_.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(t){return t.place_name},render:function(t){var e=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"}},addTo:function(t){function e(t,e){if(!document.body.contains(e))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const r=t.onAdd();e.appendChild(r)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)e(this,t);else{if("string"!=typeof t)throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element");{const r=document.querySelectorAll(t);if(0===r.length)throw new Error("Element ",t,"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,r[0])}}},onAdd:function(t){if(t&&"string"!=typeof t&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=u(l({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new c(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",i(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(t){this.eventManager.keyevent(t,this)}.bind(this));var o=document.createElement("div");o.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),o.appendChild(this._clearEl),o.appendChild(this._loadingEl),e.appendChild(r),e.appendChild(this._inputEl),e.appendChild(o),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var a=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(a),o.appendChild(this._geolocateEl),this._showGeolocateButton()}var h=this._typeahead=new n(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),h.getItemValue=this.options.getItemValue;var f=h.list.draw,d=this._footerNode=function(){var t=document.createElement("div");return t.className="mapboxgl-ctrl-geocoder--powered-by",t.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',t}();return h.list.draw=function(){f.call(this),d.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),d.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(d)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),e},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(t){this._hideLoadingIcon();const e={geometry:{type:"Point",coordinates:[t.coords.longitude,t.coords.latitude]}};this._handleMarker(e),this._fly(e),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(e),this._showClearButton(),this.fresh=!1;const r={limit:1,language:[this.options.language],query:e.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const t=e.geometry.coordinates[0]+","+e.geometry.coordinates[1];this._setInputValue(t),this._eventEmitter.emit("result",{result:e})}else this.geocoderService.reverseGeocode(r).send().then(function(t){const r=t.body.features[0];if(r){const t=p.transformFeatureToGeolocationText(r,this.options.addressAccuracy);this._setInputValue(t),r.user_coordinates=e.geometry.coordinates,this._eventEmitter.emit("result",{result:r})}else this._eventEmitter.emit("result",{result:{user_coordinates:e.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(t){1===t.code?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width",18),r.setAttribute("height",18),r.innerHTML=e,r},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(t){this._inputEl.value=t,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(t){var e=(t.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this._geocode(e)},_onKeyDown:function(t){var e=27,r=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var n=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!(n?n.value:""))return this.fresh=!0,t.keyCode!==r&&this.clear(t),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),t.metaKey||-1!==[r,e,37,39,13,38,40].indexOf(t.keyCode)||n.value.length>=this.options.minLength&&this._geocode(n.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;t&&JSON.stringify(t)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(t),this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this))},_fly:function(t){var e;if(t.properties&&a[t.properties.short_code])e=o({},this.options.flyTo),this._map&&this._map.fitBounds(a[t.properties.short_code].bbox,e);else if(t.bbox){var r=t.bbox;e=o({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],e)}else{var n={zoom:this.options.zoom};e=o({},n,this.options.flyTo),t.center?e.center=t.center:t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&(e.center=t.geometry.coordinates),this._map&&this._map.flyTo(e)}},_requestType:function(t,e){return t.localGeocoderOnly?g:t.reverseGeocode&&p.REVERSE_GEOCODE_COORD_RGX.test(e)?y:m},_setupConfig:function(t,e){const r=/[\s,]+/;var n=this,i=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"].reduce((function(t,e){if(void 0===n.options[e]||null===n.options[e])return t;["countries","types","language"].indexOf(e)>-1?t[e]=n.options[e].split(r):t[e]=n.options[e];const i="number"===typeof n.options[e].longitude&&"number"===typeof n.options[e].latitude;if("proximity"===e&&i){const r=n.options[e].longitude,i=n.options[e].latitude;t[e]=[r,i]}return t}),{});switch(t){case y:var s=e.split(r).map((function(t){return parseFloat(t,10)}));n.options.flipCoordinates||s.reverse(),!i.types||i.types[0],i=o(i,{query:s,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach((function(t){t in i&&delete i[t]}));break;case m:{const t=e.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(t)&&(e=e.replace(/,/g," ")),i=o(i,{query:e})}}return i},_geocode:function(t){this.inputString=t,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:t});const e=this._requestType(this.options,t),r=this._setupConfig(e,t);var n;switch(e){case g:n=Promise.resolve();break;case m:n=this.geocoderService.forwardGeocode(r).send();break;case y:n=this.geocoderService.reverseGeocode(r).send()}var i=this.options.localGeocoder&&this.options.localGeocoder(t)||[],o=[],s=null;return n.catch(function(t){s=t}.bind(this)).then(function(e){this._hideLoadingIcon();var n={};return e?"200"==e.statusCode&&((n=e.body).request=e.request,n.headers=e.headers):n={type:"FeatureCollection",features:[]},n.config=r,this.fresh&&(this.eventManager.start(this),this.fresh=!1),n.features=n.features?i.concat(n.features):i,this.options.externalGeocoder?(o=this.options.externalGeocoder(t,n.features)||Promise.resolve([])).then((function(t){return n.features=n.features?t.concat(n.features):t,n}),(function(){return n})):n}.bind(this)).then(function(t){if(s)throw s;this.options.filter&&t.features.length&&(t.features=t.features.filter(this.options.filter)),t.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",t),this._typeahead.update(t.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",t))}.bind(this)).catch(function(t){this._hideLoadingIcon(),this._hideAttribution(),i.length&&this.options.localGeocoder||o.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(i)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:i}),this._eventEmitter.emit("error",{error:t})}.bind(this)),n},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){t.relatedTarget&&this._clear(t)},_onQueryResult:function(t){var e=t.body;if(e.features.length){var r=e.features[0];this._typeahead.selected=r,this._inputEl.value=r.place_name,this._onChange()}},_updateProximity:function(){if(this._map&&this.options.trackProximity)if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>")},_renderLocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>")},_renderUserDeniedGeolocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>")},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],e=f.language(t),r=h.placeholder[e];if(r)return r}return"Search"},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&this._geocode(t),this},setProximity:function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.options.proximity=t,e&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&"function"==typeof t&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=u(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(t){return this.options.accessToken=t,this.geocoderService=u(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(t){return this.options.autocomplete=t,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(t){return this.options.fuzzyMatch=t,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(t){return this.options.routing=t,this},getRouting:function(){return this.options.routing},setWorldview:function(t){return this.options.worldview=t,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(t){if(this._map){this._removeMarker();var e=o({},{color:"#4668F2"},this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(e),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this.eventManager.remove(),this}},t.exports=_},function(t,e,r){"use strict";var n=r(45),i=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var s=60109,a=60110,l=60112;e.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),s=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),e.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(t,e,r){this.props=t,this.context=e,this.refs=m,this.updater=r||p}function y(){}function _(t,e,r){this.props=t,this.context=e,this.refs=m,this.updater=r||p}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(d(85));this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=g.prototype;var v=_.prototype=new y;v.constructor=_,n(v,g.prototype),v.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,r){var n,o={},s=null,a=null;if(null!=e)for(n in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)w.call(e,n)&&!x.hasOwnProperty(n)&&(o[n]=e[n]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:i,type:t,key:s,ref:a,props:o,_owner:b.current}}function S(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var M=/\/+/g;function T(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function A(t,e,r,n,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case i:case o:l=!0}}if(l)return s=s(l=t),t=""===n?"."+T(l,0):n,Array.isArray(s)?(r="",null!=t&&(r=t.replace(M,"$&/")+"/"),A(s,e,r,"",(function(t){return t}))):null!=s&&(S(s)&&(s=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(M,"$&/")+"/")+t)),e.push(s)),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=n+T(a=t[u],u);l+=A(a,e,r,c,s)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(a=t.next()).done;)l+=A(a=a.value,e,r,c=n+T(a,u++),s);else if("object"===a)throw e=""+t,Error(d(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return l}function C(t,e,r){if(null==t)return t;var n=[],i=0;return A(t,n,"","",(function(t){return e.call(r,t,i++)})),n}function I(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var k={current:null};function R(){var t=k.current;if(null===t)throw Error(d(321));return t}var B={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:n};e.Children={map:C,forEach:function(t,e,r){C(t,(function(){e.apply(this,arguments)}),r)},count:function(t){var e=0;return C(t,(function(){e++})),e},toArray:function(t){return C(t,(function(t){return t}))||[]},only:function(t){if(!S(t))throw Error(d(143));return t}},e.Component=g,e.PureComponent=_,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error(d(267,t));var o=n({},t.props),s=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=b.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)w.call(e,c)&&!x.hasOwnProperty(c)&&(o[c]=void 0===e[c]&&void 0!==u?u[c]:e[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];o.children=u}return{$$typeof:i,type:t.type,key:s,ref:a,props:o,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:a,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=S,e.lazy=function(t){return{$$typeof:c,_payload:{_status:-1,_result:t},_init:I}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return R().useCallback(t,e)},e.useContext=function(t,e){return R().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return R().useEffect(t,e)},e.useImperativeHandle=function(t,e,r){return R().useImperativeHandle(t,e,r)},e.useLayoutEffect=function(t,e){return R().useLayoutEffect(t,e)},e.useMemo=function(t,e){return R().useMemo(t,e)},e.useReducer=function(t,e,r){return R().useReducer(t,e,r)},e.useRef=function(t){return R().useRef(t)},e.useState=function(t){return R().useState(t)},e.version="17.0.2"},function(t,e,r){"use strict";var n=r(10),i=r(45),o=r(198);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(s(227));var a=new Set,l={};function u(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(l[t]=e,t=0;t<e.length;t++)a.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},m={};function g(t,e,r,n,i,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){y[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];y[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){y[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){y[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){y[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){y[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){y[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){y[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){y[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var _=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,r,n){var i=y.hasOwnProperty(e)?y[e]:null;(null!==i?0===i.type:!n&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,r,n){if(null===e||"undefined"===typeof e||function(t,e,r,n){if(null!==r&&0===r.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,r,i,n)&&(r=null),n||null===i?function(t){return!!d.call(m,t)||!d.call(p,t)&&(f.test(t)?m[t]=!0:(p[t]=!0,!1))}(e)&&(null===r?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=null===r?3!==i.type&&"":r:(e=i.attributeName,n=i.attributeNamespace,null===r?t.removeAttribute(e):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(_,v);y[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(_,v);y[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(_,v);y[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){y[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){y[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,E=60106,S=60107,M=60108,T=60114,A=60109,C=60110,I=60112,k=60113,R=60120,B=60115,P=60116,D=60121,L=60128,O=60129,N=60130,z=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;x=U("react.element"),E=U("react.portal"),S=U("react.fragment"),M=U("react.strict_mode"),T=U("react.profiler"),A=U("react.provider"),C=U("react.context"),I=U("react.forward_ref"),k=U("react.suspense"),R=U("react.suspense_list"),B=U("react.memo"),P=U("react.lazy"),D=U("react.block"),U("react.scope"),L=U("react.opaque.id"),O=U("react.debug_trace_mode"),N=U("react.offscreen"),z=U("react.legacy_hidden")}var j,F="function"===typeof Symbol&&Symbol.iterator;function V(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=F&&t[F]||t["@@iterator"])?t:null}function G(t){if(void 0===j)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);j=e&&e[1]||""}return"\n"+j+t}var q=!1;function K(t,e){if(!t||q)return"";q=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=n.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a])return"\n"+i[s].replace(" at new "," at ")}while(1<=s&&0<=a);break}}}finally{q=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?G(t):""}function W(t){switch(t.tag){case 5:return G(t.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return t=K(t.type,!1);case 11:return t=K(t.type.render,!1);case 22:return t=K(t.type._render,!1);case 1:return t=K(t.type,!0);default:return""}}function Z(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case E:return"Portal";case T:return"Profiler";case M:return"StrictMode";case k:return"Suspense";case R:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case A:return(t._context.displayName||"Context")+".Provider";case I:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case B:return Z(t.type);case D:return Z(t._render);case P:e=t._payload,t=t._init;try{return Z(t(e))}catch(r){}}return null}function H(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Q(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function X(t){t._valueTracker||(t._valueTracker=function(t){var e=Q(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){n=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(t){n=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Q(t)?t.checked?"true":"false":t.value),(t=n)!==r&&(e.setValue(t),!0)}function J(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function $(t,e){var r=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:t._wrapperState.initialChecked})}function tt(t,e){var r=null==e.defaultValue?"":e.defaultValue,n=null!=e.checked?e.checked:e.defaultChecked;r=H(null!=e.value?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function rt(t,e){et(t,e);var r=H(e.value),n=e.type;if(null!=r)"number"===n?(0===r&&""===t.value||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if("submit"===n||"reset"===n)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,r):e.hasOwnProperty("defaultValue")&&it(t,e.type,H(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function nt(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!("submit"!==n&&"reset"!==n||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}""!==(r=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==r&&(t.name=r)}function it(t,e,r){"number"===e&&J(t.ownerDocument)===t||(null==r?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function ot(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return n.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function st(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+H(r),e=null,i=0;i<t.length;i++){if(t[i].value===r)return t[i].selected=!0,void(n&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function at(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lt(t,e){var r=e.value;if(null==r){if(r=e.children,e=e.defaultValue,null!=r){if(null!=e)throw Error(s(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(s(93));r=r[0]}e=r}null==e&&(e=""),r=e}t._wrapperState={initialValue:H(r)}}function ut(t,e){var r=H(e.value),n=H(e.defaultValue);null!=r&&((r=""+r)!==t.value&&(t.value=r),null==e.defaultValue&&t.defaultValue!==r&&(t.defaultValue=r)),null!=n&&(t.defaultValue=""+n)}function ct(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",ft="http://www.w3.org/2000/svg";function dt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?dt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var mt,gt,yt=(gt=function(t,e){if(t.namespaceURI!==ft||"innerHTML"in t)t.innerHTML=e;else{for((mt=mt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,r,n){MSApp.execUnsafeLocalFunction((function(){return gt(t,e)}))}:gt);function _t(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&3===r.nodeType)return void(r.nodeValue=e)}t.textContent=e}var vt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];function wt(t,e,r){return null==e||"boolean"===typeof e||""===e?"":r||"number"!==typeof e||0===e||vt.hasOwnProperty(t)&&vt[t]?(""+e).trim():e+"px"}function xt(t,e){for(var r in t=t.style,e)if(e.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=wt(r,e[r],n);"float"===r&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}Object.keys(vt).forEach((function(t){bt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vt[e]=vt[t]}))}));var Et=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function St(t,e){if(e){if(Et[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function Mt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Tt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var At=null,Ct=null,It=null;function kt(t){if(t=ni(t)){if("function"!==typeof At)throw Error(s(280));var e=t.stateNode;e&&(e=oi(e),At(t.stateNode,t.type,e))}}function Rt(t){Ct?It?It.push(t):It=[t]:Ct=t}function Bt(){if(Ct){var t=Ct,e=It;if(It=Ct=null,kt(t),e)for(t=0;t<e.length;t++)kt(e[t])}}function Pt(t,e){return t(e)}function Dt(t,e,r,n,i){return t(e,r,n,i)}function Lt(){}var Ot=Pt,Nt=!1,zt=!1;function Ut(){null===Ct&&null===It||(Lt(),Bt())}function jt(t,e){var r=t.stateNode;if(null===r)return null;var n=oi(r);if(null===n)return null;r=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!n;break t;default:t=!1}if(t)return null;if(r&&"function"!==typeof r)throw Error(s(231,e,typeof r));return r}var Ft=!1;if(h)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(gt){Ft=!1}function Gt(t,e,r,n,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var qt=!1,Kt=null,Wt=!1,Zt=null,Ht={onError:function(t){qt=!0,Kt=t}};function Qt(t,e,r,n,i,o,s,a,l){qt=!1,Kt=null,Gt.apply(Ht,arguments)}function Xt(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(r=e.return),t=e.return}while(t)}return 3===e.tag?r:null}function Yt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Jt(t){if(Xt(t)!==t)throw Error(s(188))}function $t(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=Xt(t)))throw Error(s(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(n=i.return)){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Jt(i),t;if(o===n)return Jt(i),e;o=o.sibling}throw Error(s(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,l=i.child;l;){if(l===r){a=!0,r=i,n=o;break}if(l===n){a=!0,n=i,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,n=i;break}if(l===n){a=!0,n=o,r=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var r=t.alternate;null!==e;){if(e===t||e===r)return!0;e=e.return}return!1}var ee,re,ne,ie,oe=!1,se=[],ae=null,le=null,ue=null,ce=new Map,he=new Map,fe=[],de="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pe(t,e,r,n,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|r,nativeEvent:i,targetContainers:[n]}}function me(t,e){switch(t){case"focusin":case"focusout":ae=null;break;case"dragenter":case"dragleave":le=null;break;case"mouseover":case"mouseout":ue=null;break;case"pointerover":case"pointerout":ce.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(e.pointerId)}}function ge(t,e,r,n,i,o){return null===t||t.nativeEvent!==o?(t=pe(e,r,n,i,o),null!==e&&(null!==(e=ni(e))&&re(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function ye(t){var e=ri(t.target);if(null!==e){var r=Xt(e);if(null!==r)if(13===(e=r.tag)){if(null!==(e=Yt(r)))return t.blockedOn=e,void ie(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){ne(r)}))}))}else if(3===e&&r.stateNode.hydrate)return void(t.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}t.blockedOn=null}function _e(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var r=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==r)return null!==(e=ni(r))&&re(e),t.blockedOn=r,!1;e.shift()}return!0}function ve(t,e,r){_e(t)&&r.delete(e)}function be(){for(oe=!1;0<se.length;){var t=se[0];if(null!==t.blockedOn){null!==(t=ni(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var r=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==r){t.blockedOn=r;break}e.shift()}null===t.blockedOn&&se.shift()}null!==ae&&_e(ae)&&(ae=null),null!==le&&_e(le)&&(le=null),null!==ue&&_e(ue)&&(ue=null),ce.forEach(ve),he.forEach(ve)}function we(t,e){t.blockedOn===e&&(t.blockedOn=null,oe||(oe=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,be)))}function xe(t){function e(e){return we(e,t)}if(0<se.length){we(se[0],t);for(var r=1;r<se.length;r++){var n=se[r];n.blockedOn===t&&(n.blockedOn=null)}}for(null!==ae&&we(ae,t),null!==le&&we(le,t),null!==ue&&we(ue,t),ce.forEach(e),he.forEach(e),r=0;r<fe.length;r++)(n=fe[r]).blockedOn===t&&(n.blockedOn=null);for(;0<fe.length&&null===(r=fe[0]).blockedOn;)ye(r),null===r.blockedOn&&fe.shift()}function Ee(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Se={animationend:Ee("Animation","AnimationEnd"),animationiteration:Ee("Animation","AnimationIteration"),animationstart:Ee("Animation","AnimationStart"),transitionend:Ee("Transition","TransitionEnd")},Me={},Te={};function Ae(t){if(Me[t])return Me[t];if(!Se[t])return t;var e,r=Se[t];for(e in r)if(r.hasOwnProperty(e)&&e in Te)return Me[t]=r[e];return t}h&&(Te=document.createElement("div").style,"AnimationEvent"in window||(delete Se.animationend.animation,delete Se.animationiteration.animation,delete Se.animationstart.animation),"TransitionEvent"in window||delete Se.transitionend.transition);var Ce=Ae("animationend"),Ie=Ae("animationiteration"),ke=Ae("animationstart"),Re=Ae("transitionend"),Be=new Map,Pe=new Map,De=["abort","abort",Ce,"animationEnd",Ie,"animationIteration",ke,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Re,"transitionEnd","waiting","waiting"];function Le(t,e){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pe.set(n,e),Be.set(n,i),u(i,[n])}}(0,o.unstable_now)();var Oe=8;function Ne(t){if(0!==(1&t))return Oe=15,1;if(0!==(2&t))return Oe=14,2;if(0!==(4&t))return Oe=13,4;var e=24&t;return 0!==e?(Oe=12,e):0!==(32&t)?(Oe=11,32):0!==(e=192&t)?(Oe=10,e):0!==(256&t)?(Oe=9,256):0!==(e=3584&t)?(Oe=8,e):0!==(4096&t)?(Oe=7,4096):0!==(e=4186112&t)?(Oe=6,e):0!==(e=62914560&t)?(Oe=5,e):67108864&t?(Oe=4,67108864):0!==(134217728&t)?(Oe=3,134217728):0!==(e=805306368&t)?(Oe=2,e):0!==(1073741824&t)?(Oe=1,1073741824):(Oe=8,t)}function ze(t,e){var r=t.pendingLanes;if(0===r)return Oe=0;var n=0,i=0,o=t.expiredLanes,s=t.suspendedLanes,a=t.pingedLanes;if(0!==o)n=o,i=Oe=15;else if(0!==(o=134217727&r)){var l=o&~s;0!==l?(n=Ne(l),i=Oe):0!==(a&=o)&&(n=Ne(a),i=Oe)}else 0!==(o=r&~s)?(n=Ne(o),i=Oe):0!==a&&(n=Ne(a),i=Oe);if(0===n)return 0;if(n=r&((0>(n=31-qe(n))?0:1<<n)<<1)-1,0!==e&&e!==n&&0===(e&s)){if(Ne(e),i<=Oe)return e;Oe=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=n;0<e;)i=1<<(r=31-qe(e)),n|=t[r],e&=~i;return n}function Ue(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function je(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Fe(24&~e))?je(10,e):t;case 10:return 0===(t=Fe(192&~e))?je(8,e):t;case 8:return 0===(t=Fe(3584&~e))&&(0===(t=Fe(4186112&~e))&&(t=512)),t;case 2:return 0===(e=Fe(805306368&~e))&&(e=268435456),e}throw Error(s(358,t))}function Fe(t){return t&-t}function Ve(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ge(t,e,r){t.pendingLanes|=e;var n=e-1;t.suspendedLanes&=n,t.pingedLanes&=n,(t=t.eventTimes)[e=31-qe(e)]=r}var qe=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(Ke(t)/We|0)|0},Ke=Math.log,We=Math.LN2;var Ze=o.unstable_UserBlockingPriority,He=o.unstable_runWithPriority,Qe=!0;function Xe(t,e,r,n){Nt||Lt();var i=Je,o=Nt;Nt=!0;try{Dt(i,t,e,r,n)}finally{(Nt=o)||Ut()}}function Ye(t,e,r,n){He(Ze,Je.bind(null,t,e,r,n))}function Je(t,e,r,n){var i;if(Qe)if((i=0===(4&e))&&0<se.length&&-1<de.indexOf(t))t=pe(null,t,e,r,n),se.push(t);else{var o=$e(t,e,r,n);if(null===o)i&&me(t,n);else{if(i){if(-1<de.indexOf(t))return t=pe(o,t,e,r,n),void se.push(t);if(function(t,e,r,n,i){switch(e){case"focusin":return ae=ge(ae,t,e,r,n,i),!0;case"dragenter":return le=ge(le,t,e,r,n,i),!0;case"mouseover":return ue=ge(ue,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return ce.set(o,ge(ce.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,he.set(o,ge(he.get(o)||null,t,e,r,n,i)),!0}return!1}(o,t,e,r,n))return;me(t,n)}Ln(t,e,n,null,r)}}}function $e(t,e,r,n){var i=Tt(n);if(null!==(i=ri(i))){var o=Xt(i);if(null===o)i=null;else{var s=o.tag;if(13===s){if(null!==(i=Yt(o)))return i;i=null}else if(3===s){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Ln(t,e,n,i,r),null}var tr=null,er=null,rr=null;function nr(){if(rr)return rr;var t,e,r=er,n=r.length,i="value"in tr?tr.value:tr.textContent,o=i.length;for(t=0;t<n&&r[t]===i[t];t++);var s=n-t;for(e=1;e<=s&&r[n-e]===i[o-e];e++);return rr=i.slice(t,1<e?1-e:void 0)}function ir(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function or(){return!0}function sr(){return!1}function ar(t){function e(e,r,n,i,o){for(var s in this._reactName=e,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?or:sr,this.isPropagationStopped=sr,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=or)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=or)},persist:function(){},isPersistent:or}),e}var lr,ur,cr,hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fr=ar(hr),dr=i({},hr,{view:0,detail:0}),pr=ar(dr),mr=i({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ar,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cr&&(cr&&"mousemove"===t.type?(lr=t.screenX-cr.screenX,ur=t.screenY-cr.screenY):ur=lr=0,cr=t),lr)},movementY:function(t){return"movementY"in t?t.movementY:ur}}),gr=ar(mr),yr=ar(i({},mr,{dataTransfer:0})),_r=ar(i({},dr,{relatedTarget:0})),vr=ar(i({},hr,{animationName:0,elapsedTime:0,pseudoElement:0})),br=i({},hr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wr=ar(br),xr=ar(i({},hr,{data:0})),Er={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Mr[t])&&!!e[t]}function Ar(){return Tr}var Cr=i({},dr,{key:function(t){if(t.key){var e=Er[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=ir(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Sr[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ar,charCode:function(t){return"keypress"===t.type?ir(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?ir(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Ir=ar(Cr),kr=ar(i({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rr=ar(i({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ar})),Br=ar(i({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pr=i({},mr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dr=ar(Pr),Lr=[9,13,27,32],Or=h&&"CompositionEvent"in window,Nr=null;h&&"documentMode"in document&&(Nr=document.documentMode);var zr=h&&"TextEvent"in window&&!Nr,Ur=h&&(!Or||Nr&&8<Nr&&11>=Nr),jr=String.fromCharCode(32),Fr=!1;function Vr(t,e){switch(t){case"keyup":return-1!==Lr.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gr(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var qr=!1;var Kr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Kr[t.type]:"textarea"===e}function Zr(t,e,r,n){Rt(n),0<(e=Nn(e,"onChange")).length&&(r=new fr("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Hr=null,Qr=null;function Xr(t){In(t,0)}function Yr(t){if(Y(ii(t)))return t}function Jr(t,e){if("change"===t)return e}var $r=!1;if(h){var tn;if(h){var en="oninput"in document;if(!en){var rn=document.createElement("div");rn.setAttribute("oninput","return;"),en="function"===typeof rn.oninput}tn=en}else tn=!1;$r=tn&&(!document.documentMode||9<document.documentMode)}function nn(){Hr&&(Hr.detachEvent("onpropertychange",on),Qr=Hr=null)}function on(t){if("value"===t.propertyName&&Yr(Qr)){var e=[];if(Zr(e,Qr,t,Tt(t)),t=Xr,Nt)t(e);else{Nt=!0;try{Pt(t,e)}finally{Nt=!1,Ut()}}}}function sn(t,e,r){"focusin"===t?(nn(),Qr=r,(Hr=e).attachEvent("onpropertychange",on)):"focusout"===t&&nn()}function an(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yr(Qr)}function ln(t,e){if("click"===t)return Yr(e)}function un(t,e){if("input"===t||"change"===t)return Yr(e)}var cn="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},hn=Object.prototype.hasOwnProperty;function fn(t,e){if(cn(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!hn.call(e,r[n])||!cn(t[r[n]],e[r[n]]))return!1;return!0}function dn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pn(t,e){var r,n=dn(t);for(t=0;n;){if(3===n.nodeType){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=dn(n)}}function mn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?mn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function gn(){for(var t=window,e=J();e instanceof t.HTMLIFrameElement;){try{var r="string"===typeof e.contentWindow.location.href}catch(n){r=!1}if(!r)break;e=J((t=e.contentWindow).document)}return e}function yn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var _n=h&&"documentMode"in document&&11>=document.documentMode,vn=null,bn=null,wn=null,xn=!1;function En(t,e,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;xn||null==vn||vn!==J(n)||("selectionStart"in(n=vn)&&yn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},wn&&fn(wn,n)||(wn=n,0<(n=Nn(bn,"onSelect")).length&&(e=new fr("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=vn)))}Le("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Le("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Le(De,2);for(var Sn="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Mn=0;Mn<Sn.length;Mn++)Pe.set(Sn[Mn],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),An=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tn));function Cn(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,function(t,e,r,n,i,o,a,l,u){if(Qt.apply(this,arguments),qt){if(!qt)throw Error(s(198));var c=Kt;qt=!1,Kt=null,Wt||(Wt=!0,Zt=c)}}(n,e,void 0,t),t.currentTarget=null}function In(t,e){e=0!==(4&e);for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;t:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break t;Cn(i,a,u),o=l}else for(s=0;s<n.length;s++){if(l=(a=n[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break t;Cn(i,a,u),o=l}}}if(Wt)throw t=Zt,Wt=!1,Zt=null,t}function kn(t,e){var r=si(e),n=t+"__bubble";r.has(n)||(Dn(e,t,2,!1),r.add(n))}var Rn="_reactListening"+Math.random().toString(36).slice(2);function Bn(t){t[Rn]||(t[Rn]=!0,a.forEach((function(e){An.has(e)||Pn(e,!1,t,null),Pn(e,!0,t,null)})))}function Pn(t,e,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=r;if("selectionchange"===t&&9!==r.nodeType&&(o=r.ownerDocument),null!==n&&!e&&An.has(t)){if("scroll"!==t)return;i|=2,o=n}var s=si(o),a=t+"__"+(e?"capture":"bubble");s.has(a)||(e&&(i|=4),Dn(o,t,i,e),s.add(a))}function Dn(t,e,r,n){var i=Pe.get(e);switch(void 0===i?2:i){case 0:i=Xe;break;case 1:i=Ye;break;default:i=Je}r=i.bind(null,e,r,t),i=void 0,!Ft||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),n?void 0!==i?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):void 0!==i?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Ln(t,e,r,n,i){var o=n;if(0===(1&e)&&0===(2&e)&&null!==n)t:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var a=n.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=n.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=ri(a)))return;if(5===(l=s.tag)||6===l){n=o=s;continue t}a=a.parentNode}}n=n.return}!function(t,e,r){if(zt)return t(e,r);zt=!0;try{Ot(t,e,r)}finally{zt=!1,Ut()}}((function(){var n=o,i=Tt(r),s=[];t:{var a=Be.get(t);if(void 0!==a){var l=fr,u=t;switch(t){case"keypress":if(0===ir(r))break t;case"keydown":case"keyup":l=Ir;break;case"focusin":u="focus",l=_r;break;case"focusout":u="blur",l=_r;break;case"beforeblur":case"afterblur":l=_r;break;case"click":if(2===r.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rr;break;case Ce:case Ie:case ke:l=vr;break;case Re:l=Br;break;case"scroll":l=pr;break;case"wheel":l=Dr;break;case"copy":case"cut":case"paste":l=wr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kr}var c=0!==(4&e),h=!c&&"scroll"===t,f=c?null!==a?a+"Capture":null:a;c=[];for(var d,p=n;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==f&&(null!=(m=jt(p,f))&&c.push(On(p,m,d)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,r,i),s.push({event:a,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(u=r.relatedTarget||r.fromElement)||!ri(u)&&!u[ti])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(u=(u=r.relatedTarget||r.toElement)?ri(u):null)&&(u!==(h=Xt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=n),l!==u)){if(c=gr,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(c=kr,m="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==l?a:ii(l),d=null==u?a:ii(u),(a=new c(m,p+"leave",l,r,i)).target=h,a.relatedTarget=d,m=null,ri(i)===n&&((c=new c(f,p+"enter",u,r,i)).target=d,c.relatedTarget=h,m=c),h=m,l&&u)t:{for(f=u,p=0,d=c=l;d;d=zn(d))p++;for(d=0,m=f;m;m=zn(m))d++;for(;0<p-d;)c=zn(c),p--;for(;0<d-p;)f=zn(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break t;c=zn(c),f=zn(f)}c=null}else c=null;null!==l&&Un(s,a,l,c,!1),null!==u&&null!==h&&Un(s,h,u,c,!0)}if("select"===(l=(a=n?ii(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jr;else if(Wr(a))if($r)g=un;else{g=an;var y=sn}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ln);switch(g&&(g=g(t,n))?Zr(s,g,r,i):(y&&y(t,a,n),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&it(a,"number",a.value)),y=n?ii(n):window,t){case"focusin":(Wr(y)||"true"===y.contentEditable)&&(vn=y,bn=n,wn=null);break;case"focusout":wn=bn=vn=null;break;case"mousedown":xn=!0;break;case"contextmenu":case"mouseup":case"dragend":xn=!1,En(s,r,i);break;case"selectionchange":if(_n)break;case"keydown":case"keyup":En(s,r,i)}var _;if(Or)t:{switch(t){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else qr?Vr(t,r)&&(v="onCompositionEnd"):"keydown"===t&&229===r.keyCode&&(v="onCompositionStart");v&&(Ur&&"ko"!==r.locale&&(qr||"onCompositionStart"!==v?"onCompositionEnd"===v&&qr&&(_=nr()):(er="value"in(tr=i)?tr.value:tr.textContent,qr=!0)),0<(y=Nn(n,v)).length&&(v=new xr(v,t,null,r,i),s.push({event:v,listeners:y}),_?v.data=_:null!==(_=Gr(r))&&(v.data=_))),(_=zr?function(t,e){switch(t){case"compositionend":return Gr(e);case"keypress":return 32!==e.which?null:(Fr=!0,jr);case"textInput":return(t=e.data)===jr&&Fr?null:t;default:return null}}(t,r):function(t,e){if(qr)return"compositionend"===t||!Or&&Vr(t,e)?(t=nr(),rr=er=tr=null,qr=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ur&&"ko"!==e.locale?null:e.data}}(t,r))&&(0<(n=Nn(n,"onBeforeInput")).length&&(i=new xr("onBeforeInput","beforeinput",null,r,i),s.push({event:i,listeners:n}),i.data=_))}In(s,e)}))}function On(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Nn(t,e){for(var r=e+"Capture",n=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=jt(t,r))&&n.unshift(On(t,o,i)),null!=(o=jt(t,e))&&n.push(On(t,o,i))),t=t.return}return n}function zn(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Un(t,e,r,n,i){for(var o=e._reactName,s=[];null!==r&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(null!==l&&l===n)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=jt(r,o))&&s.unshift(On(r,l,a)):i||null!=(l=jt(r,o))&&s.push(On(r,l,a))),r=r.return}0!==s.length&&t.push({event:e,listeners:s})}function jn(){}var Fn=null,Vn=null;function Gn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function qn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Kn="function"===typeof setTimeout?setTimeout:void 0,Wn="function"===typeof clearTimeout?clearTimeout:void 0;function Zn(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Hn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Qn(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var r=t.data;if("$"===r||"$!"===r||"$?"===r){if(0===e)return t;e--}else"/$"===r&&e++}t=t.previousSibling}return null}var Xn=0;var Yn=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Yn,$n="__reactProps$"+Yn,ti="__reactContainer$"+Yn,ei="__reactEvents$"+Yn;function ri(t){var e=t[Jn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ti]||r[Jn]){if(r=e.alternate,null!==e.child||null!==r&&null!==r.child)for(t=Qn(t);null!==t;){if(r=t[Jn])return r;t=Qn(t)}return e}r=(t=r).parentNode}return null}function ni(t){return!(t=t[Jn]||t[ti])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ii(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function oi(t){return t[$n]||null}function si(t){var e=t[ei];return void 0===e&&(e=t[ei]=new Set),e}var ai=[],li=-1;function ui(t){return{current:t}}function ci(t){0>li||(t.current=ai[li],ai[li]=null,li--)}function hi(t,e){li++,ai[li]=t.current,t.current=e}var fi={},di=ui(fi),pi=ui(!1),mi=fi;function gi(t,e){var r=t.type.contextTypes;if(!r)return fi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=e[i];return n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function yi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function _i(){ci(pi),ci(di)}function vi(t,e,r){if(di.current!==fi)throw Error(s(168));hi(di,e),hi(pi,r)}function bi(t,e,r){var n=t.stateNode;if(t=e.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var o in n=n.getChildContext())if(!(o in t))throw Error(s(108,Z(e)||"Unknown",o));return i({},r,n)}function wi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fi,mi=di.current,hi(di,t),hi(pi,pi.current),!0}function xi(t,e,r){var n=t.stateNode;if(!n)throw Error(s(169));r?(t=bi(t,e,mi),n.__reactInternalMemoizedMergedChildContext=t,ci(pi),ci(di),hi(di,t)):ci(pi),hi(pi,r)}var Ei=null,Si=null,Mi=o.unstable_runWithPriority,Ti=o.unstable_scheduleCallback,Ai=o.unstable_cancelCallback,Ci=o.unstable_shouldYield,Ii=o.unstable_requestPaint,ki=o.unstable_now,Ri=o.unstable_getCurrentPriorityLevel,Bi=o.unstable_ImmediatePriority,Pi=o.unstable_UserBlockingPriority,Di=o.unstable_NormalPriority,Li=o.unstable_LowPriority,Oi=o.unstable_IdlePriority,Ni={},zi=void 0!==Ii?Ii:function(){},Ui=null,ji=null,Fi=!1,Vi=ki(),Gi=1e4>Vi?ki:function(){return ki()-Vi};function qi(){switch(Ri()){case Bi:return 99;case Pi:return 98;case Di:return 97;case Li:return 96;case Oi:return 95;default:throw Error(s(332))}}function Ki(t){switch(t){case 99:return Bi;case 98:return Pi;case 97:return Di;case 96:return Li;case 95:return Oi;default:throw Error(s(332))}}function Wi(t,e){return t=Ki(t),Mi(t,e)}function Zi(t,e,r){return t=Ki(t),Ti(t,e,r)}function Hi(){if(null!==ji){var t=ji;ji=null,Ai(t)}Qi()}function Qi(){if(!Fi&&null!==Ui){Fi=!0;var t=0;try{var e=Ui;Wi(99,(function(){for(;t<e.length;t++){var r=e[t];do{r=r(!0)}while(null!==r)}})),Ui=null}catch(r){throw null!==Ui&&(Ui=Ui.slice(t+1)),Ti(Bi,Hi),r}finally{Fi=!1}}}var Xi=w.ReactCurrentBatchConfig;function Yi(t,e){if(t&&t.defaultProps){for(var r in e=i({},e),t=t.defaultProps)void 0===e[r]&&(e[r]=t[r]);return e}return e}var Ji=ui(null),$i=null,to=null,eo=null;function ro(){eo=to=$i=null}function no(t){var e=Ji.current;ci(Ji),t.type._context._currentValue=e}function io(t,e){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)===e){if(null===r||(r.childLanes&e)===e)break;r.childLanes|=e}else t.childLanes|=e,null!==r&&(r.childLanes|=e);t=t.return}}function oo(t,e){$i=t,eo=to=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Ns=!0),t.firstContext=null)}function so(t,e){if(eo!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(eo=t,e=1073741823),e={context:t,observedBits:e,next:null},null===to){if(null===$i)throw Error(s(308));to=e,$i.dependencies={lanes:0,firstContext:e,responders:null}}else to=to.next=e;return t._currentValue}var ao=!1;function lo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function uo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function co(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ho(t,e){if(null!==(t=t.updateQueue)){var r=(t=t.shared).pending;null===r?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function fo(t,e){var r=t.updateQueue,n=t.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?i=o=s:o=o.next=s,r=r.next}while(null!==r);null===o?i=o=e:o=o.next=e}else i=o=e;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(t.updateQueue=r)}null===(t=r.lastBaseUpdate)?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function po(t,e,r,n){var o=t.updateQueue;ao=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?s=c:a.next=c,a=u;var h=t.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==a&&(null===f?h.firstBaseUpdate=c:f.next=c,h.lastBaseUpdate=u)}}if(null!==s){for(f=o.baseState,a=0,h=c=u=null;;){l=s.lane;var d=s.eventTime;if((n&l)===l){null!==h&&(h=h.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var p=t,m=s;switch(l=e,d=r,m.tag){case 1:if("function"===typeof(p=m.payload)){f=p.call(d,f,l);break t}f=p;break t;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(l="function"===typeof(p=m.payload)?p.call(d,f,l):p)||void 0===l)break t;f=i({},f,l);break t;case 2:ao=!0}}null!==s.callback&&(t.flags|=32,null===(l=o.effects)?o.effects=[s]:l.push(s))}else d={eventTime:d,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===h?(c=h=d,u=f):h=h.next=d,a|=l;if(null===(s=s.next)){if(null===(l=o.shared.pending))break;s=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===h&&(u=f),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=h,Fa|=a,t.lanes=a,t.memoizedState=f}}function mo(t,e,r){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(s(191,i));i.call(n)}}}var go=(new n.Component).refs;function yo(t,e,r,n){r=null===(r=r(n,e=t.memoizedState))||void 0===r?e:i({},e,r),t.memoizedState=r,0===t.lanes&&(t.updateQueue.baseState=r)}var _o={isMounted:function(t){return!!(t=t._reactInternals)&&Xt(t)===t},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=fl(),i=dl(t),o=co(n,i);o.payload=e,void 0!==r&&null!==r&&(o.callback=r),ho(t,o),pl(t,i,n)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=fl(),i=dl(t),o=co(n,i);o.tag=1,o.payload=e,void 0!==r&&null!==r&&(o.callback=r),ho(t,o),pl(t,i,n)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=fl(),n=dl(t),i=co(r,n);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),ho(t,i),pl(t,n,r)}};function vo(t,e,r,n,i,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(n,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!fn(r,n)||!fn(i,o))}function bo(t,e,r){var n=!1,i=fi,o=e.contextType;return"object"===typeof o&&null!==o?o=so(o):(i=yi(e)?mi:di.current,o=(n=null!==(n=e.contextTypes)&&void 0!==n)?gi(t,i):fi),e=new e(r,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=_o,t.stateNode=e,e._reactInternals=t,n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function wo(t,e,r,n){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(r,n),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&_o.enqueueReplaceState(e,e.state,null)}function xo(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=go,lo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=so(o):(o=yi(e)?mi:di.current,i.context=gi(t,o)),po(t,r,i,n),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(yo(t,e,o,r),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&_o.enqueueReplaceState(i,i.state,null),po(t,r,i,n),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4)}var Eo=Array.isArray;function So(t,e,r){if(null!==(t=r.ref)&&"function"!==typeof t&&"object"!==typeof t){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:(e=function(t){var e=n.refs;e===go&&(e=n.refs={}),null===t?delete e[i]:e[i]=t},e._stringRef=i,e)}if("string"!==typeof t)throw Error(s(284));if(!r._owner)throw Error(s(290,t))}return t}function Mo(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function To(t){function e(e,r){if(t){var n=e.lastEffect;null!==n?(n.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r,r.nextEffect=null,r.flags=8}}function r(r,n){if(!t)return null;for(;null!==n;)e(r,n),n=n.sibling;return null}function n(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Wl(t,e)).index=0,t.sibling=null,t}function o(e,r,n){return e.index=n,t?null!==(n=e.alternate)?(n=n.index)<r?(e.flags=2,r):n:(e.flags=2,r):r}function a(e){return t&&null===e.alternate&&(e.flags=2),e}function l(t,e,r,n){return null===e||6!==e.tag?((e=Xl(r,t.mode,n)).return=t,e):((e=i(e,r)).return=t,e)}function u(t,e,r,n){return null!==e&&e.elementType===r.type?((n=i(e,r.props)).ref=So(t,e,r),n.return=t,n):((n=Zl(r.type,r.key,r.props,null,t.mode,n)).ref=So(t,e,r),n.return=t,n)}function c(t,e,r,n){return null===e||4!==e.tag||e.stateNode.containerInfo!==r.containerInfo||e.stateNode.implementation!==r.implementation?((e=Yl(r,t.mode,n)).return=t,e):((e=i(e,r.children||[])).return=t,e)}function h(t,e,r,n,o){return null===e||7!==e.tag?((e=Hl(r,t.mode,n,o)).return=t,e):((e=i(e,r)).return=t,e)}function f(t,e,r){if("string"===typeof e||"number"===typeof e)return(e=Xl(""+e,t.mode,r)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(r=Zl(e.type,e.key,e.props,null,t.mode,r)).ref=So(t,null,e),r.return=t,r;case E:return(e=Yl(e,t.mode,r)).return=t,e}if(Eo(e)||V(e))return(e=Hl(e,t.mode,r,null)).return=t,e;Mo(t,e)}return null}function d(t,e,r,n){var i=null!==e?e.key:null;if("string"===typeof r||"number"===typeof r)return null!==i?null:l(t,e,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return r.key===i?r.type===S?h(t,e,r.props.children,n,i):u(t,e,r,n):null;case E:return r.key===i?c(t,e,r,n):null}if(Eo(r)||V(r))return null!==i?null:h(t,e,r,n,null);Mo(t,r)}return null}function p(t,e,r,n,i){if("string"===typeof n||"number"===typeof n)return l(e,t=t.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return t=t.get(null===n.key?r:n.key)||null,n.type===S?h(e,t,n.props.children,i,n.key):u(e,t,n,i);case E:return c(e,t=t.get(null===n.key?r:n.key)||null,n,i)}if(Eo(n)||V(n))return h(e,t=t.get(r)||null,n,i,null);Mo(e,n)}return null}function m(i,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=d(i,h,a[m],l);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(i,h),s=o(y,s,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return r(i,h),u;if(null===h){for(;m<a.length;m++)null!==(h=f(i,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=n(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),u}function g(i,a,l,u){var c=V(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,y=null,_=l.next();null!==m&&!_.done;g++,_=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=d(i,m,_.value,u);if(null===v){null===m&&(m=y);break}t&&m&&null===v.alternate&&e(i,m),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v,m=y}if(_.done)return r(i,m),c;if(null===m){for(;!_.done;g++,_=l.next())null!==(_=f(i,_.value,u))&&(a=o(_,a,g),null===h?c=_:h.sibling=_,h=_);return c}for(m=n(i,m);!_.done;g++,_=l.next())null!==(_=p(m,i,g,_.value,u))&&(t&&null!==_.alternate&&m.delete(null===_.key?g:_.key),a=o(_,a,g),null===h?c=_:h.sibling=_,h=_);return t&&m.forEach((function(t){return e(i,t)})),c}return function(t,n,o,l){var u="object"===typeof o&&null!==o&&o.type===S&&null===o.key;u&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case x:t:{for(c=o.key,u=n;null!==u;){if(u.key===c){if(7===u.tag){if(o.type===S){r(t,u.sibling),(n=i(u,o.props.children)).return=t,t=n;break t}}else if(u.elementType===o.type){r(t,u.sibling),(n=i(u,o.props)).ref=So(t,u,o),n.return=t,t=n;break t}r(t,u);break}e(t,u),u=u.sibling}o.type===S?((n=Hl(o.props.children,t.mode,l,o.key)).return=t,t=n):((l=Zl(o.type,o.key,o.props,null,t.mode,l)).ref=So(t,n,o),l.return=t,t=l)}return a(t);case E:t:{for(u=o.key;null!==n;){if(n.key===u){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){r(t,n.sibling),(n=i(n,o.children||[])).return=t,t=n;break t}r(t,n);break}e(t,n),n=n.sibling}(n=Yl(o,t.mode,l)).return=t,t=n}return a(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==n&&6===n.tag?(r(t,n.sibling),(n=i(n,o)).return=t,t=n):(r(t,n),(n=Xl(o,t.mode,l)).return=t,t=n),a(t);if(Eo(o))return m(t,n,o,l);if(V(o))return g(t,n,o,l);if(c&&Mo(t,o),"undefined"===typeof o&&!u)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,Z(t.type)||"Component"))}return r(t,n)}}var Ao=To(!0),Co=To(!1),Io={},ko=ui(Io),Ro=ui(Io),Bo=ui(Io);function Po(t){if(t===Io)throw Error(s(174));return t}function Do(t,e){switch(hi(Bo,e),hi(Ro,t),hi(ko,Io),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pt(null,"");break;default:e=pt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ci(ko),hi(ko,e)}function Lo(){ci(ko),ci(Ro),ci(Bo)}function Oo(t){Po(Bo.current);var e=Po(ko.current),r=pt(e,t.type);e!==r&&(hi(Ro,t),hi(ko,r))}function No(t){Ro.current===t&&(ci(ko),ci(Ro))}var zo=ui(0);function Uo(t){for(var e=t;null!==e;){if(13===e.tag){var r=e.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jo=null,Fo=null,Vo=!1;function Go(t,e){var r=ql(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function qo(t,e){switch(t.tag){case 5:var r=t.type;return null!==(e=1!==e.nodeType||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function Ko(t){if(Vo){var e=Fo;if(e){var r=e;if(!qo(t,e)){if(!(e=Hn(r.nextSibling))||!qo(t,e))return t.flags=-1025&t.flags|2,Vo=!1,void(jo=t);Go(jo,r)}jo=t,Fo=Hn(e.firstChild)}else t.flags=-1025&t.flags|2,Vo=!1,jo=t}}function Wo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;jo=t}function Zo(t){if(t!==jo)return!1;if(!Vo)return Wo(t),Vo=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!qn(e,t.memoizedProps))for(e=Fo;e;)Go(t,e),e=Hn(e.nextSibling);if(Wo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var r=t.data;if("/$"===r){if(0===e){Fo=Hn(t.nextSibling);break t}e--}else"$"!==r&&"$!"!==r&&"$?"!==r||e++}t=t.nextSibling}Fo=null}}else Fo=jo?Hn(t.stateNode.nextSibling):null;return!0}function Ho(){Fo=jo=null,Vo=!1}var Qo=[];function Xo(){for(var t=0;t<Qo.length;t++)Qo[t]._workInProgressVersionPrimary=null;Qo.length=0}var Yo=w.ReactCurrentDispatcher,Jo=w.ReactCurrentBatchConfig,$o=0,ts=null,es=null,rs=null,ns=!1,is=!1;function os(){throw Error(s(321))}function ss(t,e){if(null===e)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!cn(t[r],e[r]))return!1;return!0}function as(t,e,r,n,i,o){if($o=o,ts=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yo.current=null===t||null===t.memoizedState?Ps:Ds,t=r(n,i),is){o=0;do{if(is=!1,!(25>o))throw Error(s(301));o+=1,rs=es=null,e.updateQueue=null,Yo.current=Ls,t=r(n,i)}while(is)}if(Yo.current=Bs,e=null!==es&&null!==es.next,$o=0,rs=es=ts=null,ns=!1,e)throw Error(s(300));return t}function ls(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===rs?ts.memoizedState=rs=t:rs=rs.next=t,rs}function us(){if(null===es){var t=ts.alternate;t=null!==t?t.memoizedState:null}else t=es.next;var e=null===rs?ts.memoizedState:rs.next;if(null!==e)rs=e,es=t;else{if(null===t)throw Error(s(310));t={memoizedState:(es=t).memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},null===rs?ts.memoizedState=rs=t:rs=rs.next=t}return rs}function cs(t,e){return"function"===typeof e?e(t):e}function hs(t){var e=us(),r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=t;var n=es,i=n.baseQueue,o=r.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(null!==i){i=i.next,n=n.baseState;var l=a=o=null,u=i;do{var c=u.lane;if(($o&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),n=u.eagerReducer===t?u.eagerState:t(n,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,o=n):l=l.next=h,ts.lanes|=c,Fa|=c}u=u.next}while(null!==u&&u!==i);null===l?o=n:l.next=a,cn(n,e.memoizedState)||(Ns=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}return[e.memoizedState,r.dispatch]}function fs(t){var e=us(),r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(null!==i){r.pending=null;var a=i=i.next;do{o=t(o,a.action),a=a.next}while(a!==i);cn(o,e.memoizedState)||(Ns=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function ds(t,e,r){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===n:(t=t.mutableReadLanes,(t=($o&t)===t)&&(e._workInProgressVersionPrimary=n,Qo.push(e))),t)return r(e._source);throw Qo.push(e),Error(s(350))}function ps(t,e,r,n){var i=Pa;if(null===i)throw Error(s(349));var o=e._getVersion,a=o(e._source),l=Yo.current,u=l.useState((function(){return ds(i,e,r)})),c=u[1],h=u[0];u=rs;var f=t.memoizedState,d=f.refs,p=d.getSnapshot,m=f.source;f=f.subscribe;var g=ts;return t.memoizedState={refs:d,source:e,subscribe:n},l.useEffect((function(){d.getSnapshot=r,d.setSnapshot=c;var t=o(e._source);if(!cn(a,t)){t=r(e._source),cn(h,t)||(c(t),t=dl(g),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var n=i.entanglements,s=t;0<s;){var l=31-qe(s),u=1<<l;n[l]|=t,s&=~u}}}),[r,e,n]),l.useEffect((function(){return n(e._source,(function(){var t=d.getSnapshot,r=d.setSnapshot;try{r(t(e._source));var n=dl(g);i.mutableReadLanes|=n&i.pendingLanes}catch(o){r((function(){throw o}))}}))}),[e,n]),cn(p,r)&&cn(m,e)&&cn(f,n)||((t={pending:null,dispatch:null,lastRenderedReducer:cs,lastRenderedState:h}).dispatch=c=Rs.bind(null,ts,t),u.queue=t,u.baseQueue=null,h=ds(i,e,r),u.memoizedState=u.baseState=h),h}function ms(t,e,r){return ps(us(),t,e,r)}function gs(t){var e=ls();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:cs,lastRenderedState:t}).dispatch=Rs.bind(null,ts,t),[e.memoizedState,t]}function ys(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},null===(e=ts.updateQueue)?(e={lastEffect:null},ts.updateQueue=e,e.lastEffect=t.next=t):null===(r=e.lastEffect)?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t),t}function _s(t){return t={current:t},ls().memoizedState=t}function vs(){return us().memoizedState}function bs(t,e,r,n){var i=ls();ts.flags|=t,i.memoizedState=ys(1|e,r,void 0,void 0===n?null:n)}function ws(t,e,r,n){var i=us();n=void 0===n?null:n;var o=void 0;if(null!==es){var s=es.memoizedState;if(o=s.destroy,null!==n&&ss(n,s.deps))return void ys(e,r,o,n)}ts.flags|=t,i.memoizedState=ys(1|e,r,o,n)}function xs(t,e){return bs(516,4,t,e)}function Es(t,e){return ws(516,4,t,e)}function Ss(t,e){return ws(4,2,t,e)}function Ms(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ts(t,e,r){return r=null!==r&&void 0!==r?r.concat([t]):null,ws(4,2,Ms.bind(null,e,t),r)}function As(){}function Cs(t,e){var r=us();e=void 0===e?null:e;var n=r.memoizedState;return null!==n&&null!==e&&ss(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Is(t,e){var r=us();e=void 0===e?null:e;var n=r.memoizedState;return null!==n&&null!==e&&ss(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function ks(t,e){var r=qi();Wi(98>r?98:r,(function(){t(!0)})),Wi(97<r?97:r,(function(){var r=Jo.transition;Jo.transition=1;try{t(!1),e()}finally{Jo.transition=r}}))}function Rs(t,e,r){var n=fl(),i=dl(t),o={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},s=e.pending;if(null===s?o.next=o:(o.next=s.next,s.next=o),e.pending=o,s=t.alternate,t===ts||null!==s&&s===ts)is=ns=!0;else{if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,l=s(a,r);if(o.eagerReducer=s,o.eagerState=l,cn(l,a))return}catch(u){}pl(t,i,n)}}var Bs={readContext:so,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useLayoutEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useMutableSource:os,useOpaqueIdentifier:os,unstable_isNewReconciler:!1},Ps={readContext:so,useCallback:function(t,e){return ls().memoizedState=[t,void 0===e?null:e],t},useContext:so,useEffect:xs,useImperativeHandle:function(t,e,r){return r=null!==r&&void 0!==r?r.concat([t]):null,bs(4,2,Ms.bind(null,e,t),r)},useLayoutEffect:function(t,e){return bs(4,2,t,e)},useMemo:function(t,e){var r=ls();return e=void 0===e?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ls();return e=void 0!==r?r(e):e,n.memoizedState=n.baseState=e,t=(t=n.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Rs.bind(null,ts,t),[n.memoizedState,t]},useRef:_s,useState:gs,useDebugValue:As,useDeferredValue:function(t){var e=gs(t),r=e[0],n=e[1];return xs((function(){var e=Jo.transition;Jo.transition=1;try{n(t)}finally{Jo.transition=e}}),[t]),r},useTransition:function(){var t=gs(!1),e=t[0];return _s(t=ks.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,r){var n=ls();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:r},ps(n,t,e,r)},useOpaqueIdentifier:function(){if(Vo){var t=!1,e=function(t){return{$$typeof:L,toString:t,valueOf:t}}((function(){throw t||(t=!0,r("r:"+(Xn++).toString(36))),Error(s(355))})),r=gs(e)[1];return 0===(2&ts.mode)&&(ts.flags|=516,ys(5,(function(){r("r:"+(Xn++).toString(36))}),void 0,null)),e}return gs(e="r:"+(Xn++).toString(36)),e},unstable_isNewReconciler:!1},Ds={readContext:so,useCallback:Cs,useContext:so,useEffect:Es,useImperativeHandle:Ts,useLayoutEffect:Ss,useMemo:Is,useReducer:hs,useRef:vs,useState:function(){return hs(cs)},useDebugValue:As,useDeferredValue:function(t){var e=hs(cs),r=e[0],n=e[1];return Es((function(){var e=Jo.transition;Jo.transition=1;try{n(t)}finally{Jo.transition=e}}),[t]),r},useTransition:function(){var t=hs(cs)[0];return[vs().current,t]},useMutableSource:ms,useOpaqueIdentifier:function(){return hs(cs)[0]},unstable_isNewReconciler:!1},Ls={readContext:so,useCallback:Cs,useContext:so,useEffect:Es,useImperativeHandle:Ts,useLayoutEffect:Ss,useMemo:Is,useReducer:fs,useRef:vs,useState:function(){return fs(cs)},useDebugValue:As,useDeferredValue:function(t){var e=fs(cs),r=e[0],n=e[1];return Es((function(){var e=Jo.transition;Jo.transition=1;try{n(t)}finally{Jo.transition=e}}),[t]),r},useTransition:function(){var t=fs(cs)[0];return[vs().current,t]},useMutableSource:ms,useOpaqueIdentifier:function(){return fs(cs)[0]},unstable_isNewReconciler:!1},Os=w.ReactCurrentOwner,Ns=!1;function zs(t,e,r,n){e.child=null===t?Co(e,null,r,n):Ao(e,t.child,r,n)}function Us(t,e,r,n,i){r=r.render;var o=e.ref;return oo(e,i),n=as(t,e,r,n,o,i),null===t||Ns?(e.flags|=1,zs(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,oa(t,e,i))}function js(t,e,r,n,i,o){if(null===t){var s=r.type;return"function"!==typeof s||Kl(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((t=Zl(r.type,null,n,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Fs(t,e,s,n,i,o))}return s=t.child,0===(i&o)&&(i=s.memoizedProps,(r=null!==(r=r.compare)?r:fn)(i,n)&&t.ref===e.ref)?oa(t,e,o):(e.flags|=1,(t=Wl(s,n)).ref=e.ref,t.return=e,e.child=t)}function Fs(t,e,r,n,i,o){if(null!==t&&fn(t.memoizedProps,n)&&t.ref===e.ref){if(Ns=!1,0===(o&i))return e.lanes=t.lanes,oa(t,e,o);0!==(16384&t.flags)&&(Ns=!0)}return qs(t,e,r,n,o)}function Vs(t,e,r){var n=e.pendingProps,i=n.children,o=null!==t?t.memoizedState:null;if("hidden"===n.mode||"unstable-defer-without-hiding"===n.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},xl(e,r);else{if(0===(1073741824&r))return t=null!==o?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},xl(e,t),null;e.memoizedState={baseLanes:0},xl(e,null!==o?o.baseLanes:r)}else null!==o?(n=o.baseLanes|r,e.memoizedState=null):n=r,xl(e,n);return zs(t,e,i,r),e.child}function Gs(t,e){var r=e.ref;(null===t&&null!==r||null!==t&&t.ref!==r)&&(e.flags|=128)}function qs(t,e,r,n,i){var o=yi(r)?mi:di.current;return o=gi(e,o),oo(e,i),r=as(t,e,r,n,o,i),null===t||Ns?(e.flags|=1,zs(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,oa(t,e,i))}function Ks(t,e,r,n,i){if(yi(r)){var o=!0;wi(e)}else o=!1;if(oo(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),bo(e,r,n),xo(e,r,n,i),n=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=r.contextType;"object"===typeof u&&null!==u?u=so(u):u=gi(e,u=yi(r)?mi:di.current);var c=r.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==n||l!==u)&&wo(e,s,n,u),ao=!1;var f=e.memoizedState;s.state=f,po(e,n,s,i),l=e.memoizedState,a!==n||f!==l||pi.current||ao?("function"===typeof c&&(yo(e,r,c,n),l=e.memoizedState),(a=ao||vo(e,r,a,n,f,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4)):("function"===typeof s.componentDidMount&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=u,n=a):("function"===typeof s.componentDidMount&&(e.flags|=4),n=!1)}else{s=e.stateNode,uo(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Yi(e.type,a),s.props=u,h=e.pendingProps,f=s.context,"object"===typeof(l=r.contextType)&&null!==l?l=so(l):l=gi(e,l=yi(r)?mi:di.current);var d=r.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||f!==l)&&wo(e,s,n,l),ao=!1,f=e.memoizedState,s.state=f,po(e,n,s,i);var p=e.memoizedState;a!==h||f!==p||pi.current||ao?("function"===typeof d&&(yo(e,r,d,n),p=e.memoizedState),(u=ao||vo(e,r,u,n,f,p,l))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=p),s.props=n,s.state=p,s.context=l,n=u):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),n=!1)}return Ws(t,e,r,n,o,i)}function Ws(t,e,r,n,i,o){Gs(t,e);var s=0!==(64&e.flags);if(!n&&!s)return i&&xi(e,r,!1),oa(t,e,o);n=e.stateNode,Os.current=e;var a=s&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return e.flags|=1,null!==t&&s?(e.child=Ao(e,t.child,null,o),e.child=Ao(e,null,a,o)):zs(t,e,a,o),e.memoizedState=n.state,i&&xi(e,r,!0),e.child}function Zs(t){var e=t.stateNode;e.pendingContext?vi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&vi(0,e.context,!1),Do(t,e.containerInfo)}var Hs,Qs,Xs,Ys={dehydrated:null,retryLane:0};function Js(t,e,r){var n,i=e.pendingProps,o=zo.current,s=!1;return(n=0!==(64&e.flags))||(n=(null===t||null!==t.memoizedState)&&0!==(2&o)),n?(s=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),hi(zo,1&o),null===t?(void 0!==i.fallback&&Ko(e),t=i.children,o=i.fallback,s?(t=$s(e,t,o,r),e.child.memoizedState={baseLanes:r},e.memoizedState=Ys,t):"number"===typeof i.unstable_expectedLoadTime?(t=$s(e,t,o,r),e.child.memoizedState={baseLanes:r},e.memoizedState=Ys,e.lanes=33554432,t):((r=Ql({mode:"visible",children:t},e.mode,r,null)).return=e,e.child=r)):(t.memoizedState,s?(i=ea(t,e,i.children,i.fallback,r),s=e.child,o=t.child.memoizedState,s.memoizedState=null===o?{baseLanes:r}:{baseLanes:o.baseLanes|r},s.childLanes=t.childLanes&~r,e.memoizedState=Ys,i):(r=ta(t,e,i.children,r),e.memoizedState=null,r))}function $s(t,e,r,n){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Ql(e,i,0,null),r=Hl(r,i,n,null),o.return=t,r.return=t,o.sibling=r,t.child=o,r}function ta(t,e,r,n){var i=t.child;return t=i.sibling,r=Wl(i,{mode:"visible",children:r}),0===(2&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=r}function ea(t,e,r,n,i){var o=e.mode,s=t.child;t=s.sibling;var a={mode:"hidden",children:r};return 0===(2&o)&&e.child!==s?((r=e.child).childLanes=0,r.pendingProps=a,null!==(s=r.lastEffect)?(e.firstEffect=r.firstEffect,e.lastEffect=s,s.nextEffect=null):e.firstEffect=e.lastEffect=null):r=Wl(s,a),null!==t?n=Wl(t,n):(n=Hl(n,o,i,null)).flags|=2,n.return=e,r.return=e,r.sibling=n,e.child=r,n}function ra(t,e){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),io(t.return,e)}function na(t,e,r,n,i,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i,s.lastEffect=o)}function ia(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(zs(t,e,n.children,r),0!==(2&(n=zo.current)))n=1&n|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ra(t,r);else if(19===t.tag)ra(t,r);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(hi(zo,n),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;null!==r;)null!==(t=r.alternate)&&null===Uo(t)&&(i=r),r=r.sibling;null===(r=i)?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),na(e,!1,i,r,o,e.lastEffect);break;case"backwards":for(r=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Uo(t)){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}na(e,!0,r,null,o,e.lastEffect);break;case"together":na(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function oa(t,e,r){if(null!==t&&(e.dependencies=t.dependencies),Fa|=e.lanes,0!==(r&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(r=Wl(t=e.child,t.pendingProps),e.child=r,r.return=e;null!==t.sibling;)t=t.sibling,(r=r.sibling=Wl(t,t.pendingProps)).return=e;r.sibling=null}return e.child}return null}function sa(t,e){if(!Vo)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;null!==e;)null!==e.alternate&&(r=e),e=e.sibling;null===r?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?e||null===t.tail?t.tail=null:t.tail.sibling=null:n.sibling=null}}function aa(t,e,r){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(e.type)&&_i(),null;case 3:return Lo(),ci(pi),ci(di),Xo(),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||(Zo(e)?e.flags|=4:n.hydrate||(e.flags|=256)),null;case 5:No(e);var o=Po(Bo.current);if(r=e.type,null!==t&&null!=e.stateNode)Qs(t,e,r,n),t.ref!==e.ref&&(e.flags|=128);else{if(!n){if(null===e.stateNode)throw Error(s(166));return null}if(t=Po(ko.current),Zo(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Jn]=e,n[$n]=a,r){case"dialog":kn("cancel",n),kn("close",n);break;case"iframe":case"object":case"embed":kn("load",n);break;case"video":case"audio":for(t=0;t<Tn.length;t++)kn(Tn[t],n);break;case"source":kn("error",n);break;case"img":case"image":case"link":kn("error",n),kn("load",n);break;case"details":kn("toggle",n);break;case"input":tt(n,a),kn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},kn("invalid",n);break;case"textarea":lt(n,a),kn("invalid",n)}for(var u in St(r,a),t=null,a)a.hasOwnProperty(u)&&(o=a[u],"children"===u?"string"===typeof o?n.textContent!==o&&(t=["children",o]):"number"===typeof o&&n.textContent!==""+o&&(t=["children",""+o]):l.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&kn("scroll",n));switch(r){case"input":X(n),nt(n,a,!0);break;case"textarea":X(n),ct(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=jn)}n=t,e.updateQueue=n,null!==n&&(e.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=dt(r)),t===ht?"script"===r?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof n.is?t=u.createElement(r,{is:n.is}):(t=u.createElement(r),"select"===r&&(u=t,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):t=u.createElementNS(t,r),t[Jn]=e,t[$n]=n,Hs(t,e),e.stateNode=t,u=Mt(r,n),r){case"dialog":kn("cancel",t),kn("close",t),o=n;break;case"iframe":case"object":case"embed":kn("load",t),o=n;break;case"video":case"audio":for(o=0;o<Tn.length;o++)kn(Tn[o],t);o=n;break;case"source":kn("error",t),o=n;break;case"img":case"image":case"link":kn("error",t),kn("load",t),o=n;break;case"details":kn("toggle",t),o=n;break;case"input":tt(t,n),o=$(t,n),kn("invalid",t);break;case"option":o=ot(t,n);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},o=i({},n,{value:void 0}),kn("invalid",t);break;case"textarea":lt(t,n),o=at(t,n),kn("invalid",t);break;default:o=n}St(r,o);var c=o;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?xt(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&yt(t,h):"children"===a?"string"===typeof h?("textarea"!==r||""!==h)&&_t(t,h):"number"===typeof h&&_t(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&kn("scroll",t):null!=h&&b(t,a,h,u))}switch(r){case"input":X(t),nt(t,n,!1);break;case"textarea":X(t),ct(t);break;case"option":null!=n.value&&t.setAttribute("value",""+H(n.value));break;case"select":t.multiple=!!n.multiple,null!=(a=n.value)?st(t,!!n.multiple,a,!1):null!=n.defaultValue&&st(t,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=jn)}Gn(r,n)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Xs(0,e,t.memoizedProps,n);else{if("string"!==typeof n&&null===e.stateNode)throw Error(s(166));r=Po(Bo.current),Po(ko.current),Zo(e)?(n=e.stateNode,r=e.memoizedProps,n[Jn]=e,n.nodeValue!==r&&(e.flags|=4)):((n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[Jn]=e,e.stateNode=n)}return null;case 13:return ci(zo),n=e.memoizedState,0!==(64&e.flags)?(e.lanes=r,e):(n=null!==n,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Zo(e):r=null!==t.memoizedState,n&&!r&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&zo.current)?0===za&&(za=3):(0!==za&&3!==za||(za=4),null===Pa||0===(134217727&Fa)&&0===(134217727&Va)||_l(Pa,La))),(n||r)&&(e.flags|=4),null);case 4:return Lo(),null===t&&Bn(e.stateNode.containerInfo),null;case 10:return no(e),null;case 19:if(ci(zo),null===(n=e.memoizedState))return null;if(a=0!==(64&e.flags),null===(u=n.rendering))if(a)sa(n,!1);else{if(0!==za||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(u=Uo(t))){for(e.flags|=64,sa(n,!1),null!==(a=u.updateQueue)&&(e.updateQueue=a,e.flags|=4),null===n.lastEffect&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=r,r=e.child;null!==r;)t=n,(a=r).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,t=u.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return hi(zo,1&zo.current|2),e.child}t=t.sibling}null!==n.tail&&Gi()>Wa&&(e.flags|=64,a=!0,sa(n,!1),e.lanes=33554432)}else{if(!a)if(null!==(t=Uo(u))){if(e.flags|=64,a=!0,null!==(r=t.updateQueue)&&(e.updateQueue=r,e.flags|=4),sa(n,!0),null===n.tail&&"hidden"===n.tailMode&&!u.alternate&&!Vo)return null!==(e=e.lastEffect=n.lastEffect)&&(e.nextEffect=null),null}else 2*Gi()-n.renderingStartTime>Wa&&1073741824!==r&&(e.flags|=64,a=!0,sa(n,!1),e.lanes=33554432);n.isBackwards?(u.sibling=e.child,e.child=u):(null!==(r=n.last)?r.sibling=u:e.child=u,n.last=u)}return null!==n.tail?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=Gi(),r.sibling=null,e=zo.current,hi(zo,a?1&e|2:1&e),r):null;case 23:case 24:return El(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==n.mode&&(e.flags|=4),null}throw Error(s(156,e.tag))}function la(t){switch(t.tag){case 1:yi(t.type)&&_i();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Lo(),ci(pi),ci(di),Xo(),0!==(64&(e=t.flags)))throw Error(s(285));return t.flags=-4097&e|64,t;case 5:return No(t),null;case 13:return ci(zo),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return ci(zo),null;case 4:return Lo(),null;case 10:return no(t),null;case 23:case 24:return El(),null;default:return null}}function ua(t,e){try{var r="",n=e;do{r+=W(n),n=n.return}while(n);var i=r}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i}}function ca(t,e){try{console.error(e.value)}catch(r){setTimeout((function(){throw r}))}}Hs=function(t,e){for(var r=e.child;null!==r;){if(5===r.tag||6===r.tag)t.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Qs=function(t,e,r,n){var o=t.memoizedProps;if(o!==n){t=e.stateNode,Po(ko.current);var s,a=null;switch(r){case"input":o=$(t,o),n=$(t,n),a=[];break;case"option":o=ot(t,o),n=ot(t,n),a=[];break;case"select":o=i({},o,{value:void 0}),n=i({},n,{value:void 0}),a=[];break;case"textarea":o=at(t,o),n=at(t,n),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof n.onClick&&(t.onclick=jn)}for(h in St(r,n),r=null,o)if(!n.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var u=o[h];for(s in u)u.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in n){var c=n[h];if(u=null!=o?o[h]:void 0,n.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(a||(a=[]),a.push(h,r)),r=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&kn("scroll",t),a||u===c||(a=[])):"object"===typeof c&&null!==c&&c.$$typeof===L?c.toString():(a=a||[]).push(h,c))}r&&(a=a||[]).push("style",r);var h=a;(e.updateQueue=h)&&(e.flags|=4)}},Xs=function(t,e,r,n){r!==n&&(e.flags|=4)};var ha="function"===typeof WeakMap?WeakMap:Map;function fa(t,e,r){(r=co(-1,r)).tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Xa||(Xa=!0,Ya=n),ca(0,e)},r}function da(t,e,r){(r=co(-1,r)).tag=3;var n=t.type.getDerivedStateFromError;if("function"===typeof n){var i=e.value;r.payload=function(){return ca(0,e),n(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){"function"!==typeof n&&(null===Ja?Ja=new Set([this]):Ja.add(this),ca(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),r}var pa="function"===typeof WeakSet?WeakSet:Set;function ma(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(r){jl(t,r)}else e.current=null}function ga(t,e){switch(e.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&e.flags&&null!==t){var r=t.memoizedProps,n=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?r:Yi(e.type,r),n),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Zn(e.stateNode.containerInfo))}throw Error(s(163))}function ya(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=r.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=r.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;n=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Nl(r,t),Ol(r,t)),t=n}while(t!==e)}return;case 1:return t=r.stateNode,4&r.flags&&(null===e?t.componentDidMount():(n=r.elementType===r.type?e.memoizedProps:Yi(r.type,e.memoizedProps),t.componentDidUpdate(n,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=r.updateQueue)&&mo(r,e,t));case 3:if(null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 5:case 1:t=r.child.stateNode}mo(r,e,t)}return;case 5:return t=r.stateNode,void(null===e&&4&r.flags&&Gn(r.type,r.memoizedProps)&&t.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&xe(r)))))}throw Error(s(163))}function _a(t,e){for(var r=t;;){if(5===r.tag){var n=r.stateNode;if(e)"function"===typeof(n=n.style).setProperty?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,n.style.display=wt("display",i)}}else if(6===r.tag)r.stateNode.nodeValue=e?"":r.memoizedProps;else if((23!==r.tag&&24!==r.tag||null===r.memoizedState||r===t)&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function va(t,e){if(Si&&"function"===typeof Si.onCommitFiberUnmount)try{Si.onCommitFiberUnmount(Ei,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t=t.next;do{var n=r,i=n.destroy;if(n=n.tag,void 0!==i)if(0!==(4&n))Nl(e,r);else{n=e;try{i()}catch(o){jl(n,o)}}r=r.next}while(r!==t)}break;case 1:if(ma(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){jl(e,o)}break;case 5:ma(e);break;case 4:Ma(t,e)}}function ba(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function wa(t){return 5===t.tag||3===t.tag||4===t.tag}function xa(t){t:{for(var e=t.return;null!==e;){if(wa(e))break t;e=e.return}throw Error(s(160))}var r=e;switch(e=r.stateNode,r.tag){case 5:var n=!1;break;case 3:case 4:e=e.containerInfo,n=!0;break;default:throw Error(s(161))}16&r.flags&&(_t(e,""),r.flags&=-17);t:e:for(r=t;;){for(;null===r.sibling;){if(null===r.return||wa(r.return)){r=null;break t}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.flags)continue e;if(null===r.child||4===r.tag)continue e;r.child.return=r,r=r.child}if(!(2&r.flags)){r=r.stateNode;break t}}n?Ea(t,r,e):Sa(t,r,e)}function Ea(t,e,r){var n=t.tag,i=5===n||6===n;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===r.nodeType?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(8===r.nodeType?(e=r.parentNode).insertBefore(t,r):(e=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==e.onclick||(e.onclick=jn));else if(4!==n&&null!==(t=t.child))for(Ea(t,e,r),t=t.sibling;null!==t;)Ea(t,e,r),t=t.sibling}function Sa(t,e,r){var n=t.tag,i=5===n||6===n;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(4!==n&&null!==(t=t.child))for(Sa(t,e,r),t=t.sibling;null!==t;)Sa(t,e,r),t=t.sibling}function Ma(t,e){for(var r,n,i=e,o=!1;;){if(!o){o=i.return;t:for(;;){if(null===o)throw Error(s(160));switch(r=o.stateNode,o.tag){case 5:n=!1;break t;case 3:case 4:r=r.containerInfo,n=!0;break t}o=o.return}o=!0}if(5===i.tag||6===i.tag){t:for(var a=t,l=i,u=l;;)if(va(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break t;for(;null===u.sibling;){if(null===u.return||u.return===l)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}n?(a=r,l=i.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):r.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){r=i.stateNode.containerInfo,n=!0,i.child.return=i,i=i.child;continue}}else if(va(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Ta(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var n=r=r.next;do{3===(3&n.tag)&&(t=n.destroy,n.destroy=void 0,void 0!==t&&t()),n=n.next}while(n!==r)}return;case 1:case 12:case 17:return;case 5:if(null!=(r=e.stateNode)){n=e.memoizedProps;var i=null!==t?t.memoizedProps:n;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(r[$n]=n,"input"===t&&"radio"===n.type&&null!=n.name&&et(r,n),Mt(t,i),e=Mt(t,n),i=0;i<o.length;i+=2){var a=o[i],l=o[i+1];"style"===a?xt(r,l):"dangerouslySetInnerHTML"===a?yt(r,l):"children"===a?_t(r,l):b(r,a,l,e)}switch(t){case"input":rt(r,n);break;case"textarea":ut(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,null!=(o=n.value)?st(r,!!n.multiple,o,!1):t!==!!n.multiple&&(null!=n.defaultValue?st(r,!!n.multiple,n.defaultValue,!0):st(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(s(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((r=e.stateNode).hydrate&&(r.hydrate=!1,xe(r.containerInfo)));case 13:return null!==e.memoizedState&&(Ka=Gi(),_a(e.child,!0)),void Aa(e);case 19:return void Aa(e);case 23:case 24:return void _a(e,null!==e.memoizedState)}throw Error(s(163))}function Aa(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var r=t.stateNode;null===r&&(r=t.stateNode=new pa),e.forEach((function(e){var n=Vl.bind(null,t,e);r.has(e)||(r.add(e),e.then(n,n))}))}}function Ca(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Ia=Math.ceil,ka=w.ReactCurrentDispatcher,Ra=w.ReactCurrentOwner,Ba=0,Pa=null,Da=null,La=0,Oa=0,Na=ui(0),za=0,Ua=null,ja=0,Fa=0,Va=0,Ga=0,qa=null,Ka=0,Wa=1/0;function Za(){Wa=Gi()+500}var Ha,Qa=null,Xa=!1,Ya=null,Ja=null,$a=!1,tl=null,el=90,rl=[],nl=[],il=null,ol=0,sl=null,al=-1,ll=0,ul=0,cl=null,hl=!1;function fl(){return 0!==(48&Ba)?Gi():-1!==al?al:al=Gi()}function dl(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===qi()?1:2;if(0===ll&&(ll=ja),0!==Xi.transition){0!==ul&&(ul=null!==qa?qa.pendingLanes:0),t=ll;var e=4186112&~ul;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=qi(),0!==(4&Ba)&&98===t?t=je(12,ll):t=je(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),ll),t}function pl(t,e,r){if(50<ol)throw ol=0,sl=null,Error(s(185));if(null===(t=ml(t,e)))return null;Ge(t,e,r),t===Pa&&(Va|=e,4===za&&_l(t,La));var n=qi();1===e?0!==(8&Ba)&&0===(48&Ba)?vl(t):(gl(t,r),0===Ba&&(Za(),Hi())):(0===(4&Ba)||98!==n&&99!==n||(null===il?il=new Set([t]):il.add(t)),gl(t,r)),qa=t}function ml(t,e){t.lanes|=e;var r=t.alternate;for(null!==r&&(r.lanes|=e),r=t,t=t.return;null!==t;)t.childLanes|=e,null!==(r=t.alternate)&&(r.childLanes|=e),r=t,t=t.return;return 3===r.tag?r.stateNode:null}function gl(t,e){for(var r=t.callbackNode,n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-qe(a),u=1<<l,c=o[l];if(-1===c){if(0===(u&n)||0!==(u&i)){c=e,Ne(u);var h=Oe;o[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=e&&(t.expiredLanes|=u);a&=~u}if(n=ze(t,t===Pa?La:0),e=Oe,0===n)null!==r&&(r!==Ni&&Ai(r),t.callbackNode=null,t.callbackPriority=0);else{if(null!==r){if(t.callbackPriority===e)return;r!==Ni&&Ai(r)}15===e?(r=vl.bind(null,t),null===Ui?(Ui=[r],ji=Ti(Bi,Qi)):Ui.push(r),r=Ni):14===e?r=Zi(99,vl.bind(null,t)):(r=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,t))}}(e),r=Zi(r,yl.bind(null,t))),t.callbackPriority=e,t.callbackNode=r}}function yl(t){if(al=-1,ul=ll=0,0!==(48&Ba))throw Error(s(327));var e=t.callbackNode;if(Ll()&&t.callbackNode!==e)return null;var r=ze(t,t===Pa?La:0);if(0===r)return null;var n=r,i=Ba;Ba|=16;var o=Tl();for(Pa===t&&La===n||(Za(),Sl(t,n));;)try{Il();break}catch(l){Ml(t,l)}if(ro(),ka.current=o,Ba=i,null!==Da?n=0:(Pa=null,La=0,n=za),0!==(ja&Va))Sl(t,0);else if(0!==n){if(2===n&&(Ba|=64,t.hydrate&&(t.hydrate=!1,Zn(t.containerInfo)),0!==(r=Ue(t))&&(n=Al(t,r))),1===n)throw e=Ua,Sl(t,0),_l(t,r),gl(t,Gi()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,n){case 0:case 1:throw Error(s(345));case 2:case 5:Bl(t);break;case 3:if(_l(t,r),(62914560&r)===r&&10<(n=Ka+500-Gi())){if(0!==ze(t,0))break;if(((i=t.suspendedLanes)&r)!==r){fl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Kn(Bl.bind(null,t),n);break}Bl(t);break;case 4:if(_l(t,r),(4186112&r)===r)break;for(n=t.eventTimes,i=-1;0<r;){var a=31-qe(r);o=1<<a,(a=n[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Gi()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ia(r/1960))-r)){t.timeoutHandle=Kn(Bl.bind(null,t),r);break}Bl(t);break;default:throw Error(s(329))}}return gl(t,Gi()),t.callbackNode===e?yl.bind(null,t):null}function _l(t,e){for(e&=~Ga,e&=~Va,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-qe(e),n=1<<r;t[r]=-1,e&=~n}}function vl(t){if(0!==(48&Ba))throw Error(s(327));if(Ll(),t===Pa&&0!==(t.expiredLanes&La)){var e=La,r=Al(t,e);0!==(ja&Va)&&(r=Al(t,e=ze(t,e)))}else r=Al(t,e=ze(t,0));if(0!==t.tag&&2===r&&(Ba|=64,t.hydrate&&(t.hydrate=!1,Zn(t.containerInfo)),0!==(e=Ue(t))&&(r=Al(t,e))),1===r)throw r=Ua,Sl(t,0),_l(t,e),gl(t,Gi()),r;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bl(t),gl(t,Gi()),null}function bl(t,e){var r=Ba;Ba|=1;try{return t(e)}finally{0===(Ba=r)&&(Za(),Hi())}}function wl(t,e){var r=Ba;Ba&=-2,Ba|=8;try{return t(e)}finally{0===(Ba=r)&&(Za(),Hi())}}function xl(t,e){hi(Na,Oa),Oa|=e,ja|=e}function El(){Oa=Na.current,ci(Na)}function Sl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(-1!==r&&(t.timeoutHandle=-1,Wn(r)),null!==Da)for(r=Da.return;null!==r;){var n=r;switch(n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&_i();break;case 3:Lo(),ci(pi),ci(di),Xo();break;case 5:No(n);break;case 4:Lo();break;case 13:case 19:ci(zo);break;case 10:no(n);break;case 23:case 24:El()}r=r.return}Pa=t,Da=Wl(t.current,null),La=Oa=ja=e,za=0,Ua=null,Ga=Va=Fa=0}function Ml(t,e){for(;;){var r=Da;try{if(ro(),Yo.current=Bs,ns){for(var n=ts.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}ns=!1}if($o=0,rs=es=ts=null,is=!1,Ra.current=null,null===r||null===r.return){za=1,Ua=e,Da=null;break}t:{var o=t,s=r.return,a=r,l=e;if(e=La,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&zo.current),f=s;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var m=f.memoizedProps;d=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(d){var g=f.updateQueue;if(null===g){var y=new Set;y.add(u),f.updateQueue=y}else g.add(u);if(0===(2&f.mode)){if(f.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var _=co(-1,1);_.tag=2,ho(a,_)}a.lanes|=1;break t}l=void 0,a=e;var v=o.pingCache;if(null===v?(v=o.pingCache=new ha,l=new Set,v.set(u,l)):void 0===(l=v.get(u))&&(l=new Set,v.set(u,l)),!l.has(a)){l.add(a);var b=Fl.bind(null,o,u,a);u.then(b,b)}f.flags|=4096,f.lanes=e;break t}f=f.return}while(null!==f);l=Error((Z(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==za&&(za=2),l=ua(l,a),f=s;do{switch(f.tag){case 3:o=l,f.flags|=4096,e&=-e,f.lanes|=e,fo(f,fa(0,o,e));break t;case 1:o=l;var w=f.type,x=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Ja||!Ja.has(x)))){f.flags|=4096,e&=-e,f.lanes|=e,fo(f,da(f,o,e));break t}}f=f.return}while(null!==f)}Rl(r)}catch(E){e=E,Da===r&&null!==r&&(Da=r=r.return);continue}break}}function Tl(){var t=ka.current;return ka.current=Bs,null===t?Bs:t}function Al(t,e){var r=Ba;Ba|=16;var n=Tl();for(Pa===t&&La===e||Sl(t,e);;)try{Cl();break}catch(i){Ml(t,i)}if(ro(),Ba=r,ka.current=n,null!==Da)throw Error(s(261));return Pa=null,La=0,za}function Cl(){for(;null!==Da;)kl(Da)}function Il(){for(;null!==Da&&!Ci();)kl(Da)}function kl(t){var e=Ha(t.alternate,t,Oa);t.memoizedProps=t.pendingProps,null===e?Rl(t):Da=e,Ra.current=null}function Rl(t){var e=t;do{var r=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(r=aa(r,e,Oa)))return void(Da=r);if(24!==(r=e).tag&&23!==r.tag||null===r.memoizedState||0!==(1073741824&Oa)||0===(4&r.mode)){for(var n=0,i=r.child;null!==i;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(r=la(e)))return r.flags&=2047,void(Da=r);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Da=e);Da=e=t}while(null!==e);0===za&&(za=5)}function Bl(t){var e=qi();return Wi(99,Pl.bind(null,t,e)),null}function Pl(t,e){do{Ll()}while(null!==tl);if(0!==(48&Ba))throw Error(s(327));var r=t.finishedWork;if(null===r)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(s(177));t.callbackNode=null;var n=r.lanes|r.childLanes,i=n,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var a=t.eventTimes,l=t.expirationTimes;0<o;){var u=31-qe(o),c=1<<u;i[u]=0,a[u]=-1,l[u]=-1,o&=~c}if(null!==il&&0===(24&n)&&il.has(t)&&il.delete(t),t===Pa&&(Da=Pa=null,La=0),1<r.flags?null!==r.lastEffect?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,null!==n){if(i=Ba,Ba|=32,Ra.current=null,Fn=Qe,yn(a=gn())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else t:if(l=(l=a.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,o=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(T){l=null;break t}var h=0,f=-1,d=-1,p=0,m=0,g=a,y=null;e:for(;;){for(var _;g!==l||0!==o&&3!==g.nodeType||(f=h+o),g!==u||0!==c&&3!==g.nodeType||(d=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(_=g.firstChild);)y=g,g=_;for(;;){if(g===a)break e;if(y===l&&++p===o&&(f=h),y===u&&++m===c&&(d=h),null!==(_=g.nextSibling))break;y=(g=y).parentNode}g=_}l=-1===f||-1===d?null:{start:f,end:d}}else l=null;l=l||{start:0,end:0}}else l=null;Vn={focusedElem:a,selectionRange:l},Qe=!1,cl=null,hl=!1,Qa=n;do{try{Dl()}catch(T){if(null===Qa)throw Error(s(330));jl(Qa,T),Qa=Qa.nextEffect}}while(null!==Qa);cl=null,Qa=n;do{try{for(a=t;null!==Qa;){var v=Qa.flags;if(16&v&&_t(Qa.stateNode,""),128&v){var b=Qa.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&v){case 2:xa(Qa),Qa.flags&=-3;break;case 6:xa(Qa),Qa.flags&=-3,Ta(Qa.alternate,Qa);break;case 1024:Qa.flags&=-1025;break;case 1028:Qa.flags&=-1025,Ta(Qa.alternate,Qa);break;case 4:Ta(Qa.alternate,Qa);break;case 8:Ma(a,l=Qa);var x=l.alternate;ba(l),null!==x&&ba(x)}Qa=Qa.nextEffect}}catch(T){if(null===Qa)throw Error(s(330));jl(Qa,T),Qa=Qa.nextEffect}}while(null!==Qa);if(w=Vn,b=gn(),v=w.focusedElem,a=w.selectionRange,b!==v&&v&&v.ownerDocument&&mn(v.ownerDocument.documentElement,v)){null!==a&&yn(v)&&(b=a.start,void 0===(w=a.end)&&(w=b),"selectionStart"in v?(v.selectionStart=b,v.selectionEnd=Math.min(w,v.value.length)):(w=(b=v.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),l=v.textContent.length,x=Math.min(a.start,l),a=void 0===a.end?x:Math.min(a.end,l),!w.extend&&x>a&&(l=a,a=x,x=l),l=pn(v,x),o=pn(v,a),l&&o&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==o.node||w.focusOffset!==o.offset)&&((b=b.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),x>a?(w.addRange(b),w.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),w.addRange(b))))),b=[];for(w=v;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof v.focus&&v.focus(),v=0;v<b.length;v++)(w=b[v]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Qe=!!Fn,Vn=Fn=null,t.current=r,Qa=n;do{try{for(v=t;null!==Qa;){var E=Qa.flags;if(36&E&&ya(v,Qa.alternate,Qa),128&E){b=void 0;var S=Qa.ref;if(null!==S){var M=Qa.stateNode;Qa.tag,b=M,"function"===typeof S?S(b):S.current=b}}Qa=Qa.nextEffect}}catch(T){if(null===Qa)throw Error(s(330));jl(Qa,T),Qa=Qa.nextEffect}}while(null!==Qa);Qa=null,zi(),Ba=i}else t.current=r;if($a)$a=!1,tl=t,el=e;else for(Qa=n;null!==Qa;)e=Qa.nextEffect,Qa.nextEffect=null,8&Qa.flags&&((E=Qa).sibling=null,E.stateNode=null),Qa=e;if(0===(n=t.pendingLanes)&&(Ja=null),1===n?t===sl?ol++:(ol=0,sl=t):ol=0,r=r.stateNode,Si&&"function"===typeof Si.onCommitFiberRoot)try{Si.onCommitFiberRoot(Ei,r,void 0,64===(64&r.current.flags))}catch(T){}if(gl(t,Gi()),Xa)throw Xa=!1,t=Ya,Ya=null,t;return 0!==(8&Ba)||Hi(),null}function Dl(){for(;null!==Qa;){var t=Qa.alternate;hl||null===cl||(0!==(8&Qa.flags)?te(Qa,cl)&&(hl=!0):13===Qa.tag&&Ca(t,Qa)&&te(Qa,cl)&&(hl=!0));var e=Qa.flags;0!==(256&e)&&ga(t,Qa),0===(512&e)||$a||($a=!0,Zi(97,(function(){return Ll(),null}))),Qa=Qa.nextEffect}}function Ll(){if(90!==el){var t=97<el?97:el;return el=90,Wi(t,zl)}return!1}function Ol(t,e){rl.push(e,t),$a||($a=!0,Zi(97,(function(){return Ll(),null})))}function Nl(t,e){nl.push(e,t),$a||($a=!0,Zi(97,(function(){return Ll(),null})))}function zl(){if(null===tl)return!1;var t=tl;if(tl=null,0!==(48&Ba))throw Error(s(331));var e=Ba;Ba|=32;var r=nl;nl=[];for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1],a=i.destroy;if(i.destroy=void 0,"function"===typeof a)try{a()}catch(u){if(null===o)throw Error(s(330));jl(o,u)}}for(r=rl,rl=[],n=0;n<r.length;n+=2){i=r[n],o=r[n+1];try{var l=i.create;i.destroy=l()}catch(u){if(null===o)throw Error(s(330));jl(o,u)}}for(l=t.current.firstEffect;null!==l;)t=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=t;return Ba=e,Hi(),!0}function Ul(t,e,r){ho(t,e=fa(0,e=ua(r,e),1)),e=fl(),null!==(t=ml(t,1))&&(Ge(t,1,e),gl(t,e))}function jl(t,e){if(3===t.tag)Ul(t,t,e);else for(var r=t.return;null!==r;){if(3===r.tag){Ul(r,t,e);break}if(1===r.tag){var n=r.stateNode;if("function"===typeof r.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Ja||!Ja.has(n))){var i=da(r,t=ua(e,t),1);if(ho(r,i),i=fl(),null!==(r=ml(r,1)))Ge(r,1,i),gl(r,i);else if("function"===typeof n.componentDidCatch&&(null===Ja||!Ja.has(n)))try{n.componentDidCatch(e,t)}catch(o){}break}}r=r.return}}function Fl(t,e,r){var n=t.pingCache;null!==n&&n.delete(e),e=fl(),t.pingedLanes|=t.suspendedLanes&r,Pa===t&&(La&r)===r&&(4===za||3===za&&(62914560&La)===La&&500>Gi()-Ka?Sl(t,0):Ga|=r),gl(t,e)}function Vl(t,e){var r=t.stateNode;null!==r&&r.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===qi()?1:2:(0===ll&&(ll=ja),0===(e=Fe(62914560&~ll))&&(e=4194304))),r=fl(),null!==(t=ml(t,e))&&(Ge(t,e,r),gl(t,r))}function Gl(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ql(t,e,r,n){return new Gl(t,e,r,n)}function Kl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Wl(t,e){var r=t.alternate;return null===r?((r=ql(t.tag,e,t.key,t.mode)).elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Zl(t,e,r,n,i,o){var a=2;if(n=t,"function"===typeof t)Kl(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case S:return Hl(r.children,i,o,e);case O:a=8,i|=16;break;case M:a=8,i|=1;break;case T:return(t=ql(12,r,e,8|i)).elementType=T,t.type=T,t.lanes=o,t;case k:return(t=ql(13,r,e,i)).type=k,t.elementType=k,t.lanes=o,t;case R:return(t=ql(19,r,e,i)).elementType=R,t.lanes=o,t;case N:return Ql(r,i,o,e);case z:return(t=ql(24,r,e,i)).elementType=z,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case A:a=10;break t;case C:a=9;break t;case I:a=11;break t;case B:a=14;break t;case P:a=16,n=null;break t;case D:a=22;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=ql(a,r,e,i)).elementType=t,e.type=n,e.lanes=o,e}function Hl(t,e,r,n){return(t=ql(7,t,n,e)).lanes=r,t}function Ql(t,e,r,n){return(t=ql(23,t,n,e)).elementType=N,t.lanes=r,t}function Xl(t,e,r){return(t=ql(6,t,null,e)).lanes=r,t}function Yl(t,e,r){return(e=ql(4,null!==t.children?t.children:[],t.key,e)).lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jl(t,e,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ve(0),this.expirationTimes=Ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.mutableSourceEagerHydrationData=null}function $l(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==n?null:""+n,children:t,containerInfo:e,implementation:r}}function tu(t,e,r,n){var i=e.current,o=fl(),a=dl(i);t:if(r){e:{if(Xt(r=r._reactInternals)!==r||1!==r.tag)throw Error(s(170));var l=r;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(yi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(s(171))}if(1===r.tag){var u=r.type;if(yi(u)){r=bi(r,u,l);break t}}r=l}else r=fi;return null===e.context?e.context=r:e.pendingContext=r,(e=co(o,a)).payload={element:t},null!==(n=void 0===n?null:n)&&(e.callback=n),ho(i,e),pl(i,a,o),a}function eu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function ru(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var r=t.retryLane;t.retryLane=0!==r&&r<e?r:e}}function nu(t,e){ru(t,e),(t=t.alternate)&&ru(t,e)}function iu(t,e,r){var n=null!=r&&null!=r.hydrationOptions&&r.hydrationOptions.mutableSources||null;if(r=new Jl(t,e,null!=r&&!0===r.hydrate),e=ql(3,null,null,2===e?7:1===e?3:0),r.current=e,e.stateNode=r,lo(e),t[ti]=r.current,Bn(8===t.nodeType?t.parentNode:t),n)for(t=0;t<n.length;t++){var i=(e=n[t])._getVersion;i=i(e._source),null==r.mutableSourceEagerHydrationData?r.mutableSourceEagerHydrationData=[e,i]:r.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=r}function ou(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function su(t,e,r,n,i){var o=r._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof i){var a=i;i=function(){var t=eu(s);a.call(t)}}tu(e,s,t,i)}else{if(o=r._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new iu(t,0,e?{hydrate:!0}:void 0)}(r,n),s=o._internalRoot,"function"===typeof i){var l=i;i=function(){var t=eu(s);l.call(t)}}wl((function(){tu(e,s,t,i)}))}return eu(s)}function au(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ou(e))throw Error(s(200));return $l(t,e,null,r)}Ha=function(t,e,r){var n=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||pi.current)Ns=!0;else{if(0===(r&n)){switch(Ns=!1,e.tag){case 3:Zs(e),Ho();break;case 5:Oo(e);break;case 1:yi(e.type)&&wi(e);break;case 4:Do(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;hi(Ji,i._currentValue),i._currentValue=n;break;case 13:if(null!==e.memoizedState)return 0!==(r&e.child.childLanes)?Js(t,e,r):(hi(zo,1&zo.current),null!==(e=oa(t,e,r))?e.sibling:null);hi(zo,1&zo.current);break;case 19:if(n=0!==(r&e.childLanes),0!==(64&t.flags)){if(n)return ia(t,e,r);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(zo,zo.current),n)break;return null;case 23:case 24:return e.lanes=0,Vs(t,e,r)}return oa(t,e,r)}Ns=0!==(16384&t.flags)}else Ns=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=gi(e,di.current),oo(e,r),i=as(null,e,n,t,i,r),e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,yi(n)){var o=!0;wi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,lo(e);var a=n.getDerivedStateFromProps;"function"===typeof a&&yo(e,n,a,t),i.updater=_o,e.stateNode=i,i._reactInternals=e,xo(e,n,t,r),e=Ws(null,e,n,!0,o,r)}else e.tag=0,zs(null,e,i,r),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(o=i._init)(i._payload),e.type=i,o=e.tag=function(t){if("function"===typeof t)return Kl(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===I)return 11;if(t===B)return 14}return 2}(i),t=Yi(i,t),o){case 0:e=qs(null,e,i,t,r);break t;case 1:e=Ks(null,e,i,t,r);break t;case 11:e=Us(null,e,i,t,r);break t;case 14:e=js(null,e,i,Yi(i.type,t),n,r);break t}throw Error(s(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,qs(t,e,n,i=e.elementType===n?i:Yi(n,i),r);case 1:return n=e.type,i=e.pendingProps,Ks(t,e,n,i=e.elementType===n?i:Yi(n,i),r);case 3:if(Zs(e),n=e.updateQueue,null===t||null===n)throw Error(s(282));if(n=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,uo(t,e),po(e,n,null,r),(n=e.memoizedState.element)===i)Ho(),e=oa(t,e,r);else{if((o=(i=e.stateNode).hydrate)&&(Fo=Hn(e.stateNode.containerInfo.firstChild),jo=e,o=Vo=!0),o){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(o=t[i])._workInProgressVersionPrimary=t[i+1],Qo.push(o);for(r=Co(e,null,n,r),e.child=r;r;)r.flags=-3&r.flags|1024,r=r.sibling}else zs(t,e,n,r),Ho();e=e.child}return e;case 5:return Oo(e),null===t&&Ko(e),n=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,qn(n,i)?a=null:null!==o&&qn(n,o)&&(e.flags|=16),Gs(t,e),zs(t,e,a,r),e.child;case 6:return null===t&&Ko(e),null;case 13:return Js(t,e,r);case 4:return Do(e,e.stateNode.containerInfo),n=e.pendingProps,null===t?e.child=Ao(e,null,n,r):zs(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,Us(t,e,n,i=e.elementType===n?i:Yi(n,i),r);case 7:return zs(t,e,e.pendingProps,r),e.child;case 8:case 12:return zs(t,e,e.pendingProps.children,r),e.child;case 10:t:{n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value;var l=e.type._context;if(hi(Ji,l._currentValue),l._currentValue=o,null!==a)if(l=a.value,0===(o=cn(l,o)?0:0|("function"===typeof n._calculateChangedBits?n._calculateChangedBits(l,o):1073741823))){if(a.children===i.children&&!pi.current){e=oa(t,e,r);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===n&&0!==(c.observedBits&o)){1===l.tag&&((c=co(-1,r&-r)).tag=2,ho(l,c)),l.lanes|=r,null!==(c=l.alternate)&&(c.lanes|=r),io(l.return,r),u.lanes|=r;break}c=c.next}}else a=10===l.tag&&l.type===e.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===e){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}zs(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=(o=e.pendingProps).children,oo(e,r),n=n(i=so(i,o.unstable_observedBits)),e.flags|=1,zs(t,e,n,r),e.child;case 14:return o=Yi(i=e.type,e.pendingProps),js(t,e,i,o=Yi(i.type,o),n,r);case 15:return Fs(t,e,e.type,e.pendingProps,n,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Yi(n,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,yi(n)?(t=!0,wi(e)):t=!1,oo(e,r),bo(e,n,i),xo(e,n,i,r),Ws(null,e,n,!0,t,r);case 19:return ia(t,e,r);case 23:case 24:return Vs(t,e,r)}throw Error(s(156,e.tag))},iu.prototype.render=function(t){tu(t,this._internalRoot,null,null)},iu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;tu(null,t,null,(function(){e[ti]=null}))},ee=function(t){13===t.tag&&(pl(t,4,fl()),nu(t,4))},re=function(t){13===t.tag&&(pl(t,67108864,fl()),nu(t,67108864))},ne=function(t){if(13===t.tag){var e=fl(),r=dl(t);pl(t,r,e),nu(t,r)}},ie=function(t,e){return e()},At=function(t,e,r){switch(e){case"input":if(rt(t,r),e=r.name,"radio"===r.type&&null!=e){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=oi(n);if(!i)throw Error(s(90));Y(n),rt(n,i)}}}break;case"textarea":ut(t,r);break;case"select":null!=(e=r.value)&&st(t,!!r.multiple,e,!1)}},Pt=bl,Dt=function(t,e,r,n,i){var o=Ba;Ba|=4;try{return Wi(98,t.bind(null,e,r,n,i))}finally{0===(Ba=o)&&(Za(),Hi())}},Lt=function(){0===(49&Ba)&&(function(){if(null!==il){var t=il;il=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,gl(t,Gi())}))}Hi()}(),Ll())},Ot=function(t,e){var r=Ba;Ba|=2;try{return t(e)}finally{0===(Ba=r)&&(Za(),Hi())}};var lu={Events:[ni,ii,oi,Rt,Bt,Ll,{current:!1}]},uu={findFiberByHostInstance:ri,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cu={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=$t(t))?null:t.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{Ei=hu.inject(cu),Si=hu}catch(gt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lu,e.createPortal=au,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return t=null===(t=$t(e))?null:t.stateNode},e.flushSync=function(t,e){var r=Ba;if(0!==(48&r))return t(e);Ba|=1;try{if(t)return Wi(99,t.bind(null,e))}finally{Ba=r,Hi()}},e.hydrate=function(t,e,r){if(!ou(e))throw Error(s(200));return su(null,t,e,!0,r)},e.render=function(t,e,r){if(!ou(e))throw Error(s(200));return su(null,t,e,!1,r)},e.unmountComponentAtNode=function(t){if(!ou(t))throw Error(s(40));return!!t._reactRootContainer&&(wl((function(){su(null,null,t,!1,(function(){t._reactRootContainer=null,t[ti]=null}))})),!0)},e.unstable_batchedUpdates=bl,e.unstable_createPortal=function(t,e){return au(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ou(r))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return su(t,e,r,!1,n)},e.version="17.0.2"},function(t,e,r){"use strict";t.exports=r(199)},function(t,e,r){"use strict";var n,i,o,s;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,h=null,f=function(){if(null!==c)try{var t=e.unstable_now();c(!0,t),c=null}catch(r){throw setTimeout(f,0),r}};n=function(t){null!==c?setTimeout(n,0,t):(c=t,setTimeout(f,0))},i=function(t,e){h=setTimeout(t,e)},o=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,y=null,_=-1,v=5,b=0;e.unstable_shouldYield=function(){return e.unstable_now()>=b},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<t?Math.floor(1e3/t):5};var w=new MessageChannel,x=w.port2;w.port1.onmessage=function(){if(null!==y){var t=e.unstable_now();b=t+v;try{y(!0,t)?x.postMessage(null):(g=!1,y=null)}catch(r){throw x.postMessage(null),r}}else g=!1},n=function(t){y=t,g||(g=!0,x.postMessage(null))},i=function(t,r){_=d((function(){t(e.unstable_now())}),r)},o=function(){p(_),_=-1}}function E(t,e){var r=t.length;t.push(e);t:for(;;){var n=r-1>>>1,i=t[n];if(!(void 0!==i&&0<T(i,e)))break t;t[n]=e,t[r]=i,r=n}}function S(t){return void 0===(t=t[0])?null:t}function M(t){var e=t[0];if(void 0!==e){var r=t.pop();if(r!==e){t[0]=r;t:for(var n=0,i=t.length;n<i;){var o=2*(n+1)-1,s=t[o],a=o+1,l=t[a];if(void 0!==s&&0>T(s,r))void 0!==l&&0>T(l,s)?(t[n]=l,t[a]=r,n=a):(t[n]=s,t[o]=r,n=o);else{if(!(void 0!==l&&0>T(l,r)))break t;t[n]=l,t[a]=r,n=a}}}return e}return null}function T(t,e){var r=t.sortIndex-e.sortIndex;return 0!==r?r:t.id-e.id}var A=[],C=[],I=1,k=null,R=3,B=!1,P=!1,D=!1;function L(t){for(var e=S(C);null!==e;){if(null===e.callback)M(C);else{if(!(e.startTime<=t))break;M(C),e.sortIndex=e.expirationTime,E(A,e)}e=S(C)}}function O(t){if(D=!1,L(t),!P)if(null!==S(A))P=!0,n(N);else{var e=S(C);null!==e&&i(O,e.startTime-t)}}function N(t,r){P=!1,D&&(D=!1,o()),B=!0;var n=R;try{for(L(r),k=S(A);null!==k&&(!(k.expirationTime>r)||t&&!e.unstable_shouldYield());){var s=k.callback;if("function"===typeof s){k.callback=null,R=k.priorityLevel;var a=s(k.expirationTime<=r);r=e.unstable_now(),"function"===typeof a?k.callback=a:k===S(A)&&M(A),L(r)}else M(A);k=S(A)}if(null!==k)var l=!0;else{var u=S(C);null!==u&&i(O,u.startTime-r),l=!1}return l}finally{k=null,R=n,B=!1}}var z=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){P||B||(P=!0,n(N))},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return S(A)},e.unstable_next=function(t){switch(R){case 1:case 2:case 3:var e=3;break;default:e=R}var r=R;R=e;try{return t()}finally{R=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=z,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=R;R=t;try{return e()}finally{R=r}},e.unstable_scheduleCallback=function(t,r,s){var a=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:I++,callback:r,priorityLevel:t,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>a?(t.sortIndex=s,E(C,t),null===S(A)&&t===S(C)&&(D?o():D=!0,i(O,s-a))):(t.sortIndex=l,E(A,t),P||B||(P=!0,n(N))),t},e.unstable_wrapCallback=function(t){var e=R;return function(){var r=R;R=e;try{return t.apply(this,arguments)}finally{R=r}}}},function(t,e,r){},,function(t,e,r){const n=r(46),{JWT:i}=r(203),o=r(357),s=r(187),{getFieldMask:a}=r(56),l=["https://www.googleapis.com/auth/spreadsheets"],u="JWT",c="API_KEY",h="RAW_ACCESS_TOKEN",f="OAUTH";t.exports=class{constructor(t){return this.spreadsheetId=t,this.authMode=null,this._rawSheets={},this._rawProperties=null,this._spreadsheetUrl=null,this.axios=o.create({baseURL:`https://sheets.googleapis.com/v4/spreadsheets/${t||""}`,paramsSerializer(t){let e="";return n.keys(t).forEach((r=>{const i="object"===typeof t[r],o=i&&t[r].length>=0;i||(e+=`${r}=${encodeURIComponent(t[r])}&`),i&&o&&n.each(t[r],(t=>{e+=`${r}=${encodeURIComponent(t)}&`}))})),e?e.slice(0,-1):e}}),this.axios.interceptors.request.use(this._setAxiosRequestAuth.bind(this)),this.axios.interceptors.response.use(this._handleAxiosResponse.bind(this),this._handleAxiosErrors.bind(this)),this}async createNewSpreadsheetDocument(t){if(this.spreadsheetId)throw new Error("Only call `createNewSpreadsheetDocument()` on a GoogleSpreadsheet object that has no spreadsheetId set");const e=await this.axios.post(this.url,{properties:t});this.spreadsheetId=e.data.spreadsheetId,this.axios.defaults.baseURL+=this.spreadsheetId,this._rawProperties=e.data.properties,n.each(e.data.sheets,(t=>this._updateOrCreateSheet(t)))}async useApiKey(t){this.authMode=c,this.apiKey=t}async useRawAccessToken(t){this.authMode=h,this.accessToken=t}async useOAuth2Client(t){this.authMode=f,this.oAuth2Client=t}async useServiceAccountAuth(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.jwtClient=new i({email:t.client_email,key:t.private_key,scopes:l,subject:e}),await this.renewJwtAuth()}async renewJwtAuth(){this.authMode=u,await this.jwtClient.authorize()}async _setAxiosRequestAuth(t){if(this.authMode===u){if(!this.jwtClient)throw new Error("JWT auth is not set up properly");await this.jwtClient.authorize(),t.headers.Authorization=`Bearer ${this.jwtClient.credentials.access_token}`}else if(this.authMode===h){if(!this.accessToken)throw new Error("Invalid access token");t.headers.Authorization=`Bearer ${this.accessToken}`}else if(this.authMode===c){if(!this.apiKey)throw new Error("Please set API key");t.params=t.params||{},t.params.key=this.apiKey}else{if(this.authMode!==f)throw new Error("You must initialize some kind of auth before making any requests");{const e=await this.oAuth2Client.getAccessToken();t.headers.Authorization=`Bearer ${e.token}`}}return t}async _handleAxiosResponse(t){return t}async _handleAxiosErrors(t){if(t.response&&t.response.data){if(!t.response.data.error)throw t;const{code:e,message:r}=t.response.data.error;throw t.message=`Google API error - [${e}] ${r}`,t}if(403===n.get(t,"response.status")&&this.authMode===c)throw new Error("Sheet is private. Use authentication or make public. (see https://github.com/theoephraim/node-google-spreadsheet#a-note-on-authentication for details)");throw t}async _makeSingleUpdateRequest(t,e){const r=await this.axios.post(":batchUpdate",{requests:[{[t]:e}],includeSpreadsheetInResponse:!0});return this._updateRawProperties(r.data.updatedSpreadsheet.properties),n.each(r.data.updatedSpreadsheet.sheets,(t=>this._updateOrCreateSheet(t))),r.data.replies[0][t]}async _makeBatchUpdateRequest(t,e){const r=await this.axios.post(":batchUpdate",{requests:t,includeSpreadsheetInResponse:!0,...e&&{responseIncludeGridData:!0,..."*"!==e&&{responseRanges:e}}});this._updateRawProperties(r.data.updatedSpreadsheet.properties),n.each(r.data.updatedSpreadsheet.sheets,(t=>this._updateOrCreateSheet(t)))}_ensureInfoLoaded(){if(!this._rawProperties)throw new Error("You must call `doc.loadInfo()` before accessing this property")}_updateRawProperties(t){this._rawProperties=t}_updateOrCreateSheet(t){let{properties:e,data:r}=t;const{sheetId:n}=e;this._rawSheets[n]?(this._rawSheets[n]._rawProperties=e,this._rawSheets[n]._fillCellData(r)):this._rawSheets[n]=new s(this,{properties:e,data:r})}_getProp(t){return this._ensureInfoLoaded(),this._rawProperties[t]}_setProp(t,e){throw new Error("Do not update directly - use `updateProperties()`")}get title(){return this._getProp("title")}get locale(){return this._getProp("locale")}get timeZone(){return this._getProp("timeZone")}get autoRecalc(){return this._getProp("autoRecalc")}get defaultFormat(){return this._getProp("defaultFormat")}get spreadsheetTheme(){return this._getProp("spreadsheetTheme")}get iterativeCalculationSettings(){return this._getProp("iterativeCalculationSettings")}set title(t){this._setProp("title",t)}set locale(t){this._setProp("locale",t)}set timeZone(t){this._setProp("timeZone",t)}set autoRecalc(t){this._setProp("autoRecalc",t)}set defaultFormat(t){this._setProp("defaultFormat",t)}set spreadsheetTheme(t){this._setProp("spreadsheetTheme",t)}set iterativeCalculationSettings(t){this._setProp("iterativeCalculationSettings",t)}async updateProperties(t){await this._makeSingleUpdateRequest("updateSpreadsheetProperties",{properties:t,fields:a(t)})}async loadInfo(t){const e=await this.axios.get("/",{params:{...t&&{includeGridData:!0}}});this._spreadsheetUrl=e.data.spreadsheetUrl,this._rawProperties=e.data.properties,n.each(e.data.sheets,(t=>this._updateOrCreateSheet(t)))}async getInfo(){return this.loadInfo()}resetLocalCache(){this._rawProperties=null,this._rawSheets={}}get sheetCount(){return this._ensureInfoLoaded(),n.values(this._rawSheets).length}get sheetsById(){return this._ensureInfoLoaded(),this._rawSheets}get sheetsByIndex(){return this._ensureInfoLoaded(),n.sortBy(this._rawSheets,"index")}get sheetsByTitle(){return this._ensureInfoLoaded(),n.keyBy(this._rawSheets,"title")}async addSheet(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=(await this._makeSingleUpdateRequest("addSheet",{properties:n.omit(t,"headers","headerValues","headerRowIndex")})).properties.sheetId,r=this.sheetsById[e],i=t.headerValues||t.headers;return i&&await r.setHeaderRow(i,t.headerRowIndex),r}async addWorksheet(t){return this.addSheet(t)}async deleteSheet(t){await this._makeSingleUpdateRequest("deleteSheet",{sheetId:t}),delete this._rawSheets[t]}async addNamedRange(t,e,r){return this._makeSingleUpdateRequest("addNamedRange",{name:t,range:e,namedRangeId:r})}async deleteNamedRange(t){return this._makeSingleUpdateRequest("deleteNamedRange",{namedRangeId:t})}async loadCells(t){const e=this.authMode===c,r=n.isArray(t)?t:[t],i=n.map(r,(t=>{if(n.isString(t))return e?t:{a1Range:t};if(n.isObject(t)){if(e)throw new Error("Only A1 ranges are supported when fetching cells with read-only access (using only an API key)");return{gridRange:t}}throw new Error("Each filter must be an A1 range string or a gridrange object")}));let o;o=this.authMode===c?await this.axios.get("/",{params:{includeGridData:!0,ranges:i}}):await this.axios.post(":getByDataFilter",{includeGridData:!0,dataFilters:i});const{sheets:s}=o.data;n.each(s,(t=>{this._updateOrCreateSheet(t)}))}async _downloadAs(t,e,r){if(["html","xlsx","ods"].includes(t)){if(e)throw new Error(`Cannot specify worksheetId when exporting as ${t}`)}else{if(!["csv","tsv","pdf"].includes(t))throw new Error(`unsupported export fileType - ${t}`);if(void 0===e)throw new Error(`Must specify worksheetId when exporting as ${t}`)}"html"===t&&(t="zip");const n=this._spreadsheetUrl.replace("/edit","/export");return(await this.axios.get(n,{baseUrl:"",params:{id:this.spreadsheetId,format:t,...e&&{gid:e}},responseType:r?"stream":"arraybuffer"})).data}async downloadAsHTML(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._downloadAs("html",null,t)}async downloadAsXLSX(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._downloadAs("xlsx",null,t)}async downloadAsODS(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._downloadAs("ods",null,t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleAuth=e.auth=void 0;const n=r(204);Object.defineProperty(e,"GoogleAuth",{enumerable:!0,get:function(){return n.GoogleAuth}});var i=r(154);Object.defineProperty(e,"Compute",{enumerable:!0,get:function(){return i.Compute}});var o=r(158);Object.defineProperty(e,"GCPEnv",{enumerable:!0,get:function(){return o.GCPEnv}});var s=r(356);Object.defineProperty(e,"IAMAuth",{enumerable:!0,get:function(){return s.IAMAuth}});var a=r(157);Object.defineProperty(e,"IdTokenClient",{enumerable:!0,get:function(){return a.IdTokenClient}});var l=r(177);Object.defineProperty(e,"JWTAccess",{enumerable:!0,get:function(){return l.JWTAccess}});var u=r(159);Object.defineProperty(e,"JWT",{enumerable:!0,get:function(){return u.JWT}});var c=r(42);Object.defineProperty(e,"CodeChallengeMethod",{enumerable:!0,get:function(){return c.CodeChallengeMethod}}),Object.defineProperty(e,"OAuth2Client",{enumerable:!0,get:function(){return c.OAuth2Client}});var h=r(156);Object.defineProperty(e,"LoginTicket",{enumerable:!0,get:function(){return h.LoginTicket}});var f=r(178);Object.defineProperty(e,"UserRefreshClient",{enumerable:!0,get:function(){return f.UserRefreshClient}});var d=r(84);Object.defineProperty(e,"DefaultTransporter",{enumerable:!0,get:function(){return d.DefaultTransporter}});const p=new n.GoogleAuth;e.auth=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleAuth=e.CLOUD_SDK_CLIENT_ID=void 0;const n=r(26),i=r(26),o=r(58),s=r(238),a=r(103),l=r(104),u=r(84),c=r(154),h=r(157),f=r(158),d=r(159),p=r(178);e.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com";class m{constructor(t){this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,t=t||{},this._cachedProjectId=t.projectId||null,this.keyFilename=t.keyFilename||t.keyFile,this.scopes=t.scopes,this.jsonContent=t.credentials||null,this.clientOptions=t.clientOptions}get isGCE(){return this.checkIsGCE}getProjectId(t){if(!t)return this.getProjectIdAsync();this.getProjectIdAsync().then((e=>t(null,e)),t)}getProjectIdAsync(){return this._cachedProjectId?Promise.resolve(this._cachedProjectId):(this._getDefaultProjectIdPromise||(this._getDefaultProjectIdPromise=new Promise((async(t,e)=>{try{const e=this.getProductionProjectId()||await this.getFileProjectId()||await this.getDefaultServiceProjectId()||await this.getGCEProjectId();if(this._cachedProjectId=e,!e)throw new Error("Unable to detect a Project Id in the current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started");t(e)}catch(r){e(r)}}))),this._getDefaultProjectIdPromise)}getApplicationDefault(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if("function"===typeof e?r=e:t=e,!r)return this.getApplicationDefaultAsync(t);this.getApplicationDefaultAsync(t).then((t=>r(null,t.credential,t.projectId)),r)}async getApplicationDefaultAsync(){let t,e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.cachedCredential)return{credential:this.cachedCredential,projectId:await this.getProjectIdAsync()};if(t=await this._tryGetApplicationCredentialsFromEnvironmentVariable(n),t)return t instanceof d.JWT&&(t.defaultScopes=this.defaultScopes,t.scopes=this.scopes),this.cachedCredential=t,e=await this.getProjectId(),{credential:t,projectId:e};if(t=await this._tryGetApplicationCredentialsFromWellKnownFile(n),t)return t instanceof d.JWT&&(t.defaultScopes=this.defaultScopes,t.scopes=this.scopes),this.cachedCredential=t,e=await this.getProjectId(),{credential:t,projectId:e};try{r=await this._checkIsGCE()}catch(i){throw i.message=`Unexpected error determining execution environment: ${i.message}`,i}if(!r)throw new Error("Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.");return n.scopes=this.scopes||this.defaultScopes,this.cachedCredential=new c.Compute(n),e=await this.getProjectId(),{projectId:e,credential:this.cachedCredential}}async _checkIsGCE(){return void 0===this.checkIsGCE&&(this.checkIsGCE=await o.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(t){const e=Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).GOOGLE_APPLICATION_CREDENTIALS||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).google_application_credentials;if(!e||0===e.length)return null;try{return this._getApplicationCredentialsFromFilePath(e,t)}catch(r){throw r.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${r.message}`,r}}async _tryGetApplicationCredentialsFromWellKnownFile(t){let e=null;if(this._isWindows())e=Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).APPDATA;else{const t=Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).HOME;t&&(e=a.join(t,".config"))}if(e&&(e=a.join(e,"gcloud","application_default_credentials.json"),i.existsSync(e)||(e=null)),!e)return null;return await this._getApplicationCredentialsFromFilePath(e,t)}async _getApplicationCredentialsFromFilePath(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||0===t.length)throw new Error("The file path is invalid.");try{if(t=i.realpathSync(t),!i.lstatSync(t).isFile())throw new Error}catch(n){throw n.message=`The file at ${t} does not exist, or it is not a file. ${n.message}`,n}const r=i.createReadStream(t);return this.fromStream(r,e)}fromJSON(t,e){let r;if(!t)throw new Error("Must pass in a JSON object containing the Google auth settings.");return e=e||{},"authorized_user"===t.type?r=new p.UserRefreshClient(e):(e.scopes=this.scopes,r=new d.JWT(e),r.defaultScopes=this.defaultScopes),r.fromJSON(t),r}_cacheClientFromJSON(t,e){let r;return e=e||{},"authorized_user"===t.type?r=new p.UserRefreshClient(e):(e.scopes=this.scopes,r=new d.JWT(e),r.defaultScopes=this.defaultScopes),r.fromJSON(t),this.jsonContent=t,this.cachedCredential=r,this.cachedCredential}fromStream(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n={};if("function"===typeof e?r=e:n=e,!r)return this.fromStreamAsync(t,n);this.fromStreamAsync(t,n).then((t=>r(null,t)),r)}fromStreamAsync(t,e){return new Promise(((r,n)=>{if(!t)throw new Error("Must pass in a stream containing the Google auth settings.");let i="";t.setEncoding("utf8").on("error",n).on("data",(t=>i+=t)).on("end",(()=>{try{try{const t=JSON.parse(i),n=this._cacheClientFromJSON(t,e);return r(n)}catch(t){if(!this.keyFilename)throw t;const e=new d.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=e,r(e)}}catch(t){return n(t)}}))}))}fromAPIKey(t,e){e=e||{};const r=new d.JWT(e);return r.fromAPIKey(t),r}_isWindows(){const t=s.platform();return!!(t&&t.length>=3&&"win"===t.substring(0,3).toLowerCase())}async getDefaultServiceProjectId(){return new Promise((t=>{n.exec("gcloud config config-helper --format json",((e,r)=>{if(!e&&r)try{const e=JSON.parse(r).configuration.properties.core.project;return void t(e)}catch(n){}t(null)}))}))}getProductionProjectId(){return Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).GCLOUD_PROJECT||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).GOOGLE_CLOUD_PROJECT||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).gcloud_project||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){const t=await this.getClient();if(t&&t.projectId)return t.projectId}const t=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return t?t.projectId:null}async getGCEProjectId(){try{return await o.project("project-id")}catch(t){return null}}getCredentials(t){if(!t)return this.getCredentialsAsync();this.getCredentialsAsync().then((e=>t(null,e)),t)}async getCredentialsAsync(){if(await this.getClient(),this.jsonContent){return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key}}if(!await this._checkIsGCE())throw new Error("Unknown error.");const t=await o.instance({property:"service-accounts/",params:{recursive:"true"}});if(!t||!t.default||!t.default.email)throw new Error("Failure from metadata server.");return{client_email:t.default.email}}async getClient(t){if(t)throw new Error("Passing options to getClient is forbidden in v5.0.0. Use new GoogleAuth(opts) instead.");if(!this.cachedCredential)if(this.jsonContent)this._cacheClientFromJSON(this.jsonContent,this.clientOptions);else if(this.keyFilename){const t=a.resolve(this.keyFilename),e=i.createReadStream(t);await this.fromStreamAsync(e,this.clientOptions)}else await this.getApplicationDefaultAsync(this.clientOptions);return this.cachedCredential}async getIdTokenClient(t){const e=await this.getClient();if(!("fetchIdToken"in e))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new h.IdTokenClient({targetAudience:t,idTokenProvider:e})}async getAccessToken(){const t=await this.getClient();return(await t.getAccessToken()).token}async getRequestHeaders(t){return(await this.getClient()).getRequestHeaders(t)}async authorizeRequest(t){const e=(t=t||{}).url||t.uri,r=await this.getClient(),n=await r.getRequestHeaders(e);return t.headers=Object.assign(t.headers||{},n),t}async request(t){return(await this.getClient()).request(t)}getEnv(){return f.getEnv()}async sign(t){const e=await this.getClient(),r=l.createCrypto();if(e instanceof d.JWT&&e.key){return await r.sign(e.key,t)}if(!await this.getProjectId())throw new Error("Cannot sign data without a project ID.");const n=await this.getCredentials();if(!n.client_email)throw new Error("Cannot sign data without `client_email`.");const i=`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${n.client_email}:signBlob`;return(await this.request({method:"POST",url:i,data:{payload:r.encodeBase64StringUtf8(t)}})).data.signedBlob}}e.GoogleAuth=m,m.DefaultTransporter=u.DefaultTransporter},function(t,e,r){"use strict";(function(t){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Gaxios=void 0;const i=n(r(207)),o=r(208),s=n(r(222)),a=n(r(63)),l=n(r(223)),u=r(48),c=r(101),h=r(224),f="undefined"!==typeof window&&window&&window.fetch?window.fetch:s.default;function d(t,e){return!!p(t,e)}function p(t,e){e=e.toLowerCase();for(const r of Object.keys((null===t||void 0===t?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}let m;function g(){const t=Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).HTTPS_PROXY||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).https_proxy||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).HTTP_PROXY||Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).http_proxy;return t&&(m=r(225)),t}function y(t){return function(t){var e;const r=null!==(e=Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).NO_PROXY)&&void 0!==e?e:Object({NODE_ENV:"production",PUBLIC_URL:"/ncdvshelterfinder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SPREADSHEET_ID:"1GprlUO2QiokH8pGwnV_7LZMroN-zVVXZt_H7AUrBPH0",REACT_APP_SHEET_ID:"0",REACT_APP_GOOGLE_CLIENT_EMAIL:"shelter-finder@shelter-finder.iam.gserviceaccount.com",REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY:"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDD7/pgAAtVSrBS\\n6Zl+1qnSndd5K8svjW1rq1rcKQEuFk4HNpu3GZfaf3/ICWgWJbJkrHCcE/h5FJTg\\nPFvnf4ORmGwzAQPcRNIJpE6dIT9FbrsZBIpI6+B2/x2a6GiU98usytToBi/Z0yvd\\n/NIRPcayfQdwxI4OUZpCWq1nl6VLNl9Aong316TK5XpYfuRMBufqcvnee6KE8f/j\\noDnYHNSL2+AkIb9Mnm7yPyNMvH5g+MMbaCQjdKZv7NW5NBi7dufPvRaSCZi7TO8F\\nWWTINSR9ngY5IPjHB1rdDCDqu4XYg4NRKGuJiHceTcRdWAp4/dkkljdnXCc+Qm8b\\nSKd+QB0PAgMBAAECggEABu/pLRrzS8VwMWSkkvFmDoHuI2kh3Ct6s0mG1wKl+wwT\\nySeYIxxx3EI6s59kTbHEpicreYCE10Hw9MYjpDJHOzwVS0epllPix9qcZJh3wAKS\\noekfku4JrXeM2cjeuF9+7j2O2i7V5OAYI9eUAcOZKa/0N9GNt1i7ncZ4xeaAQLBl\\nIP/5jBzj7UHJZVdyffru9Brq/eOKAkEQEKc3geG77B/QEa+DYDPIWH/6zmtmdkuX\\nQb5lw9P14JfQ3naCjmRY/CDaWMIu/FDVFpktoUaUGztkrGgFMI4oPJnI1DDQTsIb\\n3GEexjMEZOJAEkqz0ODoGzl3VmKeVsK+LacQdIjL2QKBgQD/2dCXibnlxc0YM8vY\\nb+D+PQp1cqXesNChzcFtN0UXnK4LTA3IfqbhZUKwJ69oTaCBlm8bRajPlZXT25Xc\\nnRsHgPSx2peMokpesP+GD3Myfy/X8bDbmDozVRk2ZbAeil+8Bq4UWD4KkM3r747x\\nx5CyNvTIifjl8PcE3NWteDDiAwKBgQDEDTik1dwiAWmWRy0WqWxiMGty3QwrHo7H\\nVXZWPAMecadkgs2RQn5jVkz0xiU5fOx6J6LGWZQxQvcw1cebKNBg+O2PA/SO0biG\\ndnM4cVChzjws51aiw7UNVhPuPKJ2ZNu9KQzglyW6tp4ncCoG5x0Xd7xwPe4wkErC\\ngBFvFxiRBQKBgQCeerpVk68938dJ7ZOgDrUMZp0a4RhTl6yz/TKKR0kZ9ihswQBs\\np98RENs9KGfjsOnyO0+5Ue3eH6c+Iu9yRzKd9Egd/uwO5dwxSWwOC3Xs2pG1LnXB\\noEq0z0qdwmFUmZvxaSXdXkeX3dhgA/TEWTyM17PKoIQ3UoqATZZiLGgDJwKBgB0W\\nBRBXdihJY1vbRXI2QpEys84/wz1mdDJYmIzkrGXI4NfFnC/v2IZuWE58Uyt7QC5D\\nUR/yTE0erUO+g7WeUYQBimUMZi0GKkUwr5lxHlBTI5RZ4f2V4XeQDLbsogHEpuEi\\nhPmRExTnYQFi36lUgnln1zojxgHIdn7ytyNvHsLtAoGBAPZkBpDuu4cQm9V9eXWX\\ngOr3NQGd8siDWWqqgKrlymuwTgaWU4oLL7Zr108h52wvdQ0TDvmNB8/zqUnBzy6H\\nn8uD9lKjSpwIT2AYlVUCUER0qtiqzNjFaq7dAGJtaWJpj1C1bQg6V8mV1tbwTa0H\\n54j+b4Ppxge8/t/e4uW1Ct1c\\n-----END PRIVATE KEY-----\\n",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoiY29sbGVlbm1jZW5hbmV5IiwiYSI6ImNqOG85MjF2ZDAwdWszNG8wbDRqaXY4ZW8ifQ.jZ5iSwd4Gf_HRfMya60MUA"}).no_proxy;if(!r)return!1;const n=r.split(","),i=new u.URL(t);return!!n.find((t=>t.startsWith("*.")||t.startsWith(".")?(t=t.replace(/^\*\./,"."),i.hostname.endsWith(t)):t===i.origin||t===i.hostname))}(t)?void 0:g()}g();e.Gaxios=class{constructor(t){this.agentCache=new Map,this.defaults=t||{}}async request(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=this.validateOpts(t),this._request(t)}async _defaultAdapter(t){const e=t.fetchImplementation||f,r=await e(t.url,t),n=await this.getResponseData(t,r);return this.translateResponse(t,r,n)}async _request(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let e;if(e=t.adapter?await t.adapter(t,this._defaultAdapter.bind(this)):await this._defaultAdapter(t),!t.validateStatus(e.status))throw new c.GaxiosError(`Request failed with status code ${e.status}`,t,e);return e}catch(e){const r=e;r.config=t;const{shouldRetry:n,config:i}=await h.getRetryConfig(e);if(n&&i)return r.config.retryConfig.currentRetryAttempt=i.retryConfig.currentRetryAttempt,this._request(r.config);throw r}}async getResponseData(t,e){switch(t.responseType){case"stream":return e.body;case"json":{let t=await e.text();try{t=JSON.parse(t)}catch(r){}return t}case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();default:return e.text()}}validateOpts(e){const r=i.default(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");const n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let t=r.paramsSerializer(r.params);t.startsWith("?")&&(t=t.slice(1));const e=r.url.includes("?")?"&":"?";r.url=r.url+e+t}if("number"===typeof e.maxContentLength&&(r.size=e.maxContentLength),"number"===typeof e.maxRedirects&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){const e="undefined"!==typeof FormData&&(null===r||void 0===r?void 0:r.data)instanceof FormData;l.default.readable(r.data)?r.body=r.data:"undefined"!==typeof t&&t.isBuffer(r.data)?(r.body=r.data,d(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):"object"===typeof r.data?e||("application/x-www-form-urlencoded"===p(r,"content-type")?r.body=r.paramsSerializer(r.data):(d(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",r.headers.Accept||"json"!==r.responseType||(r.headers.Accept="application/json"),r.method=r.method||"GET";const s=y(r.url);if(s)if(this.agentCache.has(s))r.agent=this.agentCache.get(s);else{if(r.cert&&r.key){const t=new u.URL(s);r.agent=new m({port:t.port,host:t.host,protocol:t.protocol,cert:r.cert,key:r.key})}else r.agent=new m(s);this.agentCache.set(s,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new o.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(t){return t>=200&&t<300}paramsSerializer(t){return a.default.stringify(t)}translateResponse(t,e,r){const n={};return e.headers.forEach(((t,e)=>{n[e]=t})),{config:t,data:r,headers:n,status:e.status,statusText:e.statusText,request:{responseURL:e.url}}}}}).call(this,r(3).Buffer)},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=u}return(d?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*l-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[r+d]=255&s,d+=p,s/=256,u-=8);t[r+d-p]|=128*m}},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(t){return"function"===typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},l=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,r=n.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!o)return!1;for(e in t);return"undefined"===typeof e||n.call(t,e)},u=function(t,e){o&&"__proto__"===e.name?o(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},c=function(t,e){if("__proto__"===e){if(!n.call(t,e))return;if(s)return s(t,e).value}return t[e]};t.exports=function t(){var e,r,n,i,o,s,h=arguments[0],f=1,d=arguments.length,p=!1;for("boolean"===typeof h&&(p=h,h=arguments[1]||{},f=2),(null==h||"object"!==typeof h&&"function"!==typeof h)&&(h={});f<d;++f)if(null!=(e=arguments[f]))for(r in e)n=c(h,r),h!==(i=c(e,r))&&(p&&i&&(l(i)||(o=a(i)))?(o?(o=!1,s=n&&a(n)?n:[]):s=n&&l(n)?n:{},u(h,{name:r,newValue:t(p,s,i)})):"undefined"!==typeof i&&u(h,{name:r,newValue:i}));return h}},function(t,e,r){var n=r(209),i=r(48),o=t.exports;for(var s in n)n.hasOwnProperty(s)&&(o[s]=n[s]);function a(t){if("string"===typeof t&&(t=i.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}o.request=function(t,e){return t=a(t),n.request.call(this,t,e)},o.get=function(t,e){return t=a(t),n.get.call(this,t,e)}},function(t,e,r){(function(t){var n=r(210),i=r(95),o=r(21),s=r(217),a=r(48),l=e;l.request=function(e,r){e="string"===typeof e?a.parse(e):o(e);var i=-1===t.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||i,l=e.hostname||e.host,u=e.port,c=e.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]"),e.url=(l?s+"//"+l:"")+(u?":"+u:"")+c,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var h=new n(e);return r&&h.on("response",r),h},l.get=function(t,e){var r=l.request(t,e);return r.end(),r},l.ClientRequest=n,l.IncomingMessage=i.IncomingMessage,l.Agent=function(){},l.Agent.defaultMaxSockets=4,l.globalAgent=new l.Agent,l.STATUS_CODES=s,l.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,r(6))},function(t,e,r){(function(e,n,i){var o=r(94),s=r(0),a=r(95),l=r(35),u=r(216),c=a.IncomingMessage,h=a.readyStates;var f=t.exports=function(t){var r,n=this;l.Writable.call(n),n._opts=t,n._body=[],n._headers={},t.auth&&n.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach((function(e){n.setHeader(e,t.headers[e])}));var i=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!o.abortController)i=!1,r=!0;else if("prefer-streaming"===t.mode)r=!1;else if("allow-wrong-content-type"===t.mode)r=!o.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");r=!0}n._mode=function(t,e){return o.fetch&&e?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&t?"arraybuffer":o.vbArray&&t?"text:vbarray":"text"}(r,i),n._fetchTimer=null,n.on("finish",(function(){n._onFinish()}))};s(f,l.Writable),f.prototype.setHeader=function(t,e){var r=t.toLowerCase();-1===d.indexOf(r)&&(this._headers[r]={name:t,value:e})},f.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},f.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},f.prototype._onFinish=function(){var t=this;if(!t._destroyed){var r=t._opts,s=t._headers,a=null;"GET"!==r.method&&"HEAD"!==r.method&&(a=o.arraybuffer?u(e.concat(t._body)):o.blobConstructor?new n.Blob(t._body.map((function(t){return u(t)})),{type:(s["content-type"]||{}).value||""}):e.concat(t._body).toString());var l=[];if(Object.keys(s).forEach((function(t){var e=s[t].name,r=s[t].value;Array.isArray(r)?r.forEach((function(t){l.push([e,t])})):l.push([e,r])})),"fetch"===t._mode){var c=null;if(o.abortController){var f=new AbortController;c=f.signal,t._fetchAbortController=f,"requestTimeout"in r&&0!==r.requestTimeout&&(t._fetchTimer=n.setTimeout((function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()}),r.requestTimeout))}n.fetch(t._opts.url,{method:t._opts.method,headers:l,body:a||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:c}).then((function(e){t._fetchResponse=e,t._connect()}),(function(e){n.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)}))}else{var d=t._xhr=new n.XMLHttpRequest;try{d.open(t._opts.method,t._opts.url,!0)}catch(p){return void i.nextTick((function(){t.emit("error",p)}))}"responseType"in d&&(d.responseType=t._mode.split(":")[0]),"withCredentials"in d&&(d.withCredentials=!!r.withCredentials),"text"===t._mode&&"overrideMimeType"in d&&d.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in r&&(d.timeout=r.requestTimeout,d.ontimeout=function(){t.emit("requestTimeout")}),l.forEach((function(t){d.setRequestHeader(t[0],t[1])})),t._response=null,d.onreadystatechange=function(){switch(d.readyState){case h.LOADING:case h.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(d.onprogress=function(){t._onXHRProgress()}),d.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{d.send(a)}catch(p){return void i.nextTick((function(){t.emit("error",p)}))}}}},f.prototype._onXHRProgress=function(){var t=this;(function(t){try{var e=t.status;return null!==e&&0!==e}catch(r){return!1}})(t._xhr)&&!t._destroyed&&(t._response||t._connect(),t._response._onXHRProgress())},f.prototype._connect=function(){var t=this;t._destroyed||(t._response=new c(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",(function(e){t.emit("error",e)})),t.emit("response",t._response))},f.prototype._write=function(t,e,r){this._body.push(t),r()},f.prototype.abort=f.prototype.destroy=function(){var t=this;t._destroyed=!0,n.clearTimeout(t._fetchTimer),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort()},f.prototype.end=function(t,e,r){"function"===typeof t&&(r=t,t=void 0),l.Writable.prototype.end.call(this,t,e,r)},f.prototype.flushHeaders=function(){},f.prototype.setTimeout=function(){},f.prototype.setNoDelay=function(){},f.prototype.setSocketKeepAlive=function(){};var d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,r(3).Buffer,r(6),r(5))},,function(t,e,r){"use strict";var n=r(60).Buffer,i=r(213);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,r,i,o=n.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,r=o,i=a,e.copy(r,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},,function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,i=1,o={},s=!1,a=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){c(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"===typeof r.data&&0===r.data.indexOf(e)&&c(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),n=function(r){t.postMessage(e+r,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){c(t.data)},n=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;n=function(e){var r=a.createElement("script");r.onreadystatechange=function(){c(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():n=function(t){setTimeout(c,0,t)},l.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var s={callback:t,args:e};return o[i]=s,n(i),i++},l.clearImmediate=u}function u(t){delete o[t]}function c(t){if(s)setTimeout(c,0,t);else{var e=o[t];if(e){s=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{u(t),s=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,r(6),r(5))},function(t,e,r){"use strict";t.exports=o;var n=r(100),i=Object.create(r(36));function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=r(0),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){var n=r(3).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"===typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(n.isBuffer(t)){for(var e=new Uint8Array(t.length),r=t.length,i=0;i<r;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,r){(function(t,n){var i;!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,l=2147483647,u=36,c=/^xn--/,h=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,m=String.fromCharCode;function g(t){throw new RangeError(d[t])}function y(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function _(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+y((t=t.replace(f,".")).split("."),e).join(".")}function v(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function b(t){return y(t,(function(t){var e="";return t>65535&&(e+=m((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=m(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,r){var n=0;for(t=r?p(t/700):t>>1,t+=p(t/e);t>455;n+=u)t=p(t/35);return p(n+36*t/(t+38))}function E(t){var e,r,n,i,o,s,a,c,h,f,d,m=[],y=t.length,_=0,v=128,w=72;for((r=t.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&g("not-basic"),m.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=_,s=1,a=u;i>=y&&g("invalid-input"),((c=(d=t.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:u)>=u||c>p((l-_)/s))&&g("overflow"),_+=c*s,!(c<(h=a<=w?1:a>=w+26?26:a-w));a+=u)s>p(l/(f=u-h))&&g("overflow"),s*=f;w=x(_-o,e=m.length+1,0==o),p(_/e)>l-v&&g("overflow"),v+=p(_/e),_%=e,m.splice(_++,0,v)}return b(m)}function S(t){var e,r,n,i,o,s,a,c,h,f,d,y,_,b,E,S=[];for(y=(t=v(t)).length,e=128,r=0,o=72,s=0;s<y;++s)(d=t[s])<128&&S.push(m(d));for(n=i=S.length,i&&S.push("-");n<y;){for(a=l,s=0;s<y;++s)(d=t[s])>=e&&d<a&&(a=d);for(a-e>p((l-r)/(_=n+1))&&g("overflow"),r+=(a-e)*_,e=a,s=0;s<y;++s)if((d=t[s])<e&&++r>l&&g("overflow"),d==e){for(c=r,h=u;!(c<(f=h<=o?1:h>=o+26?26:h-o));h+=u)E=c-f,b=u-f,S.push(m(w(f+E%b,0))),c=p(E/b);S.push(m(w(c,0))),o=x(r,_,n==i),r=0,++n}++r,++e}return S.join("")}a={version:"1.4.1",ucs2:{decode:v,encode:b},decode:E,encode:S,toASCII:function(t){return _(t,(function(t){return h.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return _(t,(function(t){return c.test(t)?E(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return a}.call(e,r,e,t))||(t.exports=i)}()}).call(this,r(12)(t),r(6))},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"===typeof t},isObject:function(t){return"object"===typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!==typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"===typeof o.maxKeys&&(l=o.maxKeys);var u=t.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var h,f,d,p,m=t[c].replace(a,"%20"),g=m.indexOf(r);g>=0?(h=m.substr(0,g),f=m.substr(g+1)):(h=m,f=""),d=decodeURIComponent(h),p=decodeURIComponent(f),n(s,d)?i(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"===typeof t?o(s(t),(function(s){var a=encodeURIComponent(n(s))+r;return i(t[s])?o(t[s],(function(t){return a+encodeURIComponent(n(t))})).join(e):a+encodeURIComponent(n(t[s]))})).join(e):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){"use strict";var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n)return n;throw new Error("unable to locate global object")}();t.exports=e=n.fetch,n.fetch&&(e.default=n.fetch.bind(n)),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response},function(t,e,r){"use strict";const n=t=>null!==t&&"object"===typeof t&&"function"===typeof t.pipe;n.writable=t=>n(t)&&!1!==t.writable&&"function"===typeof t._write&&"object"===typeof t._writableState,n.readable=t=>n(t)&&!1!==t.readable&&"function"===typeof t._read&&"object"===typeof t._readableState,n.duplex=t=>n.writable(t)&&n.readable(t),n.transform=t=>n.duplex(t)&&"function"===typeof t._transform,t.exports=n},function(t,e,r){"use strict";function n(t){const e=i(t);if("AbortError"===t.name)return!1;if(!e||0===e.retry)return!1;if(!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries)return!1;if(!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(const[n,i]of e.statusCodesToRetry){const e=t.response.status;if(e>=n&&e<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function i(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}Object.defineProperty(e,"__esModule",{value:!0}),e.getRetryConfig=void 0,e.getRetryConfig=async function(t){var e;let r=i(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=void 0===r.retry||null===r.retry?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=void 0===r.noResponseRetries||null===r.noResponseRetries?2:r.noResponseRetries,r.statusCodesToRetry=r.statusCodesToRetry||[[100,199],[429,429],[500,599]],t.config.retryConfig=r;const o=r.shouldRetry||n;if(!await o(t))return{shouldRetry:!1,config:t.config};const s=(r.currentRetryAttempt?0:null!==(e=r.retryDelay)&&void 0!==e?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;const a=new Promise((t=>{setTimeout(t,s)}));return r.onRetryAttempt&&r.onRetryAttempt(t),await a,{shouldRetry:!0,config:t.config}}},function(t,e,r){"use strict";const n=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(r(226));function i(t){return new n.default(t)}!function(t){t.HttpsProxyAgent=n.default,t.prototype=n.default.prototype}(i||(i={})),t.exports=i},function(t,e,r){"use strict";(function(t){var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{l(n.next(t))}catch(e){o(e)}}function a(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(r(26)),s=i(r(26)),a=i(r(48)),l=i(r(227)),u=i(r(64)),c=r(232),h=i(r(234)),f=u.default("https-proxy-agent:agent");class d extends c.Agent{constructor(t){let e;if(e="string"===typeof t?a.default.parse(t):t,!e)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");f("creating new HttpsProxyAgent instance: %o",e),super(e);const r=Object.assign({},e);var n;this.secureProxy=e.secureProxy||"string"===typeof(n=r.protocol)&&/^https:?$/i.test(n),r.host=r.hostname||r.host,"string"===typeof r.port&&(r.port=parseInt(r.port,10)),!r.port&&r.host&&(r.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in r)&&(r.ALPNProtocols=["http 1.1"]),r.host&&r.path&&(delete r.path,delete r.pathname),this.proxy=r}callback(e,r){return n(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:i}=this;let a;i?(f("Creating `tls.Socket`: %o",n),a=s.default.connect(n)):(f("Creating `net.Socket`: %o",n),a=o.default.connect(n));const u=Object.assign({},n.headers);let c=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r\n`;n.auth&&(u["Proxy-Authorization"]=`Basic ${t.from(n.auth).toString("base64")}`);let{host:d,port:m,secureEndpoint:g}=r;(function(t,e){return Boolean(!e&&80===t||e&&443===t)})(m,g)||(d+=`:${m}`),u.Host=d,u.Connection="close";for(const t of Object.keys(u))c+=`${t}: ${u[t]}\r\n`;const y=h.default(a);a.write(`${c}\r\n`);const{statusCode:_,buffered:v}=yield y;if(200===_){if(e.once("socket",p),r.secureEndpoint){f("Upgrading socket connection to TLS");const t=r.servername||r.host;return s.default.connect(Object.assign(Object.assign({},function(t){const e={};let r;for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(r in t)i.includes(r)||(e[r]=t[r]);return e}(r,"host","hostname","path","port")),{socket:a,servername:t}))}return a}a.destroy();const b=new o.default.Socket({writable:!1});return b.readable=!0,e.once("socket",(t=>{f("replaying proxy buffer for failed request"),l.default(t.listenerCount("data")>0),t.push(v),t.push(null)})),b}))}}function p(t){t.resume()}e.default=d}).call(this,r(3).Buffer)},function(t,e,r){"use strict";(function(e){var n=r(45);function i(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function o(t){return e.Buffer&&"function"===typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var s=r(22),a=Object.prototype.hasOwnProperty,l=Array.prototype.slice,u="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function h(t){return!o(t)&&("function"===typeof e.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var f=t.exports=_,d=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(s.isFunction(t)){if(u)return t.name;var e=t.toString().match(d);return e&&e[1]}}function m(t,e){return"string"===typeof t?t.length<e?t:t.slice(0,e):t}function g(t){if(u||!s.isFunction(t))return s.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function y(t,e,r,n,i){throw new f.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function _(t,e){t||y(t,!0,e,"==",f.ok)}function v(t,e,r,n){if(t===e)return!0;if(o(t)&&o(e))return 0===i(t,e);if(s.isDate(t)&&s.isDate(e))return t.getTime()===e.getTime();if(s.isRegExp(t)&&s.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===typeof t||null!==e&&"object"===typeof e){if(h(t)&&h(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;var a=(n=n||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===n.expected.indexOf(e)||(n.actual.push(t),n.expected.push(e),function(t,e,r,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(s.isPrimitive(t)||s.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=b(t),o=b(e);if(i&&!o||!i&&o)return!1;if(i)return v(t=l.call(t),e=l.call(e),r);var a,u,c=E(t),h=E(e);if(c.length!==h.length)return!1;for(c.sort(),h.sort(),u=c.length-1;u>=0;u--)if(c[u]!==h[u])return!1;for(u=c.length-1;u>=0;u--)if(!v(t[a=c[u]],e[a],r,n))return!1;return!0}(t,e,r,n))}return r?t===e:t==e}function b(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function w(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(r){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,r,n){var i;if("function"!==typeof e)throw new TypeError('"block" argument must be a function');"string"===typeof r&&(n=r,r=null),i=function(t){var e;try{t()}catch(r){e=r}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&y(i,r,"Missing expected exception"+n);var o="string"===typeof n,a=!t&&i&&!r;if((!t&&s.isError(i)&&o&&w(i,r)||a)&&y(i,r,"Got unwanted exception"+n),t&&i&&r&&!w(i,r)||!t&&i)throw i}f.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return m(g(t.actual),128)+" "+t.operator+" "+m(g(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=p(e),o=n.indexOf("\n"+i);if(o>=0){var s=n.indexOf("\n",o+1);n=n.substring(s+1)}this.stack=n}}},s.inherits(f.AssertionError,Error),f.fail=y,f.ok=_,f.equal=function(t,e,r){t!=e&&y(t,e,r,"==",f.equal)},f.notEqual=function(t,e,r){t==e&&y(t,e,r,"!=",f.notEqual)},f.deepEqual=function(t,e,r){v(t,e,!1)||y(t,e,r,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(t,e,r){v(t,e,!0)||y(t,e,r,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(t,e,r){v(t,e,!1)&&y(t,e,r,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function t(e,r,n){v(e,r,!0)&&y(e,r,n,"notDeepStrictEqual",t)},f.strictEqual=function(t,e,r){t!==e&&y(t,e,r,"===",f.strictEqual)},f.notStrictEqual=function(t,e,r){t===e&&y(t,e,r,"!==",f.notStrictEqual)},f.throws=function(t,e,r){x(!0,t,e,r)},f.doesNotThrow=function(t,e,r){x(!1,t,e,r)},f.ifError=function(t){if(t)throw t},f.strict=n((function t(e,r){e||y(e,!0,r,"==",t)}),f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var E=Object.keys||function(t){var e=[];for(var r in t)a.call(t,r)&&e.push(r);return e}}).call(this,r(6))},function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){t.exports=function(t){function e(t){let r,i,o,s=null;function a(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(!a.enabled)return;const o=a,s=Number(new Date),l=s-(r||s);o.diff=l,o.prev=r,o.curr=s,r=s,n[0]=e.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");let u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,((t,r)=>{if("%%"===t)return"%";u++;const i=e.formatters[r];if("function"===typeof i){const e=n[u];t=i.call(o,e),n.splice(u,1),u--}return t})),e.formatArgs.call(o,n);const c=o.log||e.log;c.apply(o,n)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=n,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==e.namespaces&&(i=e.namespaces,o=e.enabled(t)),o),set:t=>{s=t}}),"function"===typeof e.init&&e.init(a),a}function n(t,r){const n=e(this.namespace+("undefined"===typeof r?":":r)+t);return n.log=this.log,n}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(i),...e.skips.map(i).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let r;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const n=("string"===typeof t?t:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(231),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((r=>{e[r]=t[r]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return e.colors[Math.abs(r)%e.colors.length]},e.enable(e.load()),e}},function(t,e){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function l(t,e,r,n){var i=e>=1.5*r;return Math.round(t/r)+" "+n+(i?"s":"")}t.exports=function(t,e){e=e||{};var u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var l=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*a;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*i;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(t);if("number"===u&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return l(t,e,o,"day");if(e>=i)return l(t,e,i,"hour");if(e>=n)return l(t,e,n,"minute");if(e>=r)return l(t,e,r,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=i)return Math.round(t/i)+"h";if(e>=n)return Math.round(t/n)+"m";if(e>=r)return Math.round(t/r)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const i=r(13),o=n(r(64)),s=n(r(233)),a=o.default("agent-base");function l(){const{stack:t}=new Error;return"string"===typeof t&&t.split("\n").some((t=>-1!==t.indexOf("(https.js:")||-1!==t.indexOf("node:https:")))}function u(t,e){return new u.Agent(t,e)}!function(t){class e extends i.EventEmitter{constructor(t,e){super();let r=e;"function"===typeof t?this.callback=t:t&&(r=t),this.timeout=null,r&&"number"===typeof r.timeout&&(this.timeout=r.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"===typeof this.explicitDefaultPort?this.explicitDefaultPort:l()?443:80}set defaultPort(t){this.explicitDefaultPort=t}get protocol(){return"string"===typeof this.explicitProtocol?this.explicitProtocol:l()?"https:":"http:"}set protocol(t){this.explicitProtocol=t}callback(t,e,r){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(t,e){const r=Object.assign({},e);"boolean"!==typeof r.secureEndpoint&&(r.secureEndpoint=l()),null==r.host&&(r.host="localhost"),null==r.port&&(r.port=r.secureEndpoint?443:80),null==r.protocol&&(r.protocol=r.secureEndpoint?"https:":"http:"),r.host&&r.path&&delete r.path,delete r.agent,delete r.hostname,delete r._defaultAgent,delete r.defaultPort,delete r.createConnection,t._last=!0,t.shouldKeepAlive=!1;let n=!1,i=null;const o=r.timeout||this.timeout,u=e=>{t._hadError||(t.emit("error",e),t._hadError=!0)},c=()=>{i=null,n=!0;const t=new Error(`A "socket" was not created for HTTP request before ${o}ms`);t.code="ETIMEOUT",u(t)},h=t=>{n||(null!==i&&(clearTimeout(i),i=null),u(t))},f=e=>{if(n)return;if(null!=i&&(clearTimeout(i),i=null),o=e,Boolean(o)&&"function"===typeof o.addRequest)return a("Callback returned another Agent instance %o",e.constructor.name),void e.addRequest(t,r);var o;if(e)return e.once("free",(()=>{this.freeSocket(e,r)})),void t.onSocket(e);const s=new Error(`no Duplex stream was returned to agent-base for \`${t.method} ${t.path}\``);u(s)};if("function"===typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(a("Converting legacy callback function to promise"),this.promisifiedCallback=s.default(this.callback)):this.promisifiedCallback=this.callback),"number"===typeof o&&o>0&&(i=setTimeout(c,o)),"port"in r&&"number"!==typeof r.port&&(r.port=Number(r.port));try{a("Resolving socket for %o request: %o",r.protocol,`${t.method} ${t.path}`),Promise.resolve(this.promisifiedCallback(t,r)).then(f,h)}catch(d){Promise.reject(d).catch(h)}}else u(new Error("`callback` is not defined"))}freeSocket(t,e){a("Freeing socket %o %o",t.constructor.name,e),t.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype}(u||(u={})),t.exports=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e,r){return new Promise(((n,i)=>{t.call(this,e,r,((t,e)=>{t?i(t):n(e)}))}))}}},function(t,e,r){"use strict";(function(t){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(64)).default("https-proxy-agent:parse-proxy-response");e.default=function(e){return new Promise(((r,n)=>{let o=0;const s=[];function a(){const n=e.read();n?function(e){s.push(e),o+=e.length;const n=t.concat(s,o);if(-1===n.indexOf("\r\n\r\n"))return i("have not received end of HTTP headers yet..."),void a();const l=n.toString("ascii",0,n.indexOf("\r\n")),u=+l.split(" ")[1];i("got proxy server response: %o",l),r({statusCode:u,buffered:n})}(n):e.once("readable",a)}function l(t){i("onclose had error %o",t)}function u(){i("onend")}function c(t){e.removeListener("end",u),e.removeListener("error",c),e.removeListener("close",l),e.removeListener("readable",a),i("onerror %o",t),n(t)}e.on("error",c),e.on("close",l),e.on("end",u),a()}))}}).call(this,r(3).Buffer)},function(t,e,r){var n=r(236).stringify,i=r(237);t.exports=function(t){return{parse:i(t),stringify:n}},t.exports.parse=i(),t.exports.stringify=n},function(t,e,r){var n=r(102),i=t.exports;!function(){"use strict";var t,e,r,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(t){return o.lastIndex=0,o.test(t)?'"'+t.replace(o,(function(t){var e=s[t];return"string"===typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function l(i,o){var s,u,c,h,f,d=t,p=o[i],m=null!=p&&(p instanceof n||n.isBigNumber(p));switch(p&&"object"===typeof p&&"function"===typeof p.toJSON&&(p=p.toJSON(i)),"function"===typeof r&&(p=r.call(o,i,p)),typeof p){case"string":return m?p:a(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":case"bigint":return String(p);case"object":if(!p)return"null";if(t+=e,f=[],"[object Array]"===Object.prototype.toString.apply(p)){for(h=p.length,s=0;s<h;s+=1)f[s]=l(s,p)||"null";return c=0===f.length?"[]":t?"[\n"+t+f.join(",\n"+t)+"\n"+d+"]":"["+f.join(",")+"]",t=d,c}if(r&&"object"===typeof r)for(h=r.length,s=0;s<h;s+=1)"string"===typeof r[s]&&(c=l(u=r[s],p))&&f.push(a(u)+(t?": ":":")+c);else Object.keys(p).forEach((function(e){var r=l(e,p);r&&f.push(a(e)+(t?": ":":")+r)}));return c=0===f.length?"{}":t?"{\n"+t+f.join(",\n"+t)+"\n"+d+"}":"{"+f.join(",")+"}",t=d,c}}"function"!==typeof i.stringify&&(i.stringify=function(n,i,o){var s;if(t="",e="","number"===typeof o)for(s=0;s<o;s+=1)e+=" ";else"string"===typeof o&&(e=o);if(r=i,i&&"function"!==typeof i&&("object"!==typeof i||"number"!==typeof i.length))throw new Error("JSON.stringify");return l("",{"":n})})}()},function(t,e,r){var n=null;const i=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,o=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;t.exports=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(void 0!==t&&null!==t){if(!0===t.strict&&(e.strict=!0),!0===t.storeAsString&&(e.storeAsString=!0),e.alwaysParseAsBig=!0===t.alwaysParseAsBig&&t.alwaysParseAsBig,e.useNativeBigInt=!0===t.useNativeBigInt&&t.useNativeBigInt,"undefined"!==typeof t.constructorAction){if("error"!==t.constructorAction&&"ignore"!==t.constructorAction&&"preserve"!==t.constructorAction)throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);e.constructorAction=t.constructorAction}if("undefined"!==typeof t.protoAction){if("error"!==t.protoAction&&"ignore"!==t.protoAction&&"preserve"!==t.protoAction)throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`);e.protoAction=t.protoAction}}var s,a,l,u,c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},h=function(t){throw{name:"SyntaxError",message:t,at:s,text:l}},f=function(t){return t&&t!==a&&h("Expected '"+t+"' instead of '"+a+"'"),a=l.charAt(s),s+=1,a},d=function(){var t,i="";for("-"===a&&(i="-",f("-"));a>="0"&&a<="9";)i+=a,f();if("."===a)for(i+=".";f()&&a>="0"&&a<="9";)i+=a;if("e"===a||"E"===a)for(i+=a,f(),"-"!==a&&"+"!==a||(i+=a,f());a>="0"&&a<="9";)i+=a,f();if(t=+i,isFinite(t))return null==n&&(n=r(102)),i.length>15?e.storeAsString?i:e.useNativeBigInt?BigInt(i):new n(i):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(t):new n(t):t;h("Bad number")},p=function(){var t,e,r,n="";if('"'===a)for(var i=s;f();){if('"'===a)return s-1>i&&(n+=l.substring(i,s-1)),f(),n;if("\\"===a){if(s-1>i&&(n+=l.substring(i,s-1)),f(),"u"===a){for(r=0,e=0;e<4&&(t=parseInt(f(),16),isFinite(t));e+=1)r=16*r+t;n+=String.fromCharCode(r)}else{if("string"!==typeof c[a])break;n+=c[a]}i=s}}h("Bad string")},m=function(){for(;a&&a<=" ";)f()};return u=function(){switch(m(),a){case"{":return function(){var t,r=Object.create(null);if("{"===a){if(f("{"),m(),"}"===a)return f("}"),r;for(;a;){if(t=p(),m(),f(":"),!0===e.strict&&Object.hasOwnProperty.call(r,t)&&h('Duplicate key "'+t+'"'),!0===i.test(t)?"error"===e.protoAction?h("Object contains forbidden prototype property"):"ignore"===e.protoAction?u():r[t]=u():!0===o.test(t)?"error"===e.constructorAction?h("Object contains forbidden constructor property"):"ignore"===e.constructorAction?u():r[t]=u():r[t]=u(),m(),"}"===a)return f("}"),r;f(","),m()}}h("Bad object")}();case"[":return function(){var t=[];if("["===a){if(f("["),m(),"]"===a)return f("]"),t;for(;a;){if(t.push(u()),m(),"]"===a)return f("]"),t;f(","),m()}}h("Bad array")}();case'"':return p();case"-":return d();default:return a>="0"&&a<="9"?d():function(){switch(a){case"t":return f("t"),f("r"),f("u"),f("e"),!0;case"f":return f("f"),f("a"),f("l"),f("s"),f("e"),!1;case"n":return f("n"),f("u"),f("l"),f("l"),null}h("Unexpected '"+a+"'")}()}},function(t,e){var r;return l=t+"",s=0,a=" ",r=u(),m(),a&&h("Syntax error"),"function"===typeof e?function t(r,n){var i,o=r[n];return o&&"object"===typeof o&&Object.keys(o).forEach((function(e){void 0!==(i=t(o,e))?o[e]=i:delete o[e]})),e.call(r,n,o)}({"":r},""):r}}},function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!==typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserCrypto=void 0;const n=r(92);"undefined"===typeof t&&"undefined"===typeof TextEncoder&&r(240);class i{constructor(){if("undefined"===typeof window||void 0===window.crypto||void 0===window.crypto.subtle)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(t){const e=(new TextEncoder).encode(t),r=await window.crypto.subtle.digest("SHA-256",e);return n.fromByteArray(new Uint8Array(r))}randomBytesBase64(t){const e=new Uint8Array(t);return window.crypto.getRandomValues(e),n.fromByteArray(e)}static padBase64(t){for(;t.length%4!==0;)t+="=";return t}async verify(t,e,r){const o={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s=(new TextEncoder).encode(e),a=n.toByteArray(i.padBase64(r)),l=await window.crypto.subtle.importKey("jwk",t,o,!0,["verify"]);return await window.crypto.subtle.verify(o,l,a,s)}async sign(t,e){const r={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=(new TextEncoder).encode(e),o=await window.crypto.subtle.importKey("jwk",t,r,!0,["sign"]),s=await window.crypto.subtle.sign(r,o,i);return n.fromByteArray(new Uint8Array(s))}decodeBase64StringUtf8(t){const e=n.toByteArray(i.padBase64(t));return(new TextDecoder).decode(e)}encodeBase64StringUtf8(t){const e=(new TextEncoder).encode(t);return n.fromByteArray(e)}}e.BrowserCrypto=i}).call(this,r(5))},function(t,e,r){(function(t,e){!function(t){"use strict";function r(t){for(var e=0,r=Math.min(65536,t.length+1),n=new Uint16Array(r),i=[],o=0;;){var s=e<t.length;if(!s||o>=r-1){var a=n.subarray(0,o);if(i.push(String.fromCharCode.apply(null,a)),!s)return i.join("");t=t.subarray(e),e=0,o=0}var l=t[e++];if(0===(128&l))n[o++]=l;else if(192===(224&l)){var u=63&t[e++];n[o++]=(31&l)<<6|u}else if(224===(240&l)){u=63&t[e++];var c=63&t[e++];n[o++]=(31&l)<<12|u<<6|c}else if(240===(248&l)){var h=(7&l)<<18|(u=63&t[e++])<<12|(c=63&t[e++])<<6|63&t[e++];h>65535&&(h-=65536,n[o++]=h>>>10&1023|55296,h=56320|1023&h),n[o++]=h}}}var n="Failed to ",i=function(t,e,r){if(t)throw new Error("".concat(n).concat(e,": the '").concat(r,"' option is unsupported."))},o="function"==typeof e&&e.from,s=o?function(t){return e.from(t)}:function(t){for(var e=0,r=t.length,n=0,i=Math.max(32,r+(r>>>1)+7),o=new Uint8Array(i>>>3<<3);e<r;){var s=t.charCodeAt(e++);if(s>=55296&&s<=56319){if(e<r){var a=t.charCodeAt(e);56320===(64512&a)&&(++e,s=((1023&s)<<10)+(1023&a)+65536)}if(s>=55296&&s<=56319)continue}if(n+4>o.length){i+=8,i=(i*=1+e/t.length*2)>>>3<<3;var l=new Uint8Array(i);l.set(o),o=l}if(0!==(4294967168&s)){if(0===(4294965248&s))o[n++]=s>>>6&31|192;else if(0===(4294901760&s))o[n++]=s>>>12&15|224,o[n++]=s>>>6&63|128;else{if(0!==(4292870144&s))continue;o[n++]=s>>>18&7|240,o[n++]=s>>>12&63|128,o[n++]=s>>>6&63|128}o[n++]=63&s|128}else o[n++]=s}return o.slice?o.slice(0,n):o.subarray(0,n)};function a(){this.encoding="utf-8"}a.prototype.encode=function(t,e){return i(e&&e.stream,"encode","stream"),s(t)};var l=!o&&"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL,u=["utf-8","utf8","unicode-1-1-utf-8"],c=r;o?c=function(t,r){return(t instanceof e?t:e.from(t.buffer,t.byteOffset,t.byteLength)).toString(r)}:l&&(c=function(t){try{return function(t){var e;try{var r=new Blob([t],{type:"text/plain;charset=UTF-8"});e=URL.createObjectURL(r);var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(),n.responseText}finally{e&&URL.revokeObjectURL(e)}}(t)}catch(e){return r(t)}});var h="construct 'TextDecoder'",f="".concat(n," ").concat(h,": the ");function d(t,r){if(i(r&&r.fatal,h,"fatal"),t=t||"utf-8",!(o?e.isEncoding(t):-1!==u.indexOf(t.toLowerCase())))throw new RangeError("".concat(f," encoding label provided ('").concat(t,"') is invalid."));this.encoding=t,this.fatal=!1,this.ignoreBOM=!1}d.prototype.decode=function(t,e){var r;return i(e&&e.stream,"decode","stream"),r=t instanceof Uint8Array?t:t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer):new Uint8Array(t),c(r,this.encoding)},t.TextEncoder=t.TextEncoder||a,t.TextDecoder=t.TextDecoder||d}("undefined"!==typeof window?window:"undefined"!==typeof t?t:this)}).call(this,r(6),r(3).Buffer)},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.NodeCrypto=void 0;const n=r(105);e.NodeCrypto=class{async sha256DigestBase64(t){return n.createHash("sha256").update(t).digest("base64")}randomBytesBase64(t){return n.randomBytes(t).toString("base64")}async verify(t,e,r){const i=n.createVerify("sha256");return i.update(e),i.end(),i.verify(t,r,"base64")}async sign(t,e){const r=n.createSign("RSA-SHA256");return r.update(e),r.end(),r.sign(t,"base64")}decodeBase64StringUtf8(e){return t.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return t.from(e,"utf-8").toString("base64")}}}).call(this,r(3).Buffer)},function(t,e,r){(e=t.exports=r(107)).Stream=e,e.Readable=e,e.Writable=r(111),e.Duplex=r(29),e.Transform=r(112),e.PassThrough=r(248),e.finished=r(66),e.pipeline=r(249)},,function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=r(3).Buffer,a=r(245).inspect,l=a&&a.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r,u;return e=t,r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return s.alloc(0);for(var e,r,n,i=s.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,r=i,n=a,s.prototype.copy.call(e,r,n),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),0===(t-=o)){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=s.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0===(t-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,e}},{key:l,value:function(t,e){return a(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}],r&&o(e.prototype,r),u&&o(e,u),t}()},,function(t,e,r){"use strict";(function(e){var n;function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r(66),s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),f=Symbol("stream");function d(t,e){return{value:t,done:e}}function p(t){var e=t[s];if(null!==e){var r=t[f].read();null!==r&&(t[c]=null,t[s]=null,t[a]=null,e(d(r,!1)))}}function m(t){e.nextTick(p,t)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var t=this,r=this[l];if(null!==r)return Promise.reject(r);if(this[u])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(r,n){e.nextTick((function(){t[l]?n(t[l]):r(d(void 0,!0))}))}));var n,i=this[c];if(i)n=new Promise(function(t,e){return function(r,n){t.then((function(){e[u]?r(d(void 0,!0)):e[h](r,n)}),n)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[h])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var t=this;return new Promise((function(e,r){t[f].destroy(null,(function(t){t?r(t):e(d(void 0,!0))}))}))})),n),g);t.exports=function(t){var e,r=Object.create(y,(i(e={},f,{value:t,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,l,{value:null,writable:!0}),i(e,u,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var n=r[f].read();n?(r[c]=null,r[s]=null,r[a]=null,t(d(n,!1))):(r[s]=t,r[a]=e)},writable:!0}),e));return r[c]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[a];return null!==e&&(r[c]=null,r[s]=null,r[a]=null,e(t)),void(r[l]=t)}var n=r[s];null!==n&&(r[c]=null,r[s]=null,r[a]=null,n(d(void 0,!0))),r[u]=!0})),t.on("readable",m.bind(null,r)),r}}).call(this,r(5))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,r){"use strict";t.exports=i;var n=r(112);function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r(0)(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){"use strict";var n;var i=r(28).codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function l(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var a=!1;t.on("close",(function(){a=!0})),void 0===n&&(n=r(66)),n(t,{readable:e,writable:i},(function(t){if(t)return o(t);a=!0,o()}));var l=!1;return function(e){if(!a&&!l)return l=!0,function(t){return t.setHeader&&"function"===typeof t.abort}(t)?t.abort():"function"===typeof t.destroy?t.destroy():void o(e||new s("pipe"))}}function u(t){t()}function c(t,e){return t.pipe(e)}function h(t){return t.length?"function"!==typeof t[t.length-1]?a:t.pop():a}t.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var s=e.map((function(t,r){var o=r<e.length-1;return l(t,o,r>0,(function(t){n||(n=t),t&&s.forEach(u),o||(s.forEach(u),i(n))}))}));return e.reduce(c)}},function(t,e,r){var n=r(0),i=r(30),o=r(1).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function l(){this.init(),this._w=a,i.call(this,64,56)}function u(t){return t<<30|t>>>2}function c(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(l,i),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,l=0|this._e,h=0;h<16;++h)r[h]=t.readInt32BE(4*h);for(;h<80;++h)r[h]=r[h-3]^r[h-8]^r[h-14]^r[h-16];for(var f=0;f<80;++f){var d=~~(f/20),p=0|((e=n)<<5|e>>>27)+c(d,i,o,a)+l+r[f]+s[d];l=a,a=o,o=u(i),i=n,n=p}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=l},function(t,e,r){var n=r(0),i=r(30),o=r(1).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function l(){this.init(),this._w=a,i.call(this,64,56)}function u(t){return t<<5|t>>>27}function c(t){return t<<30|t>>>2}function h(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}n(l,i),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,l=0|this._e,f=0;f<16;++f)r[f]=t.readInt32BE(4*f);for(;f<80;++f)r[f]=(e=r[f-3]^r[f-8]^r[f-14]^r[f-16])<<1|e>>>31;for(var d=0;d<80;++d){var p=~~(d/20),m=u(n)+h(p,i,o,a)+l+r[d]+s[p]|0;l=a,a=o,o=c(i),i=n,n=m}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=l},function(t,e,r){var n=r(0),i=r(113),o=r(30),s=r(1).Buffer,a=new Array(64);function l(){this.init(),this._w=a,o.call(this,64,56)}n(l,i),l.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},l.prototype._hash=function(){var t=s.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=l},function(t,e,r){var n=r(0),i=r(114),o=r(30),s=r(1).Buffer,a=new Array(160);function l(){this.init(),this._w=a,o.call(this,128,112)}n(l,i),l.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l.prototype._hash=function(){var t=s.allocUnsafe(48);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=l},function(t,e,r){t.exports=r(61)},function(t,e,r){t.exports=r(19)},function(t,e,r){t.exports=r(35).Transform},function(t,e,r){t.exports=r(35).PassThrough},function(t,e,r){"use strict";var n=r(0),i=r(1).Buffer,o=r(18),s=i.alloc(128),a=64;function l(t,e){o.call(this,"digest"),"string"===typeof e&&(e=i.from(e)),this._alg=t,this._key=e,e.length>a?e=t(e):e.length<a&&(e=i.concat([e,s],a));for(var r=this._ipad=i.allocUnsafe(a),n=this._opad=i.allocUnsafe(a),l=0;l<a;l++)r[l]=54^e[l],n[l]=92^e[l];this._hash=[r]}n(l,o),l.prototype._update=function(t){this._hash.push(t)},l.prototype._final=function(){var t=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,t]))},t.exports=l},function(t,e,r){t.exports=r(117)},function(t,e,r){(function(e){var n,i,o=r(1).Buffer,s=r(119),a=r(120),l=r(121),u=r(122),c=e.crypto&&e.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function d(){return i||(i=e.process&&e.process.nextTick?e.process.nextTick:e.queueMicrotask?e.queueMicrotask:e.setImmediate?e.setImmediate:e.setTimeout)}function p(t,e,r,n,i){return c.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return c.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:i}},t,n<<3)})).then((function(t){return o.from(t)}))}t.exports=function(t,r,i,m,g,y){"function"===typeof g&&(y=g,g=void 0);var _=h[(g=g||"sha1").toLowerCase()];if(_&&"function"===typeof e.Promise){if(s(i,m),t=u(t,a,"Password"),r=u(r,a,"Salt"),"function"!==typeof y)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then((function(t){d()((function(){e(null,t)}))}),(function(t){d()((function(){e(t)}))}))}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(void 0!==f[t])return f[t];var r=p(n=n||o.alloc(8),n,10,128,t).then((function(){return!0})).catch((function(){return!1}));return f[t]=r,r}(_).then((function(e){return e?p(t,r,i,m,_):l(t,r,i,m,g)})),y)}else d()((function(){var e;try{e=l(t,r,i,m,g)}catch(n){return y(n)}y(null,e)}))}}).call(this,r(6))},function(t,e,r){var n=r(262),i=r(70),o=r(71),s=r(275),a=r(50);function l(t,e,r){if(t=t.toLowerCase(),o[t])return i.createCipheriv(t,e,r);if(s[t])return new n({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function u(t,e,r){if(t=t.toLowerCase(),o[t])return i.createDecipheriv(t,e,r);if(s[t])return new n({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");r=8*s[t].key,n=s[t].iv}var i=a(e,!1,r,n);return l(t,i.key,i.iv)},e.createCipheriv=e.Cipheriv=l,e.createDecipher=e.Decipher=function(t,e){var r,n;if(t=t.toLowerCase(),o[t])r=o[t].key,n=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");r=8*s[t].key,n=s[t].iv}var i=a(e,!1,r,n);return u(t,i.key,i.iv)},e.createDecipheriv=e.Decipheriv=u,e.listCiphers=e.getCiphers=function(){return Object.keys(s).concat(i.getCiphers())}},function(t,e,r){var n=r(18),i=r(263),o=r(0),s=r(1).Buffer,a={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function l(t){n.call(this);var e,r=t.mode.toLowerCase(),i=a[r];e=t.decrypt?"decrypt":"encrypt";var o=t.key;s.isBuffer(o)||(o=s.from(o)),"des-ede"!==r&&"des-ede-cbc"!==r||(o=s.concat([o,o.slice(0,8)]));var l=t.iv;s.isBuffer(l)||(l=s.from(l)),this._des=i.create({key:o,iv:l,type:e})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=l,o(l,n),l.prototype._update=function(t){return s.from(this._des.update(t))},l.prototype._final=function(){return s.from(this._des.final())}},function(t,e,r){"use strict";e.utils=r(123),e.Cipher=r(69),e.DES=r(124),e.CBC=r(264),e.EDE=r(265)},function(t,e,r){"use strict";var n=r(8),i=r(0),o={};function s(t){n.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}i(e,t);for(var r=Object.keys(o),n=0;n<r.length;n++){var s=r[n];e.prototype[s]=o[s]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new s(this.options.iv);this._cbcState=t},o._update=function(t,e,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,s=i.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=t[e+a];o._update.call(this,s,0,r,n);for(a=0;a<this.blockSize;a++)s[a]=r[n+a]}else{o._update.call(this,t,e,r,n);for(a=0;a<this.blockSize;a++)r[n+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=t[e+a]}}},function(t,e,r){"use strict";var n=r(8),i=r(0),o=r(69),s=r(124);function a(t,e){n.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),i=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[s.create({type:"encrypt",key:r}),s.create({type:"decrypt",key:i}),s.create({type:"encrypt",key:o})]:[s.create({type:"decrypt",key:o}),s.create({type:"encrypt",key:i}),s.create({type:"decrypt",key:r})]}function l(t){o.call(this,t);var e=new a(this.type,this.options.key);this._edeState=e}i(l,o),t.exports=l,l.create=function(t){return new l(t)},l.prototype._update=function(t,e,r,n){var i=this._edeState;i.ciphers[0]._update(t,e,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},l.prototype._pad=s.prototype._pad,l.prototype._unpad=s.prototype._unpad},function(t,e,r){var n=r(71),i=r(128),o=r(1).Buffer,s=r(129),a=r(18),l=r(49),u=r(50);function c(t,e,r){a.call(this),this._cache=new f,this._cipher=new l.AES(e),this._prev=o.from(r),this._mode=t,this._autopadding=!0}r(0)(c,a),c.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get();)r=this._mode.encrypt(this,e),n.push(r);return o.concat(n)};var h=o.alloc(16,16);function f(){this.cache=o.allocUnsafe(0)}function d(t,e,r){var a=n[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"===typeof e&&(e=o.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);if("string"===typeof r&&(r=o.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===a.type?new s(a.module,e,r):"auth"===a.type?new i(a.module,e,r):new c(a.module,e,r)}c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return o.concat([this.cache,e])},e.createCipheriv=d,e.createCipher=function(t,e){var r=n[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=u(e,!1,r.key,r.iv);return d(t,i.key,i.iv)}},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,r){var n=r(39);e.encrypt=function(t,e){var r=n(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev},e.decrypt=function(t,e){var r=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return n(i,r)}},function(t,e,r){var n=r(1).Buffer,i=r(39);function o(t,e,r){var o=e.length,s=i(e,t._cache);return t._cache=t._cache.slice(o),t._prev=n.concat([t._prev,r?e:s]),s}e.encrypt=function(t,e,r){for(var i,s=n.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=n.allocUnsafe(0)),!(t._cache.length<=e.length)){s=n.concat([s,o(t,e,r)]);break}i=t._cache.length,s=n.concat([s,o(t,e.slice(0,i),r)]),e=e.slice(i)}return s}},function(t,e,r){var n=r(1).Buffer;function i(t,e,r){var i=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=n.concat([t._prev.slice(1),n.from([r?e:i])]),i}e.encrypt=function(t,e,r){for(var o=e.length,s=n.allocUnsafe(o),a=-1;++a<o;)s[a]=i(t,e[a],r);return s}},function(t,e,r){var n=r(1).Buffer;function i(t,e,r){for(var n,i,s=-1,a=0;++s<8;)n=e&1<<7-s?128:0,a+=(128&(i=t._cipher.encryptBlock(t._prev)[0]^n))>>s%8,t._prev=o(t._prev,r?n:i);return a}function o(t,e){var r=t.length,i=-1,o=n.allocUnsafe(t.length);for(t=n.concat([t,n.from([e])]);++i<r;)o[i]=t[i]<<1|t[i+1]>>7;return o}e.encrypt=function(t,e,r){for(var o=e.length,s=n.allocUnsafe(o),a=-1;++a<o;)s[a]=i(t,e[a],r);return s}},function(t,e,r){(function(t){var n=r(39);function i(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(e,r){for(;e._cache.length<r.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,r.length);return e._cache=e._cache.slice(r.length),n(r,o)}}).call(this,r(3).Buffer)},function(t,e,r){var n=r(1).Buffer,i=n.alloc(16,0);function o(t){var e=n.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function s(t){this.h=t,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}s.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},s.prototype._multiply=function(){for(var t,e,r,n=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],i=[0,0,0,0],s=-1;++s<128;){for(0!==(this.state[~~(s/8)]&1<<7-s%8)&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),r=0!==(1&n[3]),e=3;e>0;e--)n[e]=n[e]>>>1|(1&n[e-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=o(i)},s.prototype.update=function(t){var e;for(this.cache=n.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},s.prototype.final=function(t,e){return this.cache.length&&this.ghash(n.concat([this.cache,i],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=s},function(t,e,r){var n=r(128),i=r(1).Buffer,o=r(71),s=r(129),a=r(18),l=r(49),u=r(50);function c(t,e,r){a.call(this),this._cache=new h,this._last=void 0,this._cipher=new l.AES(e),this._prev=i.from(r),this._mode=t,this._autopadding=!0}function h(){this.cache=i.allocUnsafe(0)}function f(t,e,r){var a=o[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"===typeof r&&(r=i.from(r)),"GCM"!==a.mode&&r.length!==a.iv)throw new TypeError("invalid iv length "+r.length);if("string"===typeof e&&(e=i.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===a.type?new s(a.module,e,r,!0):"auth"===a.type?new n(a.module,e,r,!0):new c(a.module,e,r)}r(0)(c,a),c.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),n.push(r);return i.concat(n)},c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},h.prototype.add=function(t){this.cache=i.concat([this.cache,t])},h.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var r=o[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=u(e,!1,r.key,r.iv);return f(t,n.key,n.iv)},e.createDecipheriv=f},function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},function(t,e,r){(function(t){var n=r(130),i=r(281),o=r(282);var s={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var r=new t(i[e].prime,"hex"),n=new t(i[e].gen,"hex");return new o(r,n)},e.createDiffieHellman=e.DiffieHellman=function e(r,i,a,l){return t.isBuffer(i)||void 0===s[i]?e(r,"binary",i,a):(i=i||"binary",l=l||"binary",a=a||new t([2]),t.isBuffer(a)||(a=new t(a,l)),"number"===typeof r?new o(n(r,a),a,!0):(t.isBuffer(r)||(r=new t(r,i)),new o(r,a,!0)))}}).call(this,r(3).Buffer)},,function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(279).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function l(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,l=0,c=r;c<a;c+=n)l=u(t,c,c+n,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var h=1;for(l=u(t,c,t.length,e),c=0;c<s;c++)h*=e;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,l=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var c=l>>>26,h=67108863&l,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;c+=(s=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&s}r.words[u]=0|h,l=0|c}return 0!==l?r.words[u]=0|l:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?c[6-l.length]+l+r:l+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=h[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:c[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,l="le"===e,u=new t(o),c=this.clone();if(l){for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,l=r.words,u=0,c=0|s[0],h=8191&c,f=c>>>13,d=0|s[1],p=8191&d,m=d>>>13,g=0|s[2],y=8191&g,_=g>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],E=8191&x,S=x>>>13,M=0|s[5],T=8191&M,A=M>>>13,C=0|s[6],I=8191&C,k=C>>>13,R=0|s[7],B=8191&R,P=R>>>13,D=0|s[8],L=8191&D,O=D>>>13,N=0|s[9],z=8191&N,U=N>>>13,j=0|a[0],F=8191&j,V=j>>>13,G=0|a[1],q=8191&G,K=G>>>13,W=0|a[2],Z=8191&W,H=W>>>13,Q=0|a[3],X=8191&Q,Y=Q>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],lt=8191&at,ut=at>>>13,ct=0|a[8],ht=8191&ct,ft=ct>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(u+(n=Math.imul(h,F))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,V))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,V))+Math.imul(m,F)|0,o=Math.imul(m,V);var yt=(u+(n=n+Math.imul(h,q)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,q)|0))<<13)|0;u=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,F),i=(i=Math.imul(y,V))+Math.imul(_,F)|0,o=Math.imul(_,V),n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,K)|0;var _t=(u+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(b,F),i=(i=Math.imul(b,V))+Math.imul(w,F)|0,o=Math.imul(w,V),n=n+Math.imul(y,q)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,K)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var vt=(u+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,X)|0))<<13)|0;u=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,V))+Math.imul(S,F)|0,o=Math.imul(S,V),n=n+Math.imul(b,q)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Y)|0;var bt=(u+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(T,F),i=(i=Math.imul(T,V))+Math.imul(A,F)|0,o=Math.imul(A,V),n=n+Math.imul(E,q)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,K)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(u+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,V))+Math.imul(k,F)|0,o=Math.imul(k,V),n=n+Math.imul(T,q)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,K)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,X)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(u+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,V))+Math.imul(P,F)|0,o=Math.imul(P,V),n=n+Math.imul(I,q)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,K)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,Y)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(h,lt)|0)|0)+((8191&(i=(i=i+Math.imul(h,ut)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(L,F),i=(i=Math.imul(L,V))+Math.imul(O,F)|0,o=Math.imul(O,V),n=n+Math.imul(B,q)|0,i=(i=i+Math.imul(B,K)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ut)|0;var St=(u+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(z,F),i=(i=Math.imul(z,V))+Math.imul(U,F)|0,o=Math.imul(U,V),n=n+Math.imul(L,q)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(O,q)|0,o=o+Math.imul(O,K)|0,n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(k,X)|0,o=o+Math.imul(k,Y)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,ut)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,q),i=(i=Math.imul(z,K))+Math.imul(U,q)|0,o=Math.imul(U,K),n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(B,X)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,st)|0,n=n+Math.imul(b,lt)|0,i=(i=i+Math.imul(b,ut)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ut)|0,n=n+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ft)|0;var Tt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(z,Z),i=(i=Math.imul(z,H))+Math.imul(U,Z)|0,o=Math.imul(U,H),n=n+Math.imul(L,X)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Y)|0,n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(S,lt)|0,o=o+Math.imul(S,ut)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var At=(u+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,X),i=(i=Math.imul(z,Y))+Math.imul(U,X)|0,o=Math.imul(U,Y),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,n=n+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,ut)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(E,ht)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Ct=(u+(n=n+Math.imul(b,pt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,pt)|0))<<13)|0;u=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,$),i=(i=Math.imul(z,tt))+Math.imul(U,$)|0,o=Math.imul(U,tt),n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(k,lt)|0,o=o+Math.imul(k,ut)|0,n=n+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var It=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(S,pt)|0))<<13)|0;u=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,rt),i=(i=Math.imul(z,nt))+Math.imul(U,rt)|0,o=Math.imul(U,nt),n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,ut)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(u+(n=n+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(U,ot)|0,o=Math.imul(U,st),n=n+Math.imul(L,lt)|0,i=(i=i+Math.imul(L,ut)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(B,ht)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Rt=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,pt)|0))<<13)|0;u=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,lt),i=(i=Math.imul(z,ut))+Math.imul(U,lt)|0,o=Math.imul(U,ut),n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(O,ht)|0,o=o+Math.imul(O,ft)|0;var Bt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(P,pt)|0))<<13)|0;u=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,ht),i=(i=Math.imul(z,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Pt=(u+(n=n+Math.imul(L,pt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Dt=(u+(n=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((o=Math.imul(U,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,l[0]=gt,l[1]=yt,l[2]=_t,l[3]=vt,l[4]=bt,l[5]=wt,l[6]=xt,l[7]=Et,l[8]=St,l[9]=Mt,l[10]=Tt,l[11]=At,l[12]=Ct,l[13]=It,l[14]=kt,l[15]=Rt,l[16]=Bt,l[17]=Pt,l[18]=Dt,0!==u&&(l[19]=u,r.length++),r};function m(t,e,r){return(new g).mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,l=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=l;u++){var c=o-u,h=(0|t.words[c])*(0|e.words[u]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},g.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},g.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},g.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var h=l,f=u,d=0;d<s;d++){var p=r[c+d],m=n[c+d],g=r[c+d+s],y=n[c+d+s],_=h*g-f*y;y=h*y+f*g,g=_,r[c+d]=p+g,n[c+d]=m+y,r[c+d+s]=p-g,n[c+d+s]=m-y,d!==a&&(_=l*h-u*f,f=l*f+u*h,h=_)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},g.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),l=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,l,n,i),this.transform(u,o,c,h,n,i);for(var d=0;d<n;d++){var p=a[d]*c[d]-l[d]*h[d];l[d]=a[d]*h[d]+l[d]*c[d],a[d]=p}return this.conjugate(a,l,n),this.transform(a,l,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,l=(0|this.words[e])-a<<r;this.words[e]=l|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,l=r;if(i-=s,i=Math.max(0,i),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var h=0|this.words[u];this.words[u]=c<<26-o|h>>>o,c=h&a}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var l=(0|t.words[i])*e;a=((o-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,l=n.length-i.length;if("mod"!==e){(a=new o(null)).length=l+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,l);0===c.negative&&(n=c,a&&(a.words[l]=1));for(var h=l-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),l=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(c),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(c),l.isub(h)),a.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(l)):(r.isub(e),a.isub(i),l.isub(s))}return{a:a,b:l,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),l=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,c=1;0===(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var h=0,f=1;0===(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},i(v,_),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,_),i(w,_),i(x,_),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),l=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=g}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,l=e.bitLength()%26;for(0===l&&(l=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=l-1;c>=0;c--){var h=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===n&&0===c)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}l=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,E),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(12)(t))},,,function(t){t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(t,e,r){(function(e){var n=r(131),i=new(r(132)),o=new n(24),s=new n(11),a=new n(10),l=new n(3),u=new n(7),c=r(130),h=r(27);function f(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._pub=new n(t),this}function d(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this._priv=new n(t),this}t.exports=m;var p={};function m(t,e,r){this.setGenerator(e),this.__prime=new n(t),this._prime=n.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=f,this.setPrivateKey=d):this._primeCode=8}function g(t,r){var n=new e(t.toArray());return r?n.toString(r):n}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!==typeof this._primeCode&&(this._primeCode=function(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in p)return p[n];var h,f=0;if(t.isEven()||!c.simpleSieve||!c.fermatTest(t)||!i.test(t))return f+=1,f+="02"===r||"05"===r?8:4,p[n]=f,f;switch(i.test(t.shrn(1))||(f+=2),r){case"02":t.mod(o).cmp(s)&&(f+=8);break;case"05":(h=t.mod(a)).cmp(l)&&h.cmp(u)&&(f+=8);break;default:f+=4}return p[n]=f,f}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new n(h(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(t){var r=(t=(t=new n(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new e(r.toArray()),o=this.getPrime();if(i.length<o.length){var s=new e(o.length-i.length);s.fill(0),i=e.concat([s,i])}return i},m.prototype.getPublicKey=function(t){return g(this._pub,t)},m.prototype.getPrivateKey=function(t){return g(this._priv,t)},m.prototype.getPrime=function(t){return g(this.__prime,t)},m.prototype.getGenerator=function(t){return g(this._gen,t)},m.prototype.setGenerator=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.__gen=t,this._gen=new n(t),this}}).call(this,r(3).Buffer)},function(t,e,r){var n=r(1).Buffer,i=r(37),o=r(284),s=r(0),a=r(292),l=r(323),u=r(117);function c(t){o.Writable.call(this);var e=u[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function h(t){o.Writable.call(this);var e=u[t];if(!e)throw new Error("Unknown message digest");this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function f(t){return new c(t)}function d(t){return new h(t)}Object.keys(u).forEach((function(t){u[t].id=n.from(u[t].id,"hex"),u[t.toLowerCase()]=u[t]})),s(c,o.Writable),c.prototype._write=function(t,e,r){this._hash.update(t),r()},c.prototype.update=function(t,e){return"string"===typeof t&&(t=n.from(t,e)),this._hash.update(t),this},c.prototype.sign=function(t,e){this.end();var r=this._hash.digest(),n=a(r,t,this._hashType,this._signType,this._tag);return e?n.toString(e):n},s(h,o.Writable),h.prototype._write=function(t,e,r){this._hash.update(t),r()},h.prototype.update=function(t,e){return"string"===typeof t&&(t=n.from(t,e)),this._hash.update(t),this},h.prototype.verify=function(t,e,r){"string"===typeof e&&(e=n.from(e,r)),this.end();var i=this._hash.digest();return l(e,i,t,this._signType,this._tag)},t.exports={Sign:f,Verify:d,createSign:f,createVerify:d}},function(t,e,r){(e=t.exports=r(133)).Stream=e,e.Readable=e,e.Writable=r(137),e.Duplex=r(32),e.Transform=r(138),e.PassThrough=r(290),e.finished=r(73),e.pipeline=r(291)},,function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=r(3).Buffer,a=r(287).inspect,l=a&&a.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r,u;return e=t,r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return s.alloc(0);for(var e,r,n,i=s.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,r=i,n=a,s.prototype.copy.call(e,r,n),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),0===(t-=o)){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=s.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0===(t-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,e}},{key:l,value:function(t,e){return a(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}],r&&o(e.prototype,r),u&&o(e,u),t}()},,function(t,e,r){"use strict";(function(e){var n;function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r(73),s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),f=Symbol("stream");function d(t,e){return{value:t,done:e}}function p(t){var e=t[s];if(null!==e){var r=t[f].read();null!==r&&(t[c]=null,t[s]=null,t[a]=null,e(d(r,!1)))}}function m(t){e.nextTick(p,t)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var t=this,r=this[l];if(null!==r)return Promise.reject(r);if(this[u])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(r,n){e.nextTick((function(){t[l]?n(t[l]):r(d(void 0,!0))}))}));var n,i=this[c];if(i)n=new Promise(function(t,e){return function(r,n){t.then((function(){e[u]?r(d(void 0,!0)):e[h](r,n)}),n)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[h])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var t=this;return new Promise((function(e,r){t[f].destroy(null,(function(t){t?r(t):e(d(void 0,!0))}))}))})),n),g);t.exports=function(t){var e,r=Object.create(y,(i(e={},f,{value:t,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,l,{value:null,writable:!0}),i(e,u,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var n=r[f].read();n?(r[c]=null,r[s]=null,r[a]=null,t(d(n,!1))):(r[s]=t,r[a]=e)},writable:!0}),e));return r[c]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[a];return null!==e&&(r[c]=null,r[s]=null,r[a]=null,e(t)),void(r[l]=t)}var n=r[s];null!==n&&(r[c]=null,r[s]=null,r[a]=null,n(d(void 0,!0))),r[u]=!0})),t.on("readable",m.bind(null,r)),r}}).call(this,r(5))},function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,e,r){"use strict";t.exports=i;var n=r(138);function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r(0)(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){"use strict";var n;var i=r(31).codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function l(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var a=!1;t.on("close",(function(){a=!0})),void 0===n&&(n=r(73)),n(t,{readable:e,writable:i},(function(t){if(t)return o(t);a=!0,o()}));var l=!1;return function(e){if(!a&&!l)return l=!0,function(t){return t.setHeader&&"function"===typeof t.abort}(t)?t.abort():"function"===typeof t.destroy?t.destroy():void o(e||new s("pipe"))}}function u(t){t()}function c(t,e){return t.pipe(e)}function h(t){return t.length?"function"!==typeof t[t.length-1]?a:t.pop():a}t.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var s=e.map((function(t,r){var o=r<e.length-1;return l(t,o,r>0,(function(t){n||(n=t),t&&s.forEach(u),o||(s.forEach(u),i(n))}))}));return e.reduce(c)}},function(t,e,r){var n=r(1).Buffer,i=r(115),o=r(74),s=r(76).ec,a=r(75),l=r(52),u=r(150);function c(t,e,r,o){if((t=n.from(t.toArray())).length<e.byteLength()){var s=n.alloc(e.byteLength()-t.length);t=n.concat([s,t])}var a=r.length,l=function(t,e){t=(t=h(t,e)).mod(e);var r=n.from(t.toArray());if(r.length<e.byteLength()){var i=n.alloc(e.byteLength()-r.length);r=n.concat([i,r])}return r}(r,e),u=n.alloc(a);u.fill(1);var c=n.alloc(a);return c=i(o,c).update(u).update(n.from([0])).update(t).update(l).digest(),u=i(o,c).update(u).digest(),{k:c=i(o,c).update(u).update(n.from([1])).update(t).update(l).digest(),v:u=i(o,c).update(u).digest()}}function h(t,e){var r=new a(t),n=(t.length<<3)-e.bitLength();return n>0&&r.ishrn(n),r}function f(t,e,r){var o,s;do{for(o=n.alloc(0);8*o.length<t.bitLength();)e.v=i(r,e.k).update(e.v).digest(),o=n.concat([o,e.v]);s=h(o,t),e.k=i(r,e.k).update(e.v).update(n.from([0])).digest(),e.v=i(r,e.k).update(e.v).digest()}while(-1!==s.cmp(t));return s}function d(t,e,r,n){return t.toRed(a.mont(r)).redPow(e).fromRed().mod(n)}t.exports=function(t,e,r,i,p){var m=l(e);if(m.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return function(t,e){var r=u[e.curve.join(".")];if(!r)throw new Error("unknown curve "+e.curve.join("."));var i=new s(r).keyFromPrivate(e.privateKey).sign(t);return n.from(i.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==i)throw new Error("wrong private key type");return function(t,e,r){var i,o=e.params.priv_key,s=e.params.p,l=e.params.q,u=e.params.g,p=new a(0),m=h(t,l).mod(l),g=!1,y=c(o,l,t,r);for(;!1===g;)p=d(u,i=f(l,y,r),s,l),0===(g=i.invm(l).imul(m.add(o.mul(p))).mod(l)).cmpn(0)&&(g=!1,p=new a(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t));128&e[0]&&(e=[0].concat(e));var r=[48,t.length+e.length+4,2,t.length];return r=r.concat(t,[2,e.length],e),n.from(r)}(p,g)}(t,m,r)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");t=n.concat([p,t]);for(var g=m.modulus.byteLength(),y=[0,1];t.length+y.length+1<g;)y.push(255);y.push(0);for(var _=-1;++_<t.length;)y.push(t[_]);return o(y,m)},t.exports.getKey=c,t.exports.makeKey=f},,function(t){t.exports=JSON.parse('{"name":"elliptic","version":"6.5.4","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}')},,function(t,e,r){"use strict";var n=r(9),i=r(16),o=r(0),s=r(51),a=n.assert;function l(t){s.call(this,"short",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function u(t,e,r,n){s.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(e,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function c(t,e,r,n){s.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(e,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(l,s),t.exports=l,l.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new i(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new i(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?r=o[0]:(r=o[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new i(t.a,16),b:new i(t.b,16)}})):this._getEndoBasis(r)}}},l.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.mont(t),r=new i(2).toRed(e).redInvm(),n=r.redNeg(),o=new i(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},l.prototype._getEndoBasis=function(t){for(var e,r,n,o,s,a,l,u,c,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,d=this.n.clone(),p=new i(1),m=new i(0),g=new i(0),y=new i(1),_=0;0!==f.cmpn(0);){var v=d.div(f);u=d.sub(v.mul(f)),c=g.sub(v.mul(p));var b=y.sub(v.mul(m));if(!n&&u.cmp(h)<0)e=l.neg(),r=p,n=u.neg(),o=c;else if(n&&2===++_)break;l=u,d=f,f=u,g=p,p=c,y=m,m=b}s=u.neg(),a=c;var w=n.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(w)>=0&&(s=e,a=r),n.negative&&(n=n.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:n,b:o},{a:s,b:a}]},l.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),l=i.mul(r.b),u=o.mul(n.b);return{k1:t.sub(s).sub(a),k2:l.add(u).neg()}},l.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(e&&!o||!e&&o)&&(n=n.redNeg()),this.point(t,n)},l.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},l.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],l=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),l=l.neg(!0)),n[2*o]=a,n[2*o+1]=l,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),c=0;c<2*o;c++)n[c]=null,i[c]=null;return u},o(u,s.BasePoint),l.prototype.point=function(t,e,r){return new u(this,t,e,r)},l.prototype.pointFromJSON=function(t,e){return u.fromJSON(this,t,e)},u.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(t,e,r){"string"===typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},u.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(t){return t=new i(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},u.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},u.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},u.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},u.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(c,s.BasePoint),l.prototype.jpoint=function(t,e,r){return new c(this,t,e,r)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),l=o.redSub(s);if(0===a.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),h=n.redMul(u),f=l.redSqr().redIAdd(c).redISub(h).redISub(h),d=l.redMul(h.redISub(f)).redISub(o.redMul(c)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,d,p)},c.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),u=l.redMul(s),c=r.redMul(l),h=a.redSqr().redIAdd(u).redISub(c).redISub(c),f=a.redMul(c.redISub(h)).redISub(i.redMul(u)),d=this.z.redMul(s);return this.curve.jpoint(h,f,d)},c.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,l=a.redSqr().redSqr(),u=s.redAdd(s);for(e=0;e<t;e++){var c=o.redSqr(),h=u.redSqr(),f=h.redSqr(),d=c.redAdd(c).redIAdd(c).redIAdd(n.redMul(l)),p=o.redMul(h),m=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=d.redMul(g);y=y.redIAdd(y).redISub(f);var _=u.redMul(a);e+1<t&&(l=l.redMul(f)),o=m,a=_,u=y}return this.curve.jpoint(o,u.redMul(i),a)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),l=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=l,e=a.redMul(s.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(c).redISub(f);d=d.redIAdd(d);var p=c.redAdd(c).redIAdd(c),m=p.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},c.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),l=a.redSqr().redISub(s).redISub(s);t=l;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=a.redMul(s.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(c).redMul(this.x.redAdd(c));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(c);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,r)},c.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),l=e.redAdd(e),u=(l=l.redIAdd(l)).redMul(s),c=a.redSqr().redISub(u.redAdd(u)),h=u.redISub(c),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(h).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(c,d,p)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),l=n.redIAdd(n);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(l),c=e.redMul(u);c=(c=c.redIAdd(c)).redIAdd(c);var h=this.x.redMul(a).redISub(c);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(u.redMul(l.redISub(u)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,f,d)},c.prototype.mul=function(t,e){return t=new i(t,e),this.curve._wnafMul(this,t)},c.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},c.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(t,e,r){"use strict";var n=r(16),i=r(0),o=r(51),s=r(9);function a(t){o.call(this,"mont",t),this.a=new n(t.a,16).toRed(this.red),this.b=new n(t.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(t,e,r){o.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(e,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,o),t.exports=a,a.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),n=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return 0===n.redSqrt().redSqr().cmp(n)},i(l,o.BasePoint),a.prototype.decodePoint=function(t,e){return this.point(s.toArray(t,e),1)},a.prototype.point=function(t,e){return new l(this,t,e)},a.prototype.pointFromJSON=function(t){return l.fromJSON(this,t)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(t,e){return new l(t,e[0],e[1]||t.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},l.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),n=t.redMul(e),i=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},l.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(r),s=i.redMul(n),a=e.z.redMul(o.redAdd(s).redSqr()),l=e.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,l)},l.prototype.mul=function(t){for(var e=t.clone(),r=this,n=this.curve.point(null,null),i=[];0!==e.cmpn(0);e.iushrn(1))i.push(e.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},l.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(t,e,r){"use strict";var n=r(9),i=r(16),o=r(0),s=r(51),a=n.assert;function l(t){this.twisted=1!==(0|t.a),this.mOneA=this.twisted&&-1===(0|t.a),this.extended=this.mOneA,s.call(this,"edwards",t),this.a=new i(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|t.c)}function u(t,e,r,n,o){s.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(e,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(l,s),t.exports=l,l.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},l.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},l.prototype.jpoint=function(t,e,r,n){return this.point(t,e,r,n)},l.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=n.redMul(o.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var l=a.fromRed().isOdd();return(e&&!l||!e&&l)&&(a=a.redNeg()),this.point(t,a)},l.prototype.pointFromY=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=r.redSub(this.c2),o=r.redMul(this.d).redMul(this.c2).redSub(this.a),s=n.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==e&&(a=a.redNeg()),this.point(a,t)},l.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),n=e.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===n.cmp(i)},o(u,s.BasePoint),l.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},l.prototype.point=function(t,e,r,n){return new u(this,t,e,r,n)},u.fromJSON=function(t,e){return new u(t,e[0],e[1],e[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},u.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=n.redAdd(e),s=o.redSub(r),a=n.redSub(e),l=i.redMul(s),u=o.redMul(a),c=i.redMul(a),h=s.redMul(o);return this.curve.point(l,u,h,c)},u.prototype._projDbl=function(){var t,e,r,n,i,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),l=this.y.redSqr();if(this.curve.twisted){var u=(n=this.curve._mulA(a)).redAdd(l);this.zOne?(t=s.redSub(a).redSub(l).redMul(u.redSub(this.curve.two)),e=u.redMul(n.redSub(l)),r=u.redSqr().redSub(u).redSub(u)):(i=this.z.redSqr(),o=u.redSub(i).redISub(i),t=s.redSub(a).redISub(l).redMul(o),e=u.redMul(n.redSub(l)),r=u.redMul(o))}else n=a.redAdd(l),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),t=this.curve._mulC(s.redISub(n)).redMul(o),e=this.curve._mulC(n).redMul(a.redISub(l)),r=n.redMul(o);return this.curve.point(t,e,r)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),s=i.redSub(n),a=i.redAdd(n),l=r.redAdd(e),u=o.redMul(s),c=a.redMul(l),h=o.redMul(l),f=s.redMul(a);return this.curve.point(u,c,f,h)},u.prototype._projAdd=function(t){var e,r,n=this.z.redMul(t.z),i=n.redSqr(),o=this.x.redMul(t.x),s=this.y.redMul(t.y),a=this.curve.d.redMul(o).redMul(s),l=i.redSub(a),u=i.redAdd(a),c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(s),h=n.redMul(l).redMul(c);return this.curve.twisted?(e=n.redMul(u).redMul(s.redSub(this.curve._mulA(o))),r=l.redMul(u)):(e=n.redMul(u).redMul(s.redSub(o)),r=this.curve._mulC(l).redMul(u)),this.curve.point(h,e,r)},u.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},u.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},u.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},u.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},u.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(n),0===this.x.cmp(e))return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add},function(t,e,r){"use strict";e.sha1=r(300),e.sha224=r(301),e.sha256=r(142),e.sha384=r(302),e.sha512=r(143)},function(t,e,r){"use strict";var n=r(14),i=r(40),o=r(141),s=n.rotl32,a=n.sum32,l=n.sum32_5,u=o.ft_1,c=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,c),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=s(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],c=this.h[2],f=this.h[3],d=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),m=l(s(i,5),u(p,o,c,f),d,r[n],h[p]);d=f,f=c,c=s(o,30),o=i,i=m}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],c),this.h[3]=a(this.h[3],f),this.h[4]=a(this.h[4],d)},f.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(14),i=r(142);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(t,e,r){"use strict";var n=r(14),i=r(143);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(t,e,r){"use strict";var n=r(14),i=r(40),o=n.rotl32,s=n.sum32,a=n.sum32_3,l=n.sum32_4,u=i.BlockHash;function c(){if(!(this instanceof c))return new c;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function d(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(c,u),e.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],u=this.h[3],c=this.h[4],_=r,v=n,b=i,w=u,x=c,E=0;E<80;E++){var S=s(o(l(r,h(E,n,i,u),t[p[E]+e],f(E)),g[E]),c);r=c,c=u,u=o(i,10),i=n,n=S,S=s(o(l(_,h(79-E,v,b,w),t[m[E]+e],d(E)),y[E]),x),_=x,x=w,w=o(b,10),b=v,v=S}S=a(this.h[1],i,w),this.h[1]=a(this.h[2],u,x),this.h[2]=a(this.h[3],c,_),this.h[3]=a(this.h[4],r,v),this.h[4]=a(this.h[0],n,b),this.h[0]=S},c.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,r){"use strict";var n=r(14),i=r(8);function o(t,e,r){if(!(this instanceof o))return new o(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,r))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(t,e,r){"use strict";var n=r(16),i=r(307),o=r(9),s=r(77),a=r(72),l=o.assert,u=r(308),c=r(309);function h(t){if(!(this instanceof h))return new h(t);"string"===typeof t&&(l(Object.prototype.hasOwnProperty.call(s,t),"Unknown curve "+t),t=s[t]),t instanceof s.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=h,h.prototype.keyPair=function(t){return new u(this,t)},h.prototype.keyFromPrivate=function(t,e){return u.fromPrivate(this,t,e)},h.prototype.keyFromPublic=function(t,e){return u.fromPublic(this,t,e)},h.prototype.genKeyPair=function(t){t||(t={});for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),o=this.n.sub(new n(2));;){var s=new n(e.generate(r));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},h.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},h.prototype.sign=function(t,e,r,o){"object"===typeof r&&(o=r,r=null),o||(o={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new n(t,16));for(var s=this.n.byteLength(),a=e.getPrivate().toArray("be",s),l=t.toArray("be",s),u=new i({hash:this.hash,entropy:a,nonce:l,pers:o.pers,persEnc:o.persEnc||"utf8"}),h=this.n.sub(new n(1)),f=0;;f++){var d=o.k?o.k(f):new n(u.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||d.cmp(h)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var y=d.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(0!==(y=y.umod(this.n)).cmpn(0)){var _=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return o.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),_^=1),new c({r:g,s:y,recoveryParam:_})}}}}}},h.prototype.verify=function(t,e,r,i){t=this._truncateToN(new n(t,16)),r=this.keyFromPublic(r,i);var o=(e=new c(e,"hex")).r,s=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,l=s.invm(this.n),u=l.mul(t).umod(this.n),h=l.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),h)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(u,r.getPublic(),h)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},h.prototype.recoverPubKey=function(t,e,r,i){l((3&r)===r,"The recovery param is more than two bits"),e=new c(e,i);var o=this.n,s=new n(t),a=e.r,u=e.s,h=1&r,f=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");a=f?this.curve.pointFromX(a.add(this.curve.n),h):this.curve.pointFromX(a,h);var d=e.r.invm(o),p=o.sub(s).mul(d).umod(o),m=u.mul(d).umod(o);return this.g.mulAdd(p,a,m)},h.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new c(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},function(t,e,r){"use strict";var n=r(78),i=r(139),o=r(8);function s(t){if(!(this instanceof s))return new s(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),r=i.toArray(t.nonce,t.nonceEnc||"hex"),n=i.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}t.exports=s,s.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},s.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(t,e,r,n){"string"!==typeof e&&(n=r,r=e,e=null),t=i.toArray(t,e),r=i.toArray(r,n),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},s.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof e&&(n=r,r=e,e=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,t);return this._update(r),this._reseed++,i.encode(s,e)}},function(t,e,r){"use strict";var n=r(16),i=r(9).assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,r){return e instanceof o?e:new o(t,{pub:e,pubEnc:r})},o.fromPrivate=function(t,e,r){return e instanceof o?e:new o(t,{priv:e,privEnc:r})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"===typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new n(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.validate()||i(t.validate(),"public point not validated"),t.mul(this.priv).getX()},o.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(t,e,r){"use strict";var n=r(16),i=r(9),o=i.assert;function s(t,e){if(t instanceof s)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new n(t.r,16),this.s=new n(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function a(){this.place=0}function l(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return!(i<=127)&&(e.place=s,i)}function u(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function c(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}t.exports=s,s.prototype._importDER=function(t,e){t=i.toArray(t,e);var r=new a;if(48!==t[r.place++])return!1;var o=l(t,r);if(!1===o)return!1;if(o+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var s=l(t,r);if(!1===s)return!1;var u=t.slice(r.place,s+r.place);if(r.place+=s,2!==t[r.place++])return!1;var c=l(t,r);if(!1===c)return!1;if(t.length!==c+r.place)return!1;var h=t.slice(r.place,c+r.place);if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new n(u),this.s=new n(h),this.recoveryParam=null,!0},s.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=u(e),r=u(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];c(n,e.length),(n=n.concat(e)).push(2),c(n,r.length);var o=n.concat(r),s=[48];return c(s,o.length),s=s.concat(o),i.encode(s,t)}},function(t,e,r){"use strict";var n=r(78),i=r(77),o=r(9),s=o.assert,a=o.parseBytes,l=r(311),u=r(312);function c(t){if(s("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof c))return new c(t);t=i[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=n.sha512}t.exports=c,c.prototype.sign=function(t,e){t=a(t);var r=this.keyFromSecret(e),n=this.hashInt(r.messagePrefix(),t),i=this.g.mul(n),o=this.encodePoint(i),s=this.hashInt(o,r.pubBytes(),t).mul(r.priv()),l=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:l,Rencoded:o})},c.prototype.verify=function(t,e,r){t=a(t),e=this.makeSignature(e);var n=this.keyFromPublic(r),i=this.hashInt(e.Rencoded(),n.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(n.pub().mul(i)).eq(o)},c.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(t){return l.fromPublic(this,t)},c.prototype.keyFromSecret=function(t){return l.fromSecret(this,t)},c.prototype.makeSignature=function(t){return t instanceof u?t:new u(this,t)},c.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},c.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),n=0!==(128&t[e]),i=o.intFromLE(r);return this.curve.pointFromY(i,n)},c.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(t){return o.intFromLE(t)},c.prototype.isPoint=function(t){return t instanceof this.pointClass}},function(t,e,r){"use strict";var n=r(9),i=n.assert,o=n.parseBytes,s=n.cachedProperty;function a(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}a.fromPublic=function(t,e){return e instanceof a?e:new a(t,{pub:e})},a.fromSecret=function(t,e){return e instanceof a?e:new a(t,{secret:e})},a.prototype.secret=function(){return this._secret},s(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(a,"privBytes",(function(){var t=this.eddsa,e=this.hash(),r=t.encodingLength-1,n=e.slice(0,t.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),s(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(t){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},a.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},a.prototype.getSecret=function(t){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),t)},a.prototype.getPublic=function(t){return n.encode(this.pubBytes(),t)},t.exports=a},function(t,e,r){"use strict";var n=r(16),i=r(9),o=i.assert,s=i.cachedProperty,a=i.parseBytes;function l(t,e){this.eddsa=t,"object"!==typeof e&&(e=a(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof n&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}s(l,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(l,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(l,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(l,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),l.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},l.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},t.exports=l},function(t,e,r){"use strict";var n=r(144);e.certificate=r(320);var i=n.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));e.RSAPrivateKey=i;var o=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));e.RSAPublicKey=o;var s=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}));e.PublicKey=s;var a=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),l=n.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())}));e.PrivateKey=l;var u=n.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));e.EncryptedPrivateKey=u;var c=n.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));e.DSAPrivateKey=c,e.DSAparam=n.define("DSAparam",(function(){this.int()}));var h=n.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())}));e.ECPrivateKey=h;var f=n.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));e.signature=n.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},,function(t,e,r){"use strict";const n=r(146),i=r(148),o=r(0);function s(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new s(t,e)},s.prototype._createNamed=function(t){const e=this.name;function r(t){this._initNamed(t,e)}return o(r,t),r.prototype._initNamed=function(e,r){t.call(this,e,r)},new r(this)},s.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(i[t])),this.decoders[t]},s.prototype.decode=function(t,e,r){return this._getDecoder(e).decode(t,r)},s.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(n[t])),this.encoders[t]},s.prototype.encode=function(t,e,r){return this._getEncoder(e).encode(t,r)}},function(t,e,r){"use strict";const n=r(0),i=r(147);function o(t){i.call(this,t),this.enc="pem"}n(o,i),t.exports=o,o.prototype.encode=function(t,e){const r=i.prototype.encode.call(this,t).toString("base64"),n=["-----BEGIN "+e.label+"-----"];for(let i=0;i<r.length;i+=64)n.push(r.slice(i,i+64));return n.push("-----END "+e.label+"-----"),n.join("\n")}},function(t,e,r){"use strict";const n=r(0),i=r(79).Buffer,o=r(149);function s(t){o.call(this,t),this.enc="pem"}n(s,o),t.exports=s,s.prototype.decode=function(t,e){const r=t.toString().split(/[\r\n]+/g),n=e.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,l=-1;for(let i=0;i<r.length;i++){const t=r[i].match(s);if(null!==t&&t[2]===n){if(-1!==a){if("END"!==t[1])break;l=i;break}if("BEGIN"!==t[1])break;a=i}}if(-1===a||-1===l)throw new Error("PEM section not found for: "+n);const u=r.slice(a+1,l).join("");u.replace(/[^a-z0-9+/=]+/gi,"");const c=i.from(u,"base64");return o.prototype.decode.call(this,c,e)}},function(t,e,r){"use strict";const n=e;n.Reporter=r(81).Reporter,n.DecoderBuffer=r(41).DecoderBuffer,n.EncoderBuffer=r(41).EncoderBuffer,n.Node=r(80)},function(t,e,r){"use strict";const n=e;n._reverse=function(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r})),e},n.der=r(82)},function(t,e,r){"use strict";var n=r(144),i=n.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=n.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),s=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),a=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())})),l=n.define("RelativeDistinguishedName",(function(){this.setof(o)})),u=n.define("RDNSequence",(function(){this.seqof(l)})),c=n.define("Name",(function(){this.choice({rdnSequence:this.use(u)})})),h=n.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))})),f=n.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),d=n.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(c),this.key("validity").use(h),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())})),p=n.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(d),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())}));t.exports=p},function(t){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(t,e,r){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,s=r(50),a=r(70),l=r(1).Buffer;t.exports=function(t,e){var r,u=t.toString(),c=u.match(n);if(c){var h="aes"+c[1],f=l.from(c[2],"hex"),d=l.from(c[3].replace(/[\r\n]/g,""),"base64"),p=s(e,f.slice(0,8),parseInt(c[1],10)).key,m=[],g=a.createDecipheriv(h,p,f);m.push(g.update(d)),m.push(g.final()),r=l.concat(m)}else{var y=u.match(o);r=l.from(y[2].replace(/[\r\n]/g,""),"base64")}return{tag:u.match(i)[1],data:r}}},function(t,e,r){var n=r(1).Buffer,i=r(75),o=r(76).ec,s=r(52),a=r(150);function l(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,e,r,u,c){var h=s(r);if("ec"===h.type){if("ecdsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong public key type");return function(t,e,r){var n=a[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new o(n),s=r.data.subjectPrivateKey.data;return i.verify(e,t,s)}(t,e,h)}if("dsa"===h.type){if("dsa"!==u)throw new Error("wrong public key type");return function(t,e,r){var n=r.data.p,o=r.data.q,a=r.data.g,u=r.data.pub_key,c=s.signature.decode(t,"der"),h=c.s,f=c.r;l(h,o),l(f,o);var d=i.mont(n),p=h.invm(o);return 0===a.toRed(d).redPow(new i(e).mul(p).mod(o)).fromRed().mul(u.toRed(d).redPow(f.mul(p).mod(o)).fromRed()).mod(n).mod(o).cmp(f)}(t,e,h)}if("rsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong public key type");e=n.concat([c,e]);for(var f=h.modulus.byteLength(),d=[1],p=0;e.length+d.length+2<f;)d.push(255),p++;d.push(0);for(var m=-1;++m<e.length;)d.push(e[m]);d=n.from(d);var g=i.mont(h.modulus);t=(t=new i(t).toRed(g)).redPow(new i(h.publicExponent)),t=n.from(t.fromRed().toArray());var y=p<8?1:0;for(f=Math.min(t.length,d.length),t.length!==d.length&&(y=1),m=-1;++m<f;)y|=t[m]^d[m];return 0===y}},function(t,e,r){(function(e){var n=r(76),i=r(325);t.exports=function(t){return new s(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function a(t,r,n){Array.isArray(t)||(t=t.toArray());var i=new e(t);if(n&&i.length<n){var o=new e(n-i.length);o.fill(0),i=e.concat([o,i])}return r?i.toString(r):i}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,s.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},s.prototype.computeSecret=function(t,r,n){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),a(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},s.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(r[r.length-1]%2?r[0]=7:r[0]=6),a(r,t)},s.prototype.getPrivateKey=function(t){return a(this.keys.getPrivate(),t)},s.prototype.setPublicKey=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.keys._importPublic(t),this},s.prototype.setPrivateKey=function(t,r){r=r||"utf8",e.isBuffer(t)||(t=new e(t,r));var n=new i(t);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}}).call(this,r(3).Buffer)},function(t,e,r){(function(t){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(326).Buffer}catch(M){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function l(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2===0?e+1:e;n<t.length;n+=2)i=l(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,l=0,c=r;c<a;c+=n)l=u(t,c,c+n,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var h=1;for(l=u(t,c,t.length,e),c=0;c<s;c++)h*=e;this.imuln(h),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,l=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var c=l>>>26,h=67108863&l,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;c+=(s=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&s}r.words[u]=0|h,l=0|c}return 0!==l?r.words[u]=0|l:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?c[6-l.length]+l+r:l+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=h[t],d=f[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);r=(p=p.idivn(d)).isZero()?m+r:c[u-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,l="le"===e,u=new t(o),c=this.clone();if(l){for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,l=r.words,u=0,c=0|s[0],h=8191&c,f=c>>>13,d=0|s[1],p=8191&d,m=d>>>13,g=0|s[2],y=8191&g,_=g>>>13,v=0|s[3],b=8191&v,w=v>>>13,x=0|s[4],E=8191&x,S=x>>>13,M=0|s[5],T=8191&M,A=M>>>13,C=0|s[6],I=8191&C,k=C>>>13,R=0|s[7],B=8191&R,P=R>>>13,D=0|s[8],L=8191&D,O=D>>>13,N=0|s[9],z=8191&N,U=N>>>13,j=0|a[0],F=8191&j,V=j>>>13,G=0|a[1],q=8191&G,K=G>>>13,W=0|a[2],Z=8191&W,H=W>>>13,Q=0|a[3],X=8191&Q,Y=Q>>>13,J=0|a[4],$=8191&J,tt=J>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],lt=8191&at,ut=at>>>13,ct=0|a[8],ht=8191&ct,ft=ct>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(u+(n=Math.imul(h,F))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,V))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,F),i=(i=Math.imul(p,V))+Math.imul(m,F)|0,o=Math.imul(m,V);var yt=(u+(n=n+Math.imul(h,q)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,q)|0))<<13)|0;u=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,F),i=(i=Math.imul(y,V))+Math.imul(_,F)|0,o=Math.imul(_,V),n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,K)|0;var _t=(u+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(b,F),i=(i=Math.imul(b,V))+Math.imul(w,F)|0,o=Math.imul(w,V),n=n+Math.imul(y,q)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,K)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0;var vt=(u+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,X)|0))<<13)|0;u=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,F),i=(i=Math.imul(E,V))+Math.imul(S,F)|0,o=Math.imul(S,V),n=n+Math.imul(b,q)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Y)|0;var bt=(u+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,$)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(T,F),i=(i=Math.imul(T,V))+Math.imul(A,F)|0,o=Math.imul(A,V),n=n+Math.imul(E,q)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,K)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,H)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,H)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var wt=(u+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((o=o+Math.imul(f,nt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),i=(i=Math.imul(I,V))+Math.imul(k,F)|0,o=Math.imul(k,V),n=n+Math.imul(T,q)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,K)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,H)|0,n=n+Math.imul(b,X)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var xt=(u+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(B,F),i=(i=Math.imul(B,V))+Math.imul(P,F)|0,o=Math.imul(P,V),n=n+Math.imul(I,q)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(k,q)|0,o=o+Math.imul(k,K)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,H)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,Y)|0,n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(w,$)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var Et=(u+(n=n+Math.imul(h,lt)|0)|0)+((8191&(i=(i=i+Math.imul(h,ut)|0)+Math.imul(f,lt)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(L,F),i=(i=Math.imul(L,V))+Math.imul(O,F)|0,o=Math.imul(O,V),n=n+Math.imul(B,q)|0,i=(i=i+Math.imul(B,K)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(k,Z)|0,o=o+Math.imul(k,H)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,lt)|0,o=o+Math.imul(m,ut)|0;var St=(u+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(z,F),i=(i=Math.imul(z,V))+Math.imul(U,F)|0,o=Math.imul(U,V),n=n+Math.imul(L,q)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(O,q)|0,o=o+Math.imul(O,K)|0,n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,H)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(k,X)|0,o=o+Math.imul(k,Y)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(S,rt)|0,o=o+Math.imul(S,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,ut)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Mt=(u+(n=n+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,q),i=(i=Math.imul(z,K))+Math.imul(U,q)|0,o=Math.imul(U,K),n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,H)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(B,X)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,st)|0)+Math.imul(S,ot)|0,o=o+Math.imul(S,st)|0,n=n+Math.imul(b,lt)|0,i=(i=i+Math.imul(b,ut)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,ut)|0,n=n+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ft)|0;var Tt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(z,Z),i=(i=Math.imul(z,H))+Math.imul(U,Z)|0,o=Math.imul(U,H),n=n+Math.imul(L,X)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Y)|0,n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(k,rt)|0,o=o+Math.imul(k,nt)|0,n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,ut)|0)+Math.imul(S,lt)|0,o=o+Math.imul(S,ut)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var At=(u+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,X),i=(i=Math.imul(z,Y))+Math.imul(U,X)|0,o=Math.imul(U,Y),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,n=n+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,ut)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ut)|0,n=n+Math.imul(E,ht)|0,i=(i=i+Math.imul(E,ft)|0)+Math.imul(S,ht)|0,o=o+Math.imul(S,ft)|0;var Ct=(u+(n=n+Math.imul(b,pt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(w,pt)|0))<<13)|0;u=((o=o+Math.imul(w,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,$),i=(i=Math.imul(z,tt))+Math.imul(U,$)|0,o=Math.imul(U,tt),n=n+Math.imul(L,rt)|0,i=(i=i+Math.imul(L,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(k,lt)|0,o=o+Math.imul(k,ut)|0,n=n+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,ft)|0;var It=(u+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,mt)|0)+Math.imul(S,pt)|0))<<13)|0;u=((o=o+Math.imul(S,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,rt),i=(i=Math.imul(z,nt))+Math.imul(U,rt)|0,o=Math.imul(U,nt),n=n+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,st)|0,n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,ut)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var kt=(u+(n=n+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,mt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(U,ot)|0,o=Math.imul(U,st),n=n+Math.imul(L,lt)|0,i=(i=i+Math.imul(L,ut)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,ut)|0,n=n+Math.imul(B,ht)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Rt=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(k,pt)|0))<<13)|0;u=((o=o+Math.imul(k,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,lt),i=(i=Math.imul(z,ut))+Math.imul(U,lt)|0,o=Math.imul(U,ut),n=n+Math.imul(L,ht)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(O,ht)|0,o=o+Math.imul(O,ft)|0;var Bt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(P,pt)|0))<<13)|0;u=((o=o+Math.imul(P,mt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,ht),i=(i=Math.imul(z,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Pt=(u+(n=n+Math.imul(L,pt)|0)|0)+((8191&(i=(i=i+Math.imul(L,mt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((o=o+Math.imul(O,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Dt=(u+(n=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((o=Math.imul(U,mt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,l[0]=gt,l[1]=yt,l[2]=_t,l[3]=vt,l[4]=bt,l[5]=wt,l[6]=xt,l[7]=Et,l[8]=St,l[9]=Mt,l[10]=Tt,l[11]=At,l[12]=Ct,l[13]=It,l[14]=kt,l[15]=Rt,l[16]=Bt,l[17]=Pt,l[18]=Dt,0!==u&&(l[19]=u,r.length++),r};function m(t,e,r){return(new g).mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,l=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=l;u++){var c=o-u,h=(0|t.words[c])*(0|e.words[u]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e),r},g.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},g.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},g.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var h=l,f=u,d=0;d<s;d++){var p=r[c+d],m=n[c+d],g=r[c+d+s],y=n[c+d+s],_=h*g-f*y;y=h*y+f*g,g=_,r[c+d]=p+g,n[c+d]=m+y,r[c+d+s]=p-g,n[c+d+s]=m-y,d!==a&&(_=l*h-u*f,f=l*f+u*h,h=_)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},g.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),l=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,l,n,i),this.transform(u,o,c,h,n,i);for(var d=0;d<n;d++){var p=a[d]*c[d]-l[d]*h[d];l[d]=a[d]*h[d]+l[d]*c[d],a[d]=p}return this.conjugate(a,l,n),this.transform(a,l,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"===typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,l=(0|this.words[e])-a<<r;this.words[e]=l|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,l=r;if(i-=s,i=Math.max(0,i),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var h=0|this.words[u];this.words[u]=c<<26-o|h>>>o,c=h&a}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var l=(0|t.words[i])*e;a=((o-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,l=n.length-i.length;if("mod"!==e){(a=new o(null)).length=l+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,l);0===c.negative&&(n=c,a&&(a.words[l]=1));for(var h=l-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=f)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),l=new o(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(c),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(c),l.isub(h)),a.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(l)):(r.isub(e),a.isub(i),l.isub(s))}return{a:a,b:l,gcd:r.iushln(u)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),l=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,c=1;0===(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var h=0,f=1;0===(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},i(v,_),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,_),i(w,_),i(x,_),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new b;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return y[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),l=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var h=this.pow(c,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var m=d,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=g}return f},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,l=e.bitLength()%26;for(0===l&&(l=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=l-1;c>=0;c--){var h=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===n&&0===c)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}l=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new S(t)},i(S,E),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,r(12)(t))},,function(t,e,r){e.publicEncrypt=r(328),e.privateDecrypt=r(330),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}},function(t,e,r){var n=r(52),i=r(27),o=r(37),s=r(151),a=r(152),l=r(83),u=r(153),c=r(74),h=r(1).Buffer;t.exports=function(t,e,r){var f;f=t.padding?t.padding:r?1:4;var d,p=n(t);if(4===f)d=function(t,e){var r=t.modulus.byteLength(),n=e.length,u=o("sha1").update(h.alloc(0)).digest(),c=u.length,f=2*c;if(n>r-f-2)throw new Error("message too long");var d=h.alloc(r-n-f-2),p=r-c-1,m=i(c),g=a(h.concat([u,d,h.alloc(1,1),e],p),s(m,p)),y=a(m,s(g,c));return new l(h.concat([h.alloc(1),y,g],r))}(p,e);else if(1===f)d=function(t,e,r){var n,o=e.length,s=t.modulus.byteLength();if(o>s-11)throw new Error("message too long");n=r?h.alloc(s-o-3,255):function(t){var e,r=h.allocUnsafe(t),n=0,o=i(2*t),s=0;for(;n<t;)s===o.length&&(o=i(2*t),s=0),(e=o[s++])&&(r[n++]=e);return r}(s-o-3);return new l(h.concat([h.from([0,r?1:2]),n,h.alloc(1),e],s))}(p,e,r);else{if(3!==f)throw new Error("unknown padding");if((d=new l(e)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return r?c(d,p):u(d,p)}},,function(t,e,r){var n=r(52),i=r(151),o=r(152),s=r(83),a=r(74),l=r(37),u=r(153),c=r(1).Buffer;t.exports=function(t,e,r){var h;h=t.padding?t.padding:r?1:4;var f,d=n(t),p=d.modulus.byteLength();if(e.length>p||new s(e).cmp(d.modulus)>=0)throw new Error("decryption error");f=r?u(new s(e),d):a(e,d);var m=c.alloc(p-f.length);if(f=c.concat([m,f],p),4===h)return function(t,e){var r=t.modulus.byteLength(),n=l("sha1").update(c.alloc(0)).digest(),s=n.length;if(0!==e[0])throw new Error("decryption error");var a=e.slice(1,s+1),u=e.slice(s+1),h=o(a,i(u,s)),f=o(u,i(h,r-s-1));if(function(t,e){t=c.from(t),e=c.from(e);var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));var i=-1;for(;++i<n;)r+=t[i]^e[i];return r}(n,f.slice(0,s)))throw new Error("decryption error");var d=s;for(;0===f[d];)d++;if(1!==f[d++])throw new Error("decryption error");return f.slice(d)}(d,f);if(1===h)return function(t,e,r){var n=e.slice(0,2),i=2,o=0;for(;0!==e[i++];)if(i>=e.length){o++;break}var s=e.slice(2,i-1);("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&o++;s.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(i)}(0,f,r);if(3===h)return f;throw new Error("unknown padding")}},function(t,e,r){"use strict";(function(t,n){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=r(1),s=r(27),a=o.Buffer,l=o.kMaxLength,u=t.crypto||t.msCrypto,c=Math.pow(2,32)-1;function h(t,e){if("number"!==typeof t||t!==t)throw new TypeError("offset must be a number");if(t>c||t<0)throw new TypeError("offset must be a uint32");if(t>l||t>e)throw new RangeError("offset out of range")}function f(t,e,r){if("number"!==typeof t||t!==t)throw new TypeError("size must be a number");if(t>c||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>l)throw new RangeError("buffer too small")}function d(t,e,r,i){if(n.browser){var o=t.buffer,a=new Uint8Array(o,e,r);return u.getRandomValues(a),i?void n.nextTick((function(){i(null,t)})):t}if(!i)return s(r).copy(t,e),t;s(r,(function(r,n){if(r)return i(r);n.copy(t,e),i(null,t)}))}u&&u.getRandomValues||!n.browser?(e.randomFill=function(e,r,n,i){if(!a.isBuffer(e)&&!(e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"===typeof r)i=r,r=0,n=e.length;else if("function"===typeof n)i=n,n=e.length-r;else if("function"!==typeof i)throw new TypeError('"cb" argument must be a function');return h(r,e.length),f(n,r,e.length),d(e,r,n,i)},e.randomFillSync=function(e,r,n){"undefined"===typeof r&&(r=0);if(!a.isBuffer(e)&&!(e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');h(r,e.length),void 0===n&&(n=e.length-r);return f(n,r,e.length),d(e,r,n)}):(e.randomFill=i,e.randomFillSync=i)}).call(this,r(6),r(5))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validate=void 0,e.validate=function(t){const e=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(const r of e)if(t[r.invalid]){const t=`'${r.invalid}' is not a valid configuration option. Please use '${r.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(t)}}},function(t){t.exports=JSON.parse('{"name":"google-auth-library","version":"6.1.6","author":"Google Inc.","description":"Google APIs Authentication Client Library for Node.js","engines":{"node":">=10"},"main":"./build/src/index.js","types":"./build/src/index.d.ts","repository":"googleapis/google-auth-library-nodejs.git","keywords":["google","api","google apis","client","client library"],"dependencies":{"arrify":"^2.0.0","base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","fast-text-encoding":"^1.0.0","gaxios":"^4.0.0","gcp-metadata":"^4.2.0","gtoken":"^5.0.4","jws":"^4.0.0","lru-cache":"^6.0.0"},"devDependencies":{"@compodoc/compodoc":"^1.1.7","@types/base64-js":"^1.2.5","@types/chai":"^4.1.7","@types/jws":"^3.1.0","@types/lru-cache":"^5.0.0","@types/mocha":"^8.0.0","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^10.5.1","@types/sinon":"^9.0.0","@types/tmp":"^0.2.0","assert-rejects":"^1.0.0","c8":"^7.0.0","chai":"^4.2.0","codecov":"^3.0.2","execa":"^5.0.0","gts":"^2.0.0","is-docker":"^2.0.0","karma":"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^4.0.0","keypair":"^1.0.1","linkinator":"^2.0.0","mocha":"^8.0.0","mv":"^2.1.1","ncp":"^2.0.0","nock":"^13.0.0","null-loader":"^4.0.0","puppeteer":"^5.0.0","sinon":"^9.0.0","tmp":"^0.2.0","ts-loader":"^8.0.0","typescript":"^3.8.3","webpack":"^4.20.2","webpack-cli":"^4.0.0","@microsoft/api-documenter":"^7.8.10","@microsoft/api-extractor":"^7.8.10"},"files":["build/src","!build/src/**/*.map"],"scripts":{"test":"c8 mocha build/test","clean":"gts clean","prepare":"npm run compile","lint":"gts check","compile":"tsc -p .","fix":"gts fix","pretest":"npm run compile","docs":"compodoc src/","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile","webpack":"webpack","browser-test":"karma start","docs-test":"linkinator docs","predocs-test":"npm run docs","prelint":"cd samples; npm link ../; npm install","precompile":"gts clean","api-extractor":"api-extractor run --local","api-documenter":"api-documenter yaml --input-folder=temp"},"license":"Apache-2.0"}')},function(t,e,r){"use strict";t.exports=t=>null===t||void 0===t?[]:Array.isArray(t)?t:"string"===typeof t?[t]:"function"===typeof t[Symbol.iterator]?[...t]:[t]},function(t,e,r){"use strict";function n(t){return(t/8|0)+(t%8===0?0:1)}var i={ES256:n(256),ES384:n(384),ES512:n(521)};t.exports=function(t){var e=i[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuthClient=void 0;const n=r(13),i=r(84);class o extends n.EventEmitter{constructor(){super(...arguments),this.transporter=new i.DefaultTransporter,this.credentials={}}setCredentials(t){this.credentials=t}addSharedMetadataHeaders(t){return!t["x-goog-user-project"]&&this.quotaProjectId&&(t["x-goog-user-project"]=this.quotaProjectId),t}}e.AuthClient=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleToken=void 0;const n=r(26),i=r(59),o=r(160),s=r(103),a=r(22),l=n.readFile?a.promisify(n.readFile):async()=>{throw new c("use key rather than keyFile.","MISSING_CREDENTIALS")},u="https://www.googleapis.com/oauth2/v4/token";class c extends Error{constructor(t,e){super(t),this.code=e}}let h;e.GoogleToken=class{constructor(t){this.configure(t)}get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}hasExpired(){const t=(new Date).getTime();return!this.rawToken||!this.expiresAt||t>=this.expiresAt}isTokenExpiring(){var t;const e=(new Date).getTime(),r=null!==(t=this.eagerRefreshThresholdMillis)&&void 0!==t?t:0;return!this.rawToken||!this.expiresAt||this.expiresAt<=e+r}getToken(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof t&&(e=t,t=void 0),e=Object.assign({forceRefresh:!1},e),!t)return this.getTokenAsync(e);{const r=t;this.getTokenAsync(e).then((t=>r(null,t)),t)}}async getCredentials(t){switch(s.extname(t)){case".json":{const e=await l(t,"utf8"),r=JSON.parse(e),n=r.private_key,i=r.client_email;if(!n||!i)throw new c("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:n,clientEmail:i}}case".der":case".crt":case".pem":return{privateKey:await l(t,"utf8")};case".p12":case".pfx":h||(h=(await Promise.resolve().then((()=>r(341)))).getPem);return{privateKey:await h(t)};default:throw new c("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, *.pem, and *.p12.","UNKNOWN_CERTIFICATE_TYPE")}}async getTokenAsync(t){if(this.inFlightRequest&&!t.forceRefresh)return this.inFlightRequest;try{return await(this.inFlightRequest=this.getTokenAsyncInner(t))}finally{this.inFlightRequest=void 0}}async getTokenAsyncInner(t){if(!1===this.isTokenExpiring()&&!1===t.forceRefresh)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){const t=await this.getCredentials(this.keyFile);this.key=t.privateKey,this.iss=t.clientEmail||this.iss,t.clientEmail||this.ensureEmail()}return this.requestToken()}ensureEmail(){if(!this.iss)throw new c("email is required.","MISSING_CREDENTIALS")}revokeToken(t){if(!t)return this.revokeTokenAsync();this.revokeTokenAsync().then((()=>t()),t)}async revokeTokenAsync(){if(!this.accessToken)throw new Error("No token to revoke.");const t="https://accounts.google.com/o/oauth2/revoke?token="+this.accessToken;await i.request({url:t}),this.configure({email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})}configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.keyFile=t.keyFile,this.key=t.key,this.rawToken=void 0,this.iss=t.email||t.iss,this.sub=t.sub,this.additionalClaims=t.additionalClaims,"object"===typeof t.scope?this.scope=t.scope.join(" "):this.scope=t.scope,this.eagerRefreshThresholdMillis=t.eagerRefreshThresholdMillis}async requestToken(){const t=Math.floor((new Date).getTime()/1e3),e=this.additionalClaims||{},r=Object.assign({iss:this.iss,scope:this.scope,aud:u,exp:t+3600,iat:t,sub:this.sub},e),n=o.sign({header:{alg:"RS256"},payload:r,secret:this.key});try{const e=await i.request({method:"POST",url:u,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:n},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json"});return this.rawToken=e.data,this.expiresAt=null===e.data.expires_in||void 0===e.data.expires_in?void 0:1e3*(t+e.data.expires_in),this.rawToken}catch(s){this.rawToken=void 0,this.tokenExpires=void 0;const t=s.response&&s.response.data?s.response.data:{};if(t.error){const e=t.error_description?`: ${t.error_description}`:"";s.message=`${t.error}${e}`}throw s}}}},function(t,e,r){var n=r(1).Buffer,i=r(161),o=r(162),s=r(38),a=r(163),l=r(22);function u(t,e){return n.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,s=o(e.alg),c=function(t,e,r){r=r||"utf8";var n=u(a(t),"binary"),i=u(a(e),r);return l.format("%s.%s",n,i)}(e,r,i),h=s.sign(c,n);return l.format("%s.%s",c,h)}function h(t){var e=t.secret||t.privateKey||t.key,r=new i(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new i(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}l.inherits(h,s),h.prototype.sign=function(){try{var t=c({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",t),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},h.sign=c,t.exports=h},function(t,e,r){"use strict";var n=r(3).Buffer,i=r(3).SlowBuffer;function o(t,e){if(!n.isBuffer(t)||!n.isBuffer(e))return!1;if(t.length!==e.length)return!1;for(var r=0,i=0;i<t.length;i++)r|=t[i]^e[i];return 0===r}t.exports=o,o.install=function(){n.prototype.equal=i.prototype.equal=function(t){return o(this,t)}};var s=n.prototype.equal,a=i.prototype.equal;o.restore=function(){n.prototype.equal=s,i.prototype.equal=a}},function(t,e,r){var n=r(1).Buffer,i=r(161),o=r(162),s=r(38),a=r(163),l=r(22),u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function c(t){if(function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t))return t;try{return JSON.parse(t)}catch(e){return}}function h(t){var e=t.split(".",1)[0];return c(n.from(e,"base64").toString("binary"))}function f(t){return t.split(".")[2]}function d(t){return u.test(t)&&!!h(t)}function p(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var i=f(t=a(t)),s=function(t){return t.split(".",2).join(".")}(t);return o(e).verify(s,i,r)}function m(t,e){if(e=e||{},!d(t=a(t)))return null;var r=h(t);if(!r)return null;var i=function(t,e){e=e||"utf8";var r=t.split(".")[1];return n.from(r,"base64").toString(e)}(t);return("JWT"===r.typ||e.json)&&(i=JSON.parse(i,e.encoding)),{header:r,payload:i,signature:f(t)}}function g(t){var e=(t=t||{}).secret||t.publicKey||t.key,r=new i(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new i(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}l.inherits(g,s),g.prototype.verify=function(){try{var t=p(this.signature.buffer,this.algorithm,this.key.buffer),e=m(this.signature.buffer,this.encoding);return this.emit("done",t,e),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}},g.decode=m,g.isValid=d,g.verify=p,t.exports=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPem=void 0;const n=r(26),i=r(342),o=r(22).promisify(n.readFile);function s(t){return o(t,{encoding:"base64"}).then((t=>function(t){const e=i.util.decode64(t),r=i.asn1.fromDer(e),n=i.pkcs12.pkcs12FromAsn1(r,"notasecret").getBags({friendlyName:"privatekey"});if(n.friendlyName){const t=n.friendlyName[0].key;return i.pki.privateKeyToPem(t).replace(/\r\n/g,"\n")}throw new Error("Unable to get friendly name.")}(t)))}e.getPem=function(t,e){if(!e)return s(t);s(t).then((t=>e(null,t))).catch((t=>e(t,null)))}},function(t,e,r){t.exports=r(2),r(23),r(344),r(15),r(85),r(53),r(346),r(43),r(348),r(349),r(350),r(175),r(87),r(33),r(171),r(173),r(351),r(166),r(172),r(169),r(90),r(11),r(170),r(352),r(165),r(4)},function(t,e,r){(function(e){var r={};t.exports=r;var n={};r.encode=function(t,e,r){if("string"!==typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!==typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(t instanceof Uint8Array){var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var l=0,u=t[i];l<a.length;++l)u+=a[l]<<8,a[l]=u%o,u=u/o|0;for(;u>0;)a.push(u%o),u=u/o|0}for(i=0;0===t[i]&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}else n=function(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var l="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)l+=i;for(r=o.length-1;r>=0;--r)l+=e[o[r]];return l}(t,e);if(r){var c=new RegExp(".{1,"+r+"}","g");n=n.match(c).join("\r\n")}return n},r.decode=function(t,r){if("string"!==typeof t)throw new TypeError('"input" must be a string.');if("string"!==typeof r)throw new TypeError('"alphabet" must be a string.');var i=n[r];if(!i){i=n[r]=[];for(var o=0;o<r.length;++o)i[r.charCodeAt(o)]=o}t=t.replace(/\s/g,"");var s=r.length,a=r.charAt(0),l=[0];for(o=0;o<t.length;o++){var u=i[t.charCodeAt(o)];if(void 0===u)return;for(var c=0,h=u;c<l.length;++c)h+=l[c]*s,l[c]=255&h,h>>=8;for(;h>0;)l.push(255&h),h>>=8}for(var f=0;t[f]===a&&f<t.length-1;++f)l.push(0);return"undefined"!==typeof e?e.from(l.reverse()):new Uint8Array(l.reverse())}}).call(this,r(3).Buffer)},function(t,e,r){var n=r(2);r(23),r(165);var i=t.exports=n.tls;function o(t,e,r){var o=e.entity===n.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:n.cipher.createDecipher("AES-CBC",o?r.keys.server_write_key:r.keys.client_write_key),iv:o?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:n.cipher.createCipher("AES-CBC",o?r.keys.client_write_key:r.keys.server_write_key),iv:o?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=u,t.write.cipherFunction=s,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=i.hmac_sha1}function s(t,e){var r,o=!1,s=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(s),e.updateSequenceNumber(),r=t.version.minor===i.Versions.TLS_1_0.minor?e.cipherState.init?null:e.cipherState.iv:n.random.getBytesSync(16),e.cipherState.init=!0;var l=e.cipherState.cipher;return l.start({iv:r}),t.version.minor>=i.Versions.TLS_1_1.minor&&l.output.putBytes(r),l.update(t.fragment),l.finish(a)&&(t.fragment=l.output,t.length=t.fragment.length(),o=!0),o}function a(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function l(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),s=i-1-o;s<i-1;++s)n=n&&e.at(s)==o;n&&e.truncate(o+1)}return n}function u(t,e){var r,o=!1;r=t.version.minor===i.Versions.TLS_1_0.minor?e.cipherState.init?null:e.cipherState.iv:t.fragment.getBytes(16),e.cipherState.init=!0;var s=e.cipherState.cipher;s.start({iv:r}),s.update(t.fragment),o=s.finish(l);var a=e.macLength,u=n.random.getBytesSync(a),c=s.output.length();c>=a?(t.fragment=s.output.getBytes(c-a),u=s.output.getBytes(a)):t.fragment=s.output.getBytes(),t.fragment=n.util.createBuffer(t.fragment),t.length=t.fragment.length();var h=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),o=function(t,e,r){var i=n.hmac.create();return i.start("SHA1",t),i.update(e),e=i.digest().getBytes(),i.start(null,null),i.update(r),r=i.digest().getBytes(),e===r}(e.macKey,u,h)&&o,o}i.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=i.BulkCipherAlgorithm.aes,t.cipher_type=i.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=i.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:o},i.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=i.BulkCipherAlgorithm.aes,t.cipher_type=i.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=i.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:o}},function(t,e,r){var n=r(2);r(175),t.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},function(t,e,r){(function(e){var n=r(2);r(55),r(11),r(176),r(4);var i=r(347),o=i.publicKeyValidator,s=i.privateKeyValidator;if("undefined"===typeof a)var a=n.jsbn.BigInteger;var l=n.util.ByteBuffer,u="undefined"===typeof e?Uint8Array:e;n.pki=n.pki||{},t.exports=n.pki.ed25519=n.ed25519=n.ed25519||{};var c=n.ed25519;function h(t){var r=t.message;if(r instanceof Uint8Array||r instanceof u)return r;var n=t.encoding;if(void 0===r){if(!t.md)throw new TypeError('"options.message" or "options.md" not specified.');r=t.md.digest().getBytes(),n="binary"}if("string"===typeof r&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"===typeof r){if("undefined"!==typeof e)return e.from(r,n);r=new l(r,n)}else if(!(r instanceof l))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var i=new u(r.length()),o=0;o<i.length;++o)i[o]=r.at(o);return i}c.constants={},c.constants.PUBLIC_KEY_BYTE_LENGTH=32,c.constants.PRIVATE_KEY_BYTE_LENGTH=64,c.constants.SEED_BYTE_LENGTH=32,c.constants.SIGN_BYTE_LENGTH=64,c.constants.HASH_BYTE_LENGTH=64,c.generateKeyPair=function(t){var e=(t=t||{}).seed;if(void 0===e)e=n.random.getBytesSync(c.constants.SEED_BYTE_LENGTH);else if("string"===typeof e){if(e.length!==c.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+c.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=h({message:e,encoding:"binary"});for(var r=new u(c.constants.PUBLIC_KEY_BYTE_LENGTH),i=new u(c.constants.PRIVATE_KEY_BYTE_LENGTH),o=0;o<32;++o)i[o]=e[o];return function(t,e){var r,n=[L(),L(),L(),L()],i=b(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,R(n,i),M(t,n),r=0;r<32;++r)e[r+32]=t[r]}(r,i),{publicKey:r,privateKey:i}},c.privateKeyFromAsn1=function(t){var e={},r=[];if(!n.asn1.validate(t,s,e,r)){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=n.asn1.derToOid(e.privateKeyOid),a=n.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.privateKey;return{privateKeyBytes:h({message:n.asn1.fromDer(l).value,encoding:"binary"})}},c.publicKeyFromAsn1=function(t){var e={},r=[];if(!n.asn1.validate(t,o,e,r)){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=n.asn1.derToOid(e.publicKeyOid),a=n.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var l=e.ed25519PublicKey;if(l.length!==c.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return h({message:l,encoding:"binary"})},c.publicKeyFromPrivateKey=function(t){var e=h({message:(t=t||{}).privateKey,encoding:"binary"});if(e.length!==c.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+c.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new u(c.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r},c.sign=function(t){var e=h(t=t||{}),r=h({message:t.privateKey,encoding:"binary"});if(r.length===c.constants.SEED_BYTE_LENGTH)r=c.generateKeyPair({seed:r}).privateKey;else if(r.length!==c.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+c.constants.SEED_BYTE_LENGTH+" or "+c.constants.PRIVATE_KEY_BYTE_LENGTH);var n=new u(c.constants.SIGN_BYTE_LENGTH+e.length);!function(t,e,r,n){var i,o,s=new Float64Array(64),a=[L(),L(),L(),L()],l=b(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=l[32+i];var c=b(t.subarray(32),r+32);for(x(c),R(a,c),M(t,a),i=32;i<64;++i)t[i]=n[i];var h=b(t,r+64);for(x(h),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=c[i];for(i=0;i<32;++i)for(o=0;o<32;o++)s[i+o]+=h[i]*l[o];w(t.subarray(32),s)}(n,e,e.length,r);for(var i=new u(c.constants.SIGN_BYTE_LENGTH),o=0;o<i.length;++o)i[o]=n[o];return i},c.verify=function(t){var e=h(t=t||{});if(void 0===t.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=h({message:t.signature,encoding:"binary"});if(r.length!==c.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+c.constants.SIGN_BYTE_LENGTH);var n=h({message:t.publicKey,encoding:"binary"});if(n.length!==c.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+c.constants.PUBLIC_KEY_BYTE_LENGTH);var i,o=new u(c.constants.SIGN_BYTE_LENGTH+e.length),s=new u(c.constants.SIGN_BYTE_LENGTH+e.length);for(i=0;i<c.constants.SIGN_BYTE_LENGTH;++i)o[i]=r[i];for(i=0;i<e.length;++i)o[i+c.constants.SIGN_BYTE_LENGTH]=e[i];return function(t,e,r,n){var i,o=new u(32),s=[L(),L(),L(),L()],a=[L(),L(),L(),L()];if(-1,r<64)return-1;if(function(t,e){var r=L(),n=L(),i=L(),o=L(),s=L(),a=L(),l=L();B(t[2],d),function(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}(t[1],e),z(i,t[1]),U(o,i,p),N(i,i,t[2]),O(o,t[2],o),z(s,o),z(a,s),U(l,a,s),U(r,l,i),U(r,r,o),function(t,e){var r,n=L();for(r=0;r<16;++r)n[r]=e[r];for(r=250;r>=0;--r)z(n,n),1!==r&&U(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}(r,r),U(r,r,i),U(r,r,o),U(r,r,o),U(t[0],r,o),z(n,t[0]),U(n,n,o),A(n,i)&&U(t[0],t[0],v);if(z(n,t[0]),U(n,n,o),A(n,i))return-1;I(t[0])===e[31]>>7&&N(t[0],f,t[0]);return U(t[3],t[0],t[1]),0}(a,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var l=b(t,r);if(x(l),k(s,a,l),R(a,e.subarray(32)),E(s,a),M(o,s),r-=64,C(e,0,o,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return r}(s,o,o.length,n)>=0};var f=L(),d=L([1]),p=L([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),m=L([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),g=L([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),y=L([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),_=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),v=L([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function b(t,r){var i=n.md.sha512.create(),o=new l(t);i.update(o.getBytes(r),"binary");var s=i.digest().getBytes();if("undefined"!==typeof e)return e.from(s,"binary");for(var a=new u(c.constants.HASH_BYTE_LENGTH),h=0;h<64;++h)a[h]=s.charCodeAt(h);return a}function w(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*_[i-(n-32)],r=e[i]+128>>8,e[i]-=256*r;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*_[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*_[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function x(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;w(t,e)}function E(t,e){var r=L(),n=L(),i=L(),o=L(),s=L(),a=L(),l=L(),u=L(),c=L();N(r,t[1],t[0]),N(c,e[1],e[0]),U(r,r,c),O(n,t[0],t[1]),O(c,e[0],e[1]),U(n,n,c),U(i,t[3],e[3]),U(i,i,m),U(o,t[2],e[2]),O(o,o,o),N(s,n,r),N(a,o,i),O(l,o,i),O(u,n,r),U(t[0],s,a),U(t[1],u,l),U(t[2],l,a),U(t[3],s,u)}function S(t,e,r){for(var n=0;n<4;++n)D(t[n],e[n],r)}function M(t,e){var r=L(),n=L(),i=L();!function(t,e){var r,n=L();for(r=0;r<16;++r)n[r]=e[r];for(r=253;r>=0;--r)z(n,n),2!==r&&4!==r&&U(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}(i,e[2]),U(r,e[0],i),U(n,e[1],i),T(t,n),t[31]^=I(r)<<7}function T(t,e){var r,n,i,o=L(),s=L();for(r=0;r<16;++r)s[r]=e[r];for(P(s),P(s),P(s),n=0;n<2;++n){for(o[0]=s[0]-65517,r=1;r<15;++r)o[r]=s[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,D(s,o,1-i)}for(r=0;r<16;r++)t[2*r]=255&s[r],t[2*r+1]=s[r]>>8}function A(t,e){var r=new u(32),n=new u(32);return T(r,t),T(n,e),C(r,0,n,0)}function C(t,e,r,n){return function(t,e,r,n,i){var o,s=0;for(o=0;o<i;++o)s|=t[e+o]^r[n+o];return(1&s-1>>>8)-1}(t,e,r,n,32)}function I(t){var e=new u(32);return T(e,t),1&e[0]}function k(t,e,r){var n,i;for(B(t[0],f),B(t[1],d),B(t[2],d),B(t[3],f),i=255;i>=0;--i)S(t,e,n=r[i/8|0]>>(7&i)&1),E(e,t),E(t,t),S(t,e,n)}function R(t,e){var r=[L(),L(),L(),L()];B(r[0],g),B(r[1],y),B(r[2],d),U(r[3],g,y),k(t,r,e)}function B(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function P(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1)}function D(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}function L(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function O(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function N(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function z(t,e){U(t,e,e)}function U(t,e,r){var n,i,o=0,s=0,a=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,_=0,v=0,b=0,w=0,x=0,E=0,S=0,M=0,T=0,A=0,C=0,I=0,k=0,R=0,B=0,P=0,D=0,L=0,O=r[0],N=r[1],z=r[2],U=r[3],j=r[4],F=r[5],V=r[6],G=r[7],q=r[8],K=r[9],W=r[10],Z=r[11],H=r[12],Q=r[13],X=r[14],Y=r[15];o+=(n=e[0])*O,s+=n*N,a+=n*z,l+=n*U,u+=n*j,c+=n*F,h+=n*V,f+=n*G,d+=n*q,p+=n*K,m+=n*W,g+=n*Z,y+=n*H,_+=n*Q,v+=n*X,b+=n*Y,s+=(n=e[1])*O,a+=n*N,l+=n*z,u+=n*U,c+=n*j,h+=n*F,f+=n*V,d+=n*G,p+=n*q,m+=n*K,g+=n*W,y+=n*Z,_+=n*H,v+=n*Q,b+=n*X,w+=n*Y,a+=(n=e[2])*O,l+=n*N,u+=n*z,c+=n*U,h+=n*j,f+=n*F,d+=n*V,p+=n*G,m+=n*q,g+=n*K,y+=n*W,_+=n*Z,v+=n*H,b+=n*Q,w+=n*X,x+=n*Y,l+=(n=e[3])*O,u+=n*N,c+=n*z,h+=n*U,f+=n*j,d+=n*F,p+=n*V,m+=n*G,g+=n*q,y+=n*K,_+=n*W,v+=n*Z,b+=n*H,w+=n*Q,x+=n*X,E+=n*Y,u+=(n=e[4])*O,c+=n*N,h+=n*z,f+=n*U,d+=n*j,p+=n*F,m+=n*V,g+=n*G,y+=n*q,_+=n*K,v+=n*W,b+=n*Z,w+=n*H,x+=n*Q,E+=n*X,S+=n*Y,c+=(n=e[5])*O,h+=n*N,f+=n*z,d+=n*U,p+=n*j,m+=n*F,g+=n*V,y+=n*G,_+=n*q,v+=n*K,b+=n*W,w+=n*Z,x+=n*H,E+=n*Q,S+=n*X,M+=n*Y,h+=(n=e[6])*O,f+=n*N,d+=n*z,p+=n*U,m+=n*j,g+=n*F,y+=n*V,_+=n*G,v+=n*q,b+=n*K,w+=n*W,x+=n*Z,E+=n*H,S+=n*Q,M+=n*X,T+=n*Y,f+=(n=e[7])*O,d+=n*N,p+=n*z,m+=n*U,g+=n*j,y+=n*F,_+=n*V,v+=n*G,b+=n*q,w+=n*K,x+=n*W,E+=n*Z,S+=n*H,M+=n*Q,T+=n*X,A+=n*Y,d+=(n=e[8])*O,p+=n*N,m+=n*z,g+=n*U,y+=n*j,_+=n*F,v+=n*V,b+=n*G,w+=n*q,x+=n*K,E+=n*W,S+=n*Z,M+=n*H,T+=n*Q,A+=n*X,C+=n*Y,p+=(n=e[9])*O,m+=n*N,g+=n*z,y+=n*U,_+=n*j,v+=n*F,b+=n*V,w+=n*G,x+=n*q,E+=n*K,S+=n*W,M+=n*Z,T+=n*H,A+=n*Q,C+=n*X,I+=n*Y,m+=(n=e[10])*O,g+=n*N,y+=n*z,_+=n*U,v+=n*j,b+=n*F,w+=n*V,x+=n*G,E+=n*q,S+=n*K,M+=n*W,T+=n*Z,A+=n*H,C+=n*Q,I+=n*X,k+=n*Y,g+=(n=e[11])*O,y+=n*N,_+=n*z,v+=n*U,b+=n*j,w+=n*F,x+=n*V,E+=n*G,S+=n*q,M+=n*K,T+=n*W,A+=n*Z,C+=n*H,I+=n*Q,k+=n*X,R+=n*Y,y+=(n=e[12])*O,_+=n*N,v+=n*z,b+=n*U,w+=n*j,x+=n*F,E+=n*V,S+=n*G,M+=n*q,T+=n*K,A+=n*W,C+=n*Z,I+=n*H,k+=n*Q,R+=n*X,B+=n*Y,_+=(n=e[13])*O,v+=n*N,b+=n*z,w+=n*U,x+=n*j,E+=n*F,S+=n*V,M+=n*G,T+=n*q,A+=n*K,C+=n*W,I+=n*Z,k+=n*H,R+=n*Q,B+=n*X,P+=n*Y,v+=(n=e[14])*O,b+=n*N,w+=n*z,x+=n*U,E+=n*j,S+=n*F,M+=n*V,T+=n*G,A+=n*q,C+=n*K,I+=n*W,k+=n*Z,R+=n*H,B+=n*Q,P+=n*X,D+=n*Y,b+=(n=e[15])*O,s+=38*(x+=n*z),a+=38*(E+=n*U),l+=38*(S+=n*j),u+=38*(M+=n*F),c+=38*(T+=n*V),h+=38*(A+=n*G),f+=38*(C+=n*q),d+=38*(I+=n*K),p+=38*(k+=n*W),m+=38*(R+=n*Z),g+=38*(B+=n*H),y+=38*(P+=n*Q),_+=38*(D+=n*X),v+=38*(L+=n*Y),o=(n=(o+=38*(w+=n*N))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=l,t[4]=u,t[5]=c,t[6]=h,t[7]=f,t[8]=d,t[9]=p,t[10]=m,t[11]=g,t[12]=y,t[13]=_,t[14]=v,t[15]=b}}).call(this,r(3).Buffer)},function(t,e,r){var n=r(2);r(15);var i=n.asn1;e.privateKeyValidator={name:"PrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},e.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}},function(t,e,r){var n=r(2);r(4),r(11),r(55),t.exports=n.kem=n.kem||{};var i=n.jsbn.BigInteger;function o(t,e,r,i){t.generate=function(t,o){for(var s=new n.util.ByteBuffer,a=Math.ceil(o/i)+r,l=new n.util.ByteBuffer,u=r;u<a;++u){l.putInt32(u),e.start(),e.update(t+l.getBytes());var c=e.digest();s.putBytes(c.getBytes(i))}return s.truncate(s.length()-o),s.getBytes()}}n.kem.rsa={},n.kem.rsa.create=function(t,e){var r=(e=e||{}).prng||n.random,o={encrypt:function(e,o){var s,a=Math.ceil(e.n.bitLength()/8);do{s=new i(n.util.bytesToHex(r.getBytesSync(a)),16).mod(e.n)}while(s.compareTo(i.ONE)<=0);var l=a-(s=n.util.hexToBytes(s.toString(16))).length;return l>0&&(s=n.util.fillString(String.fromCharCode(0),l)+s),{encapsulation:e.encrypt(s,"NONE"),key:t.generate(s,o)}},decrypt:function(e,r,n){var i=e.decrypt(r,"NONE");return t.generate(i,n)}};return o},n.kem.kdf1=function(t,e){o(this,t,0,e||t.digestLength)},n.kem.kdf2=function(t,e){o(this,t,1,e||t.digestLength)}},function(t,e,r){var n=r(2);r(4),t.exports=n.log=n.log||{},n.log.levels=["none","error","warning","info","debug","verbose","max"];var i={},o=[],s=null;n.log.LEVEL_LOCKED=2,n.log.NO_LEVEL_CHECK=4,n.log.INTERPOLATE=8;for(var a=0;a<n.log.levels.length;++a){var l=n.log.levels[a];i[l]={index:a,name:l.toUpperCase()}}n.log.logMessage=function(t){for(var e=i[t.level].index,r=0;r<o.length;++r){var s=o[r];if(s.flags&n.log.NO_LEVEL_CHECK)s.f(t);else e<=i[s.level].index&&s.f(s,t)}},n.log.prepareStandard=function(t){"standard"in t||(t.standard=i[t.level].name+" ["+t.category+"] "+t.message)},n.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]||!1),t.full=n.util.format.apply(this,e)}},n.log.prepareStandardFull=function(t){"standardFull"in t||(n.log.prepareStandard(t),t.standardFull=t.standard)};var u=["error","warning","info","debug","verbose"];for(a=0;a<u.length;++a)!function(t){n.log[t]=function(e,r){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:t,category:e,message:r,arguments:i};n.log.logMessage(o)}}(u[a]);if(n.log.makeLogger=function(t){var e={flags:0,f:t};return n.log.setLevel(e,"none"),e},n.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&n.log.LEVEL_LOCKED))for(var i=0;i<n.log.levels.length;++i){if(e==n.log.levels[i]){t.level=e,r=!0;break}}return r},n.log.lock=function(t,e){"undefined"===typeof e||e?t.flags|=n.log.LEVEL_LOCKED:t.flags&=~n.log.LEVEL_LOCKED},n.log.addLogger=function(t){o.push(t)},"undefined"!==typeof console&&"log"in console){var c;if(console.error&&console.warn&&console.info&&console.debug){var h={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},f=function(t,e){n.log.prepareStandard(e);var r=h[e.level],i=[e.standard];i=i.concat(e.arguments.slice()),r.apply(console,i)};c=n.log.makeLogger(f)}else{f=function(t,e){n.log.prepareStandardFull(e),console.log(e.standardFull)};c=n.log.makeLogger(f)}n.log.setLevel(c,"debug"),n.log.addLogger(c),s=c}else console={log:function(){}};if(null!==s&&"undefined"!==typeof window&&window.location){var d=new URL(window.location.href).searchParams;if(d.has("console.level")&&n.log.setLevel(s,d.get("console.level").slice(-1)[0]),d.has("console.lock"))"true"==d.get("console.lock").slice(-1)[0]&&n.log.lock(s)}n.log.consoleLogger=s},function(t,e,r){t.exports=r(17),r(86),r(44),r(168),r(176)},function(t,e,r){var n=r(2);r(23),r(15),r(53),r(24),r(33),r(174),r(11),r(4),r(89);var i=n.asn1,o=t.exports=n.pkcs7=n.pkcs7||{};function s(t){var e={},r=[];if(!i.validate(t,o.asn1.recipientInfoValidator,e,r)){var s=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw s.errors=r,s}return{version:e.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(e.issuer),serialNumber:n.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:i.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function a(t){for(var e,r=[],o=0;o<t.length;++o)r.push((e=t[o],i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.encryptedContent.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.encryptedContent.content)])));return r}function l(t){var e=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.digestAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.signatureAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),e.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[]),o=0;o<t.unauthenticatedAttributes.length;++o){var s=t.unauthenticatedAttributes[o];r.values.push(u(s))}e.value.push(r)}return e}function u(t){var e;if(t.type===n.pki.oids.contentType)e=i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.value).getBytes());else if(t.type===n.pki.oids.messageDigest)e=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),o=new Date("2050-01-01T00:00:00Z"),s=t.value;if("string"===typeof s){var a=Date.parse(s);s=isNaN(a)?13===s.length?i.utcTimeToDate(s):i.generalizedTimeToDate(s):new Date(a)}e=s>=r&&s<o?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(s)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(s))}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[e])])}function c(t,e,r){var o={};if(!i.validate(e,r,o,[])){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}if(i.derToOid(o.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(o.encryptedContent){var a="";if(n.util.isArray(o.encryptedContent))for(var l=0;l<o.encryptedContent.length;++l){if(o.encryptedContent[l].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=o.encryptedContent[l].value}else a=o.encryptedContent;t.encryptedContent={algorithm:i.derToOid(o.encAlgorithm),parameter:n.util.createBuffer(o.encParameter.value),content:n.util.createBuffer(a)}}if(o.content){a="";if(n.util.isArray(o.content))for(l=0;l<o.content.length;++l){if(o.content[l].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=o.content[l].value}else a=o.content;t.content=n.util.createBuffer(a)}return t.version=o.version.charCodeAt(0),t.rawCapture=o,o}function h(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:e=n.aes.createDecryptionCipher(t.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:e=n.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}o.messageFromPem=function(t){var e=n.pem.decode(t)[0];if("PKCS7"!==e.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var s=i.fromDer(e.body);return o.messageFromAsn1(s)},o.messageToPem=function(t,e){var r={type:"PKCS7",body:i.toDer(t.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:e})},o.messageFromAsn1=function(t){var e={},r=[];if(!i.validate(t,o.asn1.contentInfoValidator,e,r)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw s.errors=r,s}var a,l=i.derToOid(e.contentType);switch(l){case n.pki.oids.envelopedData:a=o.createEnvelopedData();break;case n.pki.oids.encryptedData:a=o.createEncryptedData();break;case n.pki.oids.signedData:a=o.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+l+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a},o.createSignedData=function(){var t=null;return t={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(c(t,e,o.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var r=t.rawCapture.certificates.value,i=0;i<r.length;++i)t.certificates.push(n.pki.certificateFromAsn1(r[i]))},toAsn1:function(){t.contentInfo||t.sign();for(var e=[],r=0;r<t.certificates.length;++r)e.push(n.pki.certificateToAsn1(t.certificates[r]));var o=[],s=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return e.length>0&&s.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,e)),o.length>0&&s.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,o)),s.value[0].value.push(i.create(i.Class.UNIVERSAL,i.Type.SET,!0,t.signerInfos)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),s])},addSigner:function(e){var r=e.issuer,i=e.serialNumber;if(e.certificate){var o=e.certificate;"string"===typeof o&&(o=n.pki.certificateFromPem(o)),r=o.issuer.attributes,i=o.serialNumber}var s=e.key;if(!s)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"===typeof s&&(s=n.pki.privateKeyFromPem(s));var a=e.digestAlgorithm||n.pki.oids.sha1;switch(a){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var l=e.authenticatedAttributes||[];if(l.length>0){for(var u=!1,c=!1,h=0;h<l.length;++h){var f=l[h];if(u||f.type!==n.pki.oids.contentType){if(c||f.type!==n.pki.oids.messageDigest);else if(c=!0,u)break}else if(u=!0,c)break}if(!u||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:s,version:1,issuer:r,serialNumber:i,digestAlgorithm:a,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:l,unauthenticatedAttributes:[]})},sign:function(e){var r;(e=e||{},"object"!==typeof t.content||null===t.contentInfo)&&(t.contentInfo=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes())]),"content"in t&&(t.content instanceof n.util.ByteBuffer?r=t.content.bytes():"string"===typeof t.content&&(r=n.util.encodeUtf8(t.content)),e.detached?t.detachedContent=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r):t.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)]))));0!==t.signers.length&&function(e){var r;r=t.detachedContent?t.detachedContent:(r=t.contentInfo.value[1]).value[0];if(!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=i.derToOid(t.contentInfo.value[0].value),s=i.toDer(r);for(var a in s.getByte(),i.getBerValueLength(s),s=s.getBytes(),e)e[a].start().update(s);for(var c=new Date,h=0;h<t.signers.length;++h){var f=t.signers[h];if(0===f.authenticatedAttributes.length){if(o!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[]),p=0;p<f.authenticatedAttributes.length;++p){var m=f.authenticatedAttributes[p];m.type===n.pki.oids.messageDigest?m.value=e[f.digestAlgorithm].digest():m.type===n.pki.oids.signingTime&&(m.value||(m.value=c)),d.value.push(u(m)),f.authenticatedAttributesAsn1.value.push(u(m))}s=i.toDer(d).getBytes(),f.md.start().update(s)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=function(t){for(var e=[],r=0;r<t.length;++r)e.push(l(t[r]));return e}(t.signers)}(function(){for(var e={},r=0;r<t.signers.length;++r){var o=t.signers[r];(s=o.digestAlgorithm)in e||(e[s]=n.md[n.pki.oids[s]].create()),0===o.authenticatedAttributes.length?o.md=e[s]:o.md=n.md[n.pki.oids[s]].create()}for(var s in t.digestAlgorithmIdentifiers=[],e)t.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return e}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"===typeof e&&(e=n.pki.certificateFromPem(e)),t.certificates.push(e)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}}},o.createEncryptedData=function(){var t=null;return t={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){c(t,e,o.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),h(t)}}},o.createEnvelopedData=function(){var t=null;return t={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=c(t,e,o.asn1.envelopedDataValidator);t.recipients=function(t){for(var e=[],r=0;r<t.length;++r)e.push(s(t[r]));return e}(r.recipientInfos.value)},toAsn1:function(){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,a(t.recipients)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,(e=t.encryptedContent,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.algorithm).getBytes()),e.parameter?i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.content.getBytes())])]))])])]);var e},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var s=!0,a=0;a<r.length;++a)if(o[a].type!==r[a].type||o[a].value!==r[a].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==r)switch(e.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var i=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=n.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}h(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(void 0===t.encryptedContent.content){var i,o,s;switch(r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:i=16,o=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:i=24,o=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:i=32,o=16,s=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:i=24,o=8,s=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===e)e=n.util.createBuffer(n.random.getBytes(i));else if(e.length()!=i)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+i+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(o));var a=s(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var l=0;l<t.recipients.length;++l){var u=t.recipients[l];if(void 0===u.encryptedContent.content){if(u.encryptedContent.algorithm!==n.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm);u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data)}}}}}},function(t,e,r){var n=r(2);r(23),r(43),r(86),r(44),r(4);var i=t.exports=n.ssh=n.ssh||{};function o(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var i=n.util.hexToBytes(r);t.putInt32(i.length),t.putBytes(i)}function s(t,e){t.putInt32(e.length),t.putString(e)}function a(){for(var t=n.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}i.privateKeyToPutty=function(t,e,r){var i="ssh-rsa",l=""===(e=e||"")?"none":"aes256-cbc",u="PuTTY-User-Key-File-2: ssh-rsa\r\n";u+="Encryption: "+l+"\r\n",u+="Comment: "+(r=r||"")+"\r\n";var c=n.util.createBuffer();s(c,i),o(c,t.e),o(c,t.n);var h=n.util.encode64(c.bytes(),64),f=Math.floor(h.length/66)+1;u+="Public-Lines: "+f+"\r\n",u+=h;var d,p=n.util.createBuffer();if(o(p,t.d),o(p,t.p),o(p,t.q),o(p,t.qInv),e){var m=p.length()+16-1;m-=m%16;var g=a(p.bytes());g.truncate(g.length()-m+p.length()),p.putBuffer(g);var y=n.util.createBuffer();y.putBuffer(a("\0\0\0\0",e)),y.putBuffer(a("\0\0\0\x01",e));var _=n.aes.createEncryptionCipher(y.truncate(8),"CBC");_.start(n.util.createBuffer().fillWithByte(0,16)),_.update(p.copy()),_.finish();var v=_.output;v.truncate(16),d=n.util.encode64(v.bytes(),64)}else d=n.util.encode64(p.bytes(),64);u+="\r\nPrivate-Lines: "+(f=Math.floor(d.length/66)+1)+"\r\n",u+=d;var b=a("putty-private-key-file-mac-key",e),w=n.util.createBuffer();s(w,i),s(w,l),s(w,r),w.putInt32(c.length()),w.putBuffer(c),w.putInt32(p.length()),w.putBuffer(p);var x=n.hmac.create();return x.start("sha1",b),x.update(w.bytes()),u+="\r\nPrivate-MAC: "+x.digest().toHex()+"\r\n"},i.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var i=n.util.createBuffer();return s(i,r),o(i,t.e),o(i,t.n),r+" "+n.util.encode64(i.bytes())+" "+e},i.privateKeyToOpenSSH=function(t,e){return e?n.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):n.pki.privateKeyToPem(t)},i.getPublicKeyFingerprint=function(t,e){var r=(e=e||{}).md||n.md.md5.create(),i=n.util.createBuffer();s(i,"ssh-rsa"),o(i,t.e),o(i,t.n),r.start(),r.update(i.getBytes());var a=r.digest();if("hex"===e.encoding){var l=a.toHex();return e.delimiter?l.match(/.{2}/g).join(e.delimiter):l}if("binary"===e.encoding)return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return a}},function(t,e,r){"use strict";const n=r(354),i=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),h=Symbol("lruList"),f=Symbol("cache"),d=Symbol("updateAgeOnGet"),p=()=>1;const m=(t,e,r)=>{const n=t[f].get(e);if(n){const e=n.value;if(g(t,e)){if(_(t,n),!t[a])return}else r&&(t[d]&&(n.value.now=Date.now()),t[h].unshiftNode(n));return e.value}},g=(t,e)=>{if(!e||!e.maxAge&&!t[l])return!1;const r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[l]&&r>t[l]},y=t=>{if(t[o]>t[i])for(let e=t[h].tail;t[o]>t[i]&&null!==e;){const r=e.prev;_(t,e),e=r}},_=(t,e)=>{if(e){const r=e.value;t[u]&&t[u](r.key,r.value),t[o]-=r.length,t[f].delete(r.key),t[h].removeNode(e)}};class v{constructor(t,e,r,n,i){this.key=t,this.value=e,this.length=r,this.now=n,this.maxAge=i||0}}const b=(t,e,r,n)=>{let i=r.value;g(t,i)&&(_(t,r),t[a]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};t.exports=class{constructor(t){if("number"===typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!==typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[i]=t.max||1/0;const e=t.length||p;if(this[s]="function"!==typeof e?p:e,this[a]=t.stale||!1,t.maxAge&&"number"!==typeof t.maxAge)throw new TypeError("maxAge must be a number");this[l]=t.maxAge||0,this[u]=t.dispose,this[c]=t.noDisposeOnSet||!1,this[d]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!==typeof t||t<0)throw new TypeError("max must be a non-negative number");this[i]=t||1/0,y(this)}get max(){return this[i]}set allowStale(t){this[a]=!!t}get allowStale(){return this[a]}set maxAge(t){if("number"!==typeof t)throw new TypeError("maxAge must be a non-negative number");this[l]=t,y(this)}get maxAge(){return this[l]}set lengthCalculator(t){"function"!==typeof t&&(t=p),t!==this[s]&&(this[s]=t,this[o]=0,this[h].forEach((t=>{t.length=this[s](t.value,t.key),this[o]+=t.length}))),y(this)}get lengthCalculator(){return this[s]}get length(){return this[o]}get itemCount(){return this[h].length}rforEach(t,e){e=e||this;for(let r=this[h].tail;null!==r;){const n=r.prev;b(this,t,r,e),r=n}}forEach(t,e){e=e||this;for(let r=this[h].head;null!==r;){const n=r.next;b(this,t,r,e),r=n}}keys(){return this[h].toArray().map((t=>t.key))}values(){return this[h].toArray().map((t=>t.value))}reset(){this[u]&&this[h]&&this[h].length&&this[h].forEach((t=>this[u](t.key,t.value))),this[f]=new Map,this[h]=new n,this[o]=0}dump(){return this[h].map((t=>!g(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[h]}set(t,e,r){if((r=r||this[l])&&"number"!==typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,a=this[s](e,t);if(this[f].has(t)){if(a>this[i])return _(this,this[f].get(t)),!1;const s=this[f].get(t).value;return this[u]&&(this[c]||this[u](t,s.value)),s.now=n,s.maxAge=r,s.value=e,this[o]+=a-s.length,s.length=a,this.get(t),y(this),!0}const d=new v(t,e,a,n,r);return d.length>this[i]?(this[u]&&this[u](t,e),!1):(this[o]+=d.length,this[h].unshift(d),this[f].set(t,this[h].head),y(this),!0)}has(t){if(!this[f].has(t))return!1;const e=this[f].get(t).value;return!g(this,e)}get(t){return m(this,t,!0)}peek(t){return m(this,t,!1)}pop(){const t=this[h].tail;return t?(_(this,t),t.value):null}del(t){_(this,this[f].get(t))}load(t){this.reset();const e=Date.now();for(let r=t.length-1;r>=0;r--){const n=t[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const t=i-e;t>0&&this.set(n.k,n.v,t)}}}prune(){this[f].forEach(((t,e)=>m(this,e,!1)))}}},function(t,e,r){"use strict";function n(t){var e=this;if(e instanceof n||(e=new n),e.tail=null,e.head=null,e.length=0,t&&"function"===typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)e.push(arguments[r]);return e}function i(t,e,r){var n=e===t.head?new a(r,null,e,t):new a(r,e,e.next,t);return null===n.next&&(t.tail=n),null===n.prev&&(t.head=n),t.length++,n}function o(t,e){t.tail=new a(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function s(t,e){t.head=new a(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function a(t,e,r,n){if(!(this instanceof a))return new a(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}t.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e},n.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},n.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},n.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)o(this,arguments[t]);return this.length},n.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)s(this,arguments[t]);return this.length},n.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},n.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},n.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;null!==r;n++)t.call(e,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;null!==r;n--)t.call(e,r.value,n,this),r=r.prev},n.prototype.get=function(t){for(var e=0,r=this.head;null!==r&&e<t;e++)r=r.next;if(e===t&&null!==r)return r.value},n.prototype.getReverse=function(t){for(var e=0,r=this.tail;null!==r&&e<t;e++)r=r.prev;if(e===t&&null!==r)return r.value},n.prototype.map=function(t,e){e=e||this;for(var r=new n,i=this.head;null!==i;)r.push(t.call(e,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(t,e){e=e||this;for(var r=new n,i=this.tail;null!==i;)r.push(t.call(e,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=t(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=t(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;null!==r;e++)t[e]=r.value,r=r.next;return t},n.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;null!==r;e++)t[e]=r.value,r=r.prev;return t},n.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new n;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,o=this.head;null!==o&&i<t;i++)o=o.next;for(;null!==o&&i<e;i++,o=o.next)r.push(o.value);return r},n.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new n;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,o=this.tail;null!==o&&i>e;i--)o=o.prev;for(;null!==o&&i>t;i--,o=o.prev)r.push(o.value);return r},n.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,n=this.head;null!==n&&r<t;r++)n=n.next;var o=[];for(r=0;n&&r<e;r++)o.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(r=0;r<(arguments.length<=2?0:arguments.length-2);r++)n=i(this,n,r+2<2||arguments.length<=r+2?void 0:arguments[r+2]);return o},n.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};try{r(355)(n)}catch(l){}},function(t,e,r){"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IAMAuth=void 0;e.IAMAuth=class{constructor(t,e){this.selector=t,this.token=e,this.selector=t,this.token=e}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}},function(t,e,r){t.exports=r(358)},function(t,e,r){"use strict";var n=r(7),i=r(179),o=r(359),s=r(185);function a(t){var e=new o(t),r=i(o.prototype.request,e);return n.extend(r,o.prototype,e),n.extend(r,e),r}var l=a(r(91));l.Axios=o,l.create=function(t){return a(s(l.defaults,t))},l.Cancel=r(186),l.CancelToken=r(373),l.isCancel=r(184),l.all=function(t){return Promise.all(t)},l.spread=r(374),l.isAxiosError=r(375),t.exports=l,t.exports.default=l},function(t,e,r){"use strict";var n=r(7),i=r(180),o=r(360),s=r(361),a=r(185),l=r(371),u=l.validators;function c(t){this.defaults=t,this.interceptors={request:new o,response:new o}}c.prototype.request=function(t){"string"===typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&l.assertOptions(e,{silentJSONParsing:u.transitional(u.boolean,"1.0.0"),forcedJSONParsing:u.transitional(u.boolean,"1.0.0"),clarifyTimeoutError:u.transitional(u.boolean,"1.0.0")},!1);var r=[],n=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(n=n&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(t){o.push(t.fulfilled,t.rejected)})),!n){var c=[s,void 0];for(Array.prototype.unshift.apply(c,r),c=c.concat(o),i=Promise.resolve(t);c.length;)i=i.then(c.shift(),c.shift());return i}for(var h=t;r.length;){var f=r.shift(),d=r.shift();try{h=f(h)}catch(p){d(p);break}}try{i=s(h)}catch(p){return Promise.reject(p)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},c.prototype.getUri=function(t){return t=a(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(t){c.prototype[t]=function(e,r){return this.request(a(r||{},{method:t,url:e,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(t){c.prototype[t]=function(e,r,n){return this.request(a(n||{},{method:t,url:e,data:r}))}})),t.exports=c},function(t,e,r){"use strict";var n=r(7);function i(){this.handlers=[]}i.prototype.use=function(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){n.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},function(t,e,r){"use strict";var n=r(7),i=r(362),o=r(184),s=r(91);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=i.call(t,t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return a(t),e.data=i.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(a(t),e&&e.response&&(e.response.data=i.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,r){"use strict";var n=r(7),i=r(91);t.exports=function(t,e,r){var o=this||i;return n.forEach(r,(function(r){t=r.call(o,t,e)})),t}},function(t,e,r){"use strict";var n=r(7);t.exports=function(t,e){n.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))}},function(t,e,r){"use strict";var n=r(183);t.exports=function(t,e,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?e(n("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},function(t,e,r){"use strict";var n=r(7);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var n=r(367),i=r(368);t.exports=function(t,e){return t&&!n(e)?i(t,e):e}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var n=r(7),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,o,s={};return t?(n.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),r=n.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([r]):s[e]?s[e]+", "+r:r}})),s):s}},function(t,e,r){"use strict";var n=r(7);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=i(window.location.href),function(e){var r=n.isString(e)?i(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";var n=r(372),i={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){i[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));var o={},s=n.version.split(".");function a(t,e){for(var r=e?e.split("."):s,n=t.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}i.transitional=function(t,e,r){var i=e&&a(e);function s(t,e){return"[Axios v"+n.version+"] Transitional option '"+t+"'"+e+(r?". "+r:"")}return function(r,n,a){if(!1===t)throw new Error(s(n," has been removed in "+e));return i&&!o[n]&&(o[n]=!0,console.warn(s(n," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,n,a)}},t.exports={isOlderVersion:a,assertOptions:function(t,e,r){if("object"!==typeof t)throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var a=t[o],l=void 0===a||s(a,o,t);if(!0!==l)throw new TypeError("option "+o+" must be "+l)}else if(!0!==r)throw Error("Unknown option "+o)}},validators:i}},function(t){t.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},function(t,e,r){"use strict";var n=r(186);function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;t((function(t){r.reason||(r.reason=new n(t),e(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){"use strict";t.exports=function(t){return"object"===typeof t&&!0===t.isAxiosError}},function(t,e,r){const n=r(46),{columnToLetter:i}=r(56),{GoogleSpreadsheetFormulaError:o}=r(189);t.exports=class{constructor(t,e,r,n){return this._sheet=t,this._row=e,this._column=r,this._updateRawData(n),this}_updateRawData(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._rawData=t,this._draftData={},this._error=null,n.get(this._rawData,"effectiveValue.errorValue")&&(this._error=new o(this._rawData.effectiveValue.errorValue))}get rowIndex(){return this._row}get columnIndex(){return this._column}get a1Column(){return i(this._column+1)}get a1Row(){return this._row+1}get a1Address(){return`${this.a1Column}${this.a1Row}`}get value(){if(void 0!==this._draftData.value)throw new Error("Value has been changed");return this._error?this._error:this._rawData.effectiveValue?n.values(this._rawData.effectiveValue)[0]:null}set value(t){if(n.isBoolean(t))this._draftData.valueType="boolValue";else if(n.isString(t))"="===t.substr(0,1)?this._draftData.valueType="formulaValue":this._draftData.valueType="stringValue";else if(n.isFinite(t))this._draftData.valueType="numberValue";else{if(!n.isNil(t))throw new Error("Set value to boolean, string, or number");this._draftData.valueType="stringValue",t=""}this._draftData.value=t}get valueType(){return this._error?"errorValue":this._rawData.effectiveValue?n.keys(this._rawData.effectiveValue)[0]:null}get formattedValue(){return this._rawData.formattedValue||null}set formattedValue(t){throw new Error("You cannot modify the formatted value directly")}get formula(){return n.get(this._rawData,"userEnteredValue.formulaValue",null)}set formula(t){if("="!==t.substr(0,1))throw new Error('formula must begin with "="');this.value=t}get formulaError(){return this._error}get hyperlink(){if(this._draftData.value)throw new Error("Save cell to be able to read hyperlink");return this._rawData.hyperlink}set hyperlink(t){throw new Error('Do not set hyperlink directly. Instead set cell.formula, for example `cell.formula = \'=HYPERLINK("http://google.com", "Google")\'`')}get note(){return void 0!==this._draftData.note?this._draftData.note:this._rawData.note}set note(t){if(null!==t&&void 0!==t||(t=""),!n.isString(t))throw new Error("Note must be a string");t===this._rawData.note?delete this._draftData.note:this._draftData.note=t}get userEnteredFormat(){return this._rawData.userEnteredFormat}get effectiveFormat(){return this._rawData.effectiveFormat}set userEnteredFormat(t){throw new Error("Do not modify directly, instead use format properties")}set effectiveFormat(t){throw new Error("Read-only")}_getFormatParam(t){if(n.get(this._draftData,`userEnteredFormat.${t}`))throw new Error("User format is unsaved - save the cell to be able to read it again");return Object.freeze(this._rawData.userEnteredFormat[t])}_setFormatParam(t,e){n.isEqual(e,n.get(this._rawData,`userEnteredFormat.${t}`))?n.unset(this._draftData,`userEnteredFormat.${t}`):(n.set(this._draftData,`userEnteredFormat.${t}`,e),this._draftData.clearFormat=!1)}get numberFormat(){return this._getFormatParam("numberFormat")}get backgroundColor(){return this._getFormatParam("backgroundColor")}get borders(){return this._getFormatParam("borders")}get padding(){return this._getFormatParam("padding")}get horizontalAlignment(){return this._getFormatParam("horizontalAlignment")}get verticalAlignment(){return this._getFormatParam("verticalAlignment")}get wrapStrategy(){return this._getFormatParam("wrapStrategy")}get textDirection(){return this._getFormatParam("textDirection")}get textFormat(){return this._getFormatParam("textFormat")}get hyperlinkDisplayType(){return this._getFormatParam("hyperlinkDisplayType")}get textRotation(){return this._getFormatParam("textRotation")}set numberFormat(t){return this._setFormatParam("numberFormat",t)}set backgroundColor(t){return this._setFormatParam("backgroundColor",t)}set borders(t){return this._setFormatParam("borders",t)}set padding(t){return this._setFormatParam("padding",t)}set horizontalAlignment(t){return this._setFormatParam("horizontalAlignment",t)}set verticalAlignment(t){return this._setFormatParam("verticalAlignment",t)}set wrapStrategy(t){return this._setFormatParam("wrapStrategy",t)}set textDirection(t){return this._setFormatParam("textDirection",t)}set textFormat(t){return this._setFormatParam("textFormat",t)}set hyperlinkDisplayType(t){return this._setFormatParam("hyperlinkDisplayType",t)}set textRotation(t){return this._setFormatParam("textRotation",t)}clearAllFormatting(){this._draftData.clearFormat=!0,delete this._draftData.userEnteredFormat}get _isDirty(){return void 0!==this._draftData.note||(!!n.keys(this._draftData.userEnteredFormat).length||(!!this._draftData.clearFormat||void 0!==this._draftData.value))}discardUnsavedChanges(){this._draftData={}}async save(){await this._sheet.saveUpdatedCells([this])}_getUpdateRequest(){const t=void 0!==this._draftData.value,e=void 0!==this._draftData.note,r=!!n.keys(this._draftData.userEnteredFormat||{}).length,i=this._draftData.clearFormat;if(!n.some([t,e,r,i]))return null;const o={...this._rawData.userEnteredFormat,...this._draftData.userEnteredFormat};return n.get(this._draftData,"userEnteredFormat.backgroundColor")&&delete o.backgroundColorStyle,{updateCells:{rows:[{values:[{...t&&{userEnteredValue:{[this._draftData.valueType]:this._draftData.value}},...e&&{note:this._draftData.note},...r&&{userEnteredFormat:o},...i&&{userEnteredFormat:{}}}]}],fields:n.keys(n.pickBy({userEnteredValue:t,note:e,userEnteredFormat:r||i})).join(","),start:{sheetId:this._sheet.sheetId,rowIndex:this.rowIndex,columnIndex:this.columnIndex}}}}}},function(t,e,r){"use strict";var n=r(378);t.exports=n,"undefined"!==typeof window&&(window.Suggestions=n)},function(t,e,r){"use strict";var n=r(21),i=r(379),o=r(380),s=function(t,e,r){return r=r||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0},r),this.el=t,this.data=e||[],this.list=new o(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(t){this.handleKeyUp(t.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(t){this.handleKeyDown(t)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(t){this.handlePaste(t)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};s.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)},s.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},s.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},s.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout((function(){e.handleInputChange(t.target.value)}),100)}},s.prototype.handleInputChange=function(t){this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}.bind(this))},s.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},s.prototype.update=function(t){this.data=t,this.handleKeyUp()},s.prototype.clear=function(){this.data=[],this.list.clear()},s.prototype.normalize=function(t){return t=t.toLowerCase()},s.prototype.match=function(t,e){return t.indexOf(e)>-1},s.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},s.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:function(t){return this.getItemValue(t)}.bind(this)};t(this.options.filter?i.filter(this.query,this.data,e).map(function(t){return{original:t.original,string:this.render(t.original,t.string)}}.bind(this)):this.data.map(function(t){return{original:t,string:this.render(t)}}.bind(this)))},s.prototype.getItemValue=function(t){return t},s.prototype.render=function(t,e){if(e)return e;for(var r=t.original?this.getItemValue(t.original):this.getItemValue(t),n=this.normalize(r),i=n.lastIndexOf(this.query);i>-1;){var o=i+this.query.length;r=r.slice(0,i)+"<strong>"+r.slice(i,o)+"</strong>"+r.slice(o),i=n.slice(0,i).lastIndexOf(this.query)}return r},s.prototype.renderError=function(t){this.list.drawError(t)},t.exports=s},function(t,e,r){!function(){var e={};t.exports=e,e.simpleFilter=function(t,r){return r.filter((function(r){return e.test(t,r)}))},e.test=function(t,r){return null!==e.match(t,r)},e.match=function(t,e,r){r=r||{};var n,i=0,o=[],s=e.length,a=0,l=0,u=r.pre||"",c=r.post||"",h=r.caseSensitive&&e||e.toLowerCase();t=r.caseSensitive&&t||t.toLowerCase();for(var f=0;f<s;f++)n=e[f],h[f]===t[i]?(n=u+n+c,i+=1,l+=1+l):l=0,a+=l,o[o.length]=n;return i===t.length?(a=h===t?1/0:a,{rendered:o.join(""),score:a}):null},e.filter=function(t,r,n){return r&&0!==r.length?"string"!==typeof t?r:(n=n||{},r.reduce((function(r,i,o,s){var a=i;n.extract&&(a=n.extract(i));var l=e.match(t,a,n);return null!=l&&(r[r.length]={string:l.rendered,score:l.score,index:o,original:i}),r}),[]).sort((function(t,e){var r=e.score-t.score;return r||t.index-e.index}))):[]}}()},function(t,e,r){"use strict";var n=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(t){this.items.push(t)},n.prototype.clear=function(){this.items=[],this.active=0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return"block"===this.element.style.display},n.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},n.prototype.drawItem=function(t,e){var r=document.createElement("li"),n=document.createElement("a");e&&(r.className+=" active"),n.innerHTML=t.string,r.appendChild(n),this.element.appendChild(r),r.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),r.addEventListener("mouseup",function(){this.handleMouseUp.call(this,t)}.bind(this))},n.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},n.prototype.move=function(t){this.active=t,this.draw()},n.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},n.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()},t.exports=n},function(t,e,r){(function(e){var r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,u=a||l||Function("return this")(),c=Object.prototype.toString,h=Math.max,f=Math.min,d=function(){return u.Date.now()};function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==c.call(t)}(t))return NaN;if(p(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var a=i.test(t);return a||o.test(t)?s(t.slice(2),a?2:8):n.test(t)?NaN:+t}t.exports=function(t,e,r){var n,i,o,s,a,l,u=0,c=!1,g=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function _(e){var r=n,o=i;return n=i=void 0,u=e,s=t.apply(o,r)}function v(t){return u=t,a=setTimeout(w,e),c?_(t):s}function b(t){var r=t-l;return void 0===l||r>=e||r<0||g&&t-u>=o}function w(){var t=d();if(b(t))return x(t);a=setTimeout(w,function(t){var r=e-(t-l);return g?f(r,o-(t-u)):r}(t))}function x(t){return a=void 0,y&&n?_(t):(n=i=void 0,s)}function E(){var t=d(),r=b(t);if(n=arguments,i=this,l=t,r){if(void 0===a)return v(l);if(g)return a=setTimeout(w,e),_(l)}return void 0===a&&(a=setTimeout(w,e)),s}return e=m(e)||0,p(r)&&(c=!!r.leading,o=(g="maxWait"in r)?h(m(r.maxWait)||0,e):o,y="trailing"in r?!!r.trailing:y),E.cancel=function(){void 0!==a&&clearTimeout(a),u=0,n=l=i=a=void 0},E.flush=function(){return void 0===a?s:x(d())},E}}).call(this,r(6))},function(t,e){t.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},function(t,e,r){"use strict";var n=r(190);t.exports=n},function(t,e,r){"use strict";var n=r(385),i=r(387),o=r(57),s=r(388),a={};function l(t){var e=t.total,r=t.loaded;return{total:e,transferred:r,percent:100*r/e}}function u(t,e){return new Promise((function(r,n){e.onprogress=function(e){t.emitter.emit(o.EVENT_PROGRESS_DOWNLOAD,l(e))};var s=t.file;s&&(e.upload.onprogress=function(e){t.emitter.emit(o.EVENT_PROGRESS_UPLOAD,l(e))}),e.onerror=function(t){n(t)},e.onabort=function(){var e=new i({request:t,type:o.ERROR_REQUEST_ABORTED});n(e)},e.onload=function(){if(delete a[t.id],e.status<200||e.status>=400){var o=new i({request:t,body:e.response,statusCode:e.status});n(o)}else r(e)};var u=t.body;"string"===typeof u?e.send(u):u?e.send(JSON.stringify(u)):s?e.send(s):e.send(),a[t.id]=e})).then((function(e){return function(t,e){return new n(t,{body:e.response,headers:s(e.getAllResponseHeaders()),statusCode:e.status})}(t,e)}))}function c(t,e){var r=t.url(e),n=new window.XMLHttpRequest;return n.open(t.method,r),Object.keys(t.headers).forEach((function(e){n.setRequestHeader(e,t.headers[e])})),n}t.exports={browserAbort:function(t){var e=a[t.id];e&&(e.abort(),delete a[t.id])},sendRequestXhr:u,browserSend:function(t){return Promise.resolve().then((function(){var e=c(t,t.client.accessToken);return u(t,e)}))},createRequestXhr:c}},function(t,e,r){"use strict";var n=r(386);function i(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch(r){this.body=e.body}this.links=n(this.headers.link)}i.prototype.hasNextPage=function(){return!!this.links.next},i.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},t.exports=i},function(t,e,r){"use strict";t.exports=function(t){return t?t.split(/,\s*</).reduce((function(t,e){var r=function(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var r=e[1],n=e[2].split(";"),i=null,o=n.reduce((function(t,e){var r=function(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}(e);return r?"rel"===r.key?(i||(i=r.value),t):(t[r.key]=r.value,t):t}),{});return i?{url:r,rel:i,params:o}:null}(e);return r?(r.rel.split(/\s+/).forEach((function(e){t[e]||(t[e]={url:r.url,params:r.params})})),t):t}),{}):{}}},function(t,e,r){"use strict";var n=r(57);t.exports=function(t){var e,r=t.type||n.ERROR_HTTP;if(t.body)try{e=JSON.parse(t.body)}catch(o){e=t.body}else e=null;var i=t.message||null;i||("string"===typeof e?i=e:e&&"string"===typeof e.message?i=e.message:r===n.ERROR_REQUEST_ABORTED&&(i="Request aborted")),this.message=i,this.type=r,this.statusCode=t.statusCode||null,this.request=t.request,this.body=e}},function(t,e,r){"use strict";t.exports=function(t){var e={};return t?(t.trim().split(/[\r|\n]+/).forEach((function(t){var r=function(t){var e=t.indexOf(":");return{name:t.substring(0,e).trim().toLowerCase(),value:t.substring(e+1).trim()}}(t);e[r.name]=r.value})),e):e}},function(t,e,r){(function(t,n){var i;!function(o){var s=e,a=(t&&t.exports,"object"==typeof n&&n);a.global!==a&&a.window;var l=function(t){this.message=t};(l.prototype=new Error).name="InvalidCharacterError";var u=function(t){throw new l(t)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=/[\t\n\f\r ]/g,f={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var e,r,n,i,o=t.length%3,s="",a=-1,l=t.length-o;++a<l;)e=t.charCodeAt(a)<<16,r=t.charCodeAt(++a)<<8,n=t.charCodeAt(++a),s+=c.charAt((i=e+r+n)>>18&63)+c.charAt(i>>12&63)+c.charAt(i>>6&63)+c.charAt(63&i);return 2==o?(e=t.charCodeAt(a)<<8,r=t.charCodeAt(++a),s+=c.charAt((i=e+r)>>10)+c.charAt(i>>4&63)+c.charAt(i<<2&63)+"="):1==o&&(i=t.charCodeAt(a),s+=c.charAt(i>>2)+c.charAt(i<<4&63)+"=="),s},decode:function(t){var e=(t=String(t).replace(h,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,i=0,o="",s=-1;++s<e;)n=c.indexOf(t.charAt(s)),r=i%4?64*r+n:n,i++%4&&(o+=String.fromCharCode(255&r>>(-2*i&6)));return o},version:"0.1.0"};void 0===(i=function(){return f}.call(e,r,e,t))||(t.exports=i)}()}).call(this,r(12)(t),r(6))},function(t,e,r){"use strict";var n=r(192),i=r(21),o=r(391),s=r(392),a=r(57),l=1;function u(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var r={};e.body&&(r["content-type"]="application/json");var n=i(r,e.headers),s=Object.keys(n).reduce((function(t,e){return t[e.toLowerCase()]=n[e],t}),{});this.id=l++,this._options=e,this.emitter=new o,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.encoding=e.encoding||"utf8",this.sendFileAs=e.sendFileAs||null,this.headers=s}u.prototype.url=function(t){var e=s.prependOrigin(this.path,this.origin);e=s.appendQueryObject(e,this.query);var r=this.params,o=null==t?this.client.accessToken:t;if(o){e=s.appendQueryParam(e,"access_token",o);var a=n(o).user;r=i({ownerId:a},r)}return e=s.interpolateRouteParams(e,r),e},u.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then((function(e){return t.response=e,t.emitter.emit(a.EVENT_RESPONSE,e),e}),(function(e){throw t.error=e,t.emitter.emit(a.EVENT_ERROR,e),e}))},u.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},u.prototype.eachPage=function(t){var e=this;function r(r){t(null,r,(function(){delete e._nextPageRequest;var t=r.nextPage();t&&(e._nextPageRequest=t,i(t))}))}function n(e){t(e,null,(function(){}))}function i(t){t.send().then(r,n)}i(this)},u.prototype.clone=function(){return this._extend()},u.prototype._extend=function(t){var e=i(this._options,t);return new u(this.client,e)},t.exports=u},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,r,n,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new s(r,n||t,o),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function l(t,e){0===--t._eventsCount?t._events=new o:delete t._events[e]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),u.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},u.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,s=new Array(o);n<o;n++)s[n]=r[n].fn;return s},u.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},u.prototype.emit=function(t,e,r,n,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var l,u,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,n),!0;case 5:return c.fn.call(c.context,e,r,n,o),!0;case 6:return c.fn.call(c.context,e,r,n,o,s),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,r);break;case 4:c[u].fn.call(c[u].context,e,r,n);break;default:if(!l)for(f=1,l=new Array(h-1);f<h;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return l(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||n&&!s.once||r&&s.context!==r||l(this,o);else{for(var a=0,u=[],c=s.length;a<c;a++)(s[a].fn!==e||n&&!s[a].once||r&&s[a].context!==r)&&u.push(s[a]);u.length?this._events[o]=1===u.length?u[0]:u:l(this,o)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&l(this,e)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,t.exports=u},function(t,e,r){"use strict";function n(t){return Array.isArray(t)?t.map(encodeURIComponent).join(","):encodeURIComponent(String(t))}function i(t,e,r){if(!1===r||null===r)return t;var i=/\?/.test(t)?"&":"?",o=encodeURIComponent(e);return void 0!==r&&""!==r&&!0!==r&&(o+="="+n(r)),""+t+i+o}t.exports={appendQueryObject:function(t,e){if(!e)return t;var r=t;return Object.keys(e).forEach((function(t){var n=e[t];void 0!==n&&(Array.isArray(n)&&(n=n.filter((function(t){return null!==t&&void 0!==t})).join(",")),r=i(r,t,n))})),r},appendQueryParam:i,prependOrigin:function(t,e){if(!e)return t;if("http"===t.slice(0,4))return t;var r="/"===t[0]?"":"/";return""+e.replace(/\/$/,"")+r+t},interpolateRouteParams:function(t,e){return e?t.replace(/\/:([a-zA-Z0-9]+)/g,(function(t,r){var i=e[r];if(void 0===i)throw new Error("Unspecified route parameter "+r);return"/"+n(i)})):t}}},function(t,e,r){"use strict";var n=r(21),i=r(394),o=r(397),s=r(398),a=r(400),l={},u=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];l.forwardGeocode=function(t){i.assertShape({query:i.required(i.string),mode:i.oneOf("mapbox.places","mapbox.places-permanent"),countries:i.arrayOf(i.string),proximity:i.oneOf(i.coordinates,"ip"),types:i.arrayOf(i.oneOf(u)),autocomplete:i.boolean,bbox:i.arrayOf(i.number),limit:i.number,language:i.arrayOf(i.string),routing:i.boolean,fuzzyMatch:i.boolean,worldview:i.string})(t),t.mode=t.mode||"mapbox.places";var e=s(n({country:t.countries},o(t,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(t,["mode","query"]),query:e})},l.reverseGeocode=function(t){i.assertShape({query:i.required(i.coordinates),mode:i.oneOf("mapbox.places","mapbox.places-permanent"),countries:i.arrayOf(i.string),types:i.arrayOf(i.oneOf(u)),bbox:i.arrayOf(i.number),limit:i.number,language:i.arrayOf(i.string),reverseMode:i.oneOf("distance","score"),routing:i.boolean,worldview:i.string})(t),t.mode=t.mode||"mapbox.places";var e=s(n({country:t.countries},o(t,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(t,["mode","query"]),query:e})},t.exports=a(l)},function(t,e,r){"use strict";(function(e){var n=r(21),i=r(395);t.exports=n(i,{file:function(t){if("undefined"!==typeof window){if(t instanceof e.Blob||t instanceof e.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!==typeof t&&void 0===t.pipe)return"Filename or Readable stream"},date:function(t){var e="date";if("boolean"===typeof t)return e;try{var r=new Date(t);if(r.getTime&&isNaN(r.getTime()))return e}catch(n){return e}},coordinates:function(t){return i.tuple(i.number,i.number)(t)},assertShape:function(t,e){return i.assert(i.strictShape(t),e)}})}).call(this,r(6))},function(t,e,r){"use strict";var n=r(396),i=r(21),o="value",s="\n  ",a={};function l(t){var e=Array.isArray(t);return function(r){var n,i=u(a.plainArray,r);if(i)return i;if(e&&r.length!==t.length)return"an array with "+t.length+" items";for(var o=0;o<r.length;o++)if(i=u((n=o,e?t[n]:t),r[o]))return[o].concat(i)}}function u(t,e){if(null!=e||t.hasOwnProperty("__required")){var r=t(e);return r?Array.isArray(r)?r:[r]:void 0}}function c(t,e){var r=t.length,n=t[r-1],s=t.slice(0,r-1);return 0===s.length&&(s=[o]),e=i(e,{path:s}),"function"===typeof n?n(e):f(e,function(t){return"must be "+function(t){if(/^an? /.test(t))return t;if(/^[aeiou]/i.test(t))return"an "+t;if(/^[a-z]/i.test(t))return"a "+t;return t}(t)+"."}(n))}function h(t){return t.length<2?t[0]:2===t.length?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function f(t,e){return(d(t.path)?"Item at position ":"")+(t.path.join(".")+" "+e)}function d(t){return"number"==typeof t[t.length-1]||"number"==typeof t[0]}a.assert=function(t,e){return e=e||{},function(r){var n=u(t,r);if(n){var i=c(n,e);throw e.apiName&&(i=e.apiName+": "+i),new Error(i)}}},a.shape=function(t){var e,r=(e=t,Object.keys(e||{}).map((function(t){return{key:t,value:e[t]}})));return function(t){var e,n=u(a.plainObject,t);if(n)return n;for(var i=[],l=0;l<r.length;l++)e=r[l].key,(n=u(r[l].value,t[e]))&&i.push([e].concat(n));return i.length<2?i[0]:function(t){i=i.map((function(e){return"- "+e[0]+": "+c(e,t).split("\n").join(s)}));var e=t.path.join(".");return"The following properties"+(e===o?"":" of "+e)+" have invalid values:"+s+i.join(s)}}},a.strictShape=function(t){var e=a.shape(t);return function(r){var n=e(r);if(n)return n;var i=Object.keys(r).reduce((function(e,r){return void 0===t[r]&&e.push(r),e}),[]);return 0!==i.length?function(){return"The following keys are invalid: "+i.join(", ")}:void 0}},a.arrayOf=function(t){return l(t)},a.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return l(t)},a.required=function(t){function e(e){return null==e?function(t){return f(t,d(t.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return e.__required=!0,e},a.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(e){var r=t.map((function(t){return u(t,e)})).filter(Boolean);if(r.length===t.length)return r.every((function(t){return 1===t.length&&"string"===typeof t[0]}))?h(r.map((function(t){return t[0]}))):r.reduce((function(t,e){return e.length>t.length?e:t}))}},a.equal=function(t){return function(e){if(e!==t)return JSON.stringify(t)}},a.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),e=t.map((function(t){return a.equal(t)}));return a.oneOfType.apply(this,e)},a.range=function(t){var e=t[0],r=t[1];return function(t){if(u(a.number,t)||t<e||t>r)return"number between "+e+" & "+r+" (inclusive)"}},a.any=function(){},a.boolean=function(t){if("boolean"!==typeof t)return"boolean"},a.number=function(t){if("number"!==typeof t)return"number"},a.plainArray=function(t){if(!Array.isArray(t))return"array"},a.plainObject=function(t){if(!n(t))return"object"},a.string=function(t){if("string"!==typeof t)return"string"},a.func=function(t){if("function"!==typeof t)return"function"},a.validate=u,a.processMessage=c,t.exports=a},function(t,e,r){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===n.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},function(t,e,r){"use strict";t.exports=function(t,e){var r=function(t,r){return-1!==e.indexOf(t)&&void 0!==r};return"function"===typeof e&&(r=e),Object.keys(t).filter((function(e){return r(e,t[e])})).reduce((function(e,r){return e[r]=t[r],e}),{})}},function(t,e,r){"use strict";var n=r(399);t.exports=function(t){return n(t,(function(t,e){return"boolean"===typeof e?JSON.stringify(e):e}))}},function(t,e,r){"use strict";t.exports=function(t,e){return Object.keys(t).reduce((function(r,n){return r[n]=e(n,t[n]),r}),{})}},function(t,e,r){"use strict";var n=r(191),i=r(190);t.exports=function(t){return function(e){var r;r=n.prototype.isPrototypeOf(e)?e:i(e);var o=Object.create(t);return o.client=r,o}}},function(t,e,r){"use strict";var n=r(409).nanoid;function i(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}i.prototype={select:function(t,e){var r=this.getSelectedIndex(t,e),n=this.getEventPayload("search.select",e);if(n.resultIndex=r,n.resultPlaceName=t.place_name,n.resultId=t.id,(r!==this.lastSentIndex||n.queryString!==this.lastSentInput)&&-1!=r&&(this.lastSentIndex=r,this.lastSentInput=n.queryString,n.queryString))return this.push(n)},start:function(t){var e=this.getEventPayload("search.start",t);if(e.queryString)return this.push(e)},keyevent:function(t,e){if(t.key&&!t.metaKey&&-1===[9,27,37,39,13,38,40].indexOf(t.keyCode)){var r=this.getEventPayload("search.keystroke",e);if(r.lastAction=t.key,r.queryString)return this.push(r)}},send:function(t,e){if(!this.enableEventLogging)return e?e():void 0;var r=this.getRequestOptions(t);this.request(r,function(t){return t?this.handleError(t,e):e?e():void 0}.bind(this))},getRequestOptions:function(t){return Array.isArray(t)||(t=[t]),{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},getEventPayload:function(t,e){var r;r=e.options.proximity?"object"===typeof e.options.proximity?[e.options.proximity.longitude,e.options.proximity.latitude]:"ip"===e.options.proximity?[999,999]:e.options.proximity:null;var n=e._map?e._map.getZoom():void 0,i={event:t,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:e.options.autocomplete,fuzzyMatch:e.options.fuzzyMatch,proximity:r,limit:e.options.limit,routing:e.options.routing,worldview:e.options.worldview,mapZoom:n,keyboardLocale:this.locale};return"search.select"===t?i.queryString=e.inputString:"search.select"!=t&&e._inputEl?i.queryString=e._inputEl.value:i.queryString=e.inputString,i},request:function(t,e){var r=new XMLHttpRequest;for(var n in r.onreadystatechange=function(){if(4==this.readyState)return 204==this.status?e(null):e(this.statusText)},r.open(t.method,t.host+"/"+t.path,!0),t.headers){var i=t.headers[n];r.setRequestHeader(n,i)}r.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return n()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){if(e._typeahead){var r=e._typeahead.data,n=t.id;return r.map((function(t){return t.id})).indexOf(n)}},shouldEnableLogging:function(t){return!1!==t.enableEventLogging&&((!t.origin||"https://api.mapbox.com"===t.origin)&&(!t.localGeocoder&&!t.filter))},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,e){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}},t.exports=i},function(t,e,r){"use strict";t.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05dc\u05d7\u05e4\u05e9",ja:"\u30b5\u30fc\u30c1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041f\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641c\u7d22",cs:"Vyhled\xe1v\xe1n\xed",hu:"Keres\xe9s",ka:"\u10eb\u10d8\u10d4\u10d1\u10d0",nb:"S\xf8ke",sk:"Vyh\u013ead\xe1vanie",th:"\u0e04\u0e49\u0e19\u0e2b\u0e32",fi:"Hae",is:"Leita",ko:"\uc218\uc0c9",pl:"Szukaj",sl:"Iskanje",fa:"\u062c\u0633\u062a\u062c\u0648",ru:"\u041f\u043e\u0438\u0441\u043a"}}},function(t,e,r){var n,i;n=this,i=function(){var t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function e(e){return e.match(t)||[]}function r(t){return{language:(t=e(t))[1]||"",extlang:t[2]||"",script:t[3]||"",region:t[4]||""}}function n(t,e,r){Object.defineProperty(t,e,{value:r,enumerable:!0})}function i(t,i,o){function s(r){return e(r)[t]||""}n(s,"pattern",i),n(r,o,s)}return i(1,/^[a-zA-Z]{2,3}$/,"language"),i(2,/^[a-zA-Z]{3}$/,"extlang"),i(3,/^[a-zA-Z]{4}$/,"script"),i(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),n(r,"split",(function(t){return e(t).filter((function(t,e){return t&&e}))})),r},t.exports?t.exports=i():n.subtag=i()},function(t,e){function r(){}r.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise((function(e,r){window.navigator.geolocation.getCurrentPosition(e,r,t)}))}},t.exports=r},function(t,e){function r(t){const e=t.address||"",r=t.text||"",n=t.place_name||"",i={address:n.split(",")[0],houseNumber:e,street:r,placeName:n};return t.context.forEach((function(t){const e=t.id.split(".")[0];i[e]=t.text})),i}t.exports={transformFeatureToGeolocationText:function(t,e){const n=r(t),i=["address","street","place","country"];if("function"===typeof e)return e(n);const o=i.indexOf(e);return(-1===o?i:i.slice(o)).reduce((function(t,e){return n[e]?(""!==t&&(t+=", "),t+n[e]):t}),"")},getAddressInfo:r,REVERSE_GEOCODE_COORD_RGX:/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/}},function(t,e,r){},function(t,e,r){"use strict";r(45);var n=r(10),i=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),e.Fragment=o("react.fragment")}var s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,r){var n,o={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,n)&&!l.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===o[n]&&(o[n]=e[n]);return{$$typeof:i,type:t,key:u,ref:c,props:o,_owner:s.current}}e.jsx=u,e.jsxs=u},,function(t,e,r){"use strict";r.r(e),r.d(e,"nanoid",(function(){return a})),r.d(e,"customAlphabet",(function(){return s})),r.d(e,"customRandom",(function(){return o})),r.d(e,"urlAlphabet",(function(){return n})),r.d(e,"random",(function(){return i}));let n="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i=t=>crypto.getRandomValues(new Uint8Array(t)),o=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*n*e/t.length);return function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,s="";for(;;){let e=r(i),a=i;for(;a--;)if(s+=t[e[a]&n]||"",s.length===o)return s}}},s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return o(t,e,i)},a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_"),"")}}]]);
//# sourceMappingURL=2.c6768baf.chunk.js.map